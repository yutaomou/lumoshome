"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1791,5883],{8845:(e,t,l)=>{l.d(t,{Hl:()=>c,ML:()=>r});var a=l(15933),i=l(95838),n=l(84018),s=l(39241);function o(){let e=(0,a._)(["\n  {\n    allChangelogItems(orderBy: datetime_DESC) {\n      title\n      datetime\n      description\n      tags\n      linkUrl\n      linkText\n    }\n  }\n"]);return o=function(){return e},e}let r=new n.l4("https://graphql.datocms.com/",{headers:{authorization:"Bearer ".concat("da53930ab6fd57784427d948a6cf71")},fetch:async(e,t)=>fetch(e,{...t,next:{revalidate:120,tags:["dato"]}})});(0,n.J1)(o());let d={allChangelogItems:[]},c=()=>(0,i.useQuery)({queryKey:["cms"],queryFn:async()=>{let e=await fetch("/api/cms");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.text(),l=JSON.parse((0,s.m)(t));if(!l)throw Error("Empty response from CMS");return l},placeholderData:d,staleTime:3e5,retry:5,retryDelay:e=>1e3*2**e})},10104:(e,t,l)=>{l.d(t,{f:()=>T});var a=l(95155),i=l(12974),n=l(5520),s=l(23375),o=l(16299),r=l(19782),d=l(5643),c=l(77700),u=l(11649),p=l(59108),m=l(26418),x=l(79175),h=l(33636),f=l(85821),g=l(58670),v=l(42066),y=l(42113),b=l(88254),C=l(49174),j=l(64430),w=l(63438),N=l(12115),k=l(13847),A=l(7132),S=l(4869),I=l(77119),P=l(97942);let _=e=>e.length<=64,M=e=>!!e.match(/^[a-zA-Z0-9_]{3,40}$/g),T=(0,w.PA)(e=>{var t,l,w,T,E,L,O,R,D,F;let{isOpen:B,onClose:z}=e,{session:U,library:H}=(0,I.gy)(),W=(0,i.useToast)(),[V,G]=(0,N.useState)(null===(t=U.user)||void 0===t?void 0:t.display_name),[Y,q]=(0,N.useState)(null===(l=U.user)||void 0===l?void 0:l.handle),[Q,K]=(0,N.useState)(null===(w=U.user)||void 0===w?void 0:w.profile_description),[J,X]=(0,N.useState)(null),[Z,$]=(0,N.useState)(!1),[ee,et]=(0,N.useState)(null===(T=U.user)||void 0===T?void 0:T.avatar_image_url),[el,ea]=(0,N.useState)(!1),[ei,en]=(0,N.useState)(""),[es,eo]=(0,N.useState)({}),[er,ed]=(0,N.useState)(!1),ec=async()=>{ed(!0);let e=await H.apiClient.POST("/api/profiles/",{body:{handle:Y||"",profile_description:Q||"",display_name:V||"",avatar_image_url:J}});if(ed(!1),e.error){let t=e.error;eo({...es,...t})}else eo({}),U.user.display_name=V||"",U.user.handle=Y||"",U.user.profile_description=Q||"",U.user.avatar_image_url=J,W({title:"Profile updated.",duration:4e3,isClosable:!0,status:"success"})};return(0,N.useEffect)(()=>{var e,t,l;q(null===(e=U.user)||void 0===e?void 0:e.handle),K(null===(t=U.user)||void 0===t?void 0:t.profile_description),G(null===(l=U.user)||void 0===l?void 0:l.display_name)},[U.user]),(0,a.jsxs)(n.Modal,{isOpen:B,onClose:z,"data-qaid":"modal-edit-profile-title",isCentered:!0,scrollBehavior:"inside","data-testid":"profile-form-modal",blockScrollOnMount:!1,children:[(0,a.jsx)(s.ModalOverlay,{}),(0,a.jsxs)(o.ModalContent,{sx:{...A.O$},borderRadius:"8px",overflow:"hidden",children:[(0,a.jsx)(r.ModalCloseButton,{}),(0,a.jsx)(d.ModalBody,{h:"400px",children:(0,a.jsxs)(c.Box,{minW:["300px","300px","380px"],children:[(0,a.jsx)(u.Heading,{size:"lg",mt:4,w:"fit-content",children:"Edit Profile"}),(0,a.jsxs)(p.Flex,{flexDirection:"column",w:"100%",children:[(0,a.jsxs)(m.FormControl,{w:"100%",mt:8,children:[(0,a.jsx)(x.FormLabel,{children:"Profile Avatar"}),(0,a.jsx)(k.A,{initialImageURL:ee||void 0,onImageChanged:e=>{X(e),$(!0)},className:"h-auto"}),((0,S.FJ)(U)||(null===(E=U.roles)||void 0===E?void 0:E.staff))&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.Flex,{columnGap:2,mt:2,children:[(0,a.jsx)(h.Input,{placeholder:"Prompt Suno to create an image...",value:ei,maxLength:200,onChange:e=>en(e.target.value),_focus:{border:"solid",borderWidth:"0.5px",borderColor:"orange",boxShadow:"0 0 0 0.5px orange"}}),(0,a.jsx)(f.Button,{size:"md",px:6,onClick:async()=>{ea(!0);let{data:e}=await H.apiClient.POST("/api/gen/prompt_image/",{body:{prompt:ei}});ea(!1),e&&et(e.image_url)},isDisabled:el||""===ei,children:"Create"})]}),el&&(0,a.jsxs)(p.Flex,{flexDirection:"row",children:[(0,a.jsx)(P.A,{className:"mr-2"}),(0,a.jsx)(g.Text,{children:"Creating image..."})]})]}),(0,a.jsx)(m.FormHelperText,{w:"fit-content",color:es.avatar_image_url?"red.300":void 0,children:es.avatar_image_url||"The image that will be shown on your profile (max 10 MB)"})]}),(0,a.jsxs)(m.FormControl,{maxW:"340px",my:8,w:"fit-content",children:[(0,a.jsx)(x.FormLabel,{children:"Display Name"}),(0,a.jsx)(h.Input,{type:"text",w:["320px","320px","400px"],maxLength:40,value:V||"",placeholder:"Display Name",onChange:e=>{G(e.target.value),eo({...es,display_name:void 0})},isInvalid:!_(V||"")||!!es.display_name,"data-testid":"display-name-input"}),(0,a.jsx)(m.FormHelperText,{w:"fit-content",children:es.display_name||"This is shown on your songs and playlists."})]}),(0,a.jsxs)(m.FormControl,{maxW:["320px","320px","400px"],mb:8,isRequired:!0,w:"fit-content",children:[(0,a.jsx)(x.FormLabel,{children:"Handle"}),(0,a.jsxs)(v.InputGroup,{children:[(0,a.jsx)(y.InputLeftAddon,{padding:"10px",width:"36px",children:"@"}),(0,a.jsx)(h.Input,{type:"text",w:["284px","284px","364px"],maxLength:40,value:Y||"",placeholder:"Handle",onChange:e=>{q(e.target.value),eo({...es,handle:void 0})},isInvalid:!M(Y||"")||!!es.handle,"data-testid":"handle-input"})]}),(0,a.jsx)(m.FormHelperText,{w:"fit-content",color:!M(Y||"")||es.handle?"red.300":void 0,children:M(Y||"")?es.handle||"This is used in your profile URL, and can be changed later.":"This user handle is invalid. Must be at least 3 characters, and only letters, numbers and underscores are allowed"})]}),(0,a.jsxs)(m.FormControl,{maxW:"400px",mb:8,children:[(0,a.jsx)(x.FormLabel,{children:"Profile Description"}),(0,a.jsx)(b.Textarea,{w:"100%",value:Q||"",placeholder:"Profile description",onChange:e=>{K(e.target.value),eo({...es,profile_description:void 0})},maxLength:160,isInvalid:!!es.profile_description,"data-testid":"profile-description-input"}),(0,a.jsx)(m.FormHelperText,{children:es.profile_description||"Describe your musical style in a few words."})]})]})]})}),(0,a.jsxs)(C.ModalFooter,{children:[(0,a.jsx)(f.Button,{type:"submit",colorScheme:"orange",size:"md",maxW:"200px",onClick:ec,isLoading:er,isDisabled:V===(null===(L=U.user)||void 0===L?void 0:L.display_name)&&Y===(null===(O=U.user)||void 0===O?void 0:O.handle)&&Q===(null===(R=U.user)||void 0===R?void 0:R.profile_description)&&!Z||!M(Y||"")||!_(V||""),children:"Save"}),(0,a.jsx)(p.Flex,{flex:1,justifyContent:"flex-end",children:(null===(D=U.user)||void 0===D?void 0:D.display_name)&&(0,a.jsx)(j.Link,{href:"/@".concat(null===(F=U.user)||void 0===F?void 0:F.handle),children:"View My Profile"})})]})]})]})})},11555:(e,t,l)=>{l.d(t,{Ay:()=>r});var a=l(95155);l(12115);var i=l(39688);let n=e=>(0,a.jsx)("div",{...e,className:(0,i.QP)("flex-shrink-0 basis-10",e.className)}),s=e=>(0,a.jsx)("div",{...e,className:(0,i.QP)("flex-grow",e.className)}),o=e=>(0,a.jsx)("div",{...e,className:(0,i.QP)("flex-shrink-0",e.className)}),r=e=>{let{startClassName:t,contentClassName:l,endClassName:r,children:d,start:c,end:u,className:p,wrapChildren:m=!!(c||u),...x}=e;return(0,a.jsx)("div",{className:(0,i.QP)("flex flex-row gap-2 items-center","px-6 py-4 border-b","text-base font-normal font-sans","text-secondary border-primary/15",p),...x,children:m?(0,a.jsxs)(a.Fragment,{children:[c&&(0,a.jsx)(n,{className:t,children:c}),d&&(0,a.jsx)(s,{className:l,children:d}),u&&(0,a.jsx)(o,{className:r,children:u})]}):(0,a.jsxs)(a.Fragment,{children:[c,d,u]})})}},12010:(e,t,l)=>{e.exports=l.p+"static/media/waveform-getter-worklet.d8100b3c.js"},13847:(e,t,l)=>{l.d(t,{A:()=>v});var a=l(95155),i=l(57416),n=l(52596),s=l(45964),o=l.n(s),r=l(12115),d=l(41920),c=l.n(d),u=l(61073),p=l(39688),m=l(74955),x=l(50649),h=l(61932);let f={"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/webp":[".webp"],"image/bmp":[".bmp"]},g=e=>{let{width:t,height:l,innerWidth:i=t,innerHeight:n=l,innerOffsetX:s=.5*(t-i),innerOffsetY:o=.5*(l-n),innerRadius:r=0,...d}=e,c=["M0,0 h".concat(t," v").concat(l," h").concat(-t," Z"),r?["M".concat(s,",").concat(o+r),"a".concat(r,",").concat(r," 0 0 1 ").concat(r,",").concat(-r),"h".concat(i-2*r),"a".concat(r,",").concat(r," 0 0 1 ").concat(r,",").concat(r),"v".concat(n-2*r),"a".concat(r,",").concat(r," 0 0 1 ").concat(-r,",").concat(r),"h".concat(2*r-i),"a".concat(r,",").concat(r," 0 0 1 ").concat(-r,",").concat(-r)].join(" "):"M".concat(s,",").concat(o," h").concat(i," v").concat(n," h").concat(-i),"Z"].join(" ");return(0,a.jsx)("svg",{viewBox:"0 0 ".concat(t," ").concat(l),fill:"currentColor",preserveAspectRatio:"none",...d,children:(0,a.jsx)("path",{d:c,fillRule:"evenodd"})})},v=e=>{let{className:t,uploaderClassName:l,innerClassName:s,style:d,children:v,initialImageURL:y,onImageChanged:b,smallerSize:C=!1,width:j=C?150:200,height:w=C?150:200,innerWidth:N=j,innerHeight:k=w,paddingX:A=4,paddingY:S=4,minScale:I=.5,maxScale:P=1.5,defaultScale:_=Math.max(I,Math.min(1,P)),accept:M=f,minSize:T,maxSize:E,disabled:L,debounceAmount:O=200}=e,[R,D]=(0,r.useState)(y),[F,B]=(0,r.useState)(null),[z,U]=(0,r.useState)(_),H=j+A+A,W=w+S+S,V=.5*(H-N),G=.5*(W-k);(0,r.useEffect)(()=>{D(y)},[y]);let Y=(0,r.useCallback)(e=>{D(e[0])},[]),{getRootProps:q,getInputProps:Q}=(0,u.VB)({onDrop:Y,accept:M,minSize:T,maxSize:E,disabled:L&&!!R}),K=(0,r.useMemo)(()=>o()(()=>{F&&b(F.getImage().toDataURL())},O),[F,O,b]);return(0,a.jsxs)("div",{className:(0,p.QP)("relative rounded-md overflow-clip","max-w-full w-[200px] aspect-square",t),style:d,children:[(0,a.jsxs)("div",{...q({className:(0,p.QP)("absolute inset-0 flex flex-column gap-2 cursor-pointer border-4 rounded-[inherit]","border-black text-foreground-primary bg-background-secondary",l)}),children:[(0,a.jsx)("input",{...Q()}),R?null:v||(0,a.jsxs)("div",{className:(0,n.A)("absolute inset-0 w-full h-full flex flex-col items-center justify-center text-sm gap-1",{"text-sm gap-1":C,"text-md gap-2":!C}),children:[(0,a.jsx)(x.JMY,{className:C?"w-8 h-10":"w-10 h-10"}),(0,a.jsx)("p",{children:"Upload a Photo"})]})]}),R&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,p.QP)("absolute inset-0 w-full h-full",s),children:[(0,a.jsx)(c(),{className:"absolute inset-0 min-w-full minh-full max-w-full max-h-full object-cover",ref:e=>B(e),width:j,height:w,image:R,border:[A,S],borderRadius:A&&S?2:0,color:[0,0,0,.75],backgroundColor:"#000000",crossOrigin:"anonymous",scale:z,onImageReady:()=>{K()},onImageChange:()=>{var e,t;(null==F?void 0:null===(t=F.state)||void 0===t?void 0:null===(e=t.image)||void 0===e?void 0:e.resource)?K():(U(_),b(null))}}),(0,a.jsx)(g,{className:"block absolute inset-0 w-full h-full text-opacity-black-30 pointer-events-none",width:H,height:W,innerWidth:N,innerHeight:k,innerOffsetX:V,innerOffsetY:G,innerRadius:V<=A||G<=S||!V||!G?0:4})]}),(0,a.jsx)(m.Ay,{className:"absolute top-2 right-2",icon:x.ucK,variant:m.Ak.Glass,size:m.Mp.Small,shape:m.aH.Pill,onClick:()=>{D(null),U(_),b&&b(null)},"aria-label":"Remove"}),(0,a.jsx)("div",{className:"absolute inset-x-4 bottom-2 flex flex-col gap-1 items-center justify-center drop-shadow-sm",children:(0,a.jsxs)(i.Slider,{"aria-label":"Resize Image Slider",min:0,max:100,defaultValue:Math.round((0,h.Tz)(_,I,P,0,100)),onChange:e=>{U((0,h.Tz)(e,0,100,I,P))},sx:{".chakra-slider__track":{bg:"var(--color-opacity-white-50)"},".chakra-slider__filled-track":{bg:"var(--color-opacity-white-90)"},".chakra-slider__thumb":{bg:"var(--color-white)"}},children:[(0,a.jsx)(i.SliderTrack,{children:(0,a.jsx)(i.SliderFilledTrack,{})}),(0,a.jsx)(i.SliderThumb,{})]})})]})]})}},15883:(e,t,l)=>{l.d(t,{A:()=>x});var a=l(95155),i=l(39688),n=l(65015),s=l(12115);let o=["M314,145.882C322.96866666666665,145.882 331.93733333333336,145.882 340.906,145.882C340.906,135.38566666666668 340.906,124.88933333333334 340.906,114.393C340.906,100.96666666666667 340.906,87.54033333333334 340.906,74.114C340.906,60.68766666666667 340.906,47.26133333333334 340.906,33.835C346.0466666666667,43.1125 351.1873333333333,52.39 356.328,61.6675C361.561,71.1117 367.054,81.0295 372.027,90C377,98.9705 382.322,108.58 387.47,117.87C392.64366666666666,127.20733333333334 397.81733333333335,136.54466666666667 402.991,145.882C402.9963333333333,145.882 403.00166666666667,145.882 403.007,145.882C417.188,145.882 431.369,145.882 445.55,145.882C445.55,135.38566666666668 445.55,124.88933333333334 445.55,114.393C445.55,100.96666666666667 445.55,87.54033333333334 445.55,74.114C445.55,60.68766666666667 445.55,47.26133333333334 445.55,33.835C445.55,23.223333333333336 445.55,12.611666666666668 445.55,2C436.63933333333335,2 427.72866666666664,2 418.818,2C418.818,12.611666666666666 418.818,23.223333333333333 418.818,33.835C418.818,47.26133333333333 418.818,60.68766666666667 418.818,74.114C418.818,87.54033333333334 418.818,100.96666666666667 418.818,114.393C413.64366666666666,105.0269 408.46933333333334,95.66080000000001 403.295,86.2947C398.02000000000004,76.74656666666667 392.745,67.19843333333334 387.47,57.6503C382.396,48.46626666666667 377.322,39.28223333333334 372.248,30.0982C367.07366666666667,20.73213333333333 361.89933333333335,11.366066666666665 356.725,2C342.48333333333335,2 328.2416666666667,2 314,2C314,12.611666666666666 314,23.223333333333333 314,33.835C314,47.26133333333333 314,60.68766666666667 314,74.114C314,87.54033333333334 314,100.96666666666667 314,114.393C314,124.88933333333334 314,135.38566666666668 314,145.882","M314,145.882C322.96866666666665,145.882 331.93733333333336,145.882 340.906,145.882C340.906,135.38566666666668 340.906,124.88933333333334 340.906,114.393C340.906,100.96666666666667 340.906,87.54033333333334 340.906,74.114C340.906,60.68766666666667 340.906,47.26133333333334 340.906,33.835C340.906,33.835 345.5,46 354,55.5C362.5,65 376.267,71.0558 381.5,80.5C386.648,89.7901 385.5,110.5 391,124C396.5,137.5 402.991,145.882 402.991,145.882C402.9963333333333,145.882 403.00166666666667,145.882 403.007,145.882C417.188,145.882 431.369,145.882 445.55,145.882C445.55,135.38566666666668 445.55,124.88933333333334 445.55,114.393C445.55,100.96666666666667 445.55,87.54033333333334 445.55,74.114C445.55,60.68766666666667 445.55,47.26133333333334 445.55,33.835C445.55,23.223333333333336 445.55,12.611666666666668 445.55,2C436.63933333333335,2 427.72866666666664,2 418.818,2C418.818,12.611666666666666 418.818,23.223333333333333 418.818,33.835C418.818,47.26133333333333 418.818,60.68766666666667 418.818,74.114C418.818,87.54033333333334 418.818,100.96666666666667 418.818,114.393C418.818,114.393 413.5,105 407,99C400.5,93 397,92.5 389,78.5C381,64.5 380.252,44.0312 372.5,30C364.748,15.9688 356.725,2 356.725,2C342.48333333333335,2 328.2416666666667,2 314,2C314,12.611666666666666 314,23.223333333333333 314,33.835C314,47.26133333333333 314,60.68766666666667 314,74.114C314,87.54033333333334 314,100.96666666666667 314,114.393C314,124.88933333333334 314,135.38566666666668 314,145.882","M314,145.882C322.96866666666665,145.882 331.93733333333336,145.882 340.906,145.882C340.906,135.38566666666668 340.906,124.88933333333334 340.906,114.393C340.906,100.96666666666667 340.906,87.54033333333334 340.906,74.114C340.906,60.68766666666667 340.906,47.26133333333334 340.906,33.835C346.0466666666667,43.1125 351.1873333333333,52.39 356.328,61.6675C361.561,71.1117 367.054,81.0295 372.027,90C377,98.9705 382.322,108.58 387.47,117.87C392.64366666666666,127.20733333333334 397.81733333333335,136.54466666666667 402.991,145.882C402.9963333333333,145.882 403.00166666666667,145.882 403.007,145.882C417.188,145.882 431.369,145.882 445.55,145.882C445.55,145.882 445.5,103.393 445.5,85C445.5,66.607 431.645,49.5 432,36C432.355,22.5 439.5,16.5 442.5,11.5C445.5,6.5 445.55,2 445.55,2C436.63933333333335,2 427.72866666666664,2 418.818,2C418.818,12.611666666666666 418.818,23.223333333333333 418.818,33.835C418.818,47.26133333333333 418.818,60.68766666666667 418.818,74.114C418.818,87.54033333333334 418.818,100.96666666666667 418.818,114.393C413.64366666666666,105.0269 408.46933333333334,95.66080000000001 403.295,86.2947C398.02000000000004,76.74656666666667 392.745,67.19843333333334 387.47,57.6503C382.396,48.46626666666667 377.322,39.28223333333334 372.248,30.0982C367.07366666666667,20.73213333333333 361.89933333333335,11.366066666666665 356.725,2C342.48333333333335,2 328.2416666666667,2 314,2C314,12.611666666666666 314,23.223333333333333 314,33.835C314,47.26133333333333 314,60.68766666666667 314,74.114C314,87.54033333333334 314,100.96666666666667 314,114.393C314,124.88933333333334 314,135.38566666666668 314,145.882","M314,145.882C322.96866666666665,145.882 331.93733333333336,145.882 340.906,145.882C340.906,135.38566666666668 340.906,124.88933333333334 340.906,114.393C340.906,100.96666666666667 340.906,87.54033333333334 340.906,74.114C340.906,60.68766666666667 340.906,47.26133333333334 340.906,33.835C346.0466666666667,43.1125 351.1873333333333,52.39 356.328,61.6675C361.561,71.1117 367.054,81.0295 372.027,90C377,98.9705 382.322,108.58 387.47,117.87C392.64366666666666,127.20733333333334 397.81733333333335,136.54466666666667 402.991,145.882C402.9963333333333,145.882 403.00166666666667,145.882 403.007,145.882C417.188,145.882 431.369,145.882 445.55,145.882C445.55,135.38566666666668 445.55,124.88933333333334 445.55,114.393C445.55,100.96666666666667 445.55,87.54033333333334 445.55,74.114C445.55,60.68766666666667 445.55,47.26133333333334 445.55,33.835C445.55,23.223333333333336 445.55,12.611666666666668 445.55,2C436.63933333333335,2 427.72866666666664,2 418.818,2C418.818,12.611666666666666 418.818,23.223333333333333 418.818,33.835C418.818,47.26133333333333 418.818,60.68766666666667 418.818,74.114C418.818,87.54033333333334 418.818,100.96666666666667 418.818,114.393C413.64366666666666,105.0269 408.46933333333334,95.66080000000001 403.295,86.2947C398.02000000000004,76.74656666666667 392.745,67.19843333333334 387.47,57.6503C382.396,48.46626666666667 377.322,39.28223333333334 372.248,30.0982C367.07366666666667,20.73213333333333 361.89933333333335,11.366066666666665 356.725,2C342.48333333333335,2 328.2416666666667,2 314,2C314,11.833333333333334 314,21.666666666666668 314,31.5C314,45.665 328.5,65 328.5,78.5C328.5,92 314,96 314,114.393C314,124.88933333333334 314,135.38566666666668 314,145.882","M314,145.882C322.96866666666665,145.882 331.93733333333336,145.882 340.906,145.882C340.906,145.882 342.406,136 340,125.5C337.594,115 321,92.5 335,81.5C349,70.5 340.906,33.835 340.906,33.835C346.0466666666667,43.1125 351.1873333333333,52.39 356.328,61.6675C361.561,71.1117 367.054,81.0295 372.027,90C377,98.9705 382.322,108.58 387.47,117.87C392.64366666666666,127.20733333333334 397.81733333333335,136.54466666666667 402.991,145.882C402.9963333333333,145.882 403.00166666666667,145.882 403.007,145.882C417.188,145.882 431.369,145.882 445.55,145.882C445.55,135.38566666666668 445.55,124.88933333333334 445.55,114.393C445.55,100.96666666666667 445.55,87.54033333333334 445.55,74.114C445.55,60.68766666666667 445.55,47.26133333333334 445.55,33.835C445.55,23.223333333333336 445.55,12.611666666666668 445.55,2C436.63933333333335,2 427.72866666666664,2 418.818,2C418.818,12.611666666666666 418.818,23.223333333333333 418.818,33.835C418.818,47.26133333333333 418.818,60.68766666666667 418.818,74.114C418.818,87.54033333333334 418.818,100.96666666666667 418.818,114.393C413.64366666666666,105.0269 408.46933333333334,95.66080000000001 403.295,86.2947C398.02000000000004,76.74656666666667 392.745,67.19843333333334 387.47,57.6503C382.396,48.46626666666667 377.322,39.28223333333334 372.248,30.0982C367.07366666666667,20.73213333333333 361.89933333333335,11.366066666666665 356.725,2C342.48333333333335,2 328.2416666666667,2 314,2C314,2 315.5,20.335 315.5,34.5C315.5,48.665 314,67 312.5,81.5C311,96 314,106.5 315.5,124.5C317,142.5 314,145.882 314,145.882","M314,145.882C322.96866666666665,145.882 331.93733333333336,145.882 340.906,145.882C340.906,135.38566666666668 340.906,124.88933333333334 340.906,114.393C340.906,100.96666666666667 340.906,87.54033333333334 340.906,74.114C340.906,60.68766666666667 340.906,47.26133333333334 340.906,33.835C346.0466666666667,43.1125 351.1873333333333,52.39 356.328,61.6675C361.561,71.1117 367.054,81.0295 372.027,90C377,98.9705 382.322,108.58 387.47,117.87C392.64366666666666,127.20733333333334 397.81733333333335,136.54466666666667 402.991,145.882C402.9963333333333,145.882 403.00166666666667,145.882 403.007,145.882C417.188,145.882 431.369,145.882 445.55,145.882C445.55,145.882 444.5,114.893 444.5,96.5C444.5,78.107 434,64 434,50C434,36 445.55,31.5 445.55,20C445.55,14 445.55,8 445.55,2C436.63933333333335,2 427.72866666666664,2 418.818,2C418.818,2 413,12 413,30.0982C413,48.1965 417.136,56.228 418.818,74.114C420.5,92 418.818,114.393 418.818,114.393C413.64366666666666,105.0269 408.46933333333334,95.66080000000001 403.295,86.2947C398.02000000000004,76.74656666666667 392.745,67.19843333333334 387.47,57.6503C382.396,48.46626666666667 377.322,39.28223333333334 372.248,30.0982C367.07366666666667,20.73213333333333 361.89933333333335,11.366066666666665 356.725,2C342.48333333333335,2 328.2416666666667,2 314,2C314,12.611666666666666 314,23.223333333333333 314,33.835C314,47.26133333333333 314,60.68766666666667 314,74.114C314,87.54033333333334 314,100.96666666666667 314,114.393C314,124.88933333333334 314,135.38566666666668 314,145.882"],r=["M490.573,135.564C495.897,140.161 503.844,143.563 513.043,145.769C521.513,147.8 531.044,148.816 540.568,148.816C540.5733333333333,148.816 540.5786666666667,148.816 540.584,148.816C550.236,148.816 559.887,147.774 568.436,145.692C577.5,143.484 585.325,140.108 590.595,135.564C596.007,130.89 599.992,125.181 602.543,118.438C604.812,112.442 605.948,105.5 605.948,97.9954C605.948,90.4908 605.948,88 605.948,74.7642C605.948,61.5284 605.948,59.066 605.948,51.533C605.948,44 604.813,36.8424 602.543,30.7481C600.005,23.9323 596.048,18.1597 590.675,13.43C585.41,8.79445 577.549,5.36036 568.436,3.12549C559.937,1.04122 550.349,0 540.761,0C531.173,0 521.57,1.04122 513.043,3.12549C503.9,5.36036 495.994,8.79445 490.67,13.43C485.226,18.1539 481.223,23.9266 478.657,30.7481C476.365,36.84 475.22,44 475.22,51.533C475.22,59.066 475.22,61.5284 475.22,74.7642C475.22,88 475.22,90.4908 475.22,97.9954C475.22,105.5 476.326,112.284 478.541,118.229C481.087,125.064 485.097,130.842 490.573,135.564M568.436,118.229C563.92,122.652 551.405,124.855 540.568,124.855C529.73,124.855 517.216,122.652 512.7,118.229C508.184,113.807 505.927,106 505.927,95.4519C505.927,84.9038 505.927,88 505.927,74.7642C505.927,61.5284 505.927,65.153 505.927,54.0765C505.927,43 508.184,35.2842 512.7,30.7481C517.216,26.212 529.73,23.944 540.568,23.944C551.405,23.944 563.92,26.1958 568.436,30.7481C572.951,35.3004 575.209,43.5 575.209,54.0765C575.209,64.653 575.209,61.5284 575.209,74.7642C575.209,88 575.209,84.9038 575.209,95.4519C575.209,106 572.951,113.807 568.436,118.229","M490.573,135.564C495.897,140.161 503.844,143.563 513.043,145.769C521.513,147.8 531.044,148.816 540.568,148.816C540.5733333333333,148.816 540.5786666666667,148.816 540.584,148.816C550.236,148.816 559.887,147.774 568.436,145.692C577.5,143.484 585.325,140.108 590.595,135.564C596.007,130.89 599.992,125.181 602.543,118.438C604.812,112.442 605.948,105.5 605.948,97.9954C605.948,90.4908 605.948,88 605.948,74.7642C605.948,61.5284 605.948,59.066 605.948,51.533C605.948,44 604.813,36.8424 602.543,30.7481C600.005,23.9323 596.048,18.1597 590.675,13.43C585.41,8.79445 577.549,5.36036 568.436,3.12549C559.937,1.04122 550.349,0 540.761,0C531.173,0 521.57,1.04122 513.043,3.12549C503.9,5.36036 495.994,8.79445 490.67,13.43C485.226,18.1539 481.5,24.4962 480,30.7481C478.5,37 478,42 480.5,50.5C483,59 492.5,65.2642 492.5,78.5C492.5,91.7358 489,94 486,101.5C483,109 480.5,115.5 482,121.5C483.5,127.5 485.097,130.842 490.573,135.564M568.436,118.229C563.92,122.652 551.405,124.855 540.568,124.855C529.73,124.855 517.216,122.652 512.7,118.229C508.184,113.807 505.927,106 505.927,95.4519C505.927,84.9038 505.927,88 505.927,74.7642C505.927,61.5284 505.927,65.153 505.927,54.0765C505.927,43 508.184,35.2842 512.7,30.7481C517.216,26.212 529.73,23.944 540.568,23.944C551.405,23.944 563.92,26.1958 568.436,30.7481C572.951,35.3004 575.209,43.5 575.209,54.0765C575.209,64.653 575.209,61.5284 575.209,74.7642C575.209,88 575.209,84.9038 575.209,95.4519C575.209,106 572.951,113.807 568.436,118.229","M490.573,135.564C495.897,140.161 503.844,143.563 513.043,145.769C521.513,147.8 531.044,148.816 540.568,148.816C540.5733333333333,148.816 540.5786666666667,148.816 540.584,148.816C550.236,148.816 559.887,147.774 568.436,145.692C577.5,143.484 585.325,140.108 590.595,135.564C596.007,130.89 599.992,125.181 602.543,118.438C604.812,112.442 605.948,105.5 605.948,97.9954C605.948,90.4908 605.948,88 605.948,74.7642C605.948,61.5284 605.948,59.066 605.948,51.533C605.948,44 606.5,38 602,32C597.5,26 596,23.8871 581,20.5C566,17.1129 565.5,9.5 562.5,5.5C559.5,1.5 550.349,0 540.761,0C531.173,0 521.57,1.04122 513.043,3.12549C503.9,5.36036 495.994,8.79445 490.67,13.43C485.226,18.1539 481.223,23.9266 478.657,30.7481C476.365,36.84 475.22,44 475.22,51.533C475.22,59.066 475.22,61.5284 475.22,74.7642C475.22,88 475.22,90.4908 475.22,97.9954C475.22,105.5 476.326,112.284 478.541,118.229C481.087,125.064 485.097,130.842 490.573,135.564M568.436,118.229C563.92,122.652 551.405,124.855 540.568,124.855C529.73,124.855 517.216,122.652 512.7,118.229C508.184,113.807 505.927,106 505.927,95.4519C505.927,84.9038 505.927,88 505.927,74.7642C505.927,61.5284 505.927,65.153 505.927,54.0765C505.927,43 508.184,35.2842 512.7,30.7481C517.216,26.212 530,22.5 539.5,21.5C549,20.5 558.5,20.5 569.5,25.5C580.5,30.5 576.935,46 576.5,51C576.065,56 575.209,61.5284 575.209,74.7642C575.209,88 575.209,84.9038 575.209,95.4519C575.209,106 572.951,113.807 568.436,118.229","M490.573,135.564C495.897,140.161 503.844,143.563 513.043,145.769C521.513,147.8 531.044,148.816 540.568,148.816C540.5733333333333,148.816 540.5786666666667,148.816 540.584,148.816C550.236,148.816 555.5,149 561,146.5C566.5,144 565.5,128.062 574,122.5C582.5,116.938 595.253,126.5 600.5,119.5C605.747,112.5 605.948,105.5 605.948,97.9954C605.948,90.4908 605.948,88 605.948,74.7642C605.948,61.5284 605.948,59.066 605.948,51.533C605.948,44 604.813,36.8424 602.543,30.7481C600.005,23.9323 596.048,18.1597 590.675,13.43C585.41,8.79445 577.549,5.36036 568.436,3.12549C559.937,1.04122 550.349,0 540.761,0C531.173,0 521.57,1.04122 513.043,3.12549C503.9,5.36036 495.994,8.79445 490.67,13.43C485.226,18.1539 481.223,23.9266 478.657,30.7481C476.365,36.84 475.22,44 475.22,51.533C475.22,59.066 475.22,61.5284 475.22,74.7642C475.22,88 475.22,90.4908 475.22,97.9954C475.22,105.5 476.326,112.284 478.541,118.229C481.087,125.064 485.097,130.842 490.573,135.564M564,118.229C558,123.458 550.636,124.855 540.568,124.855C530.5,124.855 517.216,122.652 512.7,118.229C508.184,113.807 505.927,106 505.927,95.4519C505.927,84.9038 505.927,88 505.927,74.7642C505.927,61.5284 505.927,65.153 505.927,54.0765C505.927,43 508.184,35.2842 512.7,30.7481C517.216,26.212 529.73,23.944 540.568,23.944C551.405,23.944 563.92,26.1958 568.436,30.7481C572.951,35.3004 575.209,43.5 575.209,54.0765C575.209,64.653 575.209,61.5284 575.209,74.7642C575.209,88 575.209,84.9038 575.209,95.4519C575.209,106 570,113 564,118.229","M490.573,135.564C495.897,140.161 503.844,143.563 513.043,145.769C521.513,147.8 531.044,148.816 540.568,148.816C540.5733333333333,148.816 540.5786666666667,148.816 540.584,148.816C550.236,148.816 559.887,147.774 568.436,145.692C577.5,143.484 585.325,140.108 590.595,135.564C596.007,130.89 599.992,125.181 602.543,118.438C604.812,112.442 605.948,105.5 605.948,97.9954C605.948,90.4908 605.948,83.5 604,75.5C602.052,67.5 604,65.5 598.5,56C593,46.5 590.095,47.1354 586,39.5C581.905,31.8646 589,18.5 584,12.5C579,6.5 577.549,5.36036 568.436,3.12549C559.937,1.04122 550.349,0 540.761,0C531.173,0 521.57,1.04122 513.043,3.12549C503.9,5.36036 495.994,8.79445 490.67,13.43C485.226,18.1539 481.223,23.9266 478.657,30.7481C476.365,36.84 475.22,44 475.22,51.533C475.22,59.066 475.22,61.5284 475.22,74.7642C475.22,88 475.22,90.4908 475.22,97.9954C475.22,105.5 476.326,112.284 478.541,118.229C481.087,125.064 485.097,130.842 490.573,135.564M568.436,118.229C563.92,122.652 551.405,124.855 540.568,124.855C529.73,124.855 517.216,122.652 512.7,118.229C508.184,113.807 505.927,106 505.927,95.4519C505.927,84.9038 505.927,88 505.927,74.7642C505.927,61.5284 505.927,65.153 505.927,54.0765C505.927,43 508.184,35.2842 512.7,30.7481C517.216,26.212 529.73,23.944 540.568,23.944C551.405,23.944 563.92,26.1958 568.436,30.7481C572.951,35.3004 574,42 580.5,53.5C587,65 581.5,70 579,80.5C576.5,91 577,94.5 575,103.5C573,112.5 572.951,113.807 568.436,118.229","M490.573,135.564C495.897,140.161 503.844,143.563 513.043,145.769C521.513,147.8 531.044,148.816 540.568,148.816C540.5733333333333,148.816 540.5786666666667,148.816 540.584,148.816C550.236,148.816 559.887,147.774 568.436,145.692C577.5,143.484 585.325,140.108 590.595,135.564C596.007,130.89 599.992,125.181 602.543,118.438C604.812,112.442 605.948,105.5 605.948,97.9954C605.948,90.4908 605.948,88 605.948,74.7642C605.948,61.5284 605.948,59.066 605.948,51.533C605.948,44 604.813,36.8424 602.543,30.7481C600.005,23.9323 596.048,18.1597 590.675,13.43C585.41,8.79445 577.549,5.36036 568.436,3.12549C559.937,1.04122 550.349,0 540.761,0C531.173,0 521.57,1.04122 513.043,3.12549C503.9,5.36036 495.994,8.79445 490.67,13.43C485.226,18.1539 481.223,23.9266 478.657,30.7481C476.365,36.84 475.22,43.066 475.22,51.533C475.22,60 479.5,71 479.5,81.5C479.5,92 475.22,99 475.22,104C475.22,109 476.326,112.284 478.541,118.229C481.087,125.064 485.097,130.842 490.573,135.564M568.436,118.229C563.92,122.652 551.405,124.855 540.568,124.855C529.73,124.855 517.216,122.652 512.7,118.229C508.184,113.807 508.927,112.005 505.927,104C502.927,95.9954 490.67,88 490.67,74.7642C490.67,61.5284 505.354,50.5 505.927,45.5C506.5,40.5 508.184,35.2842 512.7,30.7481C517.216,26.212 529.73,23.944 540.568,23.944C551.405,23.944 563.92,26.1958 568.436,30.7481C572.951,35.3004 575.209,43.5 575.209,54.0765C575.209,64.653 575.209,61.5284 575.209,74.7642C575.209,88 575.209,84.9038 575.209,95.4519C575.209,106 572.951,113.807 568.436,118.229"],d=["M61.4512,148.002C49.5956,148.002 38.3407,146.172 27.6689,142.512C16.9971,138.851 7.77415,133.183 0,125.489C3.5337,118.583 7.0674,111.677 10.6011,104.771C18.2693,111.256 26.5028,116.125 35.3017,119.359C44.1007,122.611 54.1364,124.21 65.3912,124.21C74.3669,124.21 81.2046,122.593 85.8691,119.359C90.5336,116.107 92.8835,111.434 92.8835,105.304C92.8835,99.7952 90.1625,95.7794 84.7029,93.3273C79.261,90.8574 67.7235,88.121 50.1256,85.1181C33.2345,82.4705 21.3083,78.1882 14.3645,72.2356C7.42078,66.283 3.94008,57.3808 3.94008,45.4756C3.94008,32.6287 8.74592,21.9673 18.3223,13.5093C23.7829,8.70541 30.6743,5.25998 39,3.18286C45.3022,1.61055 52.4262,0.822266 60.3734,0.822266C65.8752,0.822266 71.2479,1.26797 76.5,2.16152C81.8908,3.07865 87.1545,4.46759 92.3004,6.33063C102.424,9.99103 110.428,15.0552 116.294,21.5586C113.17866666666666,28.162733333333332 110.06333333333333,34.766866666666665 106.948,41.371C99.7565,35.9159 92.2297,31.758 84.3849,28.8972C76.5401,26.0541 68.3596,24.6149 59.861,24.6149C51.9455,24.6149 45.7262,26.0364 41.1677,28.8616C36.6092,31.6869 34.33,36.0581 34.33,41.9751C34.33,47.519 37.1216,51.4993 42.6872,53.9158C45.8963,55.3092 51.1672,56.8267 58.5,58.4614C63.8845,59.6617 70.3808,60.9254 77.9889,62.2495C87.1465,63.8316 94.8149,65.9022 101,68.4643C106.068,70.5636 110.14,72.9929 113.22,75.7538C120.058,81.8664 123.468,90.8752 123.468,102.763C123.468,117.049 117.973,128.154 107.018,136.079C102.168,139.582 96.4964,142.311 90,144.266C81.7998,146.733 72.2856,148.002 61.4512,148.002","M59.5,136C50,135 42.2089,147.5 27.6689,142.512C16.9971,138.851 7.77415,133.183 0,125.489C3.5337,118.583 7.0674,111.677 10.6011,104.771C18.2693,111.256 26.5028,116.125 35.3017,119.359C44.1007,122.611 54.1364,124.21 65.3912,124.21C74.3669,124.21 81.2046,122.593 85.8691,119.359C90.5336,116.107 92.8835,111.434 92.8835,105.304C92.8835,99.7952 90.1625,95.7794 84.7029,93.3273C79.261,90.8574 67.7235,88.121 50.1256,85.1181C33.2345,82.4705 21.3083,78.1882 14.3645,72.2356C7.42078,66.283 3.94008,57.3808 3.94008,45.4756C3.94008,32.6287 8.74592,21.9673 18.3223,13.5093C23.7829,8.70541 30.6743,5.25998 39,3.18286C45.3022,1.61055 52.4262,0.822266 60.3734,0.822266C65.8752,0.822266 71.2479,1.26797 76.5,2.16152C81.8908,3.07865 87.1545,4.46759 92.3004,6.33063C102.424,9.99103 110.428,15.0552 116.294,21.5586C113.17866666666666,28.162733333333332 110.06333333333333,34.766866666666665 106.948,41.371C99.7565,35.9159 92.2297,31.758 84.3849,28.8972C76.5401,26.0541 68.3596,24.6149 59.861,24.6149C51.9455,24.6149 45.7262,26.0364 41.1677,28.8616C36.6092,31.6869 34.33,36.0581 34.33,41.9751C34.33,47.519 37.1216,51.4993 42.6872,53.9158C45.8963,55.3092 51.1672,56.8267 58.5,58.4614C63.8845,59.6617 70.3808,60.9254 77.9889,62.2495C87.1465,63.8316 94.8149,65.9022 101,68.4643C106.068,70.5636 110.14,72.9929 113.22,75.7538C120.058,81.8664 123.468,90.8752 123.468,102.763C123.468,117.049 117.973,128.154 107.018,136.079C102.168,139.582 97.4964,142.045 91,144C81.0297,147 70.5,137.158 59.5,136","M61.4512,148.002C49.5956,148.002 38.3407,146.172 27.6689,142.512C16.9971,138.851 7.77415,133.183 0,125.489C3.5337,118.583 7.0674,111.677 10.6011,104.771C18.2693,111.256 26.5028,116.125 35.3017,119.359C44.1007,122.611 54.1364,124.21 65.3912,124.21C74.3669,124.21 81.2046,122.593 85.8691,119.359C90.5336,116.107 92.8835,111.434 92.8835,105.304C92.8835,99.7952 90.1625,95.7794 84.7029,93.3273C79.261,90.8574 67.7235,88.121 50.1256,85.1181C33.2345,82.4705 21.3083,78.1882 14.3645,72.2356C7.42078,66.283 3.94008,57.3808 3.94008,45.4756C3.94008,32.6287 8.74592,21.9673 18.3223,13.5093C23.7829,8.70541 30.6743,5.25998 39,3.18286C45.3022,1.61055 52.4262,0.822266 60.3734,0.822266C65.8752,0.822266 71.2479,1.26797 76.5,2.16152C81.8908,3.07865 87.1545,4.46759 92.3004,6.33063C102.424,9.99103 110.428,15.0552 116.294,21.5586C113.17866666666666,28.162733333333332 110.06333333333333,34.766866666666665 106.948,41.371C99.7565,35.9159 92.2297,31.758 84.3849,28.8972C76.5401,26.0541 68.3596,24.6149 59.861,24.6149C51.9455,24.6149 45.7262,26.0364 41.1677,28.8616C36.6092,31.6869 34.33,36.0581 34.33,41.9751C34.33,47.519 37.1216,51.4993 42.6872,53.9158C45.8963,55.3092 52.5,56.4614 57.5,59C62.5,61.5386 65.1151,71 75,72.5C84.8849,74 94,67 101,68.4643C108,69.9286 110.14,72.9929 113.22,75.7538C120.058,81.8664 123.468,90.8752 123.468,102.763C123.468,117.049 117.973,128.154 107.018,136.079C102.168,139.582 96.4964,142.311 90,144.266C81.7998,146.733 72.2856,148.002 61.4512,148.002","M61.4512,148.002C49.5956,148.002 38.3407,146.172 27.6689,142.512C16.9971,138.851 7.77415,133.183 0,125.489C3.5337,118.583 7.0674,111.677 10.6011,104.771C18.2693,111.256 26.5028,116.125 35.3017,119.359C44.1007,122.611 54.1364,124.21 65.3912,124.21C74.3669,124.21 81.2046,122.593 85.8691,119.359C90.5336,116.107 92.8835,111.434 92.8835,105.304C92.8835,99.7952 90.1625,95.7794 84.7029,93.3273C79.261,90.8574 67.7235,88.121 50.1256,85.1181C33.2345,82.4705 21.3083,78.1882 14.3645,72.2356C7.42078,66.283 3.94008,57.3808 3.94008,45.4756C3.94008,32.6287 8.74592,21.9673 18.3223,13.5093C23.7829,8.70541 29.83,7.5 34.33,7.5C38.83,7.5 49.5528,14.5 57.5,14.5C63.0018,14.5 70,13.5 75.5,9C81,4.5 87.1545,4.46759 92.3004,6.33063C102.424,9.99103 110.428,15.0552 116.294,21.5586C113.17866666666666,28.162733333333332 110.06333333333333,34.766866666666665 106.948,41.371C99.7565,35.9159 92.2297,31.758 84.3849,28.8972C76.5401,26.0541 68.3596,24.6149 59.861,24.6149C51.9455,24.6149 45.7262,26.0364 41.1677,28.8616C36.6092,31.6869 34.33,36.0581 34.33,41.9751C34.33,47.519 37.1216,51.4993 42.6872,53.9158C45.8963,55.3092 51.1672,56.8267 58.5,58.4614C63.8845,59.6617 70.3808,60.9254 77.9889,62.2495C87.1465,63.8316 94.8149,65.9022 101,68.4643C106.068,70.5636 110.14,72.9929 113.22,75.7538C120.058,81.8664 123.468,90.8752 123.468,102.763C123.468,117.049 117.973,128.154 107.018,136.079C102.168,139.582 96.4964,142.311 90,144.266C81.7998,146.733 72.2856,148.002 61.4512,148.002","M61.4512,148.002C49.5956,148.002 38.3407,146.172 27.6689,142.512C16.9971,138.851 7.77415,133.183 0,125.489C3.5337,118.583 7.0674,111.677 10.6011,104.771C18.2693,111.256 26.5028,116.125 35.3017,119.359C44.1007,122.611 54.1364,124.21 65.3912,124.21C74.3669,124.21 81.2046,122.593 85.8691,119.359C90.5336,116.107 92.8835,111.434 92.8835,105.304C92.8835,99.7952 90.1625,95.7794 84.7029,93.3273C79.261,90.8574 67.7235,88.121 50.1256,85.1181C33.2345,82.4705 21.3083,78.1882 14.3645,72.2356C7.42078,66.283 3.94008,57.3808 3.94008,45.4756C3.94008,32.6287 8.74592,21.9673 18.3223,13.5093C23.7829,8.70541 30.6743,5.25998 39,3.18286C45.3022,1.61055 52.4262,0.822266 60.3734,0.822266C65.8752,0.822266 71.2479,1.26797 76.5,2.16152C81.8908,3.07865 87.1545,4.46759 92.3004,6.33063C102.424,9.99103 110.428,15.0552 116.294,21.5586C113.17866666666666,28.162733333333332 110.06333333333333,34.766866666666665 106.948,41.371C99.7565,35.9159 92.2297,31.758 84.3849,28.8972C76.5401,26.0541 68.3596,24.6149 59.861,24.6149C51.9455,24.6149 45.7262,26.0364 41.1677,28.8616C36.6092,31.6869 34.33,36.0581 34.33,41.9751C34.33,47.519 37.1216,51.4993 42.6872,53.9158C45.8963,55.3092 51.1672,56.8267 58.5,58.4614C63.8845,59.6617 70.3808,60.9254 77.9889,62.2495C87.1465,63.8316 88.5,68.5 90,72.5C91.5,76.5 89.482,83 98,90.5C106.518,98 122.5,95.5 124,106C125.5,116.5 117.973,128.154 107.018,136.079C102.168,139.582 96.4964,142.311 90,144.266C81.7998,146.733 72.2856,148.002 61.4512,148.002","M61.4512,148.002C49.5956,148.002 38.3407,146.172 27.6689,142.512C16.9971,138.851 7.77415,133.183 0,125.489C3.5337,118.583 7.0674,111.677 10.6011,104.771C18.2693,111.256 26.5028,116.125 35.3017,119.359C44.1007,122.611 54.1364,124.21 65.3912,124.21C74.3669,124.21 81.2046,122.593 85.8691,119.359C90.5336,116.107 92.8835,111.434 92.8835,105.304C92.8835,99.7952 90.1625,95.7794 84.7029,93.3273C79.261,90.8574 67.7235,88.121 50.1256,85.1181C33.2345,82.4705 21.3083,78.1882 14.3645,72.2356C7.42078,66.283 3.94008,57.3808 3.94008,45.4756C3.94008,32.6287 8.74592,21.9673 18.3223,13.5093C23.7829,8.70541 30.6743,5.25998 39,3.18286C45.3022,1.61055 52.4262,0.822266 60.3734,0.822266C65.8752,0.822266 71.2479,1.26797 76.5,2.16152C81.8908,3.07865 87.1545,4.46759 92.3004,6.33063C102.424,9.99103 110.428,15.0552 116.294,21.5586C113.17866666666666,28.162733333333332 110.06333333333333,34.766866666666665 106.948,41.371C99.7565,35.9159 92.2297,31.758 84.3849,28.8972C76.5401,26.0541 68.3596,24.6149 59.861,24.6149C51.9455,24.6149 45.7262,26.0364 41.1677,28.8616C36.6092,31.6869 34.33,36.0581 34.33,41.9751C34.33,47.519 37.1216,51.4993 42.6872,53.9158C45.8963,55.3092 51.1672,56.8267 58.5,58.4614C63.8845,59.6617 70.3808,60.9254 77.9889,62.2495C87.1465,63.8316 95.3149,65.438 101.5,68C106.568,70.0994 107.72,70.2538 114,76.5C120.28,82.7462 110,92 110.5,102C111,112 121.482,126.421 108,135C94.518,143.579 96.4964,142.311 90,144.266C81.7998,146.733 72.2856,148.002 61.4512,148.002"],c=["M165.456,135.546C170.458,140.232 178.495,143.675 188.131,145.879C196.702,147.839 206.538,148.819 216.628,148.819C216.63866666666667,148.819 216.64933333333332,148.819 216.66,148.819C226.752,148.819 236.587,147.839 245.157,145.878C254.788,143.674 262.823,140.231 267.832,135.546C273.041,130.665 276.814,124.309 279.152,116.482C281.056,110.108 282.008,103 282.008,94.4341C282.008,85.8682 282.008,64 282.008,52.5C282.008,41 282.008,36 282.008,27.485C282.008,18.97 282.008,2.47 282.008,2.47C271.77233333333334,2.47 261.53666666666663,2.47 251.301,2.47C251.301,2.47 251.301,18.97 251.301,27.485C251.301,36 251.301,41 251.301,52.5C251.301,64 251.301,80.3038 251.301,91.9019C251.301,103.5 249.253,111.66 245.157,116.482C241.044,121.304 228.336,123.707 216.644,123.707C204.952,123.707 192.227,121.304 188.131,116.482C184.035,111.66 181.986,103.5 181.986,91.9019C181.986,80.3038 181.986,64 181.986,52.5C181.986,41 181.986,36 181.986,27.485C181.986,18.97 181.986,2.47 181.986,2.47C171.75066666666666,2.47 161.51533333333333,2.47 151.28,2.47C151.28,2.47 151.28,18.97 151.28,27.485C151.28,36 151.28,41 151.28,52.5C151.28,64 151.28,85.8682 151.28,94.4341C151.28,103 152.231,110.111 154.133,116.482C156.471,124.311 160.245,130.663 165.456,135.546","M165.456,135.546C170.458,140.232 178.495,143.675 188.131,145.879C196.702,147.839 206.538,148.819 216.628,148.819C216.63866666666667,148.819 216.64933333333332,148.819 216.66,148.819C226.752,148.819 236.587,147.839 245.157,145.878C254.788,143.674 262.823,140.231 267.832,135.546C273.041,130.665 276.814,124.309 279.152,116.482C281.056,110.108 282.008,95.5 282.008,94.4341C282.008,93.3682 278.5,71 278.5,58.5C278.5,46 282.008,29.5 282.008,27.485C282.008,25.47 282.008,2.47 282.008,2.47C271.77233333333334,2.47 261.53666666666663,2.47 251.301,2.47C251.301,2.47 251.301,11.985 251.301,23.5C251.301,35.015 270,49 269,58.5C268,68 252.5,86 251.301,91.9019C250.102,97.8038 249.253,111.66 245.157,116.482C241.044,121.304 228.336,123.707 216.644,123.707C204.952,123.707 192.227,121.304 188.131,116.482C184.035,111.66 181.986,103.5 181.986,91.9019C181.986,80.3038 181.986,61 181.986,52.5C181.986,44 181.986,36 181.986,27.485C181.986,18.97 181.986,2.47 181.986,2.47C171.75066666666666,2.47 161.51533333333333,2.47 151.28,2.47C151.28,2.47 151.28,18.97 151.28,27.485C151.28,36 151.28,43.5 151.28,52.5C151.28,61.5 151.28,85.8682 151.28,94.4341C151.28,103 152.231,110.111 154.133,116.482C156.471,124.311 160.245,130.663 165.456,135.546","M171,129C179,132.5 177,137.5 185,143C193,148.5 206.538,148.819 216.628,148.819C216.63866666666667,148.819 216.64933333333332,148.819 216.66,148.819C226.752,148.819 236.587,147.839 245.157,145.878C254.788,143.674 262.823,140.231 267.832,135.546C273.041,130.665 276.814,124.309 279.152,116.482C281.056,110.108 282.008,103 282.008,94.4341C282.008,85.8682 282.008,64 282.008,52.5C282.008,41 282.008,36 282.008,27.485C282.008,18.97 282.008,2.47 282.008,2.47C271.77233333333334,2.47 261.53666666666663,2.47 251.301,2.47C251.301,2.47 251.301,18.97 251.301,27.485C251.301,36 251.301,41 251.301,52.5C251.301,64 251.301,80.3038 251.301,91.9019C251.301,103.5 249.253,111.66 245.157,116.482C241.044,121.304 231.144,122.207 219,124.5C206.856,126.793 197.5,129 187.5,121C177.5,113 181.986,100.402 182,89C182.014,77.5981 181.986,64 181.986,52.5C181.986,41 181.986,36 181.986,27.485C181.986,18.97 181.986,2.47 181.986,2.47C171.75066666666666,2.47 161.51533333333333,2.47 151.28,2.47C151.28,2.47 151.28,18.97 151.28,27.485C151.28,36 151.28,41 151.28,52.5C151.28,64 151.28,85.8682 151.28,94.4341C151.28,103 152,110.5 154.133,116.482C156.267,122.463 163,125.5 171,129","M165.456,135.546C170.458,140.232 178.495,143.675 188.131,145.879C196.702,147.839 206.538,148.819 216.628,148.819C216.63866666666667,148.819 216.64933333333332,148.819 216.66,148.819C226.752,148.819 236.587,147.839 245.157,145.878C254.788,143.674 262.823,140.231 267.832,135.546C273.041,130.665 276.814,124.309 279.152,116.482C281.056,110.108 282.008,103 282.008,94.4341C282.008,85.8682 282.008,64 282.008,52.5C282.008,41 282.008,36 282.008,27.485C282.008,18.97 282.008,2.47 282.008,2.47C271.77233333333334,2.47 261.53666666666663,2.47 251.301,2.47C251.301,2.47 251.301,18.97 251.301,27.485C251.301,36 251.301,41 251.301,52.5C251.301,64 251.301,80.3038 251.301,91.9019C251.301,103.5 249.253,111.66 245.157,116.482C241.044,121.304 228.336,123.707 216.644,123.707C204.952,123.707 192.227,121.304 188.131,116.482C184.035,111.66 181.986,103.5 181.986,91.9019C181.986,80.3038 184,54 179,40.5C174,27 177.486,20 180,15C182.514,10 181.986,2.47 181.986,2.47C171.75066666666666,2.47 161.51533333333333,2.47 151.28,2.47C151.28,2.47 152,8 154,12.5C156,17 161.822,33.5 157,51C152.178,68.5 151.28,85.8682 151.28,94.4341C151.28,103 152.231,110.111 154.133,116.482C156.471,124.311 160.245,130.663 165.456,135.546","M165.456,135.546C170.458,140.232 178.495,143.675 188.131,145.879C196.702,147.839 206.538,148.819 216.628,148.819C216.63866666666667,148.819 216.64933333333332,148.819 216.66,148.819C226.752,148.819 236,148.5 245,144C254,139.5 252.5,136.5 258,131.5C263.5,126.5 276.162,124.309 278.5,116.482C280.404,110.108 282.008,103 282.008,94.4341C282.008,85.8682 282.008,64 282.008,52.5C282.008,41 282.008,36 282.008,27.485C282.008,18.97 282.008,2.47 282.008,2.47C271.77233333333334,2.47 261.53666666666663,2.47 251.301,2.47C251.301,2.47 251.301,18.97 251.301,27.485C251.301,36 251.301,41 251.301,52.5C251.301,64 251.301,80.3038 251.301,91.9019C251.301,103.5 255.5,114.5 244,122.5C232.5,130.5 228,126.5 213,124C198,121.5 192.227,121.304 188.131,116.482C184.035,111.66 181.986,103.5 181.986,91.9019C181.986,80.3038 181.986,64 181.986,52.5C181.986,41 181.986,36 181.986,27.485C181.986,18.97 181.986,2.47 181.986,2.47C171.75066666666666,2.47 161.51533333333333,2.47 151.28,2.47C151.28,2.47 151.28,18.97 151.28,27.485C151.28,36 151.28,41 151.28,52.5C151.28,64 151.28,85.8682 151.28,94.4341C151.28,103 152.231,110.111 154.133,116.482C156.471,124.311 160.245,130.663 165.456,135.546","M165.456,135.546C170.458,140.232 178.495,143.675 188.131,145.879C196.702,147.839 206.538,148.819 216.628,148.819C216.63866666666667,148.819 216.64933333333332,148.819 216.66,148.819C226.752,148.819 236.587,147.839 245.157,145.878C254.788,143.674 262.823,140.231 267.832,135.546C273.041,130.665 276.814,124.309 279.152,116.482C281.056,110.108 282.008,103 282.008,94.4341C282.008,85.8682 282.008,64 282.008,52.5C282.008,41 282.008,36 282.008,27.485C282.008,18.97 282.008,2.47 282.008,2.47C271.77233333333334,2.47 261.53666666666663,2.47 251.301,2.47C251.301,2.47 251.301,18.97 251.301,27.485C251.301,36 251.301,41 251.301,52.5C251.301,64 251.301,80.3038 251.301,91.9019C251.301,103.5 249.253,111.66 245.157,116.482C241.044,121.304 228.336,123.707 216.644,123.707C204.952,123.707 191.096,121.822 187,117C182.904,112.178 180,108.5 177.5,101C175,93.5 173,92.5 172,71C171,49.5 181.014,31 181.5,22.5C181.986,14 181.986,2.47 181.986,2.47C171.75066666666666,2.47 161.51533333333333,2.47 151.28,2.47C151.28,2.47 150.56,23 151.28,35C152,47 160,53 160,64C160,75 154.72,82.9678 153,91.9019C151.28,100.836 152.098,110.111 154,116.482C156.338,124.311 160.245,130.663 165.456,135.546"],u=[[0,1,1,1],[1,0,1,2],[2,2,0,2],[3,3,0,3],[4,4,2,0],[1,5,3,0],[5,0,4,4],[0,5,1,5],[0,1,5,1],[2,0,1,2]].map(e=>{let[t,l,a,i]=e;return[d[t],c[l],o[a],r[i]]}),p=e=>{let{className:t,paths:l=u[0],...n}=e;return(0,a.jsx)("svg",{width:"606",height:"149",viewBox:"0 0 606 149",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:(0,i.QP)("[&_path]:transition-[d] [&_path]:duration-[3s]",t),...n,children:(0,a.jsx)("g",{fillRule:"evenodd",clipRule:"evenodd",children:l.map((e,t)=>(0,a.jsx)("path",{d:e},t))})})},m=e=>{let{index:t,defaultIndex:l,delay:i=1e4,...n}=e,[o,r]=(0,s.useState)(()=>{var e;return null!==(e=null!=t?t:l)&&void 0!==e?e:0}),d=(0,s.useMemo)(()=>u[null!=t?t:o],[o,t]),c=(0,s.useRef)(l);return(0,s.useEffect)(()=>{var e;r(null!==(e=c.current)&&void 0!==e?e:Math.floor(Math.random()*u.length))},[]),(0,s.useEffect)(()=>{if(i){let e=0,t=setInterval(()=>{e+=Math.floor(Math.random()*(u.length-1)),r(e%=u.length)},i);return()=>{clearInterval(t)}}},[i]),(0,a.jsx)(p,{paths:d,...n})},x=e=>{let{className:t,enableDropShadow:l=!0,href:s="/",delay:o,...r}=e;return(0,a.jsx)(n.A,{href:s,className:(0,i.QP)("relative inline-block w-[6.5rem] h-[6.5rem]",t),...r,children:(0,a.jsx)(m,{delay:o,className:(0,i.QP)("block w-full h-full object-contain",l?"drop-shadow-logo md:drop-shadow-none":""),"aria-label":"Suno Logo"})})}},17219:(e,t,l)=>{l.d(t,{A:()=>f});var a=l(95155),i=l(5520),n=l(23375),s=l(16299),o=l(59108),r=l(5643),d=l(58670),c=l(49174),u=l(63438);l(12115);var p=l(77119),m=l(74955),x=l(59041),h=l(97942);let f=(0,u.PA)(e=>{let{isOpen:t,onClose:l,onConfirm:u,isLoading:f}=e,{session:g}=(0,p.gy)();return(0,a.jsxs)(i.Modal,{isOpen:t,onClose:l,isCentered:!0,size:"xl",children:[(0,a.jsx)(n.ModalOverlay,{}),(0,a.jsxs)(s.ModalContent,{sx:{bgColor:"#252020"},borderRadius:"32px",position:"relative",children:[(0,a.jsxs)(o.Flex,{justifyContent:"space-between",alignItems:"center",px:3,children:[(0,a.jsx)("span",{className:"font-serif text-2xl pl-4 py-8",children:"Please accept our terms to make a song with custom lyrics"}),g.roles.has_accepted_custom_mode_tos&&(0,a.jsx)(o.Flex,{mt:-14,children:(0,a.jsx)(x.A,{onClick:l})})]}),(0,a.jsx)(r.ModalBody,{children:(0,a.jsx)(o.Flex,{alignItems:"center",mb:2,children:(0,a.jsx)(d.Text,{fontSize:"14px",fontFamily:"Neue Montreal",children:"Suno is designed for creating original music. Please confirm you will only submit AI-generated lyrics, original lyrics or lyrics to which you otherwise hold rights to continue."})})}),(0,a.jsx)(c.ModalFooter,{children:(0,a.jsx)(m.Ay,{variant:m.Ak.Primary,onClick:u,icon:f&&(0,a.jsx)(h.A,{}),children:"I Accept"})})]})]})})},17376:(e,t,l)=>{l.d(t,{A:()=>A});var a=l(95155),i=l(75143),n=l(21206),s=l(50402),o=l(78266),r=l(63438),d=l(12115),c=l(77119),u=l(50649),p=l(74955),m=l(52596),x=l(91218),h=l(39688),f=l(26661),g=l(57851),v=l(7132),y=l(33933);let b=e=>{let{title:t,tags:l,displayName:i,handle:n,imageUrl:s,personaId:o,personaName:r,personaImageUrl:d,clipId:c,playCount:u}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"flex flex-row gap-1 items-center",children:(0,a.jsx)("div",{className:(0,m.A)(v.yC,"text-foreground-primary line-clamp-1 cursor-pointer break-words"),children:(0,a.jsx)("span",{className:"line-clamp-1",children:t||"Untitled"})})}),(0,a.jsx)("div",{className:(0,m.A)("text-foreground-tertiary line-clamp-1 text-secondary/90 font-sans text-sm break-all gap-2"),children:l.length?(0,a.jsx)("span",{children:l}):v.Lo}),(0,a.jsx)("div",{className:"flex flex-row gap-1 items-center overflow-x-clip",children:(0,a.jsx)(y.y4,{className:(0,m.A)(v.ds,"text-foreground-primary"),displayName:i,handle:n,imageUrl:s,personaId:o,personaDisplayName:r,personaImageUrl:d,clipId:c,index:0,playCount:u,likeCount:0,commentCount:0,listId:"song-queue",listTitle:"Song Queue"})})]})};l(35540);var C=l(6411);let j=(0,r.PA)(e=>{var t;let{imgUrl:l,title:i,clipId:n,tags:s,displayName:o,handle:r,avatarImageUrl:u,personaId:p,personaName:y,personaImageUrl:j,playCount:w,upvoteCount:N,commentCount:k,listId:A,listTitle:S,listClips:I,className:P,..._}=e,{clips:M,playbar:T,queue:E}=(0,c.gy)(),{t:L}=(0,x.Bd)(),O=M.notInterestedById[n],R=(0,d.useCallback)(()=>{if(E.clips.some(e=>e.id===n)){T.playClip(M.clipById[n]);let e=E.clips.findIndex(e=>e.id===n);E.setPlayContext({clips:E.clips,contextId:E.contextId||"",contextType:E.contextType||C.Lp.PLAYLIST,currentIndex:e})}},[M,T,E,n,A,I]),D=(0,d.useCallback)(()=>{var e;if((null===(e=T.clip)||void 0===e?void 0:e.id)===n&&!T.isClipPreloaded){T.togglePlay();return}R()},[T,n,R]),F=(0,d.useCallback)(()=>{R()},[R]),B=(0,d.useMemo)(()=>{var e;return(null===(e=T.clip)||void 0===e?void 0:e.id)===n},[n,A,E.contextType,E.contextId,null===(t=T.clip)||void 0===t?void 0:t.id]),z=B&&T.isPlaying;return(0,a.jsx)("div",{className:(0,h.QP)((0,m.A)("group w-full flex flex-row items-center justify-between p-2 rounded-lg","transition-colors duration-150","focus-within:bg-background-secondary-glass"),P),onDoubleClick:F,"data-media-playing":z,"aria-disabled":O,inert:O,..._,children:(0,a.jsxs)("div",{className:"flex flex-row gap-4 w-full",children:[(0,a.jsxs)("button",{className:"group relative flex-shrink-0",onClick:D,"aria-label":L(z?"media.pause":"media.play"),children:[(0,a.jsx)(g.A,{className:"rounded-lg lazyload w-12 h-16 object-cover",src:l,alt:i,imageSize:v.M_}),(0,a.jsx)("div",{className:(0,m.A)("absolute inset-0 flex items-center justify-center rounded-lg","transition-colors duration-150","group-hover:text-foreground-primary-glass group-hover:bg-opacity-black-30","group-focus-within:text-foreground-primary-glass group-focus-within:bg-opacity-black-30",{"text-transparent bg-transparent":!(z||B),"text-foreground-primary-glass bg-opacity-black-30":z||B}),children:(0,a.jsx)(f.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"min-w-0",children:(0,a.jsx)(b,{title:i,clipId:n,tags:s,displayName:o,handle:r,imageUrl:u,personaId:p,personaName:y,personaImageUrl:j,playCount:w,commentCount:k,onPlayClick:D})})]})})}),w=function(e){var t,l,a,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"index",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Queue";return{clipId:(null==e?void 0:null===(t=e.id)||void 0===t?void 0:t.toString())||"",imgUrl:(null==e?void 0:e.image_url)||"",title:(null==e?void 0:e.title)||"",tags:(null==e?void 0:null===(l=e.metadata)||void 0===l?void 0:l.tags)?Array.isArray(null==e?void 0:e.metadata.tags)?null==e?void 0:e.metadata.tags:[null==e?void 0:e.metadata.tags]:[],displayName:(null==e?void 0:e.display_name)||"",handle:(null==e?void 0:e.handle)||"",avatarImageUrl:(null==e?void 0:e.avatar_image_url)||"",personaName:(null==e?void 0:null===(a=e.persona)||void 0===a?void 0:a.name)||"",personaImageUrl:(null==e?void 0:null===(i=e.persona)||void 0===i?void 0:i.user_image_url)||"",playCount:(null==e?void 0:e.play_count)||0,upvoteCount:(null==e?void 0:e.upvote_count)||0,commentCount:(null==e?void 0:e.comment_count)||0,listId:n,listTitle:s}},N=(0,r.PA)(e=>{let{hideHeader:t}=e,{queue:l,playbar:o}=(0,c.gy)(),r=(0,i.FR)((0,i.MS)(i.AN,{activationConstraint:{distance:10}})),[m,x]=(0,d.useState)([]);(0,d.useEffect)(()=>{x(l.clips.slice((l.currentIndex||0)+1).map((e,t)=>({id:"".concat(e.id,"-").concat(t),clip:e})))},[l.clips,l.clips.length,l.currentIndex]);let h=(0,d.useCallback)(e=>{let{active:t,over:l}=e;null!==l&&t.id!==l.id&&x(e=>{let a=e.findIndex(e=>e.id===t.id),i=e.findIndex(e=>e.id===l.id);return(0,s.be)(e,a,i)})},[]);return(0,a.jsxs)("div",{className:"flex flex-col p-1 gap-4 max-h-[inherit] overflow-hidden",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-1 px-2",children:[(0,a.jsx)(u.jBU,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Queue"})]}),(0,a.jsx)(p.Ay,{variant:p.Ak.Tertiary,size:p.Mp.Mini,onClick:o.toggleShowSongQueue,className:"p-2 rounded-full hover:bg-background-tertiary dark:hover:bg-background-primary transition-colors","aria-label":"Close queue",icon:u.USm})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-foreground-tertiary ml-2",children:"Now playing"}),(0,a.jsx)(j,{id:"now-playing",...w(o.clip)},"now-playing")]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-foreground-tertiary ml-2",children:"Next in queue"}),(0,a.jsx)(i.Mp,{sensors:r,collisionDetection:i.fp,onDragEnd:h,modifiers:[n.FN],children:(0,a.jsx)(s.gB,{items:m.map(e=>e),children:m.map(e=>(0,a.jsx)(k,{id:e.id,clip:e.clip},e.id))})})]})]})}),k=e=>{let{attributes:t,listeners:l,setNodeRef:i,transform:n,transition:r}=(0,s.gl)({id:e.id}),d={transform:o.Ks.Transform.toString(n),transition:r};return(0,a.jsx)("div",{ref:i,style:d,...t,...l,children:(0,a.jsx)(j,{id:e.id,...w(e.clip)},e.id)})},A=N},19783:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(95155),i=l(12115),n=l(39688);let s=e=>{let{ref:t,className:l,textareaClassName:s,maxLength:o,placeholder:r,value:d,onChange:c,onClick:u,onKeyDown:p,isReadOnly:m,cursor:x,leftAsset:h,customHeight:f="h-[36px]",spacedLeftAsset:g=!1,resize:v=!1,onClear:y,isScrollable:b,enableExtraMargin:C=!1,bgColor:j="tertiary",paddingBottom:w=40,showMaxLengthAtCharsRemaining:N,withInsetShadow:k=!1,explicitHeight:A}=e,S=(0,i.useRef)(null),I=(0,i.useRef)(null),P=t||S;return(0,i.useEffect)(()=>{P.current&&null!==I.current&&P.current.setSelectionRange(I.current,I.current)},[d]),(0,a.jsxs)("div",{className:(0,n.QP)("relative rounded-lg border border-quaternary overflow-hidden flex-1 flex flex-col bg-".concat(j),l),style:{paddingBottom:"".concat(w,"px"),marginBottom:C?"12px":"0",boxShadow:k?"inset 0px 0px 6px 0px rgba(0,0,0,0.1)":void 0,height:void 0!==A?"".concat(A,"px"):void 0},children:[(0,a.jsx)("textarea",{ref:P,maxLength:o,value:d,onChange:e=>{I.current=e.target.selectionStart,c&&c(e)},placeholder:r,onClick:u,onKeyDown:p,readOnly:m,className:(0,n.QP)("w-full flex-1 p-4 pb-8 text-primary focus:outline-none custom-textarea font-sans text-14px ".concat(f," ").concat(x||"text"," placeholder:lighterGray placeholder:select-none ").concat(v?"resize-y":"resize-none"," ").concat(f," bg-").concat(j),s),style:{overflowY:b?"auto":"hidden",overflowX:"hidden"}}),!N||o-d.length<N?(0,a.jsxs)("div",{className:"font-sans absolute ".concat(g?"bottom-[52px]":"bottom-2"," right-2 text-secondary text-sm rounded-full bg-black/70 p-2"),children:[d.length," / ",o]}):null,h&&(0,a.jsx)("div",{className:"absolute bottom-2 left-2 max-w-full overflow-x-auto whitespace-nowrap",children:h}),y&&(0,a.jsx)("button",{type:"button",onClick:y,className:"absolute top-4 right-4 text-secondary",style:{background:"none",border:"none",cursor:"pointer"},children:""})]})}},21697:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(95155);l(12115);let i=()=>{let e=Array.from({length:15});return(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none z-[10000]",children:e.map((e,t)=>(0,a.jsx)("div",{className:"absolute w-10 h-10 opacity-80 animate-float",style:{left:"".concat(100*Math.random(),"%"),animationDuration:"".concat(5*Math.random()+5,"s"),animationDelay:"".concat(5*Math.random(),"s"),top:"-50px"},children:(0,a.jsx)("img",{src:"/icons/cloud.svg",alt:"Cloud",className:"w-full h-full object-contain"})},t))})}},22430:(e,t,l)=>{l.d(t,{A:()=>L});var a=l(95155),i=l(274),n=l(27016),s=l(5295),o=l(46391),r=l(52596),d=l(63438),c=l(35695),u=l(12115),p=l(39688),m=l(77119),x=l(74955),h=l(95625),f=l(86147),g=l(36617),v=l(56108),y=l(50649),b=l(63808),C=l(78294),j=l(2918),w=l(90037),N=l(7132),k=l(88008),A=l(99428),S=l(4869),I=l(61932),P=l(24423),_=l(57147),M=l(26700),T=l(44710),E=l(35540);let L=(0,d.PA)(e=>{var t,l,d,L,O,R,D,F,B,z,U;let{clip:H,className:W,rowKey:V,showStats:G=!1,asCardActions:Y=!1,trendingMode:q=!1,isFromSongRow:Q=!1,isPlaybar:K=!1,dropdownOnly:J=!1,isDropdownTriggered:X=!1,isContestClip:Z=!1,mini:$=!1,enablePin:ee=!1,showDislike:et=!1,sectionName:el,onRemoveFromPlaylist:ea,onRemoveFromProject:ei,onMenuButtonClick:en,onTriggerEditMode:es,onPinClipToProject:eo,onPlayCountClick:er}=e,{playbar:ed,clips:ec,genForm:eu,session:ep,menus:em,project:ex}=(0,m.gy)(),eh=(0,v.gs)(),ef=!eh,eg=(0,c.useRouter)(),ev=(0,c.usePathname)(),ey=(null==H?void 0:H.status)==="complete",eb=H.is_public,eC=async()=>{try{await ec.setClipVisibility(H.id,!eb),(0,m.oR)({title:"Clip is now ".concat(eb?"link only":"public","."),status:"warning",duration:2e3,isClosable:!0}),eb||ec.getVideoGenStatus(H),k.LS.logAudioActionEvent(ef,eb?A.a2.makePrivate:A.a2.makePublic,H,ep,ev)}catch(e){console.error("Failed to update clip visibility:",e)}},ej="/playlist/liked/"===ev,{isSignedIn:ew}=(0,n.d)(),eN=(0,s.ho)(),[ek,eA]=(0,u.useState)((0,C.cW)(H)),[eS,eI]=(0,u.useState)((0,C.i8)(H)),[eP,e_]=(0,u.useState)(!1),eM=(0,u.useRef)(null),eT=(0,u.useRef)(null),eE=(0,u.useRef)(null),eL=(0,u.useRef)(null),eO=(0,o.useStatsigClient)();(0,u.useEffect)(()=>{eA((0,C.cW)(ec.clipById[H.id])),eI((0,C.i8)(ec.clipById[H.id]))},[null===(l=ec.clipById[H.id])||void 0===l?void 0:null===(t=l.reaction)||void 0===t?void 0:t.reaction_type]);let eR=e=>!isNaN(parseInt(e.charAt(e.length-1),10));(0,u.useEffect)(()=>{var e,t;if(null===(e=ep.flags)||void 0===e?void 0:e["thumbs-exp"])return(null===(t=ed.clip)||void 0===t?void 0:t.id)!==H.id||!ed.isPlaying||ek||eS?(e_(!1),eM.current&&clearTimeout(eM.current)):(e_(!0),eM.current&&clearTimeout(eM.current),eM.current=setTimeout(()=>{e_(!1)},1e4)),()=>{eM.current&&clearTimeout(eM.current)}},[null===(d=ed.clip)||void 0===d?void 0:d.id,ed.isPlaying,ek,eS,H.id]);let eD=(null==ep?void 0:ep.userId)!==void 0&&(null==H?void 0:H.user_id)===(null==ep?void 0:ep.userId),eF=!(0,I.Lx)({handle:(null==H?void 0:H.handle)||""}),eB=!!H.allow_comments,ez=eF&&!K&&eD;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,p.QP)((0,r.A)("flex flex-row gap-1 items-center w-full",{"justify-between":Y,"gap-0":ee}),W),children:[!Q||H.is_trashed||J||$?null:(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,E.Dc)(Z)?(0,a.jsx)(h.A,{size:x.Mp.Mini,onClick:()=>{k.LS.logAudioActionWithContext({isMobile:ef,actionName:A.a2.coverSong,clip:H,session:ep,pathname:ev,componentContext:A.zq.SONG_ACTIONS}),eu.resetPersona(),eu.resetContinueClip(),eu.resetInfill(),eu.setCoverClip(H),ef&&(eu.shouldOpenMobileCreate=!0),eu.setTask("cover"),"/create"!==ev&&eg.push("/create")},children:"Cover"}):null,ep.sessionIsLoaded&&!(0,E.AB)({clip:H,session:ep})&&(0,E.lI)(ej,ey,Z,H,null===(L=ep.user)||void 0===L?void 0:L.id)?(0,a.jsx)(h.A,{size:x.Mp.Mini,onClick:e=>{var t,l,a,i;((0,S.FJ)(ep)||(null==ep?void 0:ep.isStaff))&&(null===(t=ep.flags)||void 0===t?void 0:t["edit-mode-extend"])&&(null==H?void 0:H.user_id)===ep.userId&&!ef?e.metaKey||e.ctrlKey?window.open("/edit/".concat(null==H?void 0:H.id),"_blank"):(eu.cacheState(),es&&es(),eg.push("/edit/".concat(null==H?void 0:H.id))):(null==H?void 0:null===(l=H.metadata)||void 0===l?void 0:l.infill)?ec.runConcat(null==H?void 0:H.id,null==H?void 0:null===(a=H.metadata)||void 0===a?void 0:a.infill,{editSessionId:null==H?void 0:null===(i=H.metadata)||void 0===i?void 0:i.edit_session_id}):(k.LS.logAudioActionWithContext({isMobile:ef,actionName:A.a2.extendSong,clip:H,session:ep,pathname:ev,componentContext:A.zq.SONG_ACTIONS}),eu.resetArtistClip(),eu.resetCoverClip(),eu.resetPersona(),eu.setContinueClip(H),eu.matchClipModel(H),ef&&(eu.shouldOpenMobileCreate=!0),eu.setTask((0,I.IK)(H)),"/create"!==ev&&eg.push("/create"))},children:(null===(O=ep.flags)||void 0===O?void 0:O["edit-mode-extend"])&&((0,S.FJ)(ep)||(null==ep?void 0:ep.isStaff))&&H.user_id===ep.userId&&!ef?"Edit":H.metadata.infill?"Confirm":"Extend"}):null,(0,a.jsx)(g.A,{clip:H,dropdownPosition:"bottom",showDropdownIcon:!0,buttonVariant:x.Ak.Primary,buttonSize:x.Mp.Mini,buttonShape:x.aH.Rounded}),ej||(null===(R=ep.user)||void 0===R?void 0:R.id)!==H.user_id||H.is_trashed?null:eO.checkGate("web-publish-2025")?(0,a.jsx)(f.I,{clip:H}):(0,a.jsx)(a.Fragment,{children:(0,w.a)(H)?(0,a.jsx)(i.Tooltip,{label:"Audio uploads with vocals (and related songs) cannot be made public at this time",size:"sm",fontSize:"md",background:N.TJ,backdropFilter:"blur(40px)",rounded:"md",color:"#ffffff",padding:"10px",fontFamily:"Neue Montreal",children:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h.A,{"aria-label":"Public (disabled)",size:x.Mp.Mini,active:eb,iconEnd:(0,a.jsx)(_.A,{small:!0,checked:eb,disabled:!0,onChange:eC,"aria-label":"Public Switch (disabled)"}),disabled:!0,children:"Public"})})}):(0,a.jsx)(h.A,{"aria-label":eb?"Make private":"Make public",size:x.Mp.Mini,active:eb,iconEnd:(0,a.jsx)(_.A,{small:!0,checked:eb,disabled:!1,onChange:eC,"aria-label":eb?"Switch to make private":"Switch to make public"}),children:"Public"})})]}),(null==ep?void 0:null===(D=ep.flags)||void 0===D?void 0:D["clip-feedback"])&&!K&&!$&&H.user_id===ep.userId&&(0,a.jsx)(i.Tooltip,{fontFamily:"Neue Montreal",label:ec.feedbackGivenByClipId[H.id]?"Feedback given, thank you!":"Song feedback",size:"sm",background:N.TJ,backdropFilter:"blur(40px)",rounded:"md",color:"#ffffff",padding:"10px",children:(0,a.jsx)(h.A,{className:"ml-1",variant:x.Ak.Tertiary,size:x.Mp.Mini,icon:y.hjC,iconClassName:"m-0 w-6 h-6",onClick:()=>{em.setCurrentClip(H),em.openModal(j.H.CLIP_FEEDBACK)},"aria-label":"Feedback Button",active:!!ec.feedbackGivenByClipId[H.id]})}),J||$?null:(0,a.jsxs)("div",{className:"flex flex-row gap-1",children:[(Y||q)&&(0,a.jsx)(h.A,{variant:x.Ak.Tertiary,size:x.Mp.Mini,icon:y.udU,onClick:er,"aria-label":"Play Count",active:!1,children:eF?(0,I.Nr)(H.play_count||0):null}),(0,a.jsx)(h.A,{ref:eL,variant:x.Ak.Tertiary,size:x.Mp.Mini,icon:y.Gek,iconClassName:(0,r.A)({"animate-pulse":!eR(null!==(z=ep.userId)&&void 0!==z?z:"")&&eP}),onClick:()=>{if(ew){let e=!(0,C.cW)(ec.clipById[H.id]);eA(e),ec.likeClip(null==H?void 0:H.id,e),ep.clearTooltipOnLike(),k.LS.logAudioActionEvent(ef,e?A.a2.likeSong:A.a2.undoLikeSong,H,ep,ev)}else eN.openSignUp({...(0,I.Of)(ev)})},"aria-label":"Playbar: Like",active:ek,children:G&&eF?(0,I.Nr)(H.upvote_count||0):null}),(!q||et)&&(0,a.jsx)(h.A,{variant:x.Ak.Tertiary,size:x.Mp.Mini,icon:y.d2e,iconClassName:(0,r.A)({"animate-pulse":!eR(null!==(U=ep.userId)&&void 0!==U?U:"")&&eP}),onClick:()=>{if(ew){let e=!(0,C.i8)(ec.clipById[H.id]);eI(e),ec.dislikeClip(H.id,e),k.LS.logAudioActionEvent(ef,e?A.a2.dislikeSong:A.a2.undoDislikeSong,H,ep,ev),ed.isMyRadioPlaying&&ed.stepForward()}else eN.openSignUp({...(0,I.Of)(ev)})},"aria-label":"Playbar: Dislike",active:eS})]}),J||$||!eB?null:(0,a.jsx)(h.A,{variant:x.Ak.Tertiary,size:x.Mp.Mini,icon:y.Twg,href:"/song/".concat(H.id,"?show_comments=true"),onClick:()=>{(0,b.Ay)({actionName:"SongActionCommentsClicked",context:{clipId:null==H?void 0:H.id,commentCount:K?void 0:H.comment_count}})},"aria-label":"Playbar: Comment",active:K,className:(0,S.m2)(ep)&&ee?"pr-0":"",children:ez?(0,a.jsx)("span",{className:"min-w-5",children:(0,I.Nr)(H.comment_count||0)}):null}),J||$||ee&&!ef||K&&!eh?null:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.Tooltip,{label:"Copy Song Link",size:"sm",background:N.TJ,backdropFilter:"blur(40px)",rounded:"md",color:"#ffffff",padding:"10px",fontFamily:"Neue Montreal",children:(0,a.jsx)(h.A,{ref:eE,variant:x.Ak.Tertiary,size:x.Mp.Mini,icon:y.liv,onClick:async()=>await (0,P.Kj)(ec.apiClient,H),"aria-label":"Playbar: Share",active:K})})}),(0,S.m2)(ep)&&ee&&(0,a.jsx)("div",{className:"flex items-center",children:ex.isPinned(H.id)?(0,a.jsx)(h.A,{variant:x.Ak.Tertiary,size:x.Mp.Mini,icon:(0,a.jsx)(y.cFy,{width:20,height:20}),onClick:e=>{eo&&eo(),e.preventDefault(),e.stopPropagation()},"aria-label":"Pin to Project",active:ex.isPinned(H.id)}):(0,a.jsx)(h.A,{variant:x.Ak.Tertiary,size:x.Mp.Mini,icon:(0,a.jsx)(y.cFy,{width:20,height:20}),onClick:e=>{eo&&eo(),e.preventDefault(),e.stopPropagation()},"aria-label":"Pin to Project",active:ex.isPinned(H.id)})}),H.id?(0,a.jsx)(T.A,{clip:H,onRemoveFromPlaylist:ea,onRemoveFromProject:ei,onMenuButtonClick:en,isTriggered:X,rowKey:V,sectionName:el,triggerRef:eT}):null]}),Q&&!$&&ep.shouldShowCreateOnboardingStep("like_tooltip")&&(null===(F=ex.currentClips[ex.currentClips.length-1])||void 0===F?void 0:F.id)===H.id?(0,a.jsx)(M.P,{offsetLeft:5,positionRef:eL,title:"Love this track?",description:"Hit like to keep it handy and help us suggest more songs youll vibe with.",position:"bottom-left"}):Q&&!$&&ep.shouldShowCreateOnboardingStep("share_tooltip")&&(null===(B=ex.currentClips[ex.currentClips.length-1])||void 0===B?void 0:B.id)===H.id?(0,a.jsx)(M.P,{offsetLeft:5,positionRef:eE.current?eE:eT,title:"Share with friends",description:"Share your creation and let your friends join the fun!",position:"bottom-left"}):null]})})},22868:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(95155),i=l(52596),n=l(12115),s=l(39688);let o=e=>{let{className:t,tabs:l,selectedIndex:o,onTabClick:r,textClass:d}=e,c=(0,n.useRef)(null),[u,p]=(0,n.useState)(!1),[m,x]=(0,n.useState)(0),[h,f]=(0,n.useState)(0),g=e=>{r&&r(e)};(0,n.useEffect)(()=>{if(l.length<5)return;let e=c.current;if(e&&void 0!==o){let t=e.children[o];if(t){let l=e.offsetWidth,a=t.offsetWidth,i=t.offsetLeft;e.scrollTo({left:i-(l-a)/2,behavior:"smooth"})}}},[o,l.length]);let v=(0,s.QP)(l.length>=5?"flex space-x-2 overflow-x-auto w-full scrollbar-hide":"flex space-x-2",t);return(0,a.jsx)("div",{ref:c,className:v,role:"tablist",onTouchStart:e=>{var t,a;l.length<5||(p(!0),x(e.touches[0].pageX-((null===(t=c.current)||void 0===t?void 0:t.offsetLeft)||0)),f((null===(a=c.current)||void 0===a?void 0:a.scrollLeft)||0))},onTouchMove:e=>{var t;if(!u||l.length<5)return;e.preventDefault();let a=e.touches[0].pageX-((null===(t=c.current)||void 0===t?void 0:t.offsetLeft)||0);c.current&&(c.current.scrollLeft=h-(a-m)*2)},onTouchEnd:()=>{l.length<5||p(!1)},style:l.length>=5?{WebkitOverflowScrolling:"touch",paddingRight:"20px"}:void 0,children:l.map((e,t)=>(0,a.jsx)("div",{className:(0,s.QP)((0,i.A)("font-sans font-medium px-4 py-2 min-w-20 text-center rounded-md cursor-pointer",{"flex-shrink-0":l.length>=5,"text-base":!d,"bg-primary text-black":o===t,"bg-quaternary text-primary hover:bg-primary/30 hover:text-primary":o!==t}),d),onClick:()=>g(t),role:"tab","aria-selected":o===t,"aria-controls":"tabpanel-".concat(t),id:"tab-".concat(t),children:(0,a.jsx)("span",{className:"line-clamp-1 break-all",children:e.label})},t))})}},24432:(e,t,l)=>{l.d(t,{A:()=>I});var a=l(95155),i=l(52596),n=l(63438),s=l(12115),o=l(91218),r=l(3096),d=l(39688),c=l(11555);let u=e=>{let{children:t,className:l,...i}=e;return(0,a.jsx)(c.Ay,{className:(0,d.QP)("pt-2 pb-1 border-b-0","text-base font-medium font-sans","text-primary",l),...i,children:t})};var p=l(97942),m=l(8882),x=l(71921),h=l(57851),f=l(65015),g=l(88066),v=l(45990),y=l(50649),b=l(26054),C=l(7132),j=l(85834);let w={follow:["notification.content.profile","notification.followedYou","notification.bothFollowedYou","notification.andOthersFollowedYou"],clip_like:["notification.content.song","notification.likedYourContent","notification.bothLikedYourContent","notification.andOthersLikedYourContent"],scene_like:["notification.content.scene","notification.likedYourContent","notification.bothLikedYourContent","notification.andOthersLikedYourContent"],playlist_like:["notification.content.playlist","notification.likedYourContent","notification.bothLikedYourContent","notification.andOthersLikedYourContent"],persona_follow:["notification.content.persona","notification.followedYourPersona","notification.bothFollowedYourPersona","notification.andOthersFollowedYourPersona"],persona_favorite:["notification.content.persona","notification.lovedYourPersona","notification.bothLovedYourPersona","notification.andOthersLovedYourPersona"],persona_used:["notification.content.persona","notification.usedYourPersona","notification.bothUsedYourPersona","notification.andOthersUsedYourPersona"],clip_comment:["notification.content.song","notification.commentedOnYourContent","notification.bothCommentedOnYourContent","notification.andOthersCommentedOnYourContent"],scene_comment:["notification.content.scene","notification.commentedOnYourContent","notification.bothCommentedOnYourContent","notification.andOthersCommentedOnYourContent"],playlist_comment:["notification.content.playlist","notification.commentedOnYourContent","notification.bothCommentedOnYourContent","notification.andOthersCommentedOnYourContent"],comment_like:["notification.content.comment","notification.likedYourComment","notification.bothLikedYourComment","notification.andOthersLikedYourComment"],comment_reply:["notification.content.comment","notification.repliedToYourComment","notification.bothRepliedToYourComment","notification.andOthersRepliedToYourComment"],clip_create_followee:["notification.content.song","notification.droppedASong","notification.bothDroppedASong","notification.andOthersDroppedASong"],clip_remix:["notification.content.song","notification.remixedYourSong","notification.bothRemixedYourSong","notification.andOthersRemixedYourSong"]},N=e=>{var t,l,i,n,s,o,r,d,c,u,p,x;let{notification:h,onProfileClick:f}=e,{t:v}=(0,m.Bd)();if(!b.IN.has(h.notification_type))return null;if("announcement"===h.notification_type)return h.content_message;let[y,C,j,N]=w[h.notification_type]||[],k={name:(null===(l=h.user_profiles)||void 0===l?void 0:null===(t=l[0])||void 0===t?void 0:t.display_name)||"@".concat(null===(n=h.user_profiles)||void 0===n?void 0:null===(i=n[0])||void 0===i?void 0:i.handle)||0,secondName:(null===(o=h.user_profiles)||void 0===o?void 0:null===(s=o[1])||void 0===s?void 0:s.display_name)||"@".concat(null===(d=h.user_profiles)||void 0===d?void 0:null===(r=d[1])||void 0===r?void 0:r.handle)||0,count:h.total_users?h.total_users-1:0,content:v(y)},A={nameLink:(0,a.jsx)(g.A,{className:"text-primary",handle:(null===(u=h.user_profiles)||void 0===u?void 0:null===(c=u[0])||void 0===c?void 0:c.handle)||"unknown",onClick:f&&(e=>{var t,l;f({id:h.id,type:h.notification_type,handle:(null===(l=h.user_profiles)||void 0===l?void 0:null===(t=l[0])||void 0===t?void 0:t.handle)||"unknown",context:"handle",isRead:h.is_read},e)})}),secondNameLink:(0,a.jsx)(g.A,{className:"text-primary",handle:(null===(x=h.user_profiles)||void 0===x?void 0:null===(p=x[1])||void 0===p?void 0:p.handle)||"unknown",onClick:f&&(e=>{var t,l;f({id:h.id,type:h.notification_type,handle:(null===(l=h.user_profiles)||void 0===l?void 0:null===(t=l[1])||void 0===t?void 0:t.handle)||"unknown",context:"handle",isRead:h.is_read},e)})})};switch(h.total_users||0){case 0:return v("notification.placeholder");case 1:return C?(0,a.jsx)(m.x6,{t:v,i18nKey:C,values:k,components:A}):v("notification.placeholder");case 2:return j?(0,a.jsx)(m.x6,{t:v,i18nKey:j,values:k,components:A}):v("notification.placeholder");default:return N?(0,a.jsx)(m.x6,{t:v,i18nKey:N,values:k,components:A}):v("notification.placeholder")}},k=(0,n.PA)(e=>{var t,l,n,o,u,p,b,w,k,A,S,I,P,_,M,T,E;let{children:L,className:O,currentTime:R,notification:D,onDotClick:F,onContentClick:B,onFollowClick:z,onProfileClick:U,onView:H,...W}=e,{ref:V,inView:G}=(0,r.Wx)({threshold:.5,triggerOnce:!0}),{t:Y}=(0,m.Bd)(),q=new Date(D.updated_at),Q=q.getTime()-new Date(R||Date.now()).getTime(),K=null,J=null;switch(D.notification_type){case"announcement":J=D.content_id?(0,a.jsx)(f.A,{href:"/song/".concat(D.content_id),onClick:e=>{null==B||B({id:D.id,type:D.notification_type,contentId:D.content_id||"",contentType:"clip",isRead:D.is_read},e)},children:(0,a.jsx)(h.A,{className:"w-11 h-14 object-cover rounded-md",alt:D.content_title||"Untitled",src:D.content_image_url||null,imageSize:C.M_})}):null;break;case"clip_like":case"scene_like":case"clip_create_followee":case"clip_remix":K=D.content_title,J=(0,a.jsx)(f.A,{href:"/song/".concat(D.content_id),onClick:e=>{null==B||B({id:D.id,type:D.notification_type,contentId:D.content_id||"",contentType:"clip",isRead:D.is_read},e)},children:(0,a.jsx)(h.A,{className:"w-11 h-14 object-cover rounded-md",alt:D.content_title||"Untitled",src:D.content_image_url||null,imageSize:C.M_})});break;case"playlist_like":K=D.content_title,J=(0,a.jsx)(f.A,{href:"/playlist/".concat(D.content_id),onClick:e=>{null==B||B({id:D.id,type:D.notification_type,contentId:D.content_id||"",contentType:"playlist",isRead:D.is_read},e)},children:(0,a.jsx)(h.A,{className:"w-11 h-14 object-cover rounded-md",alt:D.content_title||"Untitled",src:D.content_image_url||null,imageSize:C.M_})});break;case"follow":J=(0,a.jsxs)("button",{className:(0,i.A)("flex flex-row gap-1 items-center hover:underline","text-secondary hover:text-primary","group"),onClick:e=>{var t,l,a,i;null==z||z({id:D.id,type:D.notification_type,handle:(null===(l=D.user_profiles)||void 0===l?void 0:null===(t=l[0])||void 0===t?void 0:t.handle)||"unknown",isFollowing:null===(i=D.user_profiles)||void 0===i?void 0:null===(a=i[0])||void 0===a?void 0:a.is_following,isRead:D.is_read},e)},children:[(null===(P=D.user_profiles)||void 0===P?void 0:null===(I=P[0])||void 0===I?void 0:I.is_following)?(0,a.jsx)(y.Srz,{className:"w-[20px] h-[20px]"}):(0,a.jsx)(y.c11,{className:"w-[20px] h-[20px]"}),(0,a.jsx)("span",{className:"inline-block group-hover:hidden",children:Y((null===(M=D.user_profiles)||void 0===M?void 0:null===(_=M[0])||void 0===_?void 0:_.is_following)?"profile.following":"profile.follow")}),(0,a.jsx)("span",{className:"hidden group-hover:inline-block",children:Y((null===(E=D.user_profiles)||void 0===E?void 0:null===(T=E[0])||void 0===T?void 0:T.is_following)?"profile.unfollow":"profile.follow")})]});break;case"persona_favorite":K=D.content_title,J=(0,a.jsx)(f.A,{href:"/persona/".concat(D.content_id),onClick:e=>{null==B||B({id:D.id,type:D.notification_type,contentId:D.content_id||"",contentType:"persona",isRead:D.is_read},e)},children:(0,a.jsx)("div",{className:"relative w-11 h-14",children:(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[95%] h-[95%] overflow-hidden",style:x.J.Persona,children:(0,a.jsx)(h.A,{className:"w-full h-full object-cover",alt:D.content_title||"Untitled",src:D.content_image_url||null,imageSize:C.M_})})})});break;case"persona_follow":K=D.content_title,J=(0,a.jsx)(f.A,{href:"/persona/".concat(D.content_id),onClick:e=>{null==B||B({id:D.id,type:D.notification_type,contentId:D.content_id||"",contentType:"persona",isRead:D.is_read},e)},children:(0,a.jsx)("div",{className:"relative w-11 h-14",children:(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[95%] h-[95%] overflow-hidden",style:x.J.Persona,children:(0,a.jsx)(h.A,{className:"w-full h-full object-cover",alt:D.content_title||"Untitled",src:D.content_image_url||null,imageSize:C.M_})})})});break;case"persona_used":K=D.content_title,J=(0,a.jsx)(f.A,{href:"/persona/".concat(D.content_id),onClick:e=>{null==B||B({id:D.id,type:D.notification_type,contentId:D.content_id||"",contentType:"persona",isRead:D.is_read},e)},children:(0,a.jsx)("div",{className:"relative w-11 h-14",children:(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[95%] h-[95%] overflow-hidden",style:x.J.Persona,children:(0,a.jsx)(h.A,{className:"w-full h-full object-cover",alt:D.content_title||"Untitled",src:D.content_image_url||null,imageSize:C.M_})})})});break;case"clip_comment":case"scene_comment":K=1===D.total_users?D.content_message:D.content_title,J=(0,a.jsx)(f.A,{href:"/song/".concat(D.content_id,"?show_comments=true"),onClick:e=>{null==B||B({id:D.id,type:D.notification_type,contentId:D.content_id||"",contentType:"clip",isRead:D.is_read},e)},children:(0,a.jsx)(h.A,{className:"w-11 h-14 object-cover rounded-md",alt:D.content_title||"Untitled",src:D.content_image_url||null,imageSize:C.M_})});break;case"comment_like":K=D.content_message,J=(0,a.jsx)(f.A,{href:"/song/".concat(D.content_id,"?show_comments=true"),onClick:e=>{null==B||B({id:D.id,type:D.notification_type,contentId:D.content_id||"",contentType:"clip",isRead:D.is_read},e)},children:(0,a.jsx)(h.A,{className:"w-11 h-14 object-cover rounded-md",alt:D.content_title||"Untitled",src:D.content_image_url||null,imageSize:C.M_})});break;case"comment_reply":1===D.total_users&&(K=D.content_message),J=(0,a.jsx)(f.A,{href:"/song/".concat(D.content_id,"?show_comments=true"),onClick:e=>{null==B||B({id:D.id,type:D.notification_type,contentId:D.content_id||"",contentType:"clip",isRead:D.is_read},e)},children:(0,a.jsx)(h.A,{className:"w-11 h-14 object-cover rounded-md",alt:D.content_title||"Untitled",src:D.content_image_url||null,imageSize:C.M_})})}return(0,s.useEffect)(()=>{G&&(null==H||H({id:D.id,type:D.notification_type,isRead:D.is_read}))},[G,D.id]),(0,a.jsx)("div",{ref:V,children:(0,a.jsx)(c.Ay,{className:(0,d.QP)((0,i.A)("text-base font-normal font-sans","text-secondary border-primary/15"),O),start:(0,a.jsxs)("div",{className:"relative flex justify-center items-center",children:[D.is_read?null:(0,a.jsx)(v.A,{className:(0,i.A)("absolute top-1/2 right-full -translate-y-1/2 mr-1.5 border border-tertiary w-3 h-3",{"cursor-pointer":F}),onClick:F&&(e=>F({id:D.id,type:D.notification_type},e))}),"user_profiles"in D&&(null===(t=D.user_profiles)||void 0===t?void 0:t.length)!==0?(null===(l=D.user_profiles)||void 0===l?void 0:l.length)===1?(0,a.jsx)(g.A,{handle:(null===(o=D.user_profiles)||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.handle)||"unknown",onClick:U&&(e=>{var t,l;U({id:D.id,type:D.notification_type,handle:(null===(l=D.user_profiles)||void 0===l?void 0:null===(t=l[0])||void 0===t?void 0:t.handle)||"unknown",context:"avatar",isRead:D.is_read},e)}),children:(0,a.jsx)(x.A,{displayName:(null===(p=D.user_profiles)||void 0===p?void 0:null===(u=p[0])||void 0===u?void 0:u.display_name)||"",handle:(null===(w=D.user_profiles)||void 0===w?void 0:null===(b=w[0])||void 0===b?void 0:b.handle)||"unknown",src:(null===(A=D.user_profiles)||void 0===A?void 0:null===(k=A[0])||void 0===k?void 0:k.avatar_image_url)||null,className:"w-full"})}):(0,a.jsx)("div",{className:"w-full h-10 flex flex-col",children:null===(S=D.user_profiles)||void 0===S?void 0:S.slice(0,3).reverse().map(e=>(0,a.jsx)(g.A,{handle:e.handle||"unknown",className:"relative flex justify-center items-center flex-grow",children:(0,a.jsx)(x.A,{displayName:e.display_name||"Someone",handle:e.handle||"unknown",src:e.avatar_image_url||null,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-8 border-solid border-2 border-tertiary"})},e.handle))}):(0,a.jsx)(x.A,{displayName:"Suno",src:"https://cdn1.suno.ai/suno-white-bg.jpeg",className:"w-full"})]}),end:J,...W,children:L||(0,a.jsxs)("div",{className:"flex flex-col justify-start items-start gap-0.5",children:[(0,a.jsxs)("p",{className:"text-base leading-tight",children:[(0,a.jsx)(N,{notification:D,onProfileClick:U}),K&&(0,a.jsx)("span",{className:"text-base leading-tight text-secondary",children:["clip_comment","scene_comment","playlist_comment","comment_like","comment_reply"].includes(D.notification_type||"")?": ".concat(K):" '".concat(K,"'")})]}),(0,a.jsx)("p",{className:"text-xs text-primary",title:q.toUTCString(),children:(0,j.fw)(Q,"long",Y("time.justNow"))})]})})})});function A(e){return null==e?new Date:new Date(e)}let S=[["today",e=>A(e).setUTCHours(0,0,0,0),"notification.today"],["yesterday",e=>{let t=A(e);return t.setDate(t.getDate()-1),t.setHours(0,0,0,0)},"notification.yesterday"],["past7Days",e=>{let t=A(e);return t.setDate(t.getDate()-7),t.setHours(0,0,0,0)},["notification.lastNDays",{count:7}]],["past30Days",e=>{let t=A(e);return t.setDate(t.getDate()-30),t.setHours(0,0,0,0)},["notification.lastNDays",{count:30}]],["older",()=>0,"notification.older"]],I=(0,n.PA)(e=>{let{currentTime:t,notifications:l,isLoading:n,onDotClick:d,onProfileClick:m,onContentClick:x,onFollowClick:h,onNotificationView:f,onLoadMore:g,hasMore:v=!0,...y}=e,{t:b}=(0,o.Bd)(),{ref:C}=(0,r.Wx)({onChange:e=>{e&&!n&&v&&g&&g()}}),j=(0,s.useMemo)(()=>{let e,n;let s=[],o=-1;for(let r of l){let l=new Date(r.updated_at).getTime();for(;o<S.length-1&&(null==n||l<=n);)n=(e=S[++o])[1](t);if(e&&l>n){let[t,,l]=e;s.push({type:"heading",content:(0,a.jsx)(u,{className:(0,i.A)({"mt-4":0!==s.length}),children:Array.isArray(l)?b(l[0],l[1]):b(l)},t)}),e=void 0}s.push({type:"notificationV2",content:r})}return s},[b,t,l,l.length]);return(0,a.jsx)("div",{...y,children:j.length?(0,a.jsxs)(a.Fragment,{children:[j.map((e,l)=>"notificationV2"===e.type?(0,a.jsx)(k,{currentTime:t,notification:e.content,onDotClick:d&&((e,t)=>d({...e,index:l},t)),onProfileClick:m&&((e,t)=>m({...e,index:l},t)),onContentClick:x&&((e,t)=>x({...e,index:l},t)),onFollowClick:h&&((e,t)=>h({...e,index:l},t)),onView:f&&(e=>f({...e,index:l}))},e.content.id):e.content),(0,a.jsx)("div",{ref:C,className:"h-px","aria-hidden":"true"}),(0,a.jsx)("div",{className:"py-4 text-center",children:n&&v?(0,a.jsx)(p.A,{className:"inline-block"}):!v&&(0,a.jsxs)("div",{className:"relative py-8",children:[(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, var(--color-background-primary) 50%)"}}),(0,a.jsx)("p",{className:"text-sm text-foreground-secondary/50 relative",children:b("notification.endOfList")})]})})]}):(0,a.jsx)(c.Ay,{className:"border-b-0",children:(0,a.jsx)("p",{className:"flex-grow text-center",children:n?(0,a.jsx)(p.A,{className:"inline-block"}):b("notification.emptyState")})})})})},24962:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(95155),i=l(12115),n=l(97942);let s=e=>{let{extraStyles:t,onClick:l,text:s,icon:o,isDisabled:r=!1,isLoading:d=!1,fullWidth:c,extraClasses:u,textExtraClasses:p="",iconExtraClasses:m="",label:x,backgroundImage:h="/create-button-background.svg",useV4ButtonStyle:f=!1,borderRadius:g}=e,[v,y]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{y(!0)},[]),(0,a.jsxs)(a.Fragment,{children:[v&&(f?(0,a.jsx)("style",{children:"\n            .buttonAnimate {\n              position: relative;\n              display: inline-block;\n              background-image: url('".concat(h,"');\n              background-size: cover;\n              background-position: 50% 50%;\n              overflow: hidden;\n              box-shadow: inset 0 4px 16px rgba(255, 255, 255, 0.20), 0 0 2px 1px rgba(255, 255, 255, 0.15);\n            }")}):(0,a.jsx)("style",{children:"\n          @keyframes randomBackground {\n            0% { background-position: 50% 50%; }\n            25% { background-position: 30% 70%; }\n            50% { background-position: 70% 30%; }\n            75% { background-position: 40% 60%; }\n            100% { background-position: 50% 50%; }\n          }\n\n          .buttonAnimate {\n            position: relative;\n            display: inline-block;\n            background-image: url('".concat(h,"');\n            background-size: cover;\n            background-position: 50% 50%;\n            transition: background 1s ease-in-out;\n            overflow: hidden;\n          }\n\n          .buttonAnimate::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-image: url('/grain.png');\n            background-size: cover;\n            background-repeat: repeat;\n            opacity: 0.5;\n            z-index: 1;\n            pointer-events: none;\n          }\n\n          .buttonAnimate:hover {\n            animation: randomBackground ").concat("/create-button-background.svg"===h?"3s":"160s"," linear infinite;\n          }\n          ")})),(0,a.jsx)("button",{style:t,"aria-label":x,onClick:l,className:"font-sans text-white text-[16px] font-medium p-4 ".concat(g||"rounded-full"," transition duration-300 ease-in-out shadow-lg buttonAnimate ").concat(c?"w-full":""," ").concat(r?"opacity-50 cursor-not-allowed":"hover:opacity-90"," ").concat(u||""," items-center justify-center"),disabled:r,children:(0,a.jsxs)("div",{className:"flex items-center justify-center h-full w-full",children:[d?(0,a.jsx)("span",{className:"mr-2",children:(0,a.jsx)(n.A,{})}):o&&(0,a.jsx)("span",{className:m||(s?"mr-2":""),children:o}),(0,a.jsx)("span",{className:p,children:s})]})})]})}},26661:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(95155),i=l(39688),n=l(76956),s=l(50649);let o=e=>{let{as:t="span",className:l,...o}=e,r="absolute inset-0 w-full h-full";return(0,a.jsxs)(t,{className:(0,i.QP)("block relative w-4 h-4",l),...o,children:[(0,a.jsx)(s.udU,{"data-icon-play":!0,className:(0,i.QP)('ancestor-data-[media-playing="true"]:hidden',r)}),(0,a.jsx)(s.E$n,{"data-icon-pause":!0,className:(0,i.QP)("hidden",'ancestor-data-[media-playing="false"]:hidden','ancestor-data-[media-playing="true"]:hidden ancestor-data-[media-playing="true"]:group-hover:block',r)}),(0,a.jsx)(n.vv,{"data-icon-playing":!0,className:(0,i.QP)("hidden",'ancestor-data-[media-playing="false"]:hidden','ancestor-data-[media-playing="true"]:block ancestor-data-[media-playing="true"]:group-hover:hidden',r)})]})}},26700:(e,t,l)=>{l.d(t,{P:()=>u});var a=l(95155),i=l(52596),n=l(12115),s=l(47650),o=l(77119),r=l(63808),d=l(7132),c=l(74955);let u=e=>{var t,l,u;let{positionRef:p,position:m,title:x,description:h,offsetLeft:f=0,offsetTop:g=0,isCentered:v=!1,onDismiss:y}=e,[b,C]=(0,n.useState)(!1),[j,w]=(0,n.useState)(null),[N,k]=(0,n.useState)(!1),{session:A}=(0,o.gy)(),S=(0,n.useRef)(null);return(0,n.useEffect)(()=>{!b&&A.createOnboardingContext.loggedSteps.includes(A.createOnboardingContext.step)&&(k(!0),y&&y(),A.clearTooltip()),C(!0)},[]),(0,n.useEffect)(()=>{if(S.current){var e,t;A.logCreateOnboardingStepMounted(null===(e=A.createOnboardingContext)||void 0===e?void 0:e.step),(0,r.Ay)({actionName:"CreateOnboardingTooltipShown",context:{step:null===(t=A.createOnboardingContext)||void 0===t?void 0:t.step}})}},[S.current]),(0,n.useEffect)(()=>{var e;w(null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect())},[null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect()]),!N&&b&&j?s.createPortal((0,a.jsxs)("div",{className:(0,i.A)("hidden md:block absolute w-[250px] h-[100px] z-[".concat(d.TV,"]")),ref:S,style:"bottom-right"===m||"bottom-left"===m?{top:((null==j?void 0:j.bottom)||0)+g,left:((null==j?void 0:j.left)||0)+(v?((null==j?void 0:j.width)||0)/2:0)+f}:{bottom:"calc(100% - ".concat((null===(l=p.current)||void 0===l?void 0:l.getBoundingClientRect().top)-(null===(u=p.current)||void 0===u?void 0:u.getBoundingClientRect().height)+g,"px)"),left:((null==j?void 0:j.left)||0)+(v?((null==j?void 0:j.width)||0)/2:0)+f},children:["bottom-right"===m||"bottom-left"===m?(0,a.jsx)("div",{className:(0,i.A)("absolute bg-gray-200 rounded-[5px] w-[20px] h-[20px] rotate-45 z-[".concat(d.TV,"]"))}):null,(0,a.jsxs)("div",{className:(0,i.A)("absolute bg-gray-200 p-4 flex flex-col rounded-[20px] max-w-[250px] z-[".concat(d.TV,"]"),{"mt-2":"bottom-right"===m||"bottom-left"===m,"-mt-2":"top-right"===m||"top-left"===m,"ml-[-40px]":"top-right"===m||"bottom-right"===m,"ml-[-200px]":"top-left"===m||"bottom-left"===m}),children:[(0,a.jsx)("h3",{className:"font-bold text-primary text-lg pb-1",children:x}),h?(0,a.jsx)("span",{className:"text-primary/70 text-base",children:h}):null,(0,a.jsx)("div",{className:"w-full flex flex-row-reverse py-2",children:(0,a.jsx)(c.Ay,{variant:c.Ak.Primary,onClick:()=>{var e;k(!0),A.clearTooltip(),y&&y(),(0,r.Ay)({actionName:"CreateOnboardingTooltipDismissed",context:{step:null===(e=A.createOnboardingContext)||void 0===e?void 0:e.step}})},children:"Got it"})}),"top-right"===m||"top-left"===m?(0,a.jsx)("div",{className:(0,i.A)("absolute bottom-[-8px] bg-gray-200 rounded-[5px] w-[20px] h-[20px] rotate-45 z-[".concat(d.TV,"]"))}):null]})]}),document.body):null}},26811:(e,t,l)=>{l.d(t,{A:()=>c});var a=l(95155),i=l(63438),n=l(77119),s=l(65015),o=l(7132),r=l(71921),d=l(57851);let c=(0,i.PA)(e=>{var t,l,i,c,u;let{persona:p,showAvatar:m=!0,showUser:x=!0,fontSize:h,size:f="medium"}=e,g={small:"text-sm",medium:"text-sm",large:"text-base"},{session:v}=(0,n.gy)();return p&&!p.is_trashed&&(p.is_public||p.user_handle===(null===(t=v.user)||void 0===t?void 0:t.handle))&&p&&p.id?(0,a.jsxs)("div",{className:"flex flex-row items-center font-sans font-medium text-primary ".concat(g[f]),children:[m?(0,a.jsx)("div",{className:"relative flex-none ".concat({small:"h-4 w-4",medium:"h-8 w-8",large:"h-10 w-10"}[f]," ").concat((null===(l=v.flags)||void 0===l?void 0:l.remix)?"scale-75 -mr-0.5":"mr-2"," cursor-pointer"),children:(0,a.jsx)("div",{className:"absolute top-1/2 ".concat((null===(i=v.flags)||void 0===i?void 0:i.remix)?"left-1/4":"left-1/2"," transform -translate-x-1/2 -translate-y-1/2 w-[95%] h-[95%] overflow-hidden"),style:r.J.Persona,children:(0,a.jsx)(d.A,{imageSize:o.M_,className:"object-cover w-full h-full",src:p.image_s3_id||o.tL,alt:"Persona picture for ".concat(p.name)})})}):null,(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{title:p.name||"Untitled Persona",className:"line-clamp-1 flex-1 hover:underline max-w-full break-all",style:{fontSize:h||g[f]},children:p.name||"Untitled Persona"}),x&&(0,a.jsxs)("div",{className:"flex items-center font-sans text-secondary my-0 ".concat("large"===f?"text-sm":"text-xs"),children:[(0,a.jsx)("div",{className:"".concat((null===(c=v.flags)||void 0===c?void 0:c.remix)?"mr-1":"mr-2"),children:"By"}),!(null===(u=v.flags)||void 0===u?void 0:u.remix)&&(0,a.jsx)(d.A,{className:"rounded-full h-4 w-4 mr-2",src:p.user_image_url||null,imageSize:o.M_,alt:"User avatar"}),(0,a.jsx)("div",{className:"line-clamp-1 flex-1 hover:underline max-w-full break-all",children:(0,a.jsx)(s.A,{href:"/@".concat(p.user_handle),children:p.user_display_name||p.user_handle||"Untitled User"})})]})]})]}):null})},27235:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(95155),i=l(52596);l(12115);var n=l(39688),s=l(76956),o=l(50649);let r=e=>{let{className:t,icon:l,...r}=e;return(0,a.jsx)("button",{className:(0,n.QP)((0,i.A)("flex items-center justify-center","rounded-full p-4 w-14 h-14","backdrop-blur-xl bg-vinylBlack-darker/60","border-none outline-none"),t),...r,children:"playing"===l?(0,a.jsx)(s.vv,{className:"w-6 h-6"}):"pause"===l?(0,a.jsx)(o.E$n,{className:"w-5 h-5"}):(0,a.jsx)(o.udU,{className:"w-5 h-5"})})}},27869:(e,t,l)=>{l.d(t,{Ju:()=>i,Wp:()=>o,qC:()=>s,xJ:()=>n}),l(7132),l(61932);let a=l(87358).env.BASE_URL||window.location.origin;function i(e,t){let l;if(!t)return e;let a=(l="",Object.entries(t).forEach(e=>{let[t,a]=e;switch(l&&(l+="&"),typeof a){case"string":l+="".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(a));break;case"boolean":case"number":l+="".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(a.toString()))}}),l);return"".concat(e).concat(a?"?".concat(a):"")}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"embed",l=arguments.length>2?arguments[2]:void 0;return i("profile"===t?"".concat(a||"","/@").concat(e):"".concat(a||"","/").concat(t,"/").concat(e),l)}function s(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(e,"embed",t)}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"song",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{width:a=760,height:i=240,...o}=l,r=s(e,t,o),d='<a href="'.concat(n(e,t),'">Listen on Suno</a>');return'<iframe src="'.concat(r,'" width="').concat(a,'" height="').concat(i,'">').concat(d,"</iframe>")}},32194:(e,t,l)=>{l.d(t,{A:()=>d});var a=l(95155),i=l(12115),n=l(74955),s=l(50649),o=l(63808),r=l(97942);let d=e=>{let{lyrics:t,isLoading:l,generateLyrics:d}=e,c=(0,i.useCallback)(()=>{(0,o.Ay)({actionName:"GenerateLyricsButtonClicked",context:{lyrics:t}}),d()},[d,t]),u=l?"":t?"Write About: ".concat(t.slice(0,8)).concat(t.length>8?"...":""):"Surprise Me",p=l?(0,a.jsx)("span",{className:"flex items-center justify-center size-[24px]",children:(0,a.jsx)(r.A,{})}):t?null:s.jGc;return(0,a.jsx)(n.Ay,{onClick:c,shape:n.aH.Pill,size:n.Mp.Small,variant:n.Ak.Secondary,icon:p,disabled:l,children:u})}},33933:(e,t,l)=>{l.d(t,{ro:()=>I,y4:()=>S});var a=l(95155),i=l(27016),n=l(5295),s=l(52596),o=l(63438),r=l(35695),d=l(12115),c=l(39688),u=l(77119),p=l(74955),m=l(71921),x=l(65015),h=l(88066),f=l(52512),g=l(99082),v=l(90244),y=l(37757),b=l(43783),C=l(63808),j=l(78294),w=l(7132),N=l(61932);let k=(0,o.PA)(e=>{let{clipId:t,index:l,playCount:s,likeCount:o,commentCount:c,listId:m,listTitle:x,listContextId:h}=e,{clips:f}=(0,u.gy)(),g=f.clipById[t],v=(0,j.cW)(g),[y,w]=(0,d.useState)(o||0),{isSignedIn:k}=(0,i.d)(),A=(0,n.ho)(),S=(0,r.usePathname)();return(0,a.jsx)(p.Ay,{variant:p.Ak.Tertiary,size:p.Mp.Micro,shape:p.aH.Rounded,icon:b.A,active:v,onClick:e=>{e.stopPropagation(),e.preventDefault();let a=!(0,j.cW)(g);if((0,C.Ay)({actionName:"SongFeedItemLikeClicked",principalObjectType:"song",principalObjectValue:t,context:{index:l,playCount:s,likeCount:y,commentCount:c,sectionId:m,sectionTitle:x,isLiked:a,sectionContextId:h}}),k){if(f.isUpdatingClipReaction)return;f.likeClip(t,a),w(e=>Math.max((e||0)+(a?1:-1),0))}else A.openSignUp({...(0,N.Of)(S)})},"aria-label":"Like Count",children:(0,N.Nr)(y)})}),A=e=>{let{className:t,playCount:l,commentCount:i,onPlayClick:n,clipId:s,index:o,likeCount:r,listId:d,listTitle:u,listContextId:m,...x}=e;return(0,a.jsxs)("div",{className:(0,c.QP)("flex flex-row gap-1",t),...x,children:[(0,a.jsx)(p.Ay,{variant:p.Ak.Tertiary,size:p.Mp.Micro,shape:p.aH.Rounded,icon:y.A,"aria-label":"Play Count",onClick:n,active:!1,children:(0,N.Nr)(l)}),(0,a.jsx)(k,{clipId:s,index:o,playCount:l,likeCount:r,commentCount:i,listId:d,listTitle:u,listContextId:m}),(0,a.jsx)(p.Ay,{variant:p.Ak.Tertiary,size:p.Mp.Micro,shape:p.aH.Rounded,icon:v.A,active:!1,href:"/song/".concat(s,"?show_comments=true"),onClick:()=>{(0,C.Ay)({actionName:"SongFeedItemCommentsClicked",principalObjectType:"song",principalObjectValue:s,context:{index:o,playCount:l,likeCount:r,commentCount:i,sectionId:d,sectionTitle:u,sectionContextId:m}})},"aria-label":"Comment Count",children:(0,N.Nr)(i)})]})},S=e=>{let{className:t,displayName:l,handle:i,imageUrl:n,isVerified:o=(0,N.aV)({handle:i||""}),personaId:r,personaImageUrl:d,personaDisplayName:u,index:p,playCount:f,likeCount:v,commentCount:y,listId:b,listTitle:j,clipId:k,listContextId:A,...S}=e,I=!!r;return(0,a.jsxs)("div",{className:(0,c.QP)("w-full flex flex-row items-center gap-1","text-foreground-tertiary text-xs font-sans font-medium",t),...S,children:[(0,a.jsxs)(h.A,{className:(0,s.A)("flex flex-row items-center gap-1.5",{"min-w-1/2 shrink-[0.1]":I}),handle:i,title:l||"@".concat(i),onClick:()=>{(0,C.Ay)({actionName:"SongFeedItemArtistClicked",principalObjectType:"song",principalObjectValue:k,context:{index:p,playCount:f,likeCount:v,commentCount:y,sectionId:b,sectionTitle:j,handle:i,displayName:l||"",sectionContextId:A}})},children:[(0,a.jsxs)("div",{className:"relative block",children:[(0,a.jsx)(m.A,{className:"w-3 h-3",src:n||null,imageSize:w.M_,alt:"Profile avatar"}),o&&(0,a.jsx)(g.A,{className:"absolute end-0 bottom-0 drop-shadow-avatarOverlay w-2 h-2"})]}),(0,a.jsx)("div",{className:"line-clamp-1 text-ellipsis break-all",children:l||"@".concat(i)})]}),I&&(0,a.jsxs)(a.Fragment,{children:["\xb7",(0,a.jsxs)(x.A,{className:"flex flex-row items-center gap-1.5 hover:underline",href:"/persona/".concat(r),onClick:()=>{(0,C.Ay)({actionName:"SongFeedItemPersonaClicked",principalObjectType:"song",principalObjectValue:k,context:{index:p,playCount:f,likeCount:v,commentCount:y,sectionId:b,sectionTitle:j,personaId:r,personaDisplayName:u||"",sectionContextId:A}})},children:[(0,a.jsx)(m.A,{imageSize:w.M_,className:"w-4 h-4",src:d||"",alt:"Persona image",maskShape:m.J.Persona}),(0,a.jsx)("div",{className:"line-clamp-1 text-ellipsis break-all",children:u})]})]})]})},I=e=>{let{className:t,children:l,index:i,listId:n,listTitle:o,title:r,tags:d,displayName:c,handle:u,imageUrl:p,personaId:m,personaName:h,personaImageUrl:g,playCount:v,likeCount:y,commentCount:b,clipId:j,listContextId:N,onPlayClick:k,...I}=e;return(0,a.jsxs)("div",{className:(0,s.A)("flex flex-col gap-1",t),...I,children:[(0,a.jsxs)("div",{className:"flex flex-row gap-1 items-start justify-stretch px-1",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-1 min-w-0",children:[(0,a.jsx)(x.A,{className:(0,s.A)(w.yC,"text-foreground-primary line-clamp-1 hover:underline cursor-pointer break-words"),href:"/song/".concat(j),title:r,onClick:()=>{(0,C.Ay)({actionName:"SongFeedItemTitleClicked",principalObjectType:"song",principalObjectValue:j,context:{index:i,playCount:v,likeCount:y,commentCount:b,sectionId:n,sectionTitle:o,sectionContextId:N}})},children:r||"Untitled"}),(0,a.jsx)(f.A,{className:(0,s.A)(w.ds,"text-foreground-tertiary line-clamp-1"),tags:d.length?d:[w.Lo],renderTag:d.length?void 0:null})]}),l]}),(0,a.jsxs)("div",{className:"flex flex-row gap-1 items-center justify-stretch overflow-x-clip px-1",children:[(0,a.jsx)(S,{clipId:j,index:i,playCount:v,likeCount:y,commentCount:b,listId:n,listTitle:o,listContextId:N,className:(0,s.A)(w.ds,"text-foreground-primary"),displayName:c,handle:u,imageUrl:p,personaId:m,personaDisplayName:h,personaImageUrl:g}),(0,a.jsx)(A,{playCount:v,commentCount:b,onPlayClick:k,clipId:j,index:i,likeCount:y,listId:n,listTitle:o,listContextId:N})]})]})}},34812:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(95155),i=l(52017),n=l(6798),s=l(12115),o=l(39688);let r=e=>{var t,l;let{selections:r,onChange:d,initialSelection:c,selectorButtonClassName:u}=e,{isOpen:p,onOpen:m,onClose:x}=(0,i.useDisclosure)(),h=(0,s.useRef)(null),f=(0,s.useRef)(null),[g,v]=(0,s.useState)(null==r?void 0:null===(t=r[0])||void 0===t?void 0:t.key);(0,s.useEffect)(()=>{var e;v(c||(null==r?void 0:null===(e=r[0])||void 0===e?void 0:e.key))},[c]),(0,n.useOutsideClick)({ref:h,handler:e=>{var t;(null===(t=f.current)||void 0===t?void 0:t.contains(e.target))||x()}});let y=()=>{p?x():m()};return(0,a.jsxs)("div",{className:"relative inline-flex justify-center text-left font-sans",children:[(0,a.jsxs)("div",{tabIndex:0,className:(0,o.QP)("inline-flex items-center px-2 md:px-3 py-1 bg-tertiary text-primary font-medium text-sm rounded-lg cursor-pointer select-none w-18",u),ref:f,onClick:e=>{e.preventDefault(),e.stopPropagation(),y()},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),y())},children:[(0,a.jsx)("span",{className:"line-clamp-1",children:null===(l=r.find(e=>e.key===g))||void 0===l?void 0:l.name}),(0,a.jsx)("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06 0L10 10.93l3.71-3.72a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 010-1.06z",clipRule:"evenodd"})})]}),p&&(0,a.jsx)("div",{className:"absolute mt-4 w-32 rounded-md shadow-lg bg-tertiary z-[100] overflow-y-auto",ref:h,style:{left:"0px",right:"0px",top:"16px",maxHeight:"200px",overflowY:"auto"},children:(0,a.jsx)("div",{className:"py-1",children:r.map(e=>(0,a.jsx)("div",{tabIndex:0,className:"flex items-center justify-between px-3 py-1 text-sm text-primary cursor-pointer hover:bg-quaternary",onClick:()=>{v(e.key),d(e.key),x()},onKeyDown:t=>{"Enter"===t.key&&(v(e.key),d(e.key),x())},children:(0,a.jsx)("div",{className:"font-medium font-sans",children:e.name})},e.key))})})]})}},35737:(e,t,l)=>{l.d(t,{A:()=>N});var a=l(95155),i=l(46391),n=l(63438),s=l(12115),o=l(77119),r=l(63808),d=l(7132),c=l(74955),u=l(4837);let p=e=>{switch(e){case"profile":return"Claim your Suno username";case"birthday":return"When is your birthday?";case"preferences":return"What genres are you into?";case"like":case"share":case"complete":return"Great! Here are some tips for getting the most out of Suno";default:return"Welcome"}},m=(0,n.PA)(e=>{var t,l,i;let{isOpen:n,onClose:d,reclaim:c=!1}=e,[m,x]=(0,s.useState)("preferences"),[C,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),{library:k,session:A}=(0,o.gy)(),[S,I]=(0,s.useState)((null===(t=A.user)||void 0===t?void 0:t.display_name)||""),[P,_]=(0,s.useState)((null===(l=A.user)||void 0===l?void 0:l.handle)||""),[M,T]=(0,s.useState)((null===(i=A.user)||void 0===i?void 0:i.profile_description)||""),[E,L]=(0,s.useState)({}),[O,R]=(0,s.useState)("");(0,s.useEffect)(()=>{(0,r.Ay)({actionName:c?"CompleteProfileModalViewed":"WelcomeModalViewed"})},[c]),(0,s.useEffect)(()=>{if(n){var e,t,l;["/hero/onboarding/like-songs.jpg","/hero/onboarding/share-songs.jpg"].forEach(e=>{new Image().src=e}),I((null===(e=A.user)||void 0===e?void 0:e.display_name)||""),_((null===(t=A.user)||void 0===t?void 0:t.handle)||""),T((null===(l=A.user)||void 0===l?void 0:l.profile_description)||""),L({}),(async()=>{await Promise.all([A.getUserConfig(),(async()=>{let{data:e}=await k.apiClient.GET("/api/user/me");(null==e?void 0:e.birthday)&&R(e.birthday)})()])})()}},[n,A.user,k.apiClient]),(0,s.useEffect)(()=>{n&&(0,r.Ay)({actionName:c?"CompleteProfileModalPageViewed":"WelcomeModalPageViewed",context:{page:m}})},[m,n,c]);let D=e=>{(0,r.Ay)({actionName:c?"CompleteProfileModalClosed":"WelcomeModalClosed",context:{closedOnPage:m,method:e}}),d()},F=(e,t)=>{(0,r.Ay)({actionName:c?"CompleteProfileModalBackClicked":"WelcomeModalBackClicked",context:{fromPage:e,toPage:t}}),x(t)},B=e=>{(0,r.Ay)({actionName:c?"CompleteProfileModalStyleTagAdded":"WelcomeModalStyleTagAdded",context:{tagName:e}})},z=e=>{(0,r.Ay)({actionName:c?"CompleteProfileModalStyleTagsSubmitted":"WelcomeModalStyleTagsSubmitted",context:{tags:e}})};if(!n)return null;let U=async()=>{(0,r.Ay)({actionName:c?"CompleteProfileModalProfileSubmitted":"WelcomeModalProfileSubmitted",context:{displayName:S,handle:P,profileDescription:M||null}});let e=await k.apiClient.POST("/api/profiles/",{body:{handle:P,display_name:S,profile_description:M}});if(e.error){let t=e.error;L({...E,...t})}else A.user.display_name=S,A.user.handle=P,A.user.profile_description=M,x("birthday")};return(0,a.jsx)(u.A,{title:p(m),onClose:()=>D("close"),titleClassName:"text-[24px] pr-[5px] font-serif font-light pt-[10px] leading-[34px] max-w-[343px]",titleWrapperClasses:"p-6 pb-[4px]",wrapperClasses:"overflow-y-auto",contentWrapperClasses:'!bg-[url("/hero/onboarding/aura-hero.jpg")] !bg-cover !bg-top',closeButtonClasses:"absolute right-[10px] top-[10px] h-[40px] w-[40px] bg-white/0 opacity-50",withAuraBackground:!1,disablePadding:!0,withHorizontalPadding:!0,disableOutsideClick:!0,children:(()=>{switch(m){case"profile":return(0,a.jsx)(h,{displayName:S,handle:P,errors:E,setDisplayName:I,setHandle:_,setErrors:L,onSubmit:U,onSkip:()=>D("skip"),onBack:()=>F("profile","preferences")});case"birthday":return(0,a.jsx)(f,{onNext:()=>D("complete"),onSkip:()=>D("skip"),onBack:()=>F("birthday","profile"),initialBirthday:O,setBirthday:R,reclaim:c});case"preferences":return(0,a.jsx)(g,{onNext:()=>x("profile"),onSkip:()=>D("skip"),onStyleTagAdd:B,onStyleTagsSubmit:z,buttonText:"Next",reclaim:c});case"like":return(0,a.jsx)(v,{onNext:()=>x("share"),onBack:()=>F("like","preferences"),onSkip:()=>D("skip"),setLikeImageLoaded:j,likeImageLoaded:C});case"share":return(0,a.jsx)(y,{onNext:()=>x("complete"),onBack:()=>F("share","like"),onSkip:()=>D("skip"),onFinish:()=>D("complete"),setShareImageLoaded:N,shareImageLoaded:w});case"complete":return(0,a.jsx)(b,{onFinish:()=>D("complete"),onSkip:()=>D("skip"),onBack:()=>F("complete","share")});default:return null}})()})}),x=e=>{let{totalSteps:t,currentStep:l}=e;return(0,a.jsx)("div",{className:"w-full h-[1px] bg-[#3F3F3F] flex gap-[6px]",children:Array.from({length:t},(e,t)=>(0,a.jsx)("div",{className:"flex-1 rounded-[1px] h-[1px] ".concat(t<l?"bg-[#FFFFFF]":"bg-[#797979]")},t))})},h=e=>{let{displayName:t,handle:l,errors:i,setDisplayName:n,setHandle:s,setErrors:o,onSubmit:r,onSkip:d,onBack:u}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"p-6 pt-0",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-[20px] mt-[18px]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-[10px]",children:[(0,a.jsx)("label",{className:"text-[16px] font-medium leading-normal",children:"Username *"}),i.handle&&(0,a.jsx)("p",{className:"text-[#FF5757] text-[12px] font-medium",children:i.handle})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-[20px] top-1/2 -translate-y-1/2 text-secondary pointer-events-none",children:"@"}),(0,a.jsx)("input",{type:"text",className:"w-full bg-transparent pl-[35px] pr-[20px] py-[16.5px] text-primary border rounded-lg focus:outline-none focus:border focus:border-0.5 focus:shadow-[0_0_0_0.5px_primary] placeholder-secondary placeholder-opacity-70 ".concat(i.handle?"border-[#FF5757] focus:border-[#FF5757] focus:shadow-[0_0_0_0.5px_accentPink]":"border-quaternary focus:border-primary"),value:l,maxLength:40,placeholder:"username",onChange:e=>{s(e.target.value),o({...i,handle:void 0})}})]})]}),(0,a.jsxs)("div",{className:"mb-[20px]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-[10px]",children:[(0,a.jsx)("label",{className:"text-[16px] font-medium leading-normal",children:"Display Name *"}),i.display_name&&(0,a.jsx)("p",{className:"text-[#FF5757] text-[12px] font-medium",children:i.display_name})]}),(0,a.jsx)("input",{type:"text",className:"w-full bg-transparent px-[20px] py-[16.5px] text-primary border rounded-lg focus:outline-none focus:border focus:border-0.5 focus:shadow-[0_0_0_0.5px_primary] placeholder-secondary placeholder-opacity-70 ".concat(i.display_name?"border-accentPink focus:border-accentPink focus:shadow-[0_0_0_0.5px_accentPink]":"border-quaternary focus:border-primary"),value:t,maxLength:40,placeholder:"Display Name",onChange:e=>{n(e.target.value),o({...i,display_name:void 0})}})]})]})}),(0,a.jsx)(x,{totalSteps:3,currentStep:2}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex justify-between gap-[10px]",children:[(0,a.jsx)("button",{onClick:u,className:"text-white/60 hover:text-white transition-colors",children:"Back"}),(0,a.jsx)(c.Ay,{variant:c.Ak.DarkPrimary,size:c.Mp.Medium,onClick:r||d,className:"px-[40px] py-[15px] hidden",children:"Skip"}),(0,a.jsx)(c.Ay,{variant:c.Ak.Primary,size:c.Mp.Medium,onClick:r,disabled:!C(t)||!j(l),className:"px-[40px] py-[15px]",children:"Next"})]})})]})},f=e=>{let{onNext:t,onSkip:l,onBack:i,initialBirthday:n="",setBirthday:d,reclaim:u=!1}=e,{library:p,session:m}=(0,o.gy)(),[h,f]=(0,s.useState)(n),[g,v]=(0,s.useState)(""),[y,b]=(0,s.useState)(!1),C=e=>{if(!e)return!0;let t=new Date(e);return t>new Date||1850>t.getFullYear()||!t.getTime()?(v("Please enter a valid date"),!1):(v(""),!0)},j=async()=>{if(h){var e,l,a;b(!0),(0,r.Ay)({actionName:u?"CompleteProfileModalBirthdaySubmitted":"WelcomeModalBirthdaySubmitted",context:{birthday:h}});let t=await p.apiClient.POST("/api/profiles/",{body:{birth_date:h,display_name:null===(e=m.user)||void 0===e?void 0:e.display_name,handle:null===(l=m.user)||void 0===l?void 0:l.handle,profile_description:null===(a=m.user)||void 0===a?void 0:a.profile_description}});if(b(!1),t.error){v("Failed to update birthday. Please try again.");return}m.user&&(m.user.birthday=h),d(h)}t()};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"p-6 pt-0",children:[(0,a.jsx)("p",{className:"text-white opacity-60 text-base mb-[25px] font-normal leading-normal tracking-[0.16px]",children:"We want to do something cool when it rolls around."}),(0,a.jsx)("div",{className:"mb-[20px] mt-[14px]",children:(0,a.jsxs)("div",{className:"mb-[20px]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-[10px]",children:[(0,a.jsxs)("label",{className:"text-[16px] font-medium leading-normal",children:["Birthday"," ",(0,a.jsx)("span",{className:"opacity-50 text-[12px]",children:" (MM/DD/YYYY)"})]}),g&&(0,a.jsx)("p",{className:"text-[#FF5757] text-[12px] font-medium",children:g})]}),(0,a.jsx)("input",{type:"date",value:h,onChange:e=>{let t=e.target.value;f(t),10===t.length?C(t):v("")},placeholder:"MM/DD/YYYY",className:"w-full uppercase bg-transparent px-[20px] py-[16.5px] text-primary border rounded-lg focus:outline-none focus:border focus:border-0.5 focus:shadow-[0_0_0_0.5px_primary] placeholder-secondary placeholder-opacity-70 [&::-webkit-calendar-picker-indicator]:opacity-0 [&::-webkit-calendar-picker-indicator]:hidden ".concat(g?"border-[#FF5757] focus:border-[#FF5757] focus:shadow-[0_0_0_0.5px_#FF5757]":"border-quaternary focus:border-primary")})]})})]}),(0,a.jsx)(x,{totalSteps:3,currentStep:3}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("button",{onClick:i,className:"text-white/90 hover:text-white transition-colors text-[16px] font-normal leading-[100%]",children:"Back"}),(0,a.jsxs)("div",{className:"flex gap-[10px]",children:[(0,a.jsx)(c.Ay,{size:c.Mp.Medium,variant:c.Ak.DarkPrimary,onClick:j||l,className:"px-[40px] py-[15px]",children:"Skip"}),(0,a.jsx)(c.Ay,{size:c.Mp.Medium,variant:c.Ak.Primary,onClick:j,disabled:!!g||h.length>0&&h.includes("_")||y,className:"px-[40px] py-[15px]",children:y?"Saving...":"Done"})]})]})})]})},g=e=>{let{onNext:t,onStyleTagAdd:l,onStyleTagsSubmit:n,buttonText:r,reclaim:u=!1}=e,{session:p}=(0,o.gy)(),m=(0,i.useStatsigClient)(),[h,f]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[y,b]=(0,s.useState)(""),[C,j]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let e=m.getDynamicConfig("priority-genres").get("genres",[]),t=p.preferredTags||[];v(t);let l=e.length>0?e:d.Mp,a=l.filter(e=>!t.includes(e)).sort(()=>Math.random()-.5),i=d.BX.filter(e=>!t.includes(e)&&!l.includes(e)).sort(()=>Math.random()-.5);f([...t,...a,...i])}catch(t){console.error("Failed to load user preferences:",t);let e=p.preferredTags||[];v(e),f([...e,...d.Mp.filter(t=>!e.includes(t)).sort(()=>Math.random()-.5),...d.BX.filter(t=>!e.includes(t)&&!d.Mp.includes(t)).sort(()=>Math.random()-.5)])}finally{j(!1)}})()},[m,p.userConfigIsLoaded]);let w=e=>{let t=!1;v(a=>a.includes(e)?a.filter(t=>t!==e):(t||(l(e),t=!0),[...a,e]))},N=e=>{let t=e.trim();t&&(h.includes(t)?(f(e=>[t,...e.filter(e=>e!==t)]),g.includes(t)||v(e=>[...e,t])):(f(e=>[t,...e]),v(e=>[...e,t])),l(t),b(""))},k=async()=>{try{await p.apiClient.POST("/api/user/update_user_config/",{body:{preferred_tags:g}}),p.preferredTags=g,n(g),t()}catch(e){console.error("Failed to save preferences:",e)}};return C?(0,a.jsx)("div",{className:"p-6 flex items-center justify-center",children:(0,a.jsx)("p",{children:"Loading preferences..."})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"p-6 pt-0",children:[(0,a.jsx)("p",{className:"text-white opacity-60 text-base mb-[25px] font-normal leading-normal tracking-[0.16px]",children:"Pick at least 3. This will help us tailor our taste for you."}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-6 max-h-[310px] overflow-y-auto",children:h.map(e=>(0,a.jsx)("button",{onClick:()=>w(e),className:"px-[12px] py-[8px] rounded-[54px] text-[18px] transition-colors backdrop-blur-[27px] ".concat(g.includes(e)?"bg-white text-black border-[0.5px] border-white/17":"bg-white/10 text-primary border border-primary/20 hover:border-primary/40"),children:e},e))}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("input",{type:"text",value:y,onChange:e=>{let t=e.target.value;b(t),t.endsWith(",")&&N(t.slice(0,-1))},onKeyDown:e=>{"Enter"===e.key&&y.trim()&&(e.preventDefault(),N(y))},placeholder:"Enter your own genres",className:"w-full bg-transparent px-4 py-2 rounded-lg text-primary border border-quaternary focus:outline-none focus:border-primary"})})]}),(0,a.jsx)(x,{totalSteps:3,currentStep:1}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"flex justify-end items-center",children:(0,a.jsxs)("div",{className:"flex gap-[10px]",children:[(0,a.jsx)(c.Ay,{size:c.Mp.Medium,variant:c.Ak.DarkPrimary,onClick:k,className:"px-[40px] py-[15px]",children:"Skip"}),(0,a.jsx)(c.Ay,{size:c.Mp.Medium,variant:c.Ak.Primary,onClick:k,disabled:C,className:"px-[40px] py-[15px]",children:g.length>0?r:"Next"})]})})})]})},v=e=>{let{onNext:t,onSkip:l,onBack:i,setLikeImageLoaded:n,likeImageLoaded:s}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"p-6 pt-0",children:(0,a.jsxs)("div",{className:"mb-[20px] mt-[14px]",children:[(0,a.jsx)("div",{children:(0,a.jsx)(w,{src:"/hero/onboarding/like-songs.jpg",alt:"Like songs illustration",onLoad:()=>n(!0),loaded:s})}),(0,a.jsx)("p",{className:"text-[18px] font-semibold leading-[24px] tracking-[0.18px]",children:"Dig your track?"}),(0,a.jsx)("p",{className:"text-[18px] font-normal leading-[24px] tracking-[0.18px] max-w-[346px]",children:"Hit like to keep it handy and help us suggest more songs you'll vibe with."})]})}),(0,a.jsx)(x,{totalSteps:5,currentStep:4}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("button",{onClick:i,className:"text-white/60 hover:text-white transition-colors",children:"Back"}),(0,a.jsxs)("div",{className:"flex gap-[10px]",children:[(0,a.jsx)(c.Ay,{size:c.Mp.Medium,variant:c.Ak.DarkPrimary,onClick:l,className:"px-[40px] py-[15px]",children:"Skip"}),(0,a.jsx)(c.Ay,{size:c.Mp.Medium,variant:c.Ak.Primary,onClick:t,className:"px-[40px] py-[15px]",children:"Next"})]})]})})]})},y=e=>{let{onNext:t,onSkip:l,onBack:i,setShareImageLoaded:n,shareImageLoaded:s,onFinish:o}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"p-6 pt-0",children:(0,a.jsxs)("div",{className:"mb-[20px] mt-[14px]",children:[(0,a.jsx)("div",{children:(0,a.jsx)(w,{src:"/hero/onboarding/share-songs.jpg",alt:"Share songs illustration",onLoad:()=>n(!0),loaded:s})}),(0,a.jsx)("p",{className:"text-[18px] font-semibold leading-[24px] tracking-[0.18px]",children:"Share your creations"}),(0,a.jsx)("p",{className:"text-[18px] font-normal leading-[24px] tracking-[0.18px] max-w-[373px]",children:"Share your creation and let your friends join the fun!"})]})}),(0,a.jsx)(x,{totalSteps:5,currentStep:5}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("button",{onClick:i,className:"text-white/60 hover:text-white transition-colors",children:"Back"}),(0,a.jsxs)("div",{className:"flex gap-[10px]",children:[(0,a.jsx)(c.Ay,{size:c.Mp.Medium,variant:c.Ak.DarkPrimary,onClick:l,className:"px-[40px] py-[15px]",children:"Skip"}),(0,a.jsx)(c.Ay,{size:c.Mp.Medium,variant:c.Ak.Primary,onClick:o||t,className:"px-[40px] py-[15px]",children:"Done"})]})]})})]})},b=e=>{let{onFinish:t,onSkip:l,onBack:i}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"p-6 pt-0",children:(0,a.jsxs)("div",{className:"mb-[20px] mt-[14px]",children:[(0,a.jsx)("div",{children:(0,a.jsx)(w,{src:"/hero/onboarding/like-songs.jpg",alt:"Like songs illustration"})}),(0,a.jsx)("p",{className:"text-[18px] font-semibold leading-[24px] tracking-[0.18px]",children:"Dig your track?"}),(0,a.jsx)("p",{className:"text-[18px] font-normal leading-[24px] tracking-[0.18px] max-w-[346px]",children:"Hit like to keep it handy and help us suggest more songs you'll vibe with."})]})}),(0,a.jsx)("hr",{className:"border-t border-quaternary"}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("button",{onClick:i,className:"text-white/60 hover:text-white transition-colors",children:"Back"}),(0,a.jsxs)("div",{className:"flex gap-[10px]",children:[(0,a.jsx)(c.Ay,{size:c.Mp.Medium,variant:c.Ak.DarkPrimary,onClick:l,className:"hidden",children:"Skip"}),(0,a.jsx)(c.Ay,{size:c.Mp.Medium,variant:c.Ak.Primary,onClick:t,className:"px-[40px] py-[15px]",children:"Done"})]})]})})]})},C=e=>e.length<=64&&e.length>=1,j=e=>!!e.match(/^[a-zA-Z0-9_]{3,40}$/g),w=e=>{let{src:t,alt:l="",className:i="",loaded:n=!1,onLoad:o=()=>{}}=e,[r,d]=(0,s.useState)(n);return(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("div",{className:"w-full ".concat(r?"":"bg-black"," ").concat(i),style:{height:window.innerWidth<768?"113px":"155px"}}),(0,a.jsx)("img",{className:"w-full absolute top-0 left-0 transition-opacity duration-300 pb-[24px] ".concat(r?"opacity-100":"opacity-0"," ").concat(i),src:t,alt:l,onLoad:()=>{d(!0),o()}})]})},N=m},36617:(e,t,l)=>{l.d(t,{A:()=>y});var a=l(95155),i=l(274),n=l(52596),s=l(26317),o=l(63438),r=l(35695),d=l(12115),c=l(39688),u=l(77119),p=l(74955),m=l(95625),x=l(50649),h=l(63808),f=l(63175),g=l(4869),v=l(35540);let y=(0,o.PA)(e=>{var t;let{clip:l,clipId:o,className:y,dropdownPosition:b="top",buttonVariant:C=p.Ak.Tertiary,buttonSize:j=p.Mp.Medium,buttonShape:w=p.aH.Pill,showOnOwnSong:N=!1,showDropdownIcon:k=!1,buttonClassName:A,buttonIconClassName:S}=e,{session:I,genForm:P,createV2:_,clips:M}=(0,u.gy)(),[T,E]=(0,d.useState)(!1),L=(0,r.usePathname)(),O=(0,r.useRouter)(),R=null!=l?l:M.clipById[o||""];if(!R||!(0,v.AB)({clip:R,session:I,showOnOwnSong:N}))return null;let D=[{id:"cover",label:"Cover",icon:x.Rw8,onClick:()=>{R&&((0,h.Ay)({actionName:"RemixOptionsCoverClicked",context:{clipId:null==R?void 0:R.id}}),(0,f.dM)({clip:R,session:I,genForm:P,createV2:_,router:O,pathname:L}))},disabled:!(0,g.FJ)(I)&&!(0,g.Xl)(I),proOnly:!0},{id:"extend",label:"Extend",icon:x.SKP,onClick:()=>{R&&((0,h.Ay)({actionName:"RemixOptionsExtendClicked",context:{clipId:null==R?void 0:R.id}}),(0,f.k8)({clip:R,genForm:P,createV2:_,router:O,pathname:L}))}},{id:"use-style-lyrics",label:"Use Styles & Lyrics",icon:x.qaf,onClick:()=>{R&&((0,h.Ay)({actionName:"RemixOptionsUseStylesLyricsClicked",context:{clipId:null==R?void 0:R.id}}),(0,f.Dw)({clip:R,genForm:P,createV2:_,router:O,pathname:L}))}},{id:"adjust-speed",label:"Adjust Speed",icon:x.rlE,disabled:!(null===(t=I.flags)||void 0===t?void 0:t["remix-adjust-speed"]),onClick:()=>{var e;R&&(null===(e=I.flags)||void 0===e?void 0:e["remix-adjust-speed"])&&R&&((0,h.Ay)({actionName:"RemixOptionsAdjustSpeedClicked",context:{clipId:null==R?void 0:R.id}}),(0,f.jn)({clip:R,genForm:P,createV2:_,router:O,pathname:L,showRemixCreate:!0}))}}];return(0,a.jsx)("div",{className:(0,c.QP)("w-full flex flex-col gap-2",y),onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{onClick:()=>E(!T),variant:C,size:j,iconStart:x.x7r,shape:w,iconClassName:S,className:A,iconEnd:k?T?(0,a.jsx)(x.Mtm,{}):(0,a.jsx)(x.D3D,{}):null,children:"Remix"}),T&&(0,a.jsx)(s.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:(0,n.A)("absolute bg-background-secondary rounded-xl overflow-hidden z-[60] w-max min-w-full left-0",{"bottom-full":"top"===b,"mb-2":"top"===b,"top-full":"bottom"===b,"mt-0.5":"bottom"===b}),children:D.map(e=>(0,a.jsx)(i.Tooltip,{label:e.disabled?e.proOnly&&!(0,g.Xl)(I)?"Pro feature":"Coming soon":void 0,placement:"top",hasArrow:!0,children:(0,a.jsx)("button",{onClick:e.onClick,disabled:e.disabled,className:"flex items-center w-full text-white/80 transition-colors text-sm text-left ".concat(e.disabled?"opacity-50 cursor-not-allowed hover:bg-transparent":"hover:bg-white/10"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 w-full",children:[(0,a.jsx)(e.icon,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"flex-grow",children:e.label})]})})},e.id))})]})})})},40177:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(95155),i=l(35695);l(12115);var n=l(63808),s=l(24962),o=l(4837);let r=e=>{let{isOpen:t,onClose:l}=e,r=(0,i.useRouter)();return t?(0,a.jsxs)(o.A,{title:"Subscribe to use and create Personas",onClose:l,wrapperClasses:"overflow-y-auto",titleClassName:"text-xl",children:[(0,a.jsx)("div",{className:"text-primary mb-6",children:"Personas copy the voice and styles of a song to new songs you create. This feature is only available to Pro and Premier users. Subscribe to gain access."}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(s.A,{onClick:()=>{r.push("/account"),(0,n.Ay)({actionName:"PersonaUpgradeModalClicked",context:{routeTo:"/account"}})},text:"Upgrade Plan",extraClasses:'!bg-[url("/auras/Aura-02.jpg")] w-full ![background-size:cover] hover:![background-size:cover] !bg-center font-bold'})})})]}):null}},41301:(e,t,l)=>{l.d(t,{A:()=>u});var a=l(95155),i=l(63438),n=l(65015),s=l(61932),o=l(77119),r=l(10573),d=l(56518),c=l(60425);let u=(0,i.PA)(e=>{var t;let{clipId:l}=e,{clips:i,genForm:u,session:p}=(0,o.gy)(),m=i.clipById[l];return m?(0,a.jsxs)("div",{className:"".concat((null===(t=p.flags)||void 0===t?void 0:t["create-form"])?"mx-0":"md:mx-2"," relative mt-6 md:mt-0"),children:[(0,a.jsxs)("div",{className:"font-sans text-[15px] leading-[20px] flex items-center space-x-1 w-fit py-2",children:[(0,a.jsx)("span",{children:"Cover"}),(0,a.jsx)("span",{className:"inline-block pt-[1px]",children:(0,a.jsx)(c.A,{label:"Covers allow you to change the style of a song but keep the melody"})}),(0,a.jsx)(d.A,{label:"Beta",tooltip:"This is a new feature. Liking and Disliking your songs helps us make it better!"})]}),(0,a.jsxs)("div",{className:"items-center bg-tertiary p-2 rounded-md border border-quaternary flex",children:[(0,a.jsx)(r.A,{alt:"Song Image",width:"40px",height:"55px",borderRadius:"4px",src:null==m?void 0:m.image_url,objectFit:"cover","flex-shrink":"0"}),(0,a.jsx)("div",{className:"font-sans text-sm px-4 truncate hover:underline",children:(0,a.jsx)(n.A,{href:"/song/".concat(m.id),target:"_blank",children:(0,s.p8)(m)})}),(0,a.jsx)("button",{className:"p-2 font-sans text-xs bg-quaternary hover:bg-secondary/20 rounded-full ml-auto",onClick:()=>{u.resetCoverClip(),"cover"===u.task?u.setTask(null):"artist_cover"===u.task&&u.setTask(u.personaId?"artist_consistency":null)},children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4 text-white",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}):null})},44081:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(95155),i=l(274),n=l(12115),s=l(47650),o=l(7132);let r=e=>{let{isDisabled:t,tooltipLabel:l,children:r,onClick:d,isMobile:c=!1}=e,[u,p]=(0,n.useState)(!1),m=e=>{e.preventDefault(),e.stopPropagation(),null==d||d(),p(!1)},x=(0,a.jsx)("div",{className:"cursor-pointer w-full",style:{pointerEvents:"auto"},children:r});return t?c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{width:"100%"},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:()=>p(!0),children:x}),u&&s.createPortal((0,a.jsx)("div",{style:{position:"fixed",bottom:"90px",left:"50%",transform:"translateX(-50%)",backgroundColor:o.M4,color:"#ffffff",borderRadius:"8px",padding:"10px",maxWidth:"95%",width:"95%",textAlign:"center",zIndex:9999},onClick:m,onTouchEnd:m,children:l}),document.body)]}):(0,a.jsx)(i.Tooltip,{label:l,bg:o.M4,color:"#ffffff",borderRadius:"md",padding:"10px",children:x}):(0,a.jsx)(a.Fragment,{children:r})}},44999:(e,t,l)=>{l.d(t,{A:()=>h});var a=l(95155),i=l(12974),n=l(59108),s=l(58670),o=l(39376),r=l(64430),d=l(12115),c=l(77119),u=l(59041),p=l(50649),m=l(88008),x=l(4837);let h=e=>{let{isOpen:t,onClose:l,userHandle:h="",canGenerateSong:f=!0}=e,g=(0,i.useToast)(),v=(0,d.useRef)(null),{session:y}=(0,c.gy)(),b=async()=>{let e="".concat(window.location.origin,"/invite/@").concat(h);try{await navigator.clipboard.writeText(e),g({title:"Link copied successfully!",status:"success",duration:2e3,isClosable:!0})}catch(e){g({title:"Failed to copy link",description:"Please try again.",status:"error",duration:2e3,isClosable:!0})}let t="invite_friends_modal";f||(t="out_of_credits_modal"),m.LS.logWebPageEvent({userId:y.userId||"",eventType:m.Y_.CLICK,element:t,secondaryElement:"copy_link_button",entityId:y.user.handle,entityType:"inviter_handle",pageUrl:window.location.pathname})};return t?(0,a.jsxs)(x.A,{title:f?"Suno is better with friends":"You're out of credits :(",onClose:l,titleClassName:"text-3xl",children:[(0,a.jsx)(n.Flex,{mt:-8,children:(0,a.jsx)(u.A,{onClick:l})}),(0,a.jsxs)(n.Flex,{direction:"column",gap:"4",children:[(0,a.jsx)(s.Text,{className:"font-sans text-sm",children:"Share your invite link to earn credits. When your friend signs up and creates 10 songs, you both receive 250 free credits. Limit of 2500 credits per person."}),(0,a.jsxs)(n.Flex,{ref:v,className:"border border-gray-600 rounded-xl p-2 mt-2",backgroundColor:"gray.100",children:[(0,a.jsx)(n.Flex,{alignItems:"center",flex:1,className:"px-4",children:(0,a.jsx)(s.Text,{color:"gray.800",textAlign:"left",flex:1,className:"break-words break-all",children:"".concat(window.location.origin,"/invite/@").concat(h)})}),(0,a.jsx)(n.Flex,{align:"center",flex:"none",children:(0,a.jsx)(o.IconButton,{colorScheme:"black",onClick:b,icon:(0,a.jsx)(p.TdU,{className:"w-5 h-5"}),"aria-label":"Copy Referral Link"})})]}),(0,a.jsx)(n.Flex,{justifyContent:"center",children:(0,a.jsxs)(s.Text,{fontSize:"font-sans text-sm",children:["or"," ",(0,a.jsx)(r.Link,{href:"/account?",color:"lightGray",textDecoration:"underline",onClick:()=>{let e="invite_friends_modal";f||(e="out_of_credits_modal"),m.LS.logWebPageEvent({userId:y.userId||"",eventType:m.Y_.CLICK,element:e,secondaryElement:"subscribe_link",entityId:y.user.handle,entityType:"inviter_handle",pageUrl:window.location.pathname})},children:"Subscribe"})]})})]})]}):null}},45990:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(95155),i=l(52596);l(12115);var n=l(39688);let s=e=>{let{children:t,...l}=e;return(0,a.jsx)("div",{...l,className:(0,n.QP)((0,i.A)("relative rounded-full overflow-hidden text-white bg-gradient-to-tr from-purple-300 via-red-400 to-red-600",{"inline-block w-3 h-3":!t,"inline-flex items-center justify-center p-0.5":!!t,"min-w-5 text-xs font-bold font-sans":!!t}),e.className),children:t})}},46995:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(95155);l(12115);let i=()=>{let e=Array.from({length:20});return(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none z-[10000]",children:e.map((e,t)=>(0,a.jsx)("div",{className:"absolute w-8 h-8 opacity-80 animate-float",style:{left:"".concat(100*Math.random(),"%"),animationDuration:"".concat(3*Math.random()+5,"s"),animationDelay:"".concat(5*Math.random(),"s"),top:"-100px"},children:(0,a.jsx)("img",{src:"/icons/tree-palm.svg",alt:"Palm Tree",className:"w-full h-full object-contain"})},t))})}},47088:(e,t,l)=>{l.d(t,{A:()=>y});var a=l(95155),i=l(52017),n=l(5520),s=l(23375),o=l(16299);l(85117),l(28344),l(20443);var r=l(63438),d=l(12115),c=l(74955),u=l(50244),p=l(56108),m=l(88008),x=l(99428),h=l(4869),f=l(77119),g=l(47606),v=l(49746);let y=(0,r.PA)(e=>{let{popoverTopMargin:t,fromMobileLibrary:l,iconSize:r,renderButton:y,isRecordingMode:b,isModalOpen:C,onAfterClose:j,onClipInitialized:w}=e,{clips:N,session:k,library:A,genForm:S,project:I}=(0,f.gy)(),P=!(0,p.Yo)(),{isOpen:_,onOpen:M,onClose:T}=(0,i.useDisclosure)(),E=(0,d.useRef)(void 0);(0,d.useEffect)(()=>{C&&M()},[C]);let{isOpen:L,onOpen:O,onClose:R}=(0,i.useDisclosure)(),D=async(e,t,l,a)=>{let{data:i,error:n}=await A.apiClient.POST("/api/uploads/audio/{upload_id}/initialize-clip/",{params:{path:{upload_id:e||""}}});if(n||!i){(0,f.oR)({title:"Invalid upload. Please try again.",status:"error",duration:2e3,isClosable:!0}),T();return}let s=i.clip_id;await A.loadClips(),await N.setMetadata({clipId:s,title:t,imageUrl:l,isAudioUploadTOSAccepted:!0});let o=N.clipById[s];w&&w(s),(0,h.m2)(k)&&(null==I?void 0:I.currentProjectId)&&o&&(null==I||I.addClip(o),null==I||I.addClipsToProject([o],I.currentProjectId)),m.LS.logAudioCreationEvent(P,x.a2.uploadSong,S,k,{hasVocal:o.metadata.has_vocal,newClipIds:[s],isUploaded:!0,uploadType:a}),T()},F=(0,g.M6)({onFinish:(e,t,l,a)=>{D(e,t,l,a),j&&j()},onClose:()=>{T(),j&&j()}});return(0,d.useEffect)(()=>{b&&F.setIsRecordingMode(!0)},[b]),(0,a.jsxs)(a.Fragment,{children:[y?y(M):(0,a.jsx)(c.Ay,{shape:c.aH.Pill,"aria-label":"Upload Audio",onClick:M,variant:c.Ak.Standard,size:c.Mp.Mini,children:(0,a.jsxs)("div",{className:"flex items-center justify-center h-full w-full",children:[(0,a.jsx)("img",{src:"/icons/upload-active.svg",alt:"Upload",className:"w-".concat(r," h-").concat(r," ").concat(l?"mr-0":"mr-2"," filter invert brightness-0")}),(0,a.jsx)("span",{className:"whitespace-nowrap text-md",children:l?"":"Upload Audio"})]})}),(0,a.jsxs)(n.Modal,{size:"xl",isOpen:_,onClose:()=>{F.attemptClose(),j&&j()},isCentered:!0,children:[(0,a.jsx)(s.ModalOverlay,{bgColor:"var(--chakra-colors-whiteAlpha-200)"}),(0,a.jsx)(o.ModalContent,{backgroundColor:"black",children:(0,a.jsx)(g.Ay.Provider,{value:F,children:(0,a.jsx)(v.A,{})})})]}),(0,a.jsx)(u.A,{buttonRef:E,isOpen:L,onClose:R,onOpen:O,topMargin:t})]})})},47606:(e,t,l)=>{l.d(t,{Ay:()=>p,M6:()=>u,ZW:()=>c});var a=l(12115),i=l(83310),n=l.n(i),s=l(7132),o=l(71164),r=l(81182),d=l(77119),c=function(e){return e.TermsOfService="TermsOfService",e.ChooseUploadMethod="ChooseUploadMethod",e.Recording="Recording",e.Trim="Trim",e.Finalize="Finalize",e}({});let u=e=>{let{onFinish:t,onClose:l}=e,{session:i}=(0,d.gy)(),[c,u]=(0,a.useState)(null),p=(0,r.A)(),[m,x]=(0,a.useMemo)(()=>{var e,t;return[6,(null==c?void 0:null===(e=c.name)||void 0===e?void 0:e.startsWith("Mikey"))||(null==c?void 0:null===(t=c.name)||void 0===t?void 0:t.startsWith("SunoTimes"))||o.Cu||o.YG?s.Y0:i.roles.pro?s.fx:s.kl]},[i.roles,null==c?void 0:c.name]),[h,f]=(0,a.useState)(()=>!!(n()("localStorage")&&localStorage.getItem(s.G_))),[g,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{g&&u(null)},[g]);let[y,b]=(0,a.useState)(null),[C,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),k=(0,a.useMemo)(()=>!y&&g,[y,g]),A=(0,a.useMemo)(()=>!y&&!g,[y,g]),[S,I]=(0,a.useState)(null),[P,_]=(0,a.useState)([0,0]),[M,T]=(0,a.useState)(null),[E,L]=(0,a.useState)(!1),[O,R]=(0,a.useState)(""),[D,F]=(0,a.useState)(!0),[B,z]=(0,a.useState)(""),[U,H]=(0,a.useState)(!1),[W,V]=(0,a.useState)(!1),G=(0,a.useRef)(null);(0,a.useEffect)(()=>{S&&S!==G.current&&(G.current=S,F(!0),p(S,g?"audio_recording":"file_upload").then(e=>{R(t=>t||e.title),z(t=>t||e.imageUrl),T(e.uploadId),e.hasVocal&&H(!0)}))},[S,p,g]);let Y=(0,a.useCallback)(()=>{v(!1),b(null),I(null),T(null),L(!1),R(""),z(""),F(!0),_([0,0])},[]);(0,a.useEffect)(()=>{B&&F(!1)},[B]);let q=(0,a.useMemo)(()=>h?A?"ChooseUploadMethod":k?"Recording":S?"Finalize":"Trim":"TermsOfService",[h,A,k,S]),Q=(0,a.useCallback)(()=>{l(),Y()},[]),K=(0,a.useCallback)(()=>{j(!1)},[]),J=(0,a.useCallback)(()=>{C?(Q(),j(!1)):w?j(!0):Q()},[C,Q,w]),X=(0,a.useCallback)(()=>{"ChooseUploadMethod"===q?J():"TermsOfService"===q?J():"Recording"===q?v(!1):"Trim"===q?(v(!1),b(null)):"Finalize"===q?(T(null),I(null)):console.error("Invalid UI stage")},[q,J]),Z=(0,a.useCallback)(async()=>{L(!0),await t(M,O,B,g?"audio_recording":"file_upload"),Y()},[M,O,B,g,t]);return(0,a.useEffect)(()=>{"Finalize"===q||"Recording"===q?N(!0):N(!1)},[q]),(0,a.useEffect)(()=>{y&&_([0,Math.min(y.duration,x)])},[y,x]),(0,a.useMemo)(()=>({setConfirmedTOS:f,setIsRecordingMode:v,setClientSelectedFile:u,clientSelectedFile:c,setAudioBuffer:b,setTrimmedFile:I,setFinishedUploadId:T,finishedUploadId:M,handleFinish:Z,submittedFinal:E,audioBuffer:y,uiStage:q,handleGoBack:X,minSeconds:m,maxSeconds:x,title:O,imageUrl:B,setTitle:R,setImageUrl:z,generatingImage:D,setGeneratingImage:F,trimRange:P,setTrimRange:_,isConfirmingClose:C,cancelClose:K,attemptClose:J,hasVocalsDetected:U,setHasVocalsDetected:H,hasShownVocalsAlert:W,setHasShownVocalsAlert:V}),[q,X,Z,y,P,E,O,B,D,m,x,M,C,K,J,U,W])},p=(0,a.createContext)(void 0)},47659:(e,t,l)=>{l.d(t,{A:()=>d});var a=l(95155),i=l(274),n=l(12115),s=l(50649),o=l(7132),r=l(57147);let d=e=>{let{label:t,tooltipLabel:l,onClick:d}=e,c=(0,n.useRef)(null);return(0,a.jsx)(i.Tooltip,{size:"sm",background:o.M4,rounded:"md",color:"#ffffff",padding:"10px",label:l,portalProps:{containerRef:c},children:(0,a.jsxs)("div",{ref:c,className:"flex items-center cursor-pointer",onClick:d||(()=>{}),children:[(0,a.jsx)(r.A,{label:t,checked:!1,disabled:!0}),(0,a.jsx)("button",{className:"p-1 rounded-full focus:outline-none color-primary cursor-default text-lightGray",children:(0,a.jsx)(s.NTw,{className:"w-4 h-4"})})]})})}},47752:(e,t,l)=>{l.d(t,{OT:()=>s,V8:()=>r,VS:()=>u,fn:()=>o,hl:()=>d,r3:()=>p,vD:()=>c});var a=l(83310),i=l.n(a);let n="sh-params",s=function(e,t){var l,a,i,n;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:t,user_email:null!==(i=null===(l=e.primaryEmailAddress)||void 0===l?void 0:l.emailAddress)&&void 0!==i?i:"",user_phone:null!==(n=null===(a=e.primaryPhoneNumber)||void 0===a?void 0:a.phoneNumber)&&void 0!==n?n:"",...s})},o=e=>{let t={};try{if(i()("localStorage")){let l=localStorage.getItem(e);l&&(t=JSON.parse(l))}}catch(e){}return t},r=(e,t)=>{i()("localStorage")&&localStorage.setItem(e,JSON.stringify({expires:t}))},d=e=>Date.now()-e.getTime()<12e4,c=(e,t,l)=>{if(i()("localStorage")){let a=localStorage.getItem(n),i=null;if(a)try{(i=JSON.parse(a)).expiry&&Date.now()>i.expiry&&(i=null)}catch(e){i=null}if(i=i||{sid:null,scid:null,sct:null,expiry:null},e){let t={...i,sid:e,expiry:Date.now()+2592e6};localStorage.setItem(n,JSON.stringify(t))}else if(t&&l){let e={...i,scid:l,sct:t,expiry:Date.now()+2592e6};localStorage.setItem(n,JSON.stringify(e))}}},u=()=>{if(!i()("localStorage"))return null;let e=localStorage.getItem(n);if(!e)return null;try{let t=JSON.parse(e);if(!t.expiry||Date.now()>t.expiry)return null;return t}catch(e){return null}},p=async(e,t)=>{var l,a,i;t&&await e.POST("/api/share/attribute/",{body:{source:"web",share_id:null!==(l=t.sid)&&void 0!==l?l:"",content_id:null!==(a=t.scid)&&void 0!==a?a:"",content_type:null!==(i=t.sct)&&void 0!==i?i:""}})}},48420:(e,t,l)=>{let a;l.d(t,{pc:()=>l3,ok:()=>l5,default:()=>l2});var i=l(95155),n=l(52017),s=l(59108),o=l(27016),r=l(87853),d=l(56937),c=l(78380),u=l(46391),p=l(63438),m=l(55028),x=l(35695),h=l(12115),f=l(82842),g=l(74692),v=l(60760),y=l(26317),b=l(74955),C=l(63808),j=l(7132),w=l(32056);function N(e){let{oneLinkUrl:t}=e,[l,a]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{(0,w.tZ)(j.XQ)&&setTimeout(()=>a(!0),100)},[]),(0,i.jsx)(v.N,{children:l&&(0,i.jsx)(y.P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",ease:"easeOut",duration:.3},className:"fixed bottom-0 left-0 right-0 bg-[#FAF7F5] rounded-t-3xl shadow-lg p-6 z-[999]",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-center text-vinylBlack-darker rounded-lg",children:"Suno is better on the app"}),(0,i.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,i.jsx)(k,{optionLabel:"Suno App",buttonLabel:"Open",buttonCustomClassName:"text-white bg-[url('https://cdn1.suno.ai/mwr-button-aura.jpg')] bg-cover bg-center",onClick:()=>{(0,C.Ay)({actionName:"MobileWebRedirectClicked"}),window.location.href=t}}),(0,i.jsx)(k,{optionLabel:"Web Browser",buttonLabel:"Continue",buttonCustomClassName:"text-vinylBlack-darker bg-transparent border border-secondary",onClick:()=>{a(!1),(0,w.ON)(j.XQ,6048e5),(0,C.Ay)({actionName:"MobileWebRedirectClose"})}})]})]})})})}function k(e){let{optionLabel:t,buttonLabel:l,buttonCustomClassName:a,onClick:n}=e;return(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,i.jsx)("div",{className:"flex items-center font-medium text-vinylBlack-darker",children:t}),(0,i.jsx)(b.Ay,{onClick:n,className:"w-[165px] ".concat(a," px-6 rounded-full font-medium transition-colors"),children:l})]})}let A="https://suno.onelink.me/BYx9/",S=e=>{let{contentType:t,contentId:l}=e;return window.AF_SMART_SCRIPT&&window.AF_SMART_SCRIPT.generateOneLinkURL?window.AF_SMART_SCRIPT.generateOneLinkURL({oneLinkURL:A,webReferrer:"web_referrer",afParameters:{mediaSource:{keys:["utm_source"],defaultValue:"Direct"},campaign:{keys:["utm_campaign"],defaultValue:"None"},googleClickIdKey:"af_sub1",afSub2:{keys:["fbclid"]},afCustom:[{paramKey:"sh",keys:["sh"]},{paramKey:"sct",keys:["sct"],defaultValue:t},{paramKey:"scid",keys:["scid"],defaultValue:l},{paramKey:"af_ss_ui",defaultValue:"true"}]}}).clickURL:A};var I=l(58670),P=l(77119);let _=(0,p.PA)(()=>{let{session:e}=(0,P.gy)();return e.isMaintenance||e.isScheduledMaintenance?(0,i.jsx)(s.Flex,{width:"100%",py:"3",backgroundColor:e.isMaintenance?"orange.700":"blue.700",justifyContent:"center",children:(0,i.jsx)(I.Text,{color:"white",children:e.message})}):null});var M=l(65015),T=l(77478),E=l(61932);let L="mobile-banner-dismissed",O=e=>{let{supportedBrowser:t,country:l,supportedCountries:a,title:n="Suno - AI Songs",description:s="AI music and song generator",link:o="https://apps.apple.com/us/app/suno-make-music/id6480136315",actionText:r="view"}=e,[d,c]=(0,h.useState)(!1),{isBannerVisible:u,setIsBannerVisible:p}=(0,T.a)(),m=!a||l&&void 0!==a.find(e=>e.toLowerCase()===l.toLowerCase()),x=(0,g.DE)(),f=x&&(0,E.un)(),v=x&&(0,E.m0)(),y=(t||f||v)&&m;return(0,h.useEffect)(()=>{(0,w.tZ)(L)&&(c(!0),y&&p(!0),window.dispatchEvent(new Event("mobileBannerShown")))},[p,f,v,m]),(0,h.useEffect)(()=>{!u||d&&y||p(!1)},[d,y,u]),f?o="https://suno.com/ios":v&&(o="https://suno.com/android"),d&&y&&(0,i.jsxs)("div",{"aria-label":"Mobile App Banner",className:"relative w-full h-[4.5rem] z-50 md:hidden flex gap-2 items-center px-3 bg-[#1c242c] overflow-hidden",children:[(0,i.jsx)("button",{"aria-label":"Close Mobile App Banner",onClick:()=>{c(!1),p(!1),(0,w.ON)(L,6048e5),window.dispatchEvent(new Event("mobileBannerClosed")),(0,C.Ay)({actionName:"MobileBannerClosed",context:{isIOS:f,isAndroid:v}})},children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 fill-neutral-400",viewBox:"0 0 384 512",children:(0,i.jsx)("path",{d:"M192 233.4L59.5 100.9l-22.6 22.6L169.4 256 36.9 388.5l22.6 22.6L192 278.6l132.5 132.5 22.6-22.6L214.6 256l132.5-132.5-22.6-22.6L192 233.4z"})})}),(0,i.jsxs)(M.A,{className:"w-full flex items-center gap-2",href:o,target:"_blank",rel:"noopener noreferrer",onClick:()=>{(0,C.Ay)({actionName:"MobileBannerClicked",context:{isIOS:f,isAndroid:v}})},children:[(0,i.jsx)("img",{className:"w-14 h-14 aspect-square flex flex-shrink-0 relative overflow-hidden rounded-xl",src:"/suno-app-icon.webp",alt:"mobile banner"}),(0,i.jsxs)("section",{className:"w-full font-sans flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,i.jsx)("h1",{children:n}),(0,i.jsx)("p",{className:"text-xs text-neutral-400",children:s})]}),(0,i.jsx)("button",{className:"bg-white hover:brightness-[60%] px-4 py-1 rounded-full text-sm font-semibold uppercase text-[#1c242c]",children:r})]})]})]})};var R=l(88857),D=l(53518),F=l(52596),B=l(39688);let z=e=>{let{mode:t,size:l=6,innerClassName:a,children:n,...s}=e;return(0,i.jsx)("div",{...s,className:(0,B.QP)("relative group","text-[var(--split-panel-bar,transparent)]","hover:text-[var(--split-panel-bar-hover,var(--color-overlay-on-primary))]",e.className),style:{"--w-split-bar-shadow":"transparent","--w-split-bar-shadow-disable":"transparent",boxShadow:"none",background:"transparent",["vertical"===t?"height":"width"]:l,...s.style},children:(0,i.jsx)("div",{className:(0,B.QP)((0,F.A)("absolute pointer-events-all","transition-colors duration-150","before:absolute before:inset-0 before:bg-current","before:transition-colors before:duration-150",{"min-w-1":"horizontal"===t,"min-h-1":"vertical"===t}),a),children:n})})},U=e=>{let{mode:t="horizontal",barClassName:l,barChildren:a,...n}=e;return(0,i.jsx)(D.A,{...n,mode:t,renderBar:e=>(0,i.jsx)(z,{mode:t,innerClassName:l,...e,className:(0,B.QP)((0,F.A)({hidden:!n.visible}),e.className),children:a}),className:(0,B.QP)("flex flex-column justify-stretch items-stretch",e.className)})},H=e=>(0,i.jsx)(U,{mode:"horizontal",...e});var W=l(5520),V=l(23375),G=l(16299),Y=l(5643),q=l(1996),Q=l(39376),K=l(5295),J=l(91218),X=l(59041),Z=l(15883),$=l(59118),ee=l(59771);let et=e=>{let{href:t,onClose:l,children:a,fontSize:n,color:s}=e;return(0,i.jsx)($.MenuItem,{as:t?"a":"button",bg:"transparent",_hover:{bg:"rgba(255, 255, 255, 0.1)"},transition:"background-color 0.3s ease",borderRadius:"6px",outline:"none",fontSize:n,href:t,onClick:l,display:"flex",width:"100%",height:"auto",padding:"10px 20px",justifyContent:"flex-start",color:s,fontFamily:"Editorial New",children:a})};(0,p.PA)(e=>{let{isOpen:t,onClose:l}=e,{t:a}=(0,J.Bd)();return(0,i.jsx)(q.Menu,{isOpen:t,onClose:l,children:(0,i.jsxs)(W.Modal,{isOpen:t,onClose:l,size:"full",isCentered:!0,children:[(0,i.jsx)(V.ModalOverlay,{sx:{...j.pE}}),(0,i.jsxs)(G.ModalContent,{sx:{...j.pE},children:[(0,i.jsx)(X.A,{onClick:l}),(0,i.jsx)(Y.ModalBody,{sx:{...j.pE},mt:4,children:(0,i.jsx)(ee.MenuList,{border:"none",boxShadow:"none",bg:"transparent",display:"flex",flexDirection:"column",width:"100%",height:"100%",mt:10,children:(0,i.jsxs)(s.Flex,{flexDirection:"column",flex:"1",children:[(0,i.jsx)(et,{href:"https://help.suno.com",onClose:l,fontSize:"18px",color:"white",children:a("nav.help")}),(0,i.jsx)(et,{href:"https://suno.com/about",onClose:l,fontSize:"18px",color:"white",children:a("nav.about")}),(0,i.jsx)(et,{href:"https://suno.com/blog",onClose:l,fontSize:"18px",color:"white",children:a("nav.blog")}),(0,i.jsx)(et,{href:"https://jobs.ashbyhq.com/suno",onClose:l,fontSize:"18px",color:"white",children:a("nav.careers")}),(0,i.jsx)(et,{href:"https://suno.com/terms",onClose:l,fontSize:"18px",color:"white",children:a("nav.terms")}),(0,i.jsx)(et,{href:"https://suno.com/privacy",onClose:l,fontSize:"10px",color:"white",children:a("nav.privacy")})]})})})]})]})})});var el=l(35737),ea=l(45990),ei=l(24432),en=l(10104),es=l(96103),eo=l(55253),er=l(50649),ed=l(88008),ec=l(99428);let eu=[{id:"x",icon:er.F,url:"https://twitter.com/sunomusic"},{id:"instagram",icon:er.oWo,url:"https://www.instagram.com/sunomusic/"},{id:"tiktok",icon:eo.kkU,url:"https://www.tiktok.com/@sunomusic"},{id:"discord",icon:er.EIh,url:"https://discord.com/invite/suno"}],ep=e=>{let{children:t,className:l,buttonClassName:a,buttonIconClassName:n,buttonVariant:s=b.Ak.Inherit,buttonSize:o=b.Mp.Large,buttonShape:r=b.aH.Rounded,buttonActive:d=!1,buttonAspectSquare:c,...u}=e,p=(0,h.useCallback)(e=>{let t=e.currentTarget.getAttribute("href");ed.LS.segmentTrack(ec.f7.linkClickEvent,{socialUrl:t})},[]);return(0,i.jsxs)("div",{className:(0,B.QP)("flex flex-row justify-center items-center gap-2 p-2",l),...u,children:[eu.map(e=>(0,i.jsx)(b.Ay,{className:(0,B.QP)("p-1",a),iconClassName:(0,B.QP)("m-0",n),variant:s,size:o,shape:r,active:d,aspectSquare:c,href:e.url,target:"_blank",onClick:p,icon:e.icon},e.id)),t]})};var em=l(47650);let ex=e=>{let{btnRef:t,handleDismissClaimUsername:l,onOpenWelcomeModal:a,isMobile:n=!1}=e,[s,o]=(0,h.useState)({left:0,top:0,right:0}),r=(0,h.useCallback)(()=>{t.current&&(n?o({right:window.innerWidth-(t.current.getBoundingClientRect().right||0),top:(t.current.getBoundingClientRect().bottom||0)+10,left:0}):o({left:t.current.getBoundingClientRect().right+10,top:t.current.getBoundingClientRect().top-23.125,right:0}))},[t,n]);(0,h.useEffect)(()=>{r(),window.addEventListener("resize",r);let e=()=>{setTimeout(r,0)};return window.addEventListener("mobileBannerClosed",e),(0,C.Ay)({actionName:"CompleteProfileTooltipViewed",context:{location:n?"mobile":"desktop"}}),()=>{window.removeEventListener("resize",r),window.removeEventListener("mobileBannerClosed",e)}},[r,n]);let d=e=>{(0,C.Ay)({actionName:"CompleteProfileTooltipClosed",context:{location:n?"mobile":"desktop",method:e}}),l()};return(0,em.createPortal)((0,i.jsxs)("div",{className:"fixed h-[86px] w-[199px] bg-[#252020] p-[10px] rounded-[8px] cursor-pointer",style:{...n?{right:"".concat(s.right,"px"),top:"".concat(s.top,"px")}:{left:s.left,top:s.top},zIndex:1e3},onClick:()=>{(0,C.Ay)({actionName:"CompleteProfileTooltipClicked",context:{location:n?"mobile":"desktop"}}),l(),a()},children:[(0,i.jsx)("div",{style:{position:"absolute",...n?{right:"15px",top:"-3px",transform:"translateY(-50%)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"6px solid #252020"}:{left:"-6px",top:"50%",transform:"translateY(-50%)",borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderRight:"6px solid #252020"},width:"0",height:"0"}}),(0,i.jsx)("div",{className:"absolute right-2 top-2 w-3 h-3 text-white/60 hover:text-white/80",onClick:e=>{e.stopPropagation(),d("close_button")},children:(0,i.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,i.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})}),(0,i.jsx)("div",{className:"text-[15px] font-semibold leading-[20px]",children:"Finish your Profile"}),(0,i.jsx)("div",{className:"text-[12.5px] font-normal font-medium leading-[20px]",children:"Add your name and user name to complete your profile!"})]}),document.body)};var eh=l(831),ef=l(64982),eg=l(64430),ev=l(52956),ey=l(53485),eb=l(44999);let eC=(0,p.PA)(e=>{var t,l,a,r,d,c,p,m,h,f,g,v,y;let{isOpen:b,onClose:w,onToggle:N}=e,{session:k,iosInvite:A}=(0,P.gy)(),S=(0,K.ho)(),_=(0,o.d)(),T=(0,x.useRouter)(),E=(0,ev.RH)(),{onOpen:L,isOpen:O,onClose:R}=(0,n.useDisclosure)(),{isOpen:D,onOpen:F,onClose:B}=(0,n.useDisclosure)(),z=(0,u.useStatsigClient)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(q.Menu,{isOpen:b,onClose:w,children:[(0,i.jsx)(eh.MenuButton,{as:Q.IconButton,variant:"ghost",color:"whiteAlpha",onClick:N,icon:(0,i.jsx)(ey.A,{src:(null===(t=k.user)||void 0===t?void 0:t.avatar_image_url)||j.tL,alt:"User Profile",width:9,height:9,borderRadius:"50%"}),colorScheme:"whiteAlpha","aria-label":"User Profile",_hover:{backgroundColor:"none"}}),(0,i.jsx)(ef.Portal,{children:(0,i.jsxs)(ee.MenuList,{sx:{bgColor:"#252020"},borderColor:"rgba(255, 255, 255, 0.1)",w:"250px",p:"2",borderRadius:"md",zIndex:j.ZA,children:[(0,i.jsxs)(s.Flex,{flexDirection:"row",py:2,children:[(0,i.jsx)(ey.A,{src:(null===(l=k.user)||void 0===l?void 0:l.avatar_image_url)||j.tL,borderRadius:"full",boxSize:"36px",mr:4,ml:2,alt:"Profile Image",width:10,height:10}),(0,i.jsxs)(s.Flex,{flexDirection:"column",justifyContent:"center",rowGap:"4px",maxW:"150px",mr:4,children:[!!(null===(a=k.user)||void 0===a?void 0:a.display_name)&&(0,i.jsx)(I.Text,{fontSize:"14px",lineHeight:"18px",fontWeight:700,noOfLines:1,title:null===(r=k.user)||void 0===r?void 0:r.display_name,fontFamily:"Neue Montreal",children:null===(d=k.user)||void 0===d?void 0:d.display_name}),(0,i.jsx)(I.Text,{fontSize:"12px",lineHeight:"12px",title:null===(m=S.user)||void 0===m?void 0:null===(p=m.emailAddresses)||void 0===p?void 0:null===(c=p[0])||void 0===c?void 0:c.emailAddress,fontFamily:"Neue Montreal",children:(null===(g=S.user)||void 0===g?void 0:null===(f=g.emailAddresses)||void 0===f?void 0:null===(h=f[0])||void 0===h?void 0:h.emailAddress)||""})]})]}),(0,i.jsx)($.MenuItem,{as:M.A,href:"/@".concat(null===(v=k.user)||void 0===v?void 0:v.handle),fontFamily:"Neue Montreal",sx:{bg:"transparent",_hover:{bg:"rgba(255, 255, 255, 0.1)"},transition:"background-color 0.3s ease",borderRadius:"6px",outline:"none"},children:"View Profile"}),(0,i.jsx)($.MenuItem,{as:eg.Link,onClick:L,fontFamily:"Neue Montreal",sx:{bg:"transparent",_hover:{bg:"rgba(255, 255, 255, 0.1)",textDecoration:"none"},transition:"background-color 0.3s ease",borderRadius:"6px",outline:"none"},children:"Edit Profile"}),(null==k?void 0:k.user)&&z.checkGate("ios-intl-invite-gate")&&A.promoCodeUrl?(0,i.jsx)($.MenuItem,{as:eg.Link,onClick:e=>{e.preventDefault(),ed.LS.logWebPageEvent({userId:k.userId||"",eventType:ed.Y_.CLICK,element:"mobile_profile_menu",secondaryElement:"ios_invite_claim_button",entityId:k.user.handle,entityType:"inviter_handle",pageUrl:window.location.pathname}),T.push(A.promoCodeUrl)},fontFamily:"Neue Montreal",sx:{bg:"transparent",_hover:{bg:"rgba(255, 255, 255, 0.1)",textDecoration:"none"},transition:"background-color 0.3s ease",borderRadius:"6px",outline:"none"},children:"Claim Ticket"}):(0,i.jsx)($.MenuItem,{as:eg.Link,onClick:e=>{e.preventDefault(),ed.LS.logWebPageEvent({userId:k.userId||"",eventType:ed.Y_.CLICK,element:"mobile_profile_menu",secondaryElement:"invite_friends_button",entityId:k.user.handle,entityType:"inviter_handle",pageUrl:window.location.pathname}),F()},fontFamily:"Neue Montreal",sx:{bg:"transparent",_hover:{bg:"rgba(255, 255, 255, 0.1)",textDecoration:"none"},transition:"background-color 0.3s ease",borderRadius:"6px",outline:"none"},children:"Invite Friends"}),(0,i.jsxs)($.MenuItem,{as:M.A,href:"/account",onClick:w,fontFamily:"Neue Montreal",sx:{bg:"transparent",_hover:{bg:"rgba(255, 255, 255, 0.1)"},transition:"background-color 0.3s ease",borderRadius:"6px",outline:"none"},children:["Subscription",(0,i.jsx)(s.Flex,{ml:4,children:(0,i.jsx)(s.Flex,{align:"center",justify:"center",bg:k.credits>0?"#272626":"#fcd28d",color:k.credits>0?"white":"black",borderRadius:"full",py:.5,px:1,children:(0,i.jsxs)("span",{className:"font-sans font-bold text-[11px]",children:[k.credits.toLocaleString()," credits"]})})})]}),(0,i.jsx)($.MenuItem,{as:eg.Link,onClick:()=>S.openUserProfile({appearance:{elements:{modalContent:{height:"auto"},cardBox:{height:"20rem"},profileSection__profile:{display:"none"},button:"text-neutral-300 hover:text-neutral-500",badge:"text-neutral-300 outline outline-neutral-300"}}}),fontFamily:"Neue Montreal",sx:{bg:"transparent",_hover:{bg:"rgba(255, 255, 255, 0.1)",textDecoration:"none"},transition:"background-color 0.3s ease",borderRadius:"6px",outline:"none"},children:"Manage Account"}),(0,i.jsx)($.MenuItem,{as:eg.Link,onClick:()=>{(0,C.y4)(),(0,C.Ay)({actionName:"SignOutButtonClicked"}),document.cookie="".concat(j._7,"=true; path=/; max-age=31536000"),E.POST("/api/signout/",{}),S.signOut({redirectUrl:"/"}).then(()=>{(0,ev.Sn)(),k.loadSession(_,1,!0)})},fontFamily:"Neue Montreal",sx:{bg:"transparent",_hover:{bg:"rgba(255, 255, 255, 0.1)",textDecoration:"none"},transition:"background-color 0.3s ease",borderRadius:"6px",outline:"none"},children:"Sign Out"})]})})]}),(0,i.jsx)(en.f,{isOpen:O,onClose:R,"data-qaid":"modal-edit-profile-title"}),(0,i.jsx)(eb.A,{isOpen:D,onClose:()=>{ed.LS.logWebPageEvent({userId:k.userId||"",eventType:ed.Y_.CLOSE,element:"mobile_profile_menu",secondaryElement:"invite_friends_modal",entityId:k.user.handle,entityType:"inviter_handle",pageUrl:window.location.pathname}),B()},userHandle:null==k?void 0:null===(y=k.user)||void 0===y?void 0:y.handle})]})}),ej=e=>{let{t}=(0,J.Bd)(),{session:l}=(0,P.gy)(),{isOpen:a,onClose:n,onOpenFeedback:o}=e;return(0,i.jsxs)(W.Modal,{isOpen:a,onClose:n,size:"full",isCentered:!0,children:[(0,i.jsx)(V.ModalOverlay,{sx:{bgColor:(0,E.VA)("background/primary")}}),(0,i.jsxs)(G.ModalContent,{sx:{bgColor:(0,E.VA)("background/primary")},marginY:"auto",children:[(0,i.jsx)(s.Flex,{position:"absolute",right:2,top:2,children:(0,i.jsx)(X.A,{onClick:n})}),(0,i.jsxs)(Y.ModalBody,{sx:{bgColor:(0,E.VA)("background/primary")},mt:20,children:[(0,i.jsxs)(s.Flex,{flexDirection:"column",flex:"1",children:[(0,i.jsx)(et,{href:"https://help.suno.com",onClose:n,fontSize:j.fb,color:"white",children:t("nav.help")}),(0,i.jsx)(et,{href:"https://suno.com/about",onClose:n,fontSize:j.fb,color:"white",children:t("nav.about")}),(0,i.jsx)(et,{href:"https://suno.com/blog",onClose:n,fontSize:j.fb,color:"white",children:t("nav.blog")}),l.user&&(0,i.jsx)(et,{onClose:()=>{n(),o()},fontSize:j.fb,color:"white",children:t("nav.feedback")}),(0,i.jsx)(et,{href:"https://jobs.ashbyhq.com/suno",onClose:n,fontSize:j.fb,color:"white",children:t("nav.careers")}),(0,i.jsx)(et,{href:"https://suno.com/terms",onClose:n,fontSize:j.fb,color:"white",children:t("nav.terms")}),(0,i.jsx)(et,{href:"https://suno.com/privacy",onClose:n,fontSize:j.fb,color:"white",children:t("nav.privacy")})]}),(0,i.jsx)(ep,{})]})]})]})},ew=e=>{let{href:t,children:l,onClick:a,className:n}=e,s=(0,x.usePathname)();return(0,i.jsx)(M.A,{className:(0,B.QP)((0,F.A)("py-1.5 rounded-full font-sans text-center","px-3 text-xs","@xs:px-3 @xs:text-sm","@sm:px-3 @sm:text-base",{"text-background-primary bg-foreground-primary":s===t,"text-foreground-primary bg-background-primary":s!==t},n)),href:t,onClick:a,children:l})},eN=e=>{let{onCloseEditProfile:t,isOpenEditProfile:l,onOpenCreate:a,onOpenFeedback:s,hideMobileTopBar:r=!1,enableMobileSongPageV2:d=!1}=e,c="w-6 h-6",u=(0,x.usePathname)(),{isSignedIn:p}=(0,o.d)(),m=(0,K.ho)(),h=u.startsWith("/song/"),{t:f}=(0,J.Bd)(),{isOpen:g,onOpen:v,onClose:y}=(0,n.useDisclosure)();if(r)return null;let b={[j.gd]:u,[j.f1]:(0,E.wu)(u)};return d&&h&&(b={...b,[j.f1]:j.AC.SONG_PAGE_V2}),(0,i.jsxs)("div",{className:"w-full font-sans flex flex-row px-2 h-[50px] bg-transparent text-sm overflow-x-auto overflow-y-hidden",children:[(0,i.jsxs)("div",{className:"@container w-full items-center justify-between flex-1 flex flex-row text-foreground-primary gap-0 font-medium bg-transparent bg-opacity-0",children:[(0,i.jsx)(ew,{href:"/",contextName:"home",children:(0,i.jsx)(er.fAJ,{className:c})}),(0,i.jsx)(ew,{contextName:"library",href:"/me",onClick:e=>{p||(m.openSignUp({...(0,E.Of)("/me",b)}),e.preventDefault())},children:(0,i.jsx)(er.$nG,{className:c})}),(0,i.jsx)(ew,{contextName:"create",onClick:e=>{p||(m.openSignUp({...(0,E.Of)("/create",b)}),e.preventDefault()),a&&a()},href:"/create",className:(0,B.QP)((0,F.A)("bg-[url(/create-button-background.svg)] bg-center font-sans font-medium rounded-full text-white",{"text-amber-300":"/create"===u})),children:(0,i.jsx)(er.WSU,{className:c})}),(0,i.jsx)(ew,{contextName:"explore",href:"https://suno.com/explore",onClick:()=>{},children:(0,i.jsx)(er.rb7,{className:c})}),(0,i.jsxs)(q.Menu,{children:[(0,i.jsx)("button",{"aria-label":f("nav.moreFromSuno"),className:"text-foreground-primary py-2.5 px-3",onClick:()=>{v()},children:(0,i.jsx)(er.jNK,{className:"w-6 h-6"})}),(0,i.jsx)(ej,{isOpen:g,onOpen:v,onClose:y,onOpenFeedback:s})]})]}),(0,i.jsx)(en.f,{isOpen:l,onClose:t,"data-qaid":"modal-edit-profile-title"})]})},ek=(0,p.PA)(e=>{var t,l,r,d,c;let{enableMobileSongPageV2:p}=e,{isSignedIn:m}=(0,o.d)(),f=(0,K.ho)(),g=(0,u.useStatsigClient)(),{t:v}=(0,J.Bd)(),y=(0,x.usePathname)(),{search:w,session:N,notifications:k,iosInvite:A}=(0,P.gy)(),S=(0,x.useRouter)(),[I,_]=(0,h.useState)(!1),[T,L]=(0,h.useState)(!1),[O,R]=(0,h.useState)(null!==(c=N.shownClaimUsername)&&void 0!==c&&c),{isOpen:D,onOpen:B,onClose:z}=(0,n.useDisclosure)(),U=(0,h.useCallback)(async()=>{try{await N.updateShownClaimUsername(),R(!0)}catch(e){console.error("Failed to update shown_claim_username:",e)}},[N]),H=(0,h.useRef)(null);(0,h.useEffect)(()=>{var e;null==H||null===(e=H.current)||void 0===e||e.focus()},[]),(0,h.useEffect)(()=>{N.getUserConfig()},[]),(0,h.useEffect)(()=>{R(!0===N.shownClaimUsername)},[N.shownClaimUsername]);let{isOpen:q,onOpen:$,onClose:ee}=(0,n.useDisclosure)(),et=g.checkGate("ios-intl-invite-gate")&&!!A.promoCodeUrl,en=(0,h.useRef)(null),eo=y.startsWith("/song/"),ec=g.checkGate("show-claim-username-tooltip"),eu={[j.gd]:y,[j.f1]:(0,E.wu)(y)};return p&&eo&&(eu={...eu,[j.f1]:j.AC.SONG_PAGE_V2}),(0,i.jsxs)("div",{className:(0,F.A)("@container sticky flex items-center","w-full h-[60px] min-h-[60px]","px-1 @sm:px-2 gap-1 @sm:gap-2","bg-transparent","z-[".concat(j.Wq,"]"),"overflow-x-auto overflow-y-hidden"),children:[(0,i.jsx)("div",{className:"px-1 ps-2 @sm:px-2 @md:px-3 h-full flex-grow min-w-4rem",children:(0,i.jsx)(Z.A,{className:"h-full w-[5rem] @sm:w-[6.5rem] max-w-full"})}),m&&!(null===(t=N.sub)||void 0===t?void 0:t.plan)&&(0,i.jsx)("div",{className:(0,F.A)("hidden",{"@xs:block":!et,"@md:block":et}),children:(0,i.jsx)(M.A,{href:"/account",children:(0,i.jsx)(b.Ay,{shape:b.aH.Pill,className:N.credits<=10?"bg-white text-vinylBlack-darker":"",children:v("nav.subscribe")})})}),et&&(0,i.jsx)(Q.IconButton,{size:"md","aria-label":v("nav.notifications"),icon:(0,i.jsx)(er.qyI,{className:"w-6 h-6 text-foreground-primary"}),onClick:e=>{e.preventDefault(),ed.LS.logWebPageEvent({userId:N.userId||"",eventType:ed.Y_.CLICK,element:"side_nav_bar",secondaryElement:"ios_invite_claim_button",entityId:N.user.handle,entityType:"inviter_handle",pageUrl:window.location.pathname}),S.push(A.promoCodeUrl)},bg:(0,E.VA)("background/secondary"),backgroundImage:j.tL,backgroundSize:"cover",_hover:{bg:j.tL},borderRadius:"full",variant:"ghost"}),(0,i.jsxs)("div",{className:(0,F.A)({relative:!I,"absolute inset-1.5 p-2 rounded-full bg-tertiary":I,hidden:!m,["z-[".concat(j.f9,"]")]:I}),children:[(0,i.jsx)("input",{className:(0,F.A)("absolute inset-0 w-full h-full p-4 pr-[80px] rounded-full border-none outline-none","bg-transparent placeholder-white/50",{block:!I,hidden:!I}),ref:H,defaultValue:w.searchTerm,placeholder:(null===(l=N.flags)||void 0===l?void 0:l["persona-search"])?"Search for songs, playlists, users, or Personas":"Search for songs, playlists, or users",onChange:e=>{null!=a&&(clearTimeout(a),a=null),a=setTimeout(()=>{w.searchTerm=e.target.value,S.push("/search")},500)}}),(0,i.jsxs)("div",{className:(0,F.A)({"absolute flex flex-row items-center justify-end gap-2 inset-y-0 right-1":I}),children:[I&&(0,i.jsx)(Q.IconButton,{"aria-label":"Clear search",icon:(0,i.jsx)(er.USm,{}),size:"sm",onClick:()=>{w.searchTerm="",H.current&&(H.current.value="",H.current.focus())},bg:"none",hidden:!(w.searchTerm&&I),_hover:{bg:"rgba(255, 255, 255, 0.1)"},variant:"ghost",color:"rgba(255, 255, 255, 0.4)"}),(0,i.jsx)(Q.IconButton,{size:"md","aria-label":v("nav.search"),icon:(0,i.jsx)(er.WIv,{className:"w-4 h-4 text-foreground-primary"}),onClick:()=>{setTimeout(()=>{var e;return null==H?void 0:null===(e=H.current)||void 0===e?void 0:e.focus()},0),_(e=>!e)},bg:(0,E.VA)("background/secondary"),_hover:{bg:"rgba(255, 255, 255, 0.1)"},borderRadius:"full",variant:"ghost"})]})]}),m&&(null===(r=N.flags)||void 0===r?void 0:r["web-notifications-feed"])&&(0,i.jsxs)(es.Nh,{mediaQuery:"(max-width: ".concat(j.j3-1,"px)"),children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(Q.IconButton,{size:"md","aria-label":v("nav.notifications"),icon:(0,i.jsx)(er.CfE,{className:"w-4 h-4 text-foreground-primary"}),onClick:()=>{k.newNotificationSession(),k.loadNotifications(),$(),(0,C.Ay)({actionName:"NotificationListOpened",context:{unreadCount:k.unreadCount,isMobile:!0}})},bg:(0,E.VA)("background/secondary"),_hover:{bg:"rgba(255, 255, 255, 0.1)"},borderRadius:"full",variant:"ghost"}),k.unreadCount>0&&(0,i.jsx)(ea.A,{className:"absolute right-0 top-0 border border-vinylBlack-darker w-3 h-3 animate-popIn"})]}),(0,i.jsxs)(W.Modal,{isOpen:q,onClose:()=>{ee(),(0,C.Ay)({actionName:"NotificationListClosed",context:{unreadCount:k.unreadCount,isMobile:!0}})},size:"full",isCentered:!0,children:[(0,i.jsx)(V.ModalOverlay,{sx:{bgColor:(0,E.VA)("background/primary")}}),(0,i.jsxs)(G.ModalContent,{sx:{bgColor:(0,E.VA)("background/primary")},marginY:"auto",children:[(0,i.jsx)(s.Flex,{position:"absolute",right:2,top:2,children:(0,i.jsx)(X.A,{onClick:e=>{e.shiftKey||k.markAllAsRead(),ee(),(0,C.Ay)({actionName:"NotificationListClosed",context:{unreadCount:k.unreadCount,isMobile:!0}})}})}),(0,i.jsxs)(Y.ModalBody,{sx:{bgColor:(0,E.VA)("background/primary")},overflowY:"auto",paddingX:0,children:[(0,i.jsx)("h2",{className:"text-lg font-medium font-sans text-foreground-primary px-6 py-2",children:v("nav.notifications")}),(0,i.jsx)("div",{children:(0,i.jsx)(ei.A,{currentTime:k.notifiedAt,notifications:k.allNotifications,isLoading:k.isLoading,hasMore:k.hasMore,onLoadMore:()=>k.loadMoreNotifications(),onDotClick:e=>{k.markAsRead(e.id),(0,C.Ay)({actionName:"NotificationItemClicked",context:{notificationId:e.id,notificationType:e.type||"unknown",clickTarget:"dot",isRead:!1,isMobile:!0}})},onProfileClick:(e,t)=>{t&&(t.shiftKey||t.ctrlKey||t.metaKey)||(k.markAsRead(e.id),ee()),(0,C.Ay)({actionName:"NotificationItemClicked",context:{notificationId:e.id,notificationType:e.type||"unknown",clickTarget:e.context||"unknown",isRead:e.isRead,isMobile:!0}})},onContentClick:(e,t)=>{t&&(t.shiftKey||t.ctrlKey||t.metaKey)||(k.markAsRead(e.id),ee()),(0,C.Ay)({actionName:"NotificationItemClicked",context:{notificationId:e.id,notificationType:e.type||"unknown",clickTarget:"content",contentId:e.contentId,contentType:e.contentType,isRead:e.isRead,isMobile:!0}})},onFollowClick:(e,t)=>{t&&t.shiftKey||k.markAsRead(e.id),k.setFollowing(e.handle,!e.isFollowing),(0,C.Ay)({actionName:"NotificationItemClicked",context:{notificationId:e.id,notificationType:e.type||"unknown",clickTarget:e.isFollowing?"unfollow_button":"follow_button",isRead:e.isRead,isMobile:!0}})},onNotificationView:e=>{(0,C.Ay)({actionName:"NotificationItemViewed",context:{notificationId:e.id,notificationType:e.type||"unknown",isRead:e.isRead,isMobile:!0}})}})})]})]})]})]}),m?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:en,children:(0,i.jsx)(eC,{isOpen:T,onClose:()=>L(!1),onToggle:()=>{var e;if(!O&&N.shownCreationTour&&N.user&&!(null===(e=N.user)||void 0===e?void 0:e.is_handle_updated)&&ec){U(),B();return}L(e=>!e)}})}),!O&&N.shownCreationTour&&N.user&&!(null===(d=N.user)||void 0===d?void 0:d.is_handle_updated)&&ec&&(0,i.jsx)(ex,{btnRef:en,handleDismissClaimUsername:U,onOpenWelcomeModal:B,isMobile:!0})]}):(0,i.jsx)("div",{className:"whitespace-nowrap",children:(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,icon:(0,i.jsx)(er.flY,{}),onClick:()=>{(0,C.Ay)({actionName:"NavbarMobileSignInButtonClicked",context:{pathname:y}}),f.openSignUp({...(0,E.Of)(y,eu)})},children:v("nav.signIn")})}),D&&ec&&(0,i.jsx)(el.A,{isOpen:D,onClose:()=>{z(),U()},reclaim:!0})]})});var eA=l(3096),eS=l(10573),eI=l(97942),eP=l(4837);let e_=(0,p.PA)(e=>{var t,l;let{isOpen:a,onClose:n,onPlaylistClick:s,clipId:o}=e,{library:r,clips:d}=(0,P.gy)(),{ref:c}=(0,eA.Wx)({threshold:0,onChange:async e=>{if(e){var t;let e=Math.floor((null===(t=d.allPlaylists)||void 0===t?void 0:t.length)/E.UO)+1;r.loadPlaylists(e)}}}),{session:u,menus:p}=(0,P.gy)(),[m,x]=(0,h.useState)(!1),f=p.selectedClipIds;(0,h.useEffect)(()=>{u.userId&&a&&r.loadPlaylists()},[u.userId,a]);let g=null===(t=d.allPlaylists)||void 0===t?void 0:t.filter(e=>{var t;return e.id!==(null===(t=r.activePlaylist)||void 0===t?void 0:t.id)}),[v,y]=(0,h.useState)(""),[C,w]=(0,h.useState)("");return((0,h.useEffect)(()=>{let e=["/placeholder-1.jpg","/placeholder-2.jpg","/placeholder-3.jpg"];a&&y(e[Math.floor(Math.random()*e.length)])},[a]),a)?(0,i.jsxs)(eP.A,{title:"Add to Playlist",onClose:n,wrapperClasses:"max-h-[480px] mb-4",withHorizontalPadding:!0,children:[(0,i.jsxs)("div",{className:"overflow-y-auto max-h-[400px] mb-4",children:[!g.length&&r.isLoaded.playlists&&(0,i.jsx)("div",{className:"flex flex-col items-center gap-8 font-sans",children:(0,i.jsx)("p",{children:"You have no playlists to add to. Click below to create a new playlist."})}),g.map(e=>{var t,l;return(0,i.jsxs)("div",{className:"flex items-center p-2 cursor-pointer rounded-md hover:bg-secondary/20",onClick:()=>{(f||o)&&s&&s([...f||!!o&&[o]||[]].map(e=>d.clipById[e.toString()]),e),n()},children:[(0,i.jsx)(eS.A,{imageSize:j.M_,src:e.image_url||(null===(l=e.playlist_clips[0])||void 0===l?void 0:null===(t=l.clip)||void 0===t?void 0:t.image_url)||v,width:"40px",borderRadius:"sm",alt:"Playlist cover image"}),(0,i.jsx)("div",{className:"ml-4 font-sans",children:e.name||"Untitled Playlist"})]},e.id)}),(null===(l=d.allPlaylists)||void 0===l?void 0:l.length)<r.numTotalPlaylists&&(0,i.jsx)("div",{className:"flex justify-center p-4",children:(0,i.jsx)(eI.A,{ref:c})})]}),(0,i.jsxs)("div",{className:"w-full flex gap-4 whitespace-nowrap",children:[(0,i.jsx)("input",{className:"w-full border bg-transparent border-secondary/20 focus-within:outline-white rounded-md py-3 px-2 text-sm whitespace-nowrap",placeholder:"Playlist Name",value:C,onChange:e=>w(e.target.value)}),(0,i.jsx)(b.Ay,{variant:b.Ak.Secondary,onClick:async()=>{x(!0),w(""),await d.createPlaylist(C&&{name:C}),r.loadPlaylists(),x(!1)},disabled:m,icon:m&&(0,i.jsx)(eI.A,{}),children:"Create Playlist"})]})]}):null}),eM=(0,p.PA)(e=>{let{isOpen:t,onClose:l,onProjectClick:a,isInCreate:n}=e,{session:s,clips:o,project:r,menus:d}=(0,P.gy)(),[c,u]=(0,h.useState)(!1),[p,m]=(0,h.useState)(!1),[x,f]=(0,h.useState)(1),[g,v]=(0,h.useState)(!0),[y,w]=(0,h.useState)([]),[N,k]=(0,h.useState)(""),A=(0,h.useRef)(null),{ref:S}=(0,eA.Wx)({threshold:0,onChange:async e=>{e&&g&&!p&&f(e=>e+1)}});(0,h.useEffect)(()=>{x>1&&I(!1)},[x]),(0,h.useEffect)(()=>{s.userId&&t&&(f(1),w([]),v(!0),I(!0))},[s.userId,t]);let I=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m(!0);try{let{projects:t,numTotalResults:l}=await r.fetchProjectsList(x);if(0===t.length)v(!1);else{let a=A.current,i=null==a?void 0:a.scrollTop,n=e?t:[...new Map([...y,...t].map(e=>[e.id,e])).values()];w(n),v(n.length<l),i&&a&&requestAnimationFrame(()=>{a.scrollTop=i})}}catch(e){console.error("Error fetching projects:",e)}finally{m(!1)}};if(!t)return null;let _=n&&r.currentProjectId===j.Sk,M=y.filter(e=>(!_||e.id!==j.Sk)&&(!n||e.id!==r.currentProjectId));return(0,i.jsxs)(eP.A,{title:"Move to Workspace",onClose:()=>{l(),(0,C.Ay)({actionName:"AddToProjectModalClicked",context:{type:"close"}})},withHorizontalPadding:!0,wrapperClasses:"max-h-[480px] mb-4",children:[(0,i.jsxs)("div",{ref:A,className:"overflow-y-auto max-h-[400px] mb-4",children:[!M.length&&!p&&(0,i.jsx)("div",{className:"flex flex-col items-center gap-8 font-sans",children:(0,i.jsx)("p",{children:"You have no workspaces to add to. Click below to create a new workspace."})}),M.map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-2 cursor-pointer rounded-md hover:bg-secondary/20",onClick:()=>{let t=d.selectedClipIds;d.selectedClipIds&&t.length>0&&(a(t.map(e=>o.clipById[e]),e.id),d.setSelected(new Set([])),(0,C.Ay)({actionName:"AddToProjectModalClicked",context:{type:"add-to-project",projectId:e.id,originalProjectId:r.currentProjectId,selectedClipIds:t,clipCount:t.length}})),l()},children:[(0,i.jsxs)("div",{className:"flex flex-1 overflow-hidden items-center",children:[(0,i.jsx)("div",{className:"w-[53px] h-[40px] rounded-[8px] overflow-hidden flex-shrink-0",children:(0,i.jsx)(eS.A,{imageSize:j.M_,src:r.getAuraImageForProject(e.id),width:"53px",height:"40px",alt:"Workspace cover image",fallbackSrc:"/auras/Aura-01.png"})}),(0,i.jsx)("div",{className:"ml-4 font-sans min-w-0 flex-1",children:(0,i.jsx)("div",{className:"truncate",children:(0,E.P_)(e)})})]}),(0,i.jsxs)("div",{className:"text-sm flex-0 text-secondary",children:[(null==e?void 0:e.clip_count)||0," clip",(null==e?void 0:e.clip_count)&&(null==e?void 0:e.clip_count)>1||(null==e?void 0:e.clip_count)===0?"s":""]})]},e.id)),g&&(0,i.jsx)("div",{className:"flex justify-center p-4",children:(0,i.jsx)(eI.A,{ref:S})})]}),(0,i.jsxs)("div",{className:"w-full flex gap-4 whitespace-nowrap",children:[(0,i.jsxs)("div",{className:"relative w-full",children:[(0,i.jsx)("input",{className:"w-full border bg-transparent border-secondary/20 focus-within:outline-white rounded-md py-3 px-2 whitespace-nowrap",placeholder:j.wJ,maxLength:100,value:N,onChange:e=>k(e.target.value)}),(0,i.jsxs)("div",{className:"font-sans absolute bottom-[2px] right-2 text-secondary opacity-50 text-[12px] bg-inherit bg-o-50",children:[null==N?void 0:N.length," / 100"]})]}),(0,i.jsx)(b.Ay,{onClick:async()=>{(0,C.Ay)({actionName:"AddToProjectModalClicked",context:{type:"create-project",projectName:N,originalProjectId:r.currentProjectId}}),u(!0),k("");let e=await r.createProject(N,"");u(!1);let t=d.selectedClipIds;e&&d.selectedClipIds&&t.length>0&&(a(t.map(e=>o.clipById[e]),e.id),d.setSelected(new Set([])),(0,C.Ay)({actionName:"AddToProjectModalClicked",context:{type:"add-to-new-project",projectId:e.id,originalProjectId:r.currentProjectId,selectedClipIds:t,clipCount:t.length}}),l())},children:c?"Creating...":"Create Workspace"})]})]})});var eT=l(60078),eE=l(2044),eL=l(43508),eO=l(49174),eR=l(78294);let eD=e=>{var t;let{clip:l,isOpen:a,onClose:n,onFeedbackSubmit:o,onFeedbackRemoved:r}=e,{clips:d}=(0,P.gy)(),[c,u]=(0,h.useState)({goodQuality:!1,badPoorAudio:!1,badNoFollowLyrics:!1,badNoFollowStyle:!1,badStructure:!1,other:!1}),p=e=>{let{name:t,checked:l}=e.target;"goodQuality"===t?u({goodQuality:l,badPoorAudio:!1,badNoFollowLyrics:!1,badNoFollowStyle:!1,badStructure:!1,other:!1}):u(e=>({...e,[t]:l,goodQuality:!1}))},m=e=>"goodQuality"===e&&(c.badPoorAudio||c.badNoFollowLyrics||c.badNoFollowStyle||c.badStructure||c.other)?"rgba(255, 255, 255, 0.3)":"goodQuality"!==e&&c.goodQuality?"rgba(255, 255, 255, 0.3)":"white",x=async()=>{let e=[];c.goodQuality&&e.push("good_quality"),c.badPoorAudio&&e.push("bad_poor_audio_quality"),c.badNoFollowLyrics&&e.push("bad_no_follow_lyrics"),c.badNoFollowStyle&&e.push("bad_no_follow_style"),c.badStructure&&e.push("bad_song_structure"),c.other&&e.push("other");try{await d.feedbackClip((null==l?void 0:l.id)||"",e.join(",")),o()}catch(e){console.error("Failed to submit feedback:",e);return}n()},f=async()=>{try{await d.feedbackClip((null==l?void 0:l.id)||"",""),u({goodQuality:!1,badPoorAudio:!1,badNoFollowLyrics:!1,badNoFollowStyle:!1,badStructure:!1,other:!1}),r()}catch(e){console.error("Failed to remove feedback:",e);return}n()};return(0,h.useEffect)(()=>{if(l&&a){let e=(0,eR.NE)(l);u({goodQuality:e.includes("good_quality"),badPoorAudio:e.includes("bad_poor_audio_quality"),badNoFollowLyrics:e.includes("bad_no_follow_lyrics"),badNoFollowStyle:e.includes("bad_no_follow_style"),badStructure:e.includes("bad_song_structure"),other:e.includes("other")})}},[a]),(0,i.jsxs)(W.Modal,{isOpen:a,onClose:n,isCentered:!0,children:[(0,i.jsx)(V.ModalOverlay,{}),(0,i.jsxs)(G.ModalContent,{sx:{bgColor:"#252020"},borderRadius:"32px",children:[(0,i.jsxs)(s.Flex,{justifyContent:"space-between",alignItems:"center",px:3,children:[(0,i.jsxs)("span",{className:"font-serif text-2xl pl-4 py-8",children:["How is the quality of this"," ",(null==l?void 0:null===(t=l.metadata)||void 0===t?void 0:t.history)?"clip":"song","?"]}),(0,i.jsx)(s.Flex,{className:"-mt-10",children:(0,i.jsx)(X.A,{onClick:n})})]}),(0,i.jsx)(Y.ModalBody,{children:(0,i.jsxs)(eT.Stack,{spacing:3,children:[(0,i.jsx)(eE.Checkbox,{name:"goodQuality",isChecked:c.goodQuality,onChange:p,color:m("goodQuality"),colorScheme:"gray",fontFamily:"Neue Montreal",children:"Great audio quality and song structure"}),(0,i.jsx)(eL.Divider,{}),(0,i.jsx)(eE.Checkbox,{name:"badPoorAudio",isChecked:c.badPoorAudio,onChange:p,color:m("badPoorAudio"),colorScheme:"gray",fontFamily:"Neue Montreal",children:"Poor audio/vocal quality"}),(0,i.jsx)(eE.Checkbox,{name:"badNoFollowLyrics",isChecked:c.badNoFollowLyrics,onChange:p,color:m("badNoFollowLyrics"),colorScheme:"gray",fontFamily:"Neue Montreal",children:"Incorrect pronunciation of words"}),(0,i.jsx)(eE.Checkbox,{name:"badNoFollowStyle",isChecked:c.badNoFollowStyle,onChange:p,color:m("badNoFollowStyle"),colorScheme:"gray",fontFamily:"Neue Montreal",children:"Does not adhere to prompt instructions"}),(0,i.jsx)(eE.Checkbox,{name:"badStructure",isChecked:c.badStructure,onChange:p,color:m("badStructure"),colorScheme:"gray",fontFamily:"Neue Montreal",children:"Poor song structure"}),(0,i.jsx)(eE.Checkbox,{name:"other",isChecked:c.other,onChange:p,color:m("other"),colorScheme:"gray",fontFamily:"Neue Montreal",children:"Other"})]})}),(0,i.jsxs)(eO.ModalFooter,{alignItems:"flex-end",gap:2,children:[(0,i.jsx)(b.Ay,{onClick:f,children:"Clear Feedback"}),(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,onClick:x,children:"Submit Feedback"})]})]})]})};var eF=l(24962);let eB=e=>{let{onClose:t,userId:l}=e,a=(0,x.useRouter)(),n=(0,x.usePathname)();return(0,i.jsxs)(eP.A,{title:"Upgrade to generate more songs at once",onClose:t,wrapperClasses:"overflow-y-auto",titleClassName:"text-xl",children:[(0,i.jsx)("div",{className:"text-primary mb-6",children:"You've reached the maximum number of songs you can create simultaneously. Upgrade your plan to generate more songs at the same time and unleash your creativity without limits."}),(0,i.jsx)("div",{className:"flex flex-col gap-2",children:(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(eF.A,{onClick:()=>{a.push("/account"),t(),ed.LS.segmentTrack(ec.f7.webPageEvent,{userId:l,element:"concurrency_upgrade_modal",eventType:"click",pageUrl:n})},text:"Upgrade Plan",extraClasses:'!bg-[url("/auras/Aura-02.jpg")] w-full ![background-size:cover] hover:![background-size:cover] !bg-center font-bold'})})})]})},ez=e=>{let{isOpen:t,onClose:l,onConfirm:a,title:n,message:s,renderMessage:o,confirmButtonText:r="Confirm",cancelButtonText:d="Cancel"}=e;return t?(0,i.jsxs)(eP.A,{onClose:l,title:n,wrapperClasses:"overflow-y-auto",contentWrapperClasses:"mx-[24px]",children:[(0,i.jsx)("div",{className:"text-primary",children:o?o():s||""}),(0,i.jsxs)("div",{className:"flex justify-end items-center mt-4 px-4 pb-4 gap-2",children:[(0,i.jsx)(b.Ay,{onClick:l,children:d}),(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,onClick:a,children:r})]})]}):null},eU=e=>{let{isOpen:t,onClose:l,onConfirm:a,onAction:n,title:s,message:o,renderMessage:r,actionButtonText:d,confirmButtonText:c="Confirm"}=e;return t?(0,i.jsxs)(eP.A,{onClose:l,title:s,titleClassName:"font-sans text-center text-2xl font-bold",titleWrapperClasses:"justify-center",wrapperClasses:"overflow-y-auto",contentWrapperClasses:"mx-[24px]",renderIcon:()=>(0,i.jsx)(er.Adg,{className:"w-12 h-12 fill-primary"}),children:[(0,i.jsx)("div",{children:r?r():o||""}),(0,i.jsxs)("div",{className:"flex justify-center items-center mt-4 px-4 pb-4 gap-2 flex-col w-auto",children:[n?(0,i.jsx)(b.Ay,{shape:b.aH.Pill,size:b.Mp.Medium,onClick:()=>{n(),l()},className:"w-auto min-w-[200px] before:bg-[image:var(--button-background-aura-orange)] before:bg-cover before:bg-center before:opacity-80 hover:before:opacity-100 hover:before:brightness-120",children:d}):null,(0,i.jsx)(b.Ay,{shape:b.aH.Pill,size:b.Mp.Medium,className:"min-w-[200px] w-auto",onClick:()=>{a(),l()},children:c})]})]}):null};var eH=l(71013),eW=l(3740);let eV=e=>{let{isOpen:t,onClose:l,onConfirm:a,clipTitle:n,isLoading:o,headerText:r}=e;return(0,i.jsxs)(W.Modal,{isOpen:t,onClose:l,isCentered:!0,size:"xl",children:[(0,i.jsx)(V.ModalOverlay,{}),(0,i.jsxs)(G.ModalContent,{borderRadius:"32px",sx:{bgColor:"#252020"},children:[(0,i.jsxs)(s.Flex,{justifyContent:"space-between",alignItems:"center",px:3,children:[(0,i.jsx)("span",{className:"font-serif text-3xl pt-8 ml-8",children:r}),(0,i.jsx)(s.Flex,{mt:-12,children:(0,i.jsx)(X.A,{onClick:l})})]}),(0,i.jsxs)(Y.ModalBody,{ml:6,children:[(0,i.jsxs)(s.Flex,{alignItems:"center",mb:2,children:[(0,i.jsx)(eW.Icon,{as:er.id,color:"white",mr:2}),(0,i.jsx)("span",{className:"font-sans font-bold",children:"This action cannot be undone."})]}),(0,i.jsxs)("span",{className:"font-sans font-bold mt-4 mb-2",children:["This will remove ",(0,i.jsx)("b",{children:n})," from your account."]})]}),(0,i.jsxs)(eO.ModalFooter,{className:"flex gap-2",children:[(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,onClick:l,children:"No, take me back!"}),(0,i.jsx)(b.Ay,{onClick:a,icon:o&&(0,i.jsx)(eI.A,{}),children:"Yes, I'm sure"})]})]})]})};var eG=l(17862);let eY=[{id:"aura",style:"standard",label:"Aura Standard"},{id:"aura",style:"blue",label:"Aura Blue"},{id:"starfield",style:"green",label:"Starfield Green"},{id:"fbm_warp",style:"pink",label:"FBM Warp Pink"},{id:"clouds",style:"standard",label:"Clouds"},{id:"neon",style:"pulse",label:"Neon Pulse"},{id:"synthwave",style:"scene_v1",label:"Laser Sunset"},{id:"cover",style:"image",label:"Image Cover"},{id:"cover",style:"video",label:"Video Cover"}],eq=[{id:"core_lyrics_standard",label:"Standard (with Lyrics)"},{id:"core_info_standard",label:"Info Standard"},{id:"leading_info_standard",label:"Leading Info"},{id:"framed_core_center",label:"Framed Center"},{id:"framed_core_top",label:"Framed Top"},{id:"none",label:"None"}],eQ=[{id:"none",label:"None"},{id:"lyrics_box",label:"Lyrics Box"},{id:"lyrics_two_line",label:"Two Line Lyrics"},{id:"lyrics_three_line",label:"Three Line Lyrics"}],eK=(0,p.PA)(e=>{let{isOpen:t,onClose:l}=e,{clips:a}=(0,P.gy)(),n=a.selectedShareAssetClip,[s,o]=(0,h.useState)({preset_id:"aura",preset_style:"standard",sticker_style:"core_lyrics_standard",lyrics_style:"lyrics_box"}),[r,d]=(0,h.useState)(0),[c,u]=(0,h.useState)(15),[p,m]=(0,h.useState)(r.toString()),[x,f]=(0,h.useState)(c.toString()),g="core_lyrics_standard"===s.sticker_style;(0,h.useEffect)(()=>{g||"none"===s.lyrics_style||o(e=>({...e,lyrics_style:"none"}))},[s.sticker_style,s.lyrics_style,g]),(0,h.useEffect)(()=>{t||a.clearShareAsset()},[t,a]),(0,h.useEffect)(()=>{m(r.toString())},[r]),(0,h.useEffect)(()=>{f(c.toString())},[c]);let v=async()=>{n&&await a.createShareAsset(n,{asset_config:s,clip_start_time:r,clip_end_time:c})};return t&&n?(0,i.jsx)(eP.A,{title:"Create Shareable Asset",onClose:l,wrapperClasses:"max-h-[580px] mb-4",withHorizontalPadding:!0,children:(0,i.jsx)("div",{className:"w-full p-4 my-4 rounded-lg bg-quaternary",children:a.shareAssetId?(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-center font-medium",children:["rendering"===a.shareAssetStatus&&(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(eI.A,{}),(0,i.jsx)("span",{children:"Rendering your share asset..."})]}),"complete"===a.shareAssetStatus&&(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)("span",{children:"Your share asset is ready!"})}),"error"===a.shareAssetStatus&&(0,i.jsx)("div",{className:"flex items-center gap-2 text-red-500",children:(0,i.jsx)("span",{children:"Error creating share asset"})})]}),"complete"===a.shareAssetStatus&&a.shareAssetUrl&&(0,i.jsx)(b.Ay,{className:"w-full py-4 mt-2",variant:b.Ak.Secondary,onClick:()=>{a.shareAssetUrl&&window.open(a.shareAssetUrl,"_blank")},icon:(0,i.jsx)(eG.s,{}),children:"Download Share Asset"}),"rendering"!==a.shareAssetStatus&&(0,i.jsx)(b.Ay,{className:"w-full py-4 mt-2",variant:b.Ak.Tertiary,onClick:()=>{a.clearShareAsset()},children:"Create Another"})]}):(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("label",{className:"font-medium",children:"Preset Style"}),(0,i.jsx)("div",{className:"flex gap-3",children:(0,i.jsx)("select",{className:"flex-1 p-2 rounded bg-tertiary",value:"".concat(s.preset_id,"|").concat(s.preset_style),onChange:e=>{let[t,l]=e.target.value.split("|");o({...s,preset_id:t,preset_style:l})},children:eY.map(e=>(0,i.jsx)("option",{value:"".concat(e.id,"|").concat(e.style),children:e.label},"".concat(e.id,"-").concat(e.style)))})})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("label",{className:"font-medium",children:"Display Options"}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("select",{className:"flex-1 p-2 rounded bg-tertiary",value:s.sticker_style,onChange:e=>o({...s,sticker_style:e.target.value}),children:eq.map(e=>(0,i.jsx)("option",{value:e.id,children:e.label},e.id))}),(0,i.jsx)("select",{className:"flex-1 p-2 rounded bg-tertiary",value:s.lyrics_style,onChange:e=>o({...s,lyrics_style:e.target.value}),disabled:!g,children:eQ.map(e=>(0,i.jsx)("option",{value:e.id,children:e.label},e.id))})]}),!g&&(0,i.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"Lyrics are only available with the Standard sticker style"})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("label",{className:"font-medium",children:"Clip Time Range (seconds)"}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("label",{className:"text-sm",children:"Start"}),(0,i.jsx)("input",{type:"number",className:"w-full p-2 rounded bg-tertiary",value:p,onChange:e=>{if(m(e.target.value),""!==e.target.value){let t=Number(e.target.value);isNaN(t)||d(t)}},onBlur:()=>{(""===p||isNaN(Number(p)))&&(m("0"),d(0))},min:0,step:"any"})]}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("label",{className:"text-sm",children:"End"}),(0,i.jsx)("input",{type:"number",className:"w-full p-2 rounded bg-tertiary",value:x,onChange:e=>{if(f(e.target.value),""!==e.target.value){let t=Number(e.target.value);isNaN(t)||u(t)}},onBlur:()=>{if(""===x||isNaN(Number(x))){let e=Math.max(r+1,1);f(e.toString()),u(e)}},min:r+1,step:"any"})]})]})]}),(0,i.jsx)(b.Ay,{className:"w-full py-4 mt-2",variant:b.Ak.Primary,onClick:v,disabled:null!==a.pendingShareAssetClip,icon:a.pendingShareAssetClip?(0,i.jsx)(eI.A,{}):null,children:a.pendingShareAssetClip?"Creating...":"Create Share Asset"})]})})}):null});var eJ=l(24423);let eX=(0,p.PA)(e=>{let{isOpen:t,onClose:l}=e,{library:a,clips:n}=(0,P.gy)(),s=n.pendingWavDownloadClip||n.wavDownloadClip;return((0,h.useEffect)(()=>{null===n.pendingWavDownloadClip&&null===n.wavDownloadClip&&l()},[n.pendingWavDownloadClip,n.wavDownloadClip]),t&&s)?(0,i.jsx)(eP.A,{title:"Download WAV Audio",onClose:l,wrapperClasses:"max-h-[480px] mb-4",withHorizontalPadding:!0,children:(0,i.jsxs)("div",{className:"w-full flex justify-center p-4 my-4 rounded-lg bg-quaternary",children:[(0,i.jsx)("div",{className:"flex flex-row items-center ".concat(n.pendingWavDownloadClip?"":"font-bold"),children:n.pendingWavDownloadClip?"Preparing your download...":"".concat((0,E.EJ)((0,E.p8)(s)),".wav")}),(0,i.jsx)("div",{className:"flex flex-row-reverse flex-1",children:(0,i.jsx)(b.Ay,{className:"py-4",variant:b.Ak.Secondary,onClick:async()=>{n.wavDownloadClip&&(await (0,eJ.Vr)(a.apiClient,n.wavDownloadClip,"audio-wav",n.wavDownloadUrl||""),l&&l())},disabled:!!n.pendingWavDownloadClip,icon:n.pendingWavDownloadClip?(0,i.jsx)(eI.A,{}):(0,i.jsx)(eG.s,{}),children:"Download File"})})]})}):null});var eZ=l(57511),e$=l(80360),e0=l(82961),e1=l(12974),e3=l(61073);let e6=e=>{let{onVideoSelect:t,selectedVideo:l,width:a=200,height:n=300}=e,s=(0,e1.useToast)(),o=(0,h.useRef)(null),{getRootProps:r,getInputProps:d}=(0,e3.VB)({accept:{"video/mp4":[".mp4"],"video/quicktime":[".mov"]},maxFiles:1,onDrop:async e=>{if(!(null==e?void 0:e[0]))return;let l=document.createElement("video");l.preload="metadata";try{let a=await new Promise(t=>{l.onloadedmetadata=()=>{let e=l.duration;URL.revokeObjectURL(l.src),t(e)},l.src=URL.createObjectURL(e[0])});if(a>=11){s({title:"Video too long",description:"Please upload a video that is 10 seconds or shorter",status:"error",duration:4e3,isClosable:!0}),t(null);return}if(a<1){s({title:"Video too short",description:"Please upload a video that is at least 1 second long",status:"error",duration:4e3,isClosable:!0}),t(null);return}t(e[0])}catch(e){console.error("Error checking video duration:",e),t(null)}}});return(0,i.jsx)("div",{className:"flex flex-col gap-4 shrink-0",children:l?(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("video",{className:"object-cover rounded-lg",ref:o,src:URL.createObjectURL(l),style:{width:a,height:n},controls:!0,controlsList:"nodownload nofullscreen noremoteplayback"}),(0,i.jsx)(b.Ay,{className:"absolute right-1 top-1",variant:b.Ak.Glass,size:b.Mp.Small,shape:b.aH.Pill,icon:er.ucK,"aria-label":"Remove video",onClick:()=>t(null)})]}):(0,i.jsxs)("div",{className:(0,F.A)("flex flex-col justify-center items-center p-10 gap-4","cursor-pointer rounded-xl border-4 border-background-primary","bg-background-secondary text-foreground-primary"),...r(),style:{width:a,height:n},children:[(0,i.jsx)("input",{...d()}),(0,i.jsx)(er.JMY,{className:"w-10 h-10"}),(0,i.jsx)("p",{className:"text-center",children:"Upload a Video"})]})})},e5=(0,p.PA)(e=>{let{onVideoSelect:t,selectedVideo:l,onClose:a,onCancel:n,onSave:s,showBackButton:o=!1}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center px-6",children:[o&&(0,i.jsx)("div",{className:"px-2",children:(0,i.jsx)(b.Ay,{variant:b.Ak.Secondary,onClick:n,className:"p-2",iconStart:er.YJP,shape:b.aH.Pill})}),(0,i.jsx)("div",{className:"flex-1 font-serif text-2xl py-6",children:"Upload a Video"}),(0,i.jsx)("div",{children:(0,i.jsx)(X.A,{onClick:a})})]}),(0,i.jsx)(Y.ModalBody,{overflowY:"auto",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[(0,i.jsx)(e6,{onVideoSelect:t,selectedVideo:l,width:e0.wm,height:e0.Zs}),(0,i.jsxs)("div",{className:"w-full font-sans font-normal text-base leading-relaxed",children:[(0,i.jsx)("h4",{className:"font-semibold",children:"Upload a video"}),(0,i.jsx)("ul",{className:"list-disc pl-4",children:(0,i.jsx)("li",{children:"Videos that do not follow our policies will be removed"})}),(0,i.jsx)("h4",{className:"font-semibold",children:"File requirements:"}),(0,i.jsxs)("ul",{className:"list-disc pl-4",children:[(0,i.jsx)("li",{children:"9x16 aspect ratio"}),(0,i.jsx)("li",{children:"at least 720px tall"}),(0,i.jsx)("li",{children:"MP4, MOV files"}),(0,i.jsx)("li",{children:"Videos can be at most 10 seconds long"})]})]})]})}),(0,i.jsx)(eL.Divider,{}),(0,i.jsxs)(eO.ModalFooter,{className:"flex gap-2",children:[(0,i.jsx)(b.Ay,{variant:b.Ak.Secondary,onClick:n,children:"Cancel"}),(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,onClick:s,className:"px-6",disabled:!l,children:"Save"})]})]})});var e2=l(79801),e4=l(75778);let e8=(0,p.PA)(e=>{var t,l;let{isOpen:a,onClose:n,onSubmit:s}=e,{clips:o,library:r,session:d}=(0,P.gy)(),c=(0,ev.RH)(),u=(null===(t=r.activeClip)||void 0===t?void 0:t.id)||"",{editedTitle:p,setEditedTitle:m,editedImagePrompt:x,setEditedImagePrompt:f,currentImage:g,setCurrentImage:v,isLoading:y,setIsLoading:j,isGenerating:w,setIsGenerating:N,addedImages:k,setAddedImages:A,isAddingImage:S,setIsAddingImage:I,addingImageDataURL:_,setAddingImageDataURL:M,addingImageChanged:T,setAddingImageChanged:L,continuedClips:O,setContinuedClips:R,initialImageURL:D,setInitialImageURL:F,currentActiveClip:B,setCurrentActiveClip:z,currentLyrics:U,setCurrentLyrics:H,currentCaption:q,setCurrentCaption:Q,isAddingVideo:K,setIsAddingVideo:J,selectedVideo:Z,setSelectedVideo:$}=(0,e4.A)(r.activeClip),[ee]=(0,h.useState)(()=>new eZ.B(d,null,c,r,void 0,!0)),et=()=>{I(!1),A([]),M(null),I(!1),N(!1),L(!1),R([]),F(null),m(""),f(""),J(!1),$(null),n()};(0,h.useEffect)(()=>{v(null==B?void 0:B.image_url),(async()=>{var e,t;if(!(null==B?void 0:null===(e=B.metadata)||void 0===e?void 0:e.history)&&!(null==B?void 0:B.metadata.concat_history)){R([]);return}let l=null===(t=(null==B?void 0:B.metadata.history)||(null==B?void 0:B.metadata.concat_history)||[])||void 0===t?void 0:t.filter(e=>e.id).map(e=>o.loadClipById(e.id));try{let e=await Promise.all(l);R(e.filter(Boolean))}catch(e){console.error("Error fetching continued clips:",e)}})()},[B]),(0,h.useEffect)(()=>{m(r.activeClip?(0,E.p8)(r.activeClip):""),z(r.activeClip)},[a]);let el=async()=>{var e,t,l;j(!0),(p||U!==(null===(e=r.activeClip)||void 0===e?void 0:e.metadata.prompt)||g||q!==(null===(t=r.activeClip)||void 0===t?void 0:t.caption))&&await s(p,g||void 0,U,q!==(null===(l=r.activeClip)||void 0===l?void 0:l.caption)?q:void 0,Z?ee.uploadId:void 0,!1),j(!1),et()};return(0,i.jsxs)(W.Modal,{isOpen:a,onClose:et,"data-qaid":"modal-edit-clip-title",isCentered:!0,blockScrollOnMount:!1,children:[(0,i.jsx)(V.ModalOverlay,{}),(0,i.jsx)(G.ModalContent,{sx:{bgColor:"#252020"},borderRadius:"32px",h:"auto",maxH:"600px",maxW:"600px",children:K?(0,i.jsx)(e5,{onVideoSelect:e=>{$(e),(0,C.Ay)({actionName:"SongEditCoverArtUploadClicked",principalObjectType:"song",principalObjectValue:u,context:{clipId:u,mediaType:"video"}}),e?ee.uppy.addFile({name:e.name,type:e.type,data:e}):ee.uppy.getFiles().forEach(e=>{ee.uppy.removeFile(e.id)})},selectedVideo:Z,onClose:et,onCancel:()=>{$(null),J(!1),ee.uppy.getFiles().forEach(e=>{ee.uppy.removeFile(e.id)})},onSave:async()=>{Z&&(J(!1),await ee.uppy.upload(),(0,C.Ay)({actionName:"SongEditCoverArtSaveClicked",principalObjectType:"song",principalObjectValue:u,context:{clipId:u,mediaType:"video"}}))}}):S?(0,i.jsx)(e$.Ay,{initialImageURL:D,setAddingImageDataURL:M,addingImageDataURL:_,addingImageChanged:T,setAddingImageChanged:L,editedImagePrompt:x,setEditedImagePrompt:f,setInitialImageURL:F,isGenerating:w,setIsGenerating:N,setIsAddingImage:I,setAddedImages:A,setCurrentImage:v,addedImages:k,onClose:et}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center px-6",children:[(0,i.jsx)("div",{className:"flex-1 font-serif text-2xl py-6",children:"Edit Song Details"}),(0,i.jsx)("div",{children:(0,i.jsx)(X.A,{onClick:n})})]}),(0,i.jsx)(Y.ModalBody,{overflowY:"auto",children:(0,i.jsx)(e2.m,{clipId:u,editedTitle:p,setEditedTitle:m,currentActiveClip:B,currentImage:g,setCurrentImage:v,setIsAddingImage:I,continuedClips:O,addedImages:k,currentLyrics:U,setCurrentLyrics:H,currentCaption:q,setCurrentCaption:Q,selectedVideo:Z,setIsAddingVideo:J,uploadState:ee})}),(0,i.jsx)(eL.Divider,{}),(0,i.jsxs)(eO.ModalFooter,{className:"flex gap-2",children:[(0,i.jsx)(b.Ay,{onClick:et,children:"Cancel"}),(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,onClick:el,icon:y&&(0,i.jsx)(eI.A,{className:"text-black/75"}),disabled:!p&&!g||p===(null==B?void 0:B.title)&&g===(null==B?void 0:B.image_url)&&U===(null==B?void 0:null===(l=B.metadata)||void 0===l?void 0:l.prompt)&&q===(null==B?void 0:B.caption)&&null===Z||p.length>100||ee.isUploading||ee.isProcessing||y,children:"Submit"})]})]})})]})}),e7=e=>{let{isOpen:t,onClose:l,clipId:a,clipTitle:n}=e,[o,r]=(0,h.useState)([]),d=(0,e1.useToast)(),{clips:c}=(0,P.gy)(),[u,p]=(0,h.useState)(!1),m=async()=>{p(!0);try{await c.flagClip(a,o.join(",")),l(),r([]),p(!1)}catch(e){d({title:"Error flagging song.",description:"Something went wrong. Please try again later.",status:"error",duration:5e3,isClosable:!0}),p(!1)}},x=e=>t=>{t.target.checked?r([...o,e]):r(o.filter(t=>t!==e))};return(0,i.jsxs)(W.Modal,{isOpen:t,onClose:l,isCentered:!0,size:"xl",children:[(0,i.jsx)(V.ModalOverlay,{}),(0,i.jsxs)(G.ModalContent,{sx:{bgColor:"#252020"},borderRadius:"32px",position:"relative",children:[(0,i.jsxs)(s.Flex,{justifyContent:"space-between",alignItems:"center",px:3,children:[(0,i.jsxs)("span",{className:"font-serif text-2xl pl-4 py-8",children:["Please provide reasons for flagging ",(0,i.jsx)("b",{children:n})]}),(0,i.jsx)(s.Flex,{mt:-10,children:(0,i.jsx)(X.A,{onClick:l})})]}),(0,i.jsx)(Y.ModalBody,{pb:6,children:(0,i.jsxs)(eT.Stack,{children:[(0,i.jsx)(eE.Checkbox,{size:"lg",fontFamily:"Neue Montreal",name:"flag_audio_quality",onChange:x("flag_audio_quality"),colorScheme:"gray",children:"Low audio quality"}),(0,i.jsx)(eE.Checkbox,{size:"lg",fontFamily:"Neue Montreal",name:"flag_lyrics_following",onChange:x("flag_lyrics_following"),colorScheme:"gray",children:"Doesn't follow lyrics"}),(0,i.jsx)(eE.Checkbox,{size:"lg",fontFamily:"Neue Montreal",name:"flag_style_following",onChange:x("flag_style_following"),colorScheme:"gray",children:"Doesn't follow style instructions"}),(0,i.jsx)(eE.Checkbox,{size:"lg",fontFamily:"Neue Montreal",name:"flag_song_structure",onChange:x("flag_song_structure"),colorScheme:"gray",children:"Poor structure"}),(0,i.jsx)(eE.Checkbox,{size:"lg",fontFamily:"Neue Montreal",name:"flag_other",onChange:x("flag_other"),colorScheme:"gray",children:"Other"})]})}),(0,i.jsxs)(eO.ModalFooter,{className:"flex gap-2",children:[(0,i.jsx)(b.Ay,{onClick:()=>{l(),r([])},children:"Cancel"}),(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,onClick:m,icon:u&&(0,i.jsx)(eI.A,{}),children:"Submit"})]})]})]})};var e9=l(82274);let te=e=>{var t;let{session:l}=(0,P.gy)(),{onClose:a}=e,n=(0,x.useRouter)();return(null===(t=l.flags)||void 0===t?void 0:t["create-onboarding"])?(0,i.jsxs)(eP.A,{title:"Your credits are gone. Don't let the music end!",width:600,onClose:()=>null==a?void 0:a(),children:[(0,i.jsx)("div",{className:"pb-8 text-gray-500 text-base w-[400px]",children:"Youve run out of credits and cant generate more songs. Upgrade now and get back to making hits."}),(0,i.jsx)(eF.A,{onClick:()=>{n.push("/account")},text:"Upgrade",fullWidth:!0,backgroundImage:"/blue-button-bg.png",useV4ButtonStyle:!0,textExtraClasses:"text-lg font-medium"})]}):(0,i.jsx)(e9.OT,{...e})};var tt=l(40177);let tl=e=>{let{onClose:t,title:l,onBack:a,className:n}=e;return(0,i.jsxs)("div",{className:(0,B.QP)("flex flex-row justify-between items-center px-6 gap-4 pb-6 pt-1",n),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[a?(0,i.jsx)(b.Ay,{variant:b.Ak.Standard,onClick:a,icon:er.YJP,shape:b.aH.Pill}):null,(0,i.jsx)("div",{className:"flex font-serif text-2xl",children:l})]}),t?(0,i.jsx)(X.A,{onClick:t}):null]})},ta=()=>{let[e,t]=(0,h.useState)("main"),[l,a]=(0,h.useState)(!1),[i,n]=(0,h.useState)(""),s=e=>{a(!0),"main"===e?(n("right"),setTimeout(()=>{t("main"),n(""),a(!1)},150)):(n("left"),setTimeout(()=>{t(e),n(""),a(!1)},150))},o=(0,h.useMemo)(()=>l?"transform ".concat("left"===i?"-translate-x-full":"translate-x-full"," transition-transform duration-").concat(150," ease-in-out"):"",[l,i]),r=(0,h.useMemo)(()=>"main"!==e?"transform  ".concat(l?"translate-x-full":"translate-x-0"," transition-transform duration-").concat(150," ease-in-out"):"",[e,l]);return(0,h.useMemo)(()=>({currentScreen:e,setCurrentScreen:t,setAnimationDirection:n,navigateTo:s,mainScreenAnimationClasses:o,auxScreenAnimationClasses:r}),[e,s,o,r])},ti=(0,h.createContext)(void 0),tn=()=>{let{navigateTo:e}=(0,h.useContext)(ti);return(0,i.jsx)(b.Ay,{size:b.Mp.Medium,onClick:()=>e("main"),children:"Cancel"})},ts=e=>{let{onSave:t,isSaving:l,disabled:a,variant:n=b.Ak.Primary}=e;return(0,i.jsx)(b.Ay,{variant:n,size:b.Mp.Medium,onClick:t,icon:l&&(0,i.jsx)(eI.A,{className:"text-black/75"}),disabled:a,children:"Save"})},to=e=>{let{onPublish:t,isPublishing:l}=e;return(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,size:b.Mp.Medium,onClick:t,icon:l&&(0,i.jsx)(eI.A,{className:"text-black/75"}),disabled:l,children:"Publish"})},tr=e=>{let{children:t}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"w-full h-px bg-background-tertiary"}),(0,i.jsx)("div",{className:"flex justify-end gap-2 px-6 py-4",children:t})]})};var td=l(15307);let tc=e=>{let{onClose:t,editedTitle:l,currentLyrics:a,setCurrentLyrics:n,onSave:s,shouldDisableSave:o,clipId:r}=e,[d,c]=(0,h.useState)(!1),{navigateTo:u}=(0,h.useContext)(ti),p=(0,h.useRef)(a),m=async()=>{c(!0),(0,C.Ay)({actionName:"PublishSongModalEditDisplayedLyricsSaveClicked",principalObjectType:"song",principalObjectValue:r,context:{oldLyrics:p.current,newLyrics:a}});let e=await s();c(!1),e.success&&(u("main"),(0,P.oR)({title:"Your displayed lyrics have been updated",status:"success",duration:3e3,isClosable:!0}))};return(0,i.jsxs)("div",{className:"w-full pt-4",children:[(0,i.jsx)(tl,{onClose:t,title:"Edit Displayed Lyrics - ".concat(l),onBack:()=>u("main")}),(0,i.jsx)("div",{className:"px-6 pb-6",children:(0,i.jsx)(td.A,{minRows:12,maxRows:14,maxLength:7500,value:a,resize:!0,onChange:e=>n(e.target.value),placeholder:"Add lyrics",autoFocus:!0})}),(0,i.jsxs)(tr,{children:[(0,i.jsx)(tn,{}),(0,i.jsx)(ts,{onSave:m,disabled:d||o,isSaving:d})]})]})};var tu=l(57147);let tp=e=>{let{label:t,checked:l,onChange:a,icon:n,className:s}=e;return(0,i.jsxs)("div",{className:(0,F.$)("rounded-md flex justify-between items-center bg-background-secondary border border-border-secondary p-3",s),children:[(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[n&&h.createElement(n),t]}),(0,i.jsx)(tu.A,{checked:l,onChange:a,containerClassName:(0,F.$)({"bg-accent-brand":l,"bg-tertiary":!l}),thumbClassName:"bg-primary"})]})},tm=(0,p.PA)(e=>{var t,l,a,n,s,o,r;let{onClose:d,shouldDisableSave:c}=e,{library:u,clips:p}=(0,P.gy)(),[m,x]=(0,h.useState)(null===(o=null===(t=u.activeClip)||void 0===t?void 0:t.allow_comments)||void 0===o||o),[f,g]=(0,h.useState)(null===(r=null===(l=u.activeClip)||void 0===l?void 0:l.metadata.can_remix)||void 0===r||r),[v,y]=(0,h.useState)(!1),b=(null===(a=u.activeClip)||void 0===a?void 0:a.id)||"",{navigateTo:j}=(0,h.useContext)(ti);(0,h.useEffect)(()=>{var e,t,l,a;x(null===(l=null===(e=u.activeClip)||void 0===e?void 0:e.allow_comments)||void 0===l||l),g(null===(a=null===(t=u.activeClip)||void 0===t?void 0:t.metadata.can_remix)||void 0===a||a)},[u.activeClip]);let w=async()=>{var e,t,l,a;y(!0),(0,C.Ay)({actionName:"PublishSongModalMoreOptionsSaveClicked",principalObjectType:"song",principalObjectValue:b,context:{hasAllowCommentsChanged:m!==(null===(e=u.activeClip)||void 0===e?void 0:e.allow_comments),hasAllowRemixChanged:f!==(null===(t=u.activeClip)||void 0===t?void 0:t.metadata.can_remix),allowComments:m,allowRemix:f}});let i=[];f!==(null===(l=u.activeClip)||void 0===l?void 0:l.metadata.can_remix)&&i.push(p.toggleCanRemix(b,f)),m!==(null===(a=u.activeClip)||void 0===a?void 0:a.allow_comments)&&i.push(p.setCommentsEnabled(b,m));try{await Promise.all(i),(0,P.oR)({title:"Your settings have been saved.",status:"success",duration:3e3,isClosable:!0}),j("main")}catch(e){console.error(e),(0,P.oR)({title:"Error",description:"An error occurred while updating your settings.",status:"error",duration:3e3,isClosable:!0})}finally{y(!1)}};return(0,i.jsxs)("div",{className:"w-full pt-4 min-h-[500px] flex flex-col justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(tl,{onClose:d,title:"More Options",onBack:()=>j("main")}),(0,i.jsxs)("div",{className:"flex flex-col px-6",children:[(0,i.jsx)(tp,{label:"Allow Comments",checked:m,onChange:e=>x(e),icon:er.Twg,className:"rounded-b-none border-b-0 "}),(0,i.jsx)(tp,{label:"Allow Remix",checked:f,onChange:e=>g(e),icon:er.x7r,className:"rounded-t-none"})]})]}),(0,i.jsxs)(tr,{children:[(0,i.jsx)(tn,{}),(0,i.jsx)(ts,{onSave:w,disabled:v||c||m===(null===(n=u.activeClip)||void 0===n?void 0:n.allow_comments)&&f===(null===(s=u.activeClip)||void 0===s?void 0:s.metadata.can_remix),isSaving:v})]})]})});var tx=l(37159);let th=(0,p.PA)(e=>{let{onClose:t,onSave:l,editClipMetadataFormProps:a,shouldDisableSave:n,clip:s,hasUploadedVideo:o,hasUploadedImage:r,hasUpdatedLyrics:d,hasUpdatedCaption:c,hasUpdatedTitle:u}=e,[p,m]=(0,h.useState)(!1),[x,f]=(0,h.useState)(!1),{clips:g,menus:v,session:y}=(0,P.gy)(),{navigateTo:j}=(0,h.useContext)(ti),w=async()=>{s&&(m(!0),(0,C.Ay)({actionName:"PublishSongModalSaveClicked",principalObjectType:"song",principalObjectValue:s.id,context:{hasUploadedVideo:o,hasUploadedImage:r,hasUpdatedLyrics:d,hasUpdatedCaption:c,hasUpdatedTitle:u}}),(await l()).success&&(0,P.oR)({title:"Your song details have been updated.",status:"success",duration:5e3,isClosable:!0}),m(!1))},N=async()=>{s&&((0,C.Ay)({actionName:"PublishSongModalPublishClicked",principalObjectType:"song",principalObjectValue:s.id,context:{hasUploadedVideo:o,hasUploadedImage:r,hasUpdatedLyrics:d,hasUpdatedCaption:c,hasUpdatedTitle:u}}),f(!0),(await l()).success&&(await g.setClipVisibility(s.id,!0),t(),(0,tx.V)({clip:s,menus:v,session:y})),f(!1))};return(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(tl,{onClose:t,title:"Publish Song",className:"pt-6 pb-2"}),(0,i.jsx)("div",{className:"px-6 pb-6",children:(0,i.jsx)(e2.A,{...a,hideDisplayedLyrics:!0,children:(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)(b.Ay,{variant:b.Ak.Secondary,onClick:()=>j("lyrics"),className:"p-3 rounded-t-md rounded-b-none",contentClassName:"justify-start",iconStart:er.g3L,iconEnd:er.vKP,children:"Edit Displayed Lyrics"}),(0,i.jsx)(b.Ay,{variant:b.Ak.Secondary,onClick:()=>j("moreOptions"),className:"p-3 rounded-b-md rounded-t-none",contentClassName:"justify-start",iconStart:er.L64,iconEnd:er.vKP,children:"More Options"})]})})})}),(0,i.jsxs)(tr,{children:[(0,i.jsx)(ts,{disabled:n||p,onSave:w,isSaving:p,variant:b.Ak.Standard}),(0,i.jsx)(to,{onPublish:N,isPublishing:x})]})]})}),tf=(0,p.PA)(e=>{var t,l,a;let{isOpen:n,onClose:s}=e,{clips:o,library:r,session:d}=(0,P.gy)(),c=(0,ev.RH)(),u=(null===(t=r.activeClip)||void 0===t?void 0:t.id)||"",p=(0,x.usePathname)(),{editedTitle:m,setEditedTitle:f,editedImagePrompt:g,setEditedImagePrompt:v,currentImage:y,setCurrentImage:b,isGenerating:j,setIsGenerating:w,addedImages:N,setAddedImages:k,isAddingImage:A,setIsAddingImage:S,addingImageDataURL:I,setAddingImageDataURL:_,addingImageChanged:M,setAddingImageChanged:T,continuedClips:L,setContinuedClips:O,initialImageURL:R,setInitialImageURL:D,currentActiveClip:B,setCurrentActiveClip:z,currentLyrics:U,setCurrentLyrics:H,currentCaption:Y,setCurrentCaption:q,isAddingVideo:Q,setIsAddingVideo:K,selectedVideo:J,setSelectedVideo:X}=(0,e4.A)(r.activeClip),[Z]=(0,h.useState)(()=>new eZ.B(d,null,c,r,void 0,!0)),{currentScreen:$,setCurrentScreen:ee,navigateTo:et,mainScreenAnimationClasses:el,auxScreenAnimationClasses:ea}=(0,h.useContext)(ti);(0,h.useEffect)(()=>{Q?et("addingVideo"):A&&et("addingImage")},[Q,A]);let ei=()=>{S(!1),k([]),_(null),S(!1),w(!1),T(!1),O([]),D(null),f(""),v(""),K(!1),X(null),ee("main"),s()};(0,h.useEffect)(()=>{b(null==B?void 0:B.image_url)},[B]),(0,h.useEffect)(()=>{f(r.activeClip?(0,E.p8)(r.activeClip):""),z(r.activeClip)},[n]);let en=(0,h.useCallback)(async()=>{var e,t,l;if(u&&(m||U!==(null===(e=r.activeClip)||void 0===e?void 0:e.metadata.prompt)||y||Y!==(null===(t=r.activeClip)||void 0===t?void 0:t.caption))){let e=Y!==(null===(l=r.activeClip)||void 0===l?void 0:l.caption)?Y:void 0,t=await o.setMetadata({clipId:u,title:m,imageUrl:y||void 0,lyrics:U,caption:e,videoCoverUploadId:J?Z.uploadId:void 0,removeVideoCover:!1,showSuccessToast:!1});return t&&t.success&&void 0!==e&&(0,C.Ay)({actionName:"CaptionAddedInMetadataModal",context:{clipId:u,caption:e||"",page:p}}),t}return{success:!1,error:"No changes made"}},[m,U,null===(l=r.activeClip)||void 0===l?void 0:l.metadata.prompt,y,Y,null===(a=r.activeClip)||void 0===a?void 0:a.caption,u,o,p,J,Z.uploadId]),es=()=>{var e,t,l;switch($){case"addingVideo":return(0,i.jsx)(e5,{onVideoSelect:e=>{X(e),(0,C.Ay)({actionName:"SongEditCoverArtUploadClicked",principalObjectType:"song",principalObjectValue:u,context:{clipId:u,mediaType:"video"}}),e?Z.uppy.addFile({name:e.name,type:e.type,data:e}):Z.uppy.getFiles().forEach(e=>{Z.uppy.removeFile(e.id)})},selectedVideo:J,onClose:ei,onCancel:()=>{X(null),K(!1),Z.uppy.getFiles().forEach(e=>{Z.uppy.removeFile(e.id)}),et("main")},onSave:async()=>{J&&(K(!1),await Z.uppy.upload(),(0,C.Ay)({actionName:"SongEditCoverArtSaveClicked",principalObjectType:"song",principalObjectValue:u,context:{clipId:u,mediaType:"video"}}),et("main"))},showBackButton:!0});case"addingImage":return(0,i.jsx)(e$.Ay,{initialImageURL:R,setAddingImageDataURL:_,addingImageDataURL:I,addingImageChanged:M,setAddingImageChanged:T,editedImagePrompt:g,setEditedImagePrompt:v,setInitialImageURL:D,isGenerating:j,setIsGenerating:w,setIsAddingImage:e=>{S(e),e||et("main")},setAddedImages:k,setCurrentImage:b,addedImages:N,onClose:ei,showBackButton:!0});case"lyrics":return(0,i.jsx)(tc,{onClose:ei,onSave:en,editedTitle:m,currentLyrics:U,setCurrentLyrics:H,clipId:u,shouldDisableSave:Z.isUploading||Z.isProcessing||U===(null==B?void 0:null===(e=B.metadata)||void 0===e?void 0:e.prompt)});case"moreOptions":return(0,i.jsx)(tm,{onClose:ei,shouldDisableSave:Z.isUploading||Z.isProcessing});default:return(0,i.jsx)(th,{onClose:ei,onSave:en,clip:B,editClipMetadataFormProps:{clipId:u,editedTitle:m,setEditedTitle:f,currentActiveClip:B,currentImage:y,setCurrentImage:b,setIsAddingImage:S,continuedClips:L,addedImages:N,currentLyrics:U,setCurrentLyrics:H,currentCaption:Y,setCurrentCaption:q,selectedVideo:J,setIsAddingVideo:K,uploadState:Z},hasUploadedVideo:!!J,hasUploadedImage:y!==(null==B?void 0:B.image_url),hasUpdatedLyrics:U!==(null==B?void 0:null===(t=B.metadata)||void 0===t?void 0:t.prompt),hasUpdatedCaption:Y!==(null==B?void 0:B.caption),hasUpdatedTitle:m!==(null==B?void 0:B.title),shouldDisableSave:!m&&!y||!B||m===(null==B?void 0:B.title)&&y===(null==B?void 0:B.image_url)&&U===(null==B?void 0:null===(l=B.metadata)||void 0===l?void 0:l.prompt)&&Y===(null==B?void 0:B.caption)&&null===J||m.length>100||Z.isUploading||Z.isProcessing})}};return(0,i.jsxs)(W.Modal,{isOpen:n,onClose:ei,"data-qaid":"modal-publish-clip-title",isCentered:!0,blockScrollOnMount:!1,children:[(0,i.jsx)(V.ModalOverlay,{}),(0,i.jsx)(G.ModalContent,{sx:{bgColor:"#252020"},borderRadius:"32px",maxW:{base:"95%",md:"600px"},position:"relative",overflow:"auto",className:"max-h-[80vh] md:max-h-[600px]",children:(0,i.jsxs)("div",{className:"relative w-full",children:[(0,i.jsx)("div",{className:(0,F.A)("w-full ".concat(el),{block:"main"===$,hidden:"main"!==$}),children:"main"===$&&es()}),(0,i.jsx)("div",{className:(0,F.A)("w-full ".concat(ea),{block:"main"!==$,hidden:"main"===$}),children:"main"!==$&&es()})]})})]})}),tg=(0,p.PA)(e=>{var t;let{isOpen:l,onClose:a}=e,{session:n,clips:s}=(0,P.gy)(),[o,r]=(0,h.useState)(!1),[d,c]=(0,h.useState)(null);if(!(null===(t=n.flags)||void 0===t?void 0:t["remix-perm"])||!l)return null;let u=async()=>{try{r(!0),c("allow"),await s.setAllRemixPermissions(!0),a()}catch(e){console.error("Failed to update remix permissions:",e)}finally{r(!1),c(null)}},p=async()=>{try{r(!0),c("keep"),await s.setAllRemixPermissions(!1),a()}catch(e){console.error("Failed to update remix permissions:",e)}finally{r(!1),c(null)}};return(0,i.jsxs)(eP.A,{title:"Introducing Remixing",onClose:a,contentWrapperClasses:"text-white min-h-[550px] max-w-md mx-auto flex flex-col justify-center p-4 rounded-3xl",wrapperClasses:"overflow-y-visible",titleWrapperClasses:"flex justify-center items-center w-full relative z-10",titleClassName:"text-4xl font-serif text-center",disableOutsideClick:!0,closeButtonProps:{style:{display:"none"}},renderIcon:()=>(0,i.jsxs)("div",{className:"bg-secondary/10 rounded-full p-4 relative z-20",children:[(0,i.jsx)(er.x7r,{className:"w-8 h-8"}),(0,i.jsx)("div",{className:"absolute -top-1 -right-1 bg-primary text-xs text-vinylBlack-darker font-bold px-1 rounded",children:"NEW"})]}),children:[(0,i.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full rounded-3xl overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-cover bg-center opacity-40",style:{backgroundImage:"url(/auras-v2/Aura-Remix.png)"}}),(0,i.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-blue-600/98 from-0% via-purple-600/98 via-40% to-tertiary/100 to-100% opacity-100"}),(0,i.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-[85%] bg-gradient-to-t from-tertiary from-15% via-tertiary/100 via-40% to-transparent to-100%"})]}),(0,i.jsxs)("div",{className:"text-center relative z-10",children:[(0,i.jsx)("p",{className:"mb-6 text-white/90",children:"Remix lets you put your own spin on your favorite Suno songs, not just your own!"}),(0,i.jsxs)("p",{className:"mb-6",children:[(0,i.jsx)("span",{className:"font-medium text-white",children:"New songs"})," ",(0,i.jsx)("span",{className:"text-white/90",children:"you create will have 'Allow Remixes' on by default, but"})," ",(0,i.jsx)("span",{className:"underline text-white/90",children:"you can change this"})," ",(0,i.jsx)("span",{className:"text-white/90",children:"at any time."})]}),(0,i.jsxs)("p",{className:"mb-8 text-white/90",children:[(0,i.jsx)("span",{className:"font-medium text-white",children:"Your existing songs"})," ","have 'Allow Remixes' off. Do you want to make your existing Public songs Remixable?"]}),(0,i.jsxs)("div",{className:"flex flex-col gap-3 mt-6",children:[(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,shape:b.aH.Pill,size:b.Mp.Medium,className:"text-xl font-medium text-vinylBlack-darker py-4 h-14",onClick:u,disabled:o,children:"allow"===d?"Processing...":"Yes, I'm in!"}),(0,i.jsx)(b.Ay,{onClick:p,variant:b.Ak.Tertiary,shape:b.aH.Pill,size:b.Mp.Medium,className:"text-white py-4 h-14",disabled:o,children:"keep"===d?"Processing...":"Not now"})]})]})]})});var tv=l(22868),ty=l(56108),tb=l(27869),tC=l(90882),tj=function(e){return e.facebook="facebook",e.reddit="reddit",e.x="x",e.linkedin="linkedin",e.email="email",e}(tj||{});let tw={share:"Share",embed:"Embed"},tN=["share","embed"],tk=e=>(0,i.jsx)(b.Ay,{variant:b.Ak.Inherit,size:b.Mp.Large,shape:b.aH.Pill,aspectSquare:!0,...e,className:(0,B.QP)((0,F.A)("bg-gradient-to-t from-transparent to-transparent after:border-2","opacity-100 after:opacity-100",{"after:border-white after:shadow-swatchOutline":e.active,"after:border-transparent":!e.active}),e.className)}),tA=e=>{let{isOpen:t,onClose:l,type:a,song:n,playlist:s,profile:o}=e,r=!(0,ty.Yo)(),{session:d}=(0,P.gy)(),c=(0,x.usePathname)(),p=(0,ev.RH)(),{t:m}=(0,J.Bd)(),f=(0,u.useStatsigClient)(),g=!!f.client.getContext().stableID&&f.checkGate("embed-customization"),[v,y]=(0,h.useState)({width:760,height:240}),C=(e,t)=>{p.POST("/api/gen/{gen_id}/increment_action_count/",{params:{path:{gen_id:e}},body:{action:"share",share_platform:t}})},j=(0,h.useCallback)(async e=>n?await (0,tC.g6)(p,"song",n.id,e)||(0,tb.xJ)(n.id,"song"):s?(0,tb.xJ)(s.id,"playlist"):o?(0,tb.xJ)(o.handle,"profile"):"",[n,s,o,f,d.userId]),[w,N]=(0,h.useState)(!1),[k,A]=(0,h.useMemo)(()=>{if(!n)return["",""];let{width:e,height:t,...l}=v;return[(0,tb.qC)(n.id,"song",l),(0,tb.Wp)(n.id,"song",v)]},[n,v]),S=(0,h.useMemo)(()=>("song"===a?tN:tN.filter(e=>"embed"!==e)).map(e=>({label:tw[e]})),[a,g]),[I,_]=(0,h.useState)("share"),M=(0,h.useMemo)(()=>tN.indexOf(I),[I]),T=(0,h.useCallback)(e=>{_(tN[e])},[]),[E,L]=(0,h.useState)(!1);(0,h.useEffect)(()=>{if(!0===E){let e=setTimeout(()=>{L(!1)},2e3);return()=>{clearTimeout(e)}}},[E]);let O=(0,h.useCallback)(async()=>{if(navigator.clipboard&&window.isSecureContext){let e=await j();navigator.clipboard.writeText(e).then(()=>{L(!0)}).catch(e=>{console.error("Failed to copy: ",e)})}},[j]),R=(0,h.useCallback)(async e=>{let{shareUrl:t,actionName:l,platformName:a,openWindowFeatures:i="width=600,height=300"}=e;!1!==i?window.open(t,"_blank",i):window.location.href=t,ed.LS.logAudioActionEvent(!0,l,n,d,c),(null==n?void 0:n.id)&&C(null==n?void 0:n.id,a)},[c,d,n]),D=(0,h.useCallback)(()=>{navigator.clipboard&&window.isSecureContext&&navigator.clipboard.writeText(A).then(()=>{L(!0)}).catch(e=>{console.error("Failed to copy: ",e)})},[A]),F=(0,h.useCallback)(()=>{N(e=>!e)},[]);return t?(0,i.jsx)(eP.A,{title:"Share to...",onClose:l,className:"overflow-auto",wrapperClasses:"-mx-6",width:800,children:(0,i.jsxs)("div",{className:"md:min-h-[432px] flex flex-col",children:[S.length>1&&(0,i.jsx)(tv.A,{className:"justify-center mb-4",tabs:S,selectedIndex:M,onTabClick:T,textClass:"text-sm lg:text-base"}),"share"===I&&(0,i.jsxs)("div",{className:"flex-1 flex flex-col gap-2 justify-center items-stretch w-full max-w-[400px] mx-auto px-4",children:[(0,i.jsxs)("div",{className:"flex-1 grid gap-4 md:gap-2 grid-cols-[repeat(auto-fill,minmax(3.5rem,max-content))] md:grid-cols-1 auto-rows-max items-center justify-center",children:[(0,i.jsx)(b.Ay,{className:"hover:bg-black hover:text-white",contentClassName:"md:justify-start",size:b.Mp.Large,shape:b.aH.Pill,onClick:async()=>{let e=await j("x");await R({shareUrl:(0,tb.Ju)("https://twitter.com/intent/tweet",{url:e,text:"Listen and make your own song with Suno."}),actionName:ec.a2.shareSongWithX,platformName:"x"})},icon:er.F,title:"X","aria-label":"X",children:r?void 0:"X"}),(0,i.jsx)(b.Ay,{className:"hover:bg-[#1877f2] hover:text-white",contentClassName:"md:justify-start",size:b.Mp.Large,shape:b.aH.Pill,onClick:async()=>{let e=await j("facebook");R({shareUrl:(0,tb.Ju)("https://www.facebook.com/sharer/sharer.php",{u:e,quote:"Listen and make your own song with Suno."}),actionName:ec.a2.shareSongWithFacebook,platformName:"facebook"})},icon:er.iki,title:"Facebook","aria-label":"Facebook",children:r?void 0:"Facebook"}),(0,i.jsx)(b.Ay,{className:"hover:bg-[#0072b1] hover:text-white",contentClassName:"md:justify-start",size:b.Mp.Large,shape:b.aH.Pill,onClick:async()=>{let e=await j("linkedin");R({shareUrl:(0,tb.Ju)("https://www.linkedin.com/sharing/share-offsite/",{url:e,title:"Listen and make your own song with Suno."}),actionName:ec.a2.shareSongWithLinkedIn,platformName:"linkedin"})},icon:er._z6,title:"LinkedIn","aria-label":"LinkedIn",children:r?void 0:"LinkedIn"}),(0,i.jsx)(b.Ay,{className:"hover:bg-[#ff5700] hover:text-white",contentClassName:"md:justify-start",size:b.Mp.Large,shape:b.aH.Pill,onClick:async()=>{let e=await j("reddit");R({shareUrl:(0,tb.Ju)("https://reddit.com/submit",{url:e,title:"Listen and make your own song with Suno"}),actionName:ec.a2.shareSongWithReddit,platformName:"reddit"})},icon:er.GaW,title:"Reddit","aria-label":"Reddit",children:r?void 0:"Reddit"}),(0,i.jsx)(b.Ay,{contentClassName:"md:justify-start",size:b.Mp.Large,shape:b.aH.Pill,onClick:async()=>{let e=await j("email");R({shareUrl:(0,tb.Ju)("mailto:",{subject:"Check out this song!",body:"Hi there,\n\nCheck out this song on Suno here! ".concat(e,"\n\n")}),actionName:ec.a2.shareSongWithEmail,openWindowFeatures:!1,platformName:"email"})},icon:er.r4D,title:"Email","aria-label":"Email",children:r?void 0:"Email"})]}),(0,i.jsx)("div",{children:(0,i.jsx)(b.Ay,{className:"w-full",contentClassName:"md:justify-start",size:b.Mp.Large,shape:b.aH.Pill,variant:b.Ak.Primary,onClick:O,icon:E?er.Srz:er.TdU,children:m("songActions.copyLink")})})]}),"embed"===I&&(0,i.jsxs)("div",{className:"flex-1 flex flex-col items-stretch justify-start gap-2",children:[g&&(0,i.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,i.jsxs)("div",{className:"flex-1 flex flex-row gap-2 px-4 justify-start items-center",children:[(0,i.jsx)("div",{className:"font-sans font-semibold text-sm",children:"Color:"}),(0,i.jsx)(tk,{className:"from-[#1e2960] to-[#1c1c1c]",onClick:()=>y(e=>({...e,theme:void 0})),active:!v.theme,title:"Light"}),(0,i.jsx)(tk,{className:"theme-dark from-background-secondary to-background-primary",onClick:()=>y(e=>({...e,theme:"dark"})),active:"dark"===v.theme,title:"Dark"}),(0,i.jsx)(tk,{className:"theme-light from-background-secondary to-background-primary",onClick:()=>y(e=>({...e,theme:"light"})),active:"light"===v.theme,title:"Light"})]}),(0,i.jsxs)("div",{className:"flex flex-row gap-2 px-4 justify-end items-center max-sm:hidden",children:[(0,i.jsx)("div",{className:"font-sans font-semibold text-sm",children:"Size:"}),(0,i.jsx)(b.Ay,{variant:b.Ak.Secondary,size:b.Mp.Small,shape:b.aH.Pill,active:760===v.width&&240===v.height,onClick:()=>y(e=>({...e,width:760,height:240})),children:"Standard"}),(0,i.jsx)(b.Ay,{variant:b.Ak.Secondary,size:b.Mp.Small,shape:b.aH.Pill,active:140===v.height,onClick:()=>y(e=>({...e,width:600,height:140})),children:"Small"}),(0,i.jsx)(b.Ay,{variant:b.Ak.Secondary,size:b.Mp.Small,shape:b.aH.Pill,active:300===v.width,onClick:()=>y(e=>({...e,width:300,height:400})),children:"Card"})]})]}),n?(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)("iframe",{className:"mx-auto max-w-full mb-4 rounded-md border border-quaternary box-content",src:k,width:v.width,height:v.height})}):null,w&&(0,i.jsx)("pre",{className:"p-4 whitespace-pre-wrap bg-quaternary text-primary text-xs",children:(0,i.jsx)("code",{children:A})}),(0,i.jsxs)("div",{className:"flex flex-row gap-2 justify-center items-center px-2",children:[(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,size:b.Mp.Large,shape:b.aH.Pill,icon:E?er.Srz:er.TdU,onClick:D,children:m("cta.copy")}),(0,i.jsx)(b.Ay,{variant:b.Ak.Tertiary,size:b.Mp.Large,shape:b.aH.Pill,onClick:F,children:w?"Hide Code":"Show Code"})]})]})]})}):null};var tS=l(17376);let tI=e=>{let{isOpen:t,onClose:l}=e;return t?(0,i.jsx)(eP.A,{onClose:l,title:"Song Queue",wrapperClasses:"max-h-[calc(100vh-400px)]",children:(0,i.jsx)(tS.A,{hideHeader:!0})}):null},tP=e=>{let{isOpen:t,onClose:l,onConfirm:a}=e;return t?(0,i.jsxs)(eP.A,{onClose:l,title:"Are you sure you want to unpublish?",titleClassName:"font-serif text-center text-2xl mt-2",titleWrapperClasses:"justify-center",className:"px-2",children:[(0,i.jsx)("div",{className:"font-sans text-center text-md",children:"It wont show in Search or Feed anymore, but anyone with the link can still hear it."}),(0,i.jsxs)("div",{className:"flex justify-center items-center flex-col px-1 py-4 gap-4",children:[(0,i.jsx)(b.Ay,{shape:b.aH.Pill,size:b.Mp.Medium,variant:b.Ak.Primary,onClick:()=>{a(),l()},className:"w-full",children:"Unpublish"}),(0,i.jsx)(b.Ay,{shape:b.aH.Pill,size:b.Mp.Medium,variant:b.Ak.Secondary,className:"w-full",onClick:()=>{l()},children:"Cancel"})]})]}):null};l(79376),l(6772);var t_=l(6798),tM=l(84492),tT=l(97908),tE=l(82536),tL=l(57851),tO=l(34812),tR=l(22430),tD=l(80377),tF=l(2918),tB=l(88590),tz=l(57416),tU=l(11927);let tH=(0,p.PA)(e=>{let{top:t,left:l,ref:a,color:n}=e,{playbar:s}=(0,P.gy)();return(0,i.jsx)("button",{ref:a,className:"absolute flex flex-1 h-auto w-auto bg-".concat(n||"quaternary"," rounded-md px-1 py-2 pt-4 z-[100]"),style:{top:"".concat(t-90,"px"),left:"".concat(l-210,"px"),height:"80px"},"aria-label":"Playbar: Volume Control",children:(0,i.jsxs)(tz.Slider,{flex:"1",mx:4,orientation:"vertical","aria-label":"Playbar: Volume Control",focusThumbOnChange:!1,value:100*s.displayVolume,onChange:e=>{s.setVolume((0,tU.h)(e/100))},children:[(0,i.jsx)(tz.SliderTrack,{borderWidth:"1px",borderColor:"#363030",background:n?"#363030":"#726e6c",children:(0,i.jsx)(tz.SliderFilledTrack,{background:"rgba(244, 243, 239, 0.8)"})}),(0,i.jsx)(tz.SliderThumb,{boxSize:"12px",background:"rgba(244, 243, 239, 1)",borderWidth:"1px",borderColor:"#363030"})]})})}),tW=(0,p.PA)(e=>{let{handlePlayerTogglePlay:t,clip:l,inline:a=!1,disableControls:n=!1}=e,{playbar:s}=(0,P.gy)(),o=(0,g.DE)();return(0,i.jsxs)(i.Fragment,{children:[a?null:(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(tD.m,{label:n?"":"Repeat 1",children:(0,i.jsx)("button",{"aria-label":"Playbar: Toggle repeat button",className:(0,F.A)("block outline-none select-none p-1 rounded-md",{"hover:bg-transparentWhite":!n}),onClick:()=>{s.toggleRepeat()},draggable:"false",disabled:n,children:(0,i.jsx)(er.Hoz,{className:(0,F.A)("w-[14px] h-[14px]",{"fill-lightGray":n||!s.repeat,"fill-primary":!n&&s.repeat})})})}):null,(0,i.jsx)("button",{"aria-label":"Playbar: Previous Song button",onClick:()=>{s.stepBackward()},className:"outline-none p-1 rounded-md hover:bg-transparentWhite",draggable:"false",disabled:n,children:(0,i.jsx)(er.SDt,{className:(0,F.A)("w-6 h-6",{"fill-lightGray":n,"fill-primary":!n})})})]}),s.isPlaying?(0,i.jsx)("button",{"aria-label":"Playbar: Pause button",className:"w-[32px] h-[32px] hover:bg-transparentWhite flex outline-none justify-center items-center p-1 rounded-md",disabled:n,onClick:()=>{t()},children:(0,i.jsx)(er.E$n,{className:(0,F.A)("w-6 h-6",{"fill-lightGray":n,"fill-primary":!n})})}):(0,i.jsx)("button",{"aria-label":"Playbar: Play button",className:(0,F.A)("w-[32px] h-[32px] flex hover:bg-transparentWhite justify-center outline-none p-1 rounded-md",{"fill-lightGray":n,"fill-primary":!n}),disabled:n,onClick:()=>{l&&!s.isClipPreloaded?s.togglePlay():s.noClipPlayCallback&&s.noClipPlayCallback()},children:(0,i.jsx)(er.udU,{className:(0,F.A)("w-6 h-6",{"fill-lightGray":n,"fill-primary":!n})})}),a?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{"aria-label":"Playbar: Next Song button",className:"outline-none hover:bg-transparentWhite rounded-md ".concat(s.canStepForward()?"":"opacity-50"),onClick:()=>{s.stepForward()},draggable:"false",disabled:!s.canStepForward()||n,children:(0,i.jsx)(er.oAT,{className:"w-6 h-6 ".concat(s.canStepForward()&&!n?"fill-primary":"fill-lightGray")})}),o?(0,i.jsx)(tD.m,{label:n?"":"Autoplay",children:(0,i.jsx)("button",{draggable:"false","aria-label":"Playbar: Toggle autoplay button",className:(0,F.A)("block select-none p-1 rounded-md",{"hover:bg-transparentWhite":!n}),onClick:()=>{s.toggleAutoplay()},disabled:n,children:(0,i.jsx)(er.QtG,{className:(0,F.A)("w-[14px] h-[14px]",{"fill-lightGray":n||!s.autoplay,"fill-primary":!n&&s.autoplay})})})}):null]})]})}),tV=(0,p.PA)(e=>{var t,l,a,n,s,o,r,d,c,u,p,m,f,v,y,w,N,k,A,S,I;let _,{width:T,truncate:L=!1,hidden:O=!1,inline:R=!1,showScrubber:D=!0,clip:B,disableControls:z=!1,ref:U}=e,{playbar:H,clips:W,session:V,edit:G,genForm:Y,project:q,menus:Q}=(0,P.gy)(),K=(0,x.usePathname)(),J=(0,x.useRouter)(),X=h.useRef(null),Z=h.useRef(null),$=(0,h.useRef)(null),ee=(0,h.useRef)(null),et=(0,h.useRef)(null),el=(0,h.useRef)(null),ea=B||((null===(t=H.clip)||void 0===t?void 0:t.id)?W.clipById[null===(l=H.clip)||void 0===l?void 0:l.id]:null),ei=(0,g.DE)();(0,h.useEffect)(()=>{{let e=()=>{H.updatePlaybarState(),window.removeEventListener("beforeunload",e)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}},[H]),(0,h.useLayoutEffect)(()=>{X.current&&!R&&H.setAudioElement(X.current)},[X.current,H]),(0,h.useLayoutEffect)(()=>{Z.current&&!R&&H.setSilentAudioElement(Z.current)},[Z.current]),(0,h.useEffect)(()=>{new ResizeObserver(()=>{var e;let t=$.current?Math.floor((null===(e=$.current)||void 0===e?void 0:e.getBoundingClientRect().width)*Math.min(H.currentTime/H.duration,1)):null;ee.current&&et.current&&(ee.current.style.width="".concat(t,"px"),et.current.style.left="".concat(t,"px"))}).observe($.current)},[$.current]),(0,tT.vC)("space",e=>{en(),e.preventDefault()},[]);let en=()=>{var e,t;let l=B||((null===(e=H.clip)||void 0===e?void 0:e.id)?W.clipById[null===(t=H.clip)||void 0===t?void 0:t.id]:null);H.loadingStream,l&&!H.isClipPreloaded?H.togglePlay():H.noClipPlayCallback&&H.noClipPlayCallback()},es=(0,ty.gs)(),[eo,ed]=(0,h.useState)(!1),[ec,eu]=(0,h.useState)(null),[ep,em]=(0,h.useState)(!1),[ex,eh]=(0,h.useState)(""),[ef,eg]=(0,h.useState)(""),[ev,ey]=(0,h.useState)("trim"),[eb,eC]=(0,h.useState)(null),[ej,ew]=(0,h.useState)(null),[eN,ek]=(0,h.useState)(void 0),eA=(0,h.useRef)(null),eS=(0,E.yd)(((null===(a=G.selectionRange)||void 0===a?void 0:a.end)||0)-((null===(n=G.selectionRange)||void 0===n?void 0:n.start)||0),1);(0,h.useEffect)(()=>{(null==ea?void 0:ea.metadata.duration)&&H.loadingDuration&&(H.setDuration(null==ea?void 0:ea.metadata.duration),H.setLoadingDuration(!1),H.setClip(ea))},[null==ea?void 0:ea.metadata.duration]),(0,h.useEffect)(()=>{null!=_&&(clearTimeout(_),_=null),_=setTimeout(()=>{var e,t;eh((0,E.N8)(Math.max((null===(e=G.selectionRange)||void 0===e?void 0:e.start)||0,0),1)),eg((0,E.N8)(Math.max((null===(t=G.selectionRange)||void 0===t?void 0:t.end)||0,0),1))},0)},[null===(s=G.selectionRange)||void 0===s?void 0:s.start,null===(o=G.selectionRange)||void 0===o?void 0:o.end]),(0,h.useEffect)(()=>{var e,t;G.clearSelectionRange(),eh((0,E.N8)(Math.max((null===(e=G.selectionRange)||void 0===e?void 0:e.start)||0,0),1)),eg((0,E.N8)(Math.max((null===(t=G.selectionRange)||void 0===t?void 0:t.end)||0,0),1))},[G.editingClipId]),(0,t_.useOutsideClick)({ref:el,handler:()=>{ep&&em(!1)}}),(0,h.useEffect)(()=>{eo?document.body.classList.add("no-drag"):document.body.classList.remove("no-drag"),H.setIsDragging(eo)},[eo]),(0,h.useEffect)(()=>{eo||null===ec||eu(null)},[eo,ec]);let eP=(null===(r=G.selectionRange)||void 0===r?void 0:r.start)===void 0||(null===(d=G.selectionRange)||void 0===d?void 0:d.end)===void 0||eS<5||G.isLoading||(null==ea?void 0:ea.status)!=="complete",e_=(null===(c=G.selectionRange)||void 0===c?void 0:c.start)===void 0||(null===(u=G.selectionRange)||void 0===u?void 0:u.end)===void 0||eS<5||!!eN&&eS>eN||G.isLoading||(null==ea?void 0:ea.status)!=="complete",eM=[{key:"trim",name:"Trim",content:(0,i.jsx)(b.Ay,{disabled:G.isLoading||eP,variant:b.Ak.Tertiary,size:b.Mp.Small,shape:b.aH.Rounded,iconEnd:G.isLoading&&(0,i.jsx)(tM.Spinner,{size:"sm"}),onClick:()=>{"/create"!==K&&J.push("/create"),G.cropClip(null==q?void 0:q.currentProjectId),(0,P.oR)({title:"Adding trimmed clip to your library...",status:"success",duration:4e3,isClosable:!0})},children:"Trim"})},...(null===(p=V.flags)||void 0===p?void 0:p["waveform-continue-from"])?[{key:"editsegment",name:"Edit Segment",maxSelectionSecs:60,content:(0,i.jsx)(b.Ay,{className:"px-4",disabled:G.isLoading||e_,variant:b.Ak.Tertiary,size:b.Mp.Mini,shape:b.aH.Rounded,iconEnd:G.isLoading&&(0,i.jsx)(tM.Spinner,{size:"sm"}),onClick:()=>{var e,t,l,a,i,n;"/create"!==K&&J.push("/create"),Y.setContinueClip(ea),Y.setContinueAtSeconds(Y.continueClipDuration),Y.setInfillFromSeconds((null===(e=G.selectionRange)||void 0===e?void 0:e.start)||null),Y.setInfillToSeconds((null===(t=G.selectionRange)||void 0===t?void 0:t.end)||null),Y.setStyle((null==ea?void 0:ea.metadata.tags)||""),Y.setNegativeTags((null==ea?void 0:ea.metadata.negative_tags)||""),Y.resetEnableExcludeStyle(),Y.resetCoverClip(),Y.resetArtistClip(),Y.setTitle((null==ea?void 0:ea.title)?"[".concat((0,E.N8)((null===(l=G.selectionRange)||void 0===l?void 0:l.start)||0,1)," - ").concat((0,E.N8)((null===(a=G.selectionRange)||void 0===a?void 0:a.end)||0,1),"] ").concat(null==ea?void 0:ea.title.substring(0,60)):"[".concat((0,E.N8)((null===(i=G.selectionRange)||void 0===i?void 0:i.start)||0,1)," - ").concat((0,E.N8)((null===(n=G.selectionRange)||void 0===n?void 0:n.end)||0,1),"] Untitled")),Y.setLyrics((null==ea?void 0:ea.metadata.prompt)||"")},children:"Select Segment"})}]:[]];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:U,className:"".concat(R?"w-full":"w-[calc(100%-32px)] absolute bottom-0 ml-4 mr-4"," rounded-none lg:rounded-lg xl:rounded-lg bg-transparent z-50 ").concat(L?"lg:w-[calc(100%-264px)] xl:w-[calc(100%-264px)]":""," ").concat(O?"hidden":""),children:(0,i.jsxs)("div",{className:"w-full ".concat(R?"":"md:pb-5"," bottom-0 h-auto z-5 min-w-[300px] rounded-t-xl"),onPointerMove:e=>{if(!z&&eo){var t,l;eu(Math.min(e.clientX,(null===(t=$.current)||void 0===t?void 0:t.getBoundingClientRect().left)+(null===(l=$.current)||void 0===l?void 0:l.getBoundingClientRect().width)))}},onPointerUp:()=>{if(!z&&eo&&ec&&(null==ea?void 0:ea.metadata.duration)){var e,t;ed(!1),eu(null);let l=ec-(null===(e=$.current)||void 0===e?void 0:e.getBoundingClientRect().left);H.userSetCurrentProgress(l/(null===(t=$.current)||void 0===t?void 0:t.getBoundingClientRect().width)*100),requestAnimationFrame(()=>{ee.current.style.width="".concat(l,"px"),et.current.style.left="".concat(l,"px")})}},onPointerLeave:()=>{if(!z){if(ec&&(null==ea?void 0:ea.metadata.duration)){var e,t;H.userSetCurrentProgress((ec-(null===(e=$.current)||void 0===e?void 0:e.getBoundingClientRect().left))/(null===(t=$.current)||void 0===t?void 0:t.getBoundingClientRect().width)*100)}ed(!1),eu(null)}},children:[R?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("audio",{id:"active-audio-play",ref:X,src:void 0}),(0,i.jsx)("audio",{id:"silent-audio",ref:Z,src:j.Bd})]}),(0,i.jsxs)("div",{ref:$,className:"h-auto min-h-16 overflow-x-hidden overflow-y-visible rounded-xl border-white/[0.15] border border-solid text-sm flex flex-1 flex-col font-medium font-sans text-primary bg-quaternary",children:[!R&&(0,i.jsx)("div",{className:"absolute bottom-8 w-full h-24 z-[-1] bg-gradient-to-t from-vinylBlack-darker via-vinylBlack-darker to-vinylBlack-darker/30 blur-lg pointer-events-none"}),H.clip&&G.isEditorOpen&&!R?(0,i.jsxs)("div",{className:"w-full hidden md:block",children:[(0,i.jsxs)("div",{className:"w-full flex flex-row gap-4 p-1",children:[(0,i.jsx)(tO.A,{selections:eM,onChange:e=>{G.clearSelectionRange();let t=eM.find(t=>t.key===e);(null==t?void 0:t.key)==="extend"&&Y.setContinueClip(H.clip),ek((null==t?void 0:t.maxSelectionSecs)||void 0),ey(e)}}),(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsx)("input",{className:"p-2 rounded-lg w-16 tabular-nums tracking-tight text-xs",draggable:!1,type:"text",value:ex,onChange:e=>{let t=e.target.value;/^[0-9:.]*$/.test(t)&&eh(t)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),e.currentTarget.blur())},onBlur:()=>{var e,t,l,a;let i=(0,E.yd)((0,E.tE)(ex)||0,.2),n=(0,E.yd)((0,E.tE)(ef)||0,.2);if(void 0!==i&&void 0!==n&&null!==i&&null!==n&&(null==ea?void 0:ea.metadata.duration)){if(eN&&n-i>eN){eh((0,E.N8)(null===(e=G.selectionRange)||void 0===e?void 0:e.start,1));return}i===n?eh((0,E.N8)(null===(t=G.selectionRange)||void 0===t?void 0:t.start,1)):i<n?(G.setSelectionRange(i,n),eh((0,E.N8)(i,1)),eC(i/(null==ea?void 0:ea.metadata.duration)*(null===(l=$.current)||void 0===l?void 0:l.getBoundingClientRect().width))):eh((0,E.N8)((null===(a=G.selectionRange)||void 0===a?void 0:a.start)||0,1))}}}),(0,i.jsx)("span",{className:"text-xs select-none pointer-events-none",draggable:!1,children:""}),(0,i.jsx)("input",{className:"p-2 rounded-lg w-16 tabular-nums tracking-tight text-xs",draggable:!1,type:"text",value:ef,onChange:e=>{let t=e.target.value;/^[0-9:.]*$/.test(t)&&eg(t)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),e.currentTarget.blur())},onBlur:()=>{var e,t,l,a,i;let n=(0,E.yd)((0,E.tE)(ex)||0,.2),s=(0,E.yd)((0,E.tE)(ef)||0,.2);if(void 0!==n&&void 0!==s&&null!==n&&null!==s&&(null==ea?void 0:ea.metadata.duration)){if(eN&&s-n>eN){eg((0,E.N8)(null===(e=G.selectionRange)||void 0===e?void 0:e.end,1));return}n===s?eg((0,E.N8)(null===(t=G.selectionRange)||void 0===t?void 0:t.end,1)):n<s?s<(null==ea?void 0:ea.metadata.duration)?(G.setSelectionRange(n,s),eg((0,E.N8)(s,1)),ew(s/(null==ea?void 0:ea.metadata.duration)*(null===(l=$.current)||void 0===l?void 0:l.getBoundingClientRect().width))):eg((0,E.N8)(null===(a=G.selectionRange)||void 0===a?void 0:a.end,1)):eh((0,E.N8)(null===(i=G.selectionRange)||void 0===i?void 0:i.start,1))}}}),(null===(m=G.selectionRange)||void 0===m?void 0:m.start)!==void 0&&(null===(f=G.selectionRange)||void 0===f?void 0:f.end)!==void 0&&(0,i.jsx)(b.Ay,{variant:b.Ak.Tertiary,size:b.Mp.Mini,shape:b.aH.Rounded,onClick:()=>G.clearSelectionRange(),children:"Reset"})]}),(0,i.jsx)("div",{className:"flex flex-1 flex-row-reverse select-none pr-1",children:null===(v=eM.find(e=>e.key===ev))||void 0===v?void 0:v.content})]}),ea?(0,i.jsx)(tB.A,{clip:ea,height:100,isDraggingPlaybar:eo,actionMode:ev,quantizeSelectionSecs:.2,selectionType:"range",maxSelectionRangeSecs:eN,setWaveformStartInput:eh,setWaveformEndInput:eg,startPosition:eb,endPosition:ej,setStartPosition:eC,setEndPosition:ew}):null]}):null,(0,i.jsx)("div",{className:"flex flex-row flex-1 content-between items-center p-2",children:(0,i.jsxs)(tE.Vx.Provider,{value:{className:"stroke-white fill-white text-xl"},children:[ea?(0,i.jsxs)("div",{className:"w-full ".concat(R?"":"md:w-8 overflow-hidden"," flex flex-1 items-center relative"),children:[(0,i.jsx)(tL.A,{imageSize:ea.metadata.is_suno_short?void 0:j.M_,className:"rounded-md w-10 h-16 md:h-14 mr-2 object-cover cursor-pointer",src:ea.image_url||null,alt:"Cover image for ".concat(null==ea?void 0:ea.title),"aria-label":"Playbar: Cover image for ".concat(null==ea?void 0:ea.title),onClick:()=>{ea&&ea.id&&J.push("/song/".concat(ea.id))}}),(0,i.jsxs)("div",{className:"".concat(R?"":"md:w-auto"," w-full relative flex flex-col pr-2"),children:[(0,i.jsxs)("div",{className:"relative w-fit flex overflow-x-hidden text-sm font-medium hover:underline cursor-pointer",children:[(0,i.jsx)("div",{className:"animate-marquee ".concat(R?"":"md:animate-none"),children:(0,i.jsx)(M.A,{href:"/song/".concat(null==ea?void 0:ea.id),className:"whitespace-nowrap mr-24","aria-label":"Playbar: Title for ".concat(null==ea?void 0:ea.title),children:(0,E.p8)(ea)})}),(0,i.jsx)("div",{className:"absolute top-0 animate-marquee2 ".concat(R?"":"md:animate-none"),children:(0,i.jsx)(M.A,{href:"/song/".concat(null==ea?void 0:ea.id),className:"whitespace-nowrap mr-24 ".concat(R?"":"md:hidden"),"aria-label":"Playbar: Title for ".concat(null==ea?void 0:ea.title),children:(0,E.p8)(ea)})}),(0,i.jsx)("div",{className:"absolute right-0 w-full bg-gradient-to-r from-transparent via-quaternary md:hidden to-quaternary h-full"})]}),(0,i.jsxs)("span",{className:"text-sm font-medium flex flex-col md:flex-row",children:[(0,i.jsx)(M.A,{href:"/@".concat(ea.handle),className:"relative w-full ".concat(R?"":"md:w-fit flex"," hover:underline"),"aria-label":"Playbar: Artist for ".concat(null==ea?void 0:ea.title),children:(0,i.jsx)("span",{className:"lg:max-w-[150px] line-clamp-1 w-full",children:ea.display_name})}),H.clip?(0,i.jsxs)("div",{className:"'-translate-x-2 ".concat(R?"":"md:hidden"," flex items-center pt-1"),children:[(null===(y=V.flags)||void 0===y?void 0:y["song-queue"])&&(0,i.jsx)(b.Ay,{variant:b.Ak.Tertiary,size:b.Mp.Mini,iconClassName:"w-5 h-5",icon:er.jBU,onClick:()=>{H.toggleShowSongQueue(),es||Q.openModal(tF.H.SONG_QUEUE),(0,C.Ay)({actionName:"SongActionQueueClicked",context:{clipId:(null==ea?void 0:ea.id)||""}})},"aria-label":"Playbar: Song Queue"}),(0,i.jsx)(tR.A,{className:"w-min",clip:ea,isPlaybar:!0,onPlayCountClick:()=>{ea&&H.playClip(ea)}})]}):(0,i.jsx)("div",{className:"w-8 flex flex-1"}),(0,i.jsx)("span",{className:"text-lightGray mx-2 hidden ".concat(R?"":"md:block"),children:"|"}),(0,i.jsxs)("span",{"aria-label":"Playbar: Duration for ".concat(null==ea?void 0:ea.title),className:"align-middle whitespace-nowrap hidden ".concat(R?"":"md:flex"," flex-row items-center"),children:[(0,E.N8)(H.currentTime||0)," /"," ",ea.metadata.duration?(0,E.N8)(ea.metadata.duration):(0,i.jsx)(eI.A,{className:"w-3 h-3 opacity-80 ml-1"})]})]})]})]}):(0,i.jsx)("div",{className:"w-8 flex flex-1"}),(0,i.jsx)("div",{className:"flex-1 flex-row ".concat(R?"w-4":"w-8 md:flex"," justify-center gap-4 hidden"),children:(0,i.jsx)(tW,{handlePlayerTogglePlay:en,clip:ea,inline:R,disableControls:z})}),(0,i.jsxs)("div",{className:"flex md:flex-1 flex-row-reverse w-fit items-left gap-2 justify-right",children:[(0,i.jsxs)("div",{className:"flex flex-row-reverse items-center w-fit",children:[ei?(0,i.jsx)("button",{className:"cursor-pointer ".concat(R?"block":"hidden md:block"," hover:bg-transparentWhite rounded-md p-2"),onPointerDown:e=>{em(!ep),e.currentTarget.focus(),e.preventDefault(),e.stopPropagation()},"aria-label":"Playbar: Volume Slider",ref:eA,children:0===H.displayVolume?(0,i.jsx)(er.QDK,{className:"w-4 h-4 fill-white -translate-x-[-1px]"}):H.volume<.5?(0,i.jsx)(er.CRv,{className:"w-4 h-4 fill-white"}):(0,i.jsx)(er.va1,{className:"w-4 h-4 fill-white"})}):null,ea?(0,i.jsx)("div",{className:"hidden ".concat(R?"":"md:block"),"aria-label":"Playbar: More actions",children:(0,i.jsx)(tR.A,{className:"w-min",clip:ea,isPlaybar:!0,onPlayCountClick:()=>{ea&&H.playClip(ea)}})}):(0,i.jsx)("div",{className:"w-8 flex flex-1"}),(null===(w=V.flags)||void 0===w?void 0:w["song-queue"])&&(0,i.jsx)("div",{className:(0,F.A)("pt-1 hidden",{"md:block":!R}),"aria-label":"Playbar: Song queue",children:(0,i.jsx)(b.Ay,{variant:b.Ak.Tertiary,size:b.Mp.Mini,iconClassName:"w-5 h-5",icon:er.jBU,onClick:()=>{H.toggleShowSongQueue(),es||Q.openModal(tF.H.SONG_QUEUE),(0,C.Ay)({actionName:"SongActionQueueClicked",context:{clipId:(null==ea?void 0:ea.id)||""}})},"aria-label":"Playbar: Song Queue"})})]}),(0,i.jsxs)("div",{className:"w-fit h-auto flex flex-col ".concat(R?"":"md:hidden"," items-center gap-4 bg-transparent"),children:[(0,i.jsx)("div",{className:"items-center gap-4 flex flex-row h-auto w-fit",children:(0,i.jsx)(tE.Vx.Provider,{value:{className:"stroke-white fill-white text-xl"},children:(0,i.jsx)(tW,{handlePlayerTogglePlay:en,clip:ea,inline:R,disableControls:z})})}),(0,i.jsxs)("span",{className:"whitespace-nowrap text-secondary flex items-center",children:[(0,E.N8)(H.currentTime||0)," /"," ",(null==ea?void 0:ea.metadata.duration)?(0,E.N8)(ea.metadata.duration):(0,i.jsx)(eI.A,{className:"w-3 h-3 opacity-80 ml-1"})]})]})]})]})}),!!H.duration&&D&&(0,i.jsxs)("div",{className:(0,F.A)("h-2 w-full flex flex-row bg-quinary",{"cursor-pointer":!z}),onPointerDown:()=>{!z&&ea&&ed(!0)},onPointerUp:()=>{z||(ed(!1),eu(null))},onClick:e=>{if(!z&&ea){ed(!0);let t=e.clientX-e.currentTarget.getBoundingClientRect().left;H.userSetCurrentProgress(t/e.currentTarget.getBoundingClientRect().width*100);let l=Math.min(t,e.currentTarget.getBoundingClientRect().width);requestAnimationFrame(()=>{ed(!1),eu(null),ee.current.style.width="".concat(l,"px"),et.current.style.left="".concat(l,"px")})}},children:[(0,i.jsx)("div",{className:"h-2 bg-primary ".concat(eo||G.isScrubbing?"":"transition transition-[width] ease-linear duration-[525ms]"),ref:ee,onPointerDown:()=>{ea&&ed(!0)},onPointerUp:()=>{ed(!1),eu(null)},style:{width:ec?"".concat(ec-(null===(N=$.current)||void 0===N?void 0:N.getBoundingClientRect().left),"px"):"".concat(Math.floor((null===(k=$.current)||void 0===k?void 0:k.getBoundingClientRect().width)*Math.min(H.currentTime/H.duration,1)),"px")}}),(0,i.jsx)("button",{ref:et,onPointerDown:()=>{H.loadingStream||ed(!0)},onPointerUp:()=>{ed(!1)},style:{left:(null===(A=ee.current)||void 0===A?void 0:A.style.width)||0},className:(0,F.A)("hidden absolute -m-[2px] w-3 h-3 rounded-full bg-primary hover:h-[22px] hover:w-[22px] hover:-m-2",{"cursor-pointer":!z,"transition-all ease-in-out duration-500":!eo&&!G.isScrubbing})})]})]})]})}),ep&&(0,i.jsx)(tH,{top:null===(S=eA.current)||void 0===S?void 0:S.getBoundingClientRect().top,left:null===(I=eA.current)||void 0===I?void 0:I.getBoundingClientRect().left,ref:el})]})});var tG=l(82148),tY=l(24316),tq=l(5585),tQ=l(95278),tK=l(81271),tJ=l(47088),tX=l(71791),tZ=l(4869),t$=l(17219),t0=l(99516),t1=l(84899),t3=l(73222),t6=l(21697),t5=l(91135),t2=l(96132),t4=l(46995),t8=l(83168),t7=l(95902),t9=l(99803),le=l(47659),lt=l(56518),ll=l(70634),la=l(24874),li=l(96728),ln=l(19783),ls=l(44081),lo=l(60425),lr=l(41301),ld=l(32194),lc=l(74027),lu=l(88659),lp=l(92819),lm=l(76898);let lx=(0,p.PA)(e=>{var t,l,a,r,d,u,p,m,f,g;let{isExtendModeOn:v,setExtendModeOn:y,isReusePromptOn:b,setReusePromptOn:w,isOpen:N,onClose:k,onOpen:A}=e,S=h.useRef(null),{genForm:I,clips:_,session:M,contest:T,createV2:L}=(0,P.gy)(),{isSignedIn:O}=(0,o.d)(),D=(0,x.useRouter)(),F=(0,x.usePathname)(),[B,z]=(0,h.useState)(!1),[U,H]=(0,h.useState)(!1),[W,G]=(0,h.useState)(!1),[q,Q]=(0,h.useState)(!1),{enabled:J}=M.isFeatureAllowed("image-to-song-web-gen"),Z=()=>M.isOutOfCredits&&(!I.mv.includes("v4")||M.isOutOfFreeV4Gens),{setTriedCreate:$}=(0,R.W)(),ee=(null==I?void 0:null===(t=I.mv)||void 0===t?void 0:t.includes("v2"))?j.w4:j.z3,et=()=>{I.setInstrumental(!I.instrumental),I.setLyrics(""),ev(e=>!e),G(e=>!e)},el=(0,h.useRef)(null);(0,h.useEffect)(()=>{let e=e=>{el.current&&!el.current.contains(e.target)&&(z(!1),H(!1),y(!1),w(!1))};return B?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[B,v,U,b]),(0,h.useEffect)(()=>{U&&I.setDescription("")},[U,I]),(0,h.useEffect)(()=>{H(!I.isSimple)},[I.isSimple]);let ea=async()=>{let e=""!==ew.trim()?ew:I.placeholder;O||(localStorage.setItem("prompt",e),ej.openSignUp({...(0,E.Of)("/create")}))},ei=async e=>{if(Z()){ed.LS.logAudioCreationEvent(!0,ec.a2.clickDisabledCreateSongWhenOutOfCredits,I,M,{});return}eW?(e$(e),I.setDescription(""),eK(e=>{let t={...e};return Object.keys(t).forEach(e=>{t[e]=""}),t})):O?await en(I,_,e):await ea()},en=async(e,t,l)=>{if(ek(),(null==F?void 0:F.startsWith("/create"))||D.push("/create/"),e.lyrics.length>ee)(0,P.oR)({title:"Lyrics too long",description:"Lyrics exceed maximum length of ".concat(ee," characters."),status:"warning",duration:5e3,isClosable:!0});else{e.setIsLoading(!0),e.setIsMobile(!0),e.setIsMadLibs(!!eW),e.setIsSimple(!U),$(!0);try{await t.runStream(l,void 0,{createMode:e.isSimple?"simple":"custom"},!0)}catch(t){e.setIsLoading(!1),c.Cp(t),(0,P.oR)({title:"Error",description:"An error occurred while generating the song.",status:"error",duration:5e3,isClosable:!0});return}e.setIsLoading(!1)}},{isOpen:es,onClose:eo,onOpen:eu}=(0,n.useDisclosure)(),{isOpen:ep,onOpen:em,onClose:ex}=(0,n.useDisclosure)(),[eh,ef]=(0,h.useState)(!1),[eg,ev]=(0,h.useState)(!1),[ey,eb]=(0,h.useState)(M.roles.has_accepted_custom_mode_tos);(0,h.useEffect)(()=>{eb(M.roles.has_accepted_custom_mode_tos)},[M.roles.has_accepted_custom_mode_tos]);let eC=async()=>{ef(!0),ev(!1),await M.acceptTOS(),eb(!0),ef(!1),eo()};(0,h.useEffect)(()=>{ey?(ev(!1),eo()):ev(!0)},[ey]),(0,h.useEffect)(()=>{(v||b)&&(z(!0),H(!0))},[v,b]);let ej=(0,K.ho)(),[ew,eN]=(0,h.useState)(I.description);(0,h.useEffect)(()=>{var e;if(O&&(null===(e=M.models)||void 0===e?void 0:e.length)>0&&!I.hasRunSavedPrompt){let e=localStorage.getItem("prompt"),t=localStorage.getItem("prompt_saved_at"),l=localStorage.getItem("prompt_source");if(e&&Date.now()-(parseInt(t||"")||0)<6e5){I.hasRunSavedPrompt=!0,eN(e),I.setDescription(e),I.setIsLoading(!0),I.setIsMobile(!0),I.mv="chirp-v4";let t=(0,C.$E)();t.logWebUserEvent({actionName:"GenerateStartedAfterLogin"}),console.log("Running saved prompt generation from mobile",JSON.stringify(e),JSON.stringify(M.models));let a=()=>{en(I,_,t),localStorage.removeItem("prompt"),localStorage.removeItem("prompt_saved_at"),localStorage.removeItem("prompt_source")};"quickbox"===l?((0,C.Ay)({actionName:"GenerateStartedFromLandingPage",context:{prompt:e||""}}),setTimeout(a,10)):"songpage"===l?((0,C.Ay)({actionName:"GenerateStartedFromSongPage",context:{prompt:e||""}}),setTimeout(a,10)):a()}}},[O,I,_,M.models]);let ek=()=>{I.shouldOpenMobileCreate=!1,(v||b)&&(y(!1),w(!1)),k()};(0,h.useEffect)(()=>{(0,E.rr)()?I.shouldOpenMobileCreate&&A():ek()},[I.shouldOpenMobileCreate,v,b]);let[eA,eS]=(0,h.useState)(!1),[eI,eP]=(0,h.useState)(!1),[e_,eM]=(0,h.useState)(!1),[eE,eL]=(0,h.useState)(!1),[eR,eD]=(0,h.useState)(!1),[eB,ez]=(0,h.useState)(!1),[eU,eH]=(0,h.useState)(!1),[eW,eV]=(0,h.useState)(null),eG=lm.reduce((e,t)=>(e[t.id]=t,e),{}),eY=Object.fromEntries(Object.entries(eG).map(e=>{let[t,l]=e;return[t,l.title]}));(0,h.useEffect)(()=>{I.setIsMadLibs(!!eW)},[eW]);let eq=(e=>{let t={};return Object.values(e).forEach(e=>{e.content.forEach(e=>{"input"===e.type&&(t[e.field]="")})}),t})(lm),[eQ,eK]=(0,h.useState)(eq),eJ=(e,t)=>{eK(l=>({...l,[e]:t}))},eX=Object.fromEntries(Object.entries(eG).map(e=>{let[t,l]=e;return[t,(0,i.jsx)("div",{className:"flex flex-wrap gap-1 max-w-xs font-sans px-2",children:l.content.map((e,t)=>"string"==typeof e?(0,i.jsx)("span",{children:e},t):"input"===e.type?(0,i.jsxs)("div",{className:"relative w-30 mb-6 inline-flex items-center",children:[(0,i.jsx)("input",{type:"text",placeholder:" ",className:"leading-tight w-full px-1 py-0.5 border-b-2 border-secondary focus:border-primary placeholder-transparent focus:outline-none text-center bg-vinylBlack-light bg-opacity-40 focus:bg-opacity-10",value:eQ[e.field],onChange:t=>eJ(e.field,t.target.value),maxLength:e.maxLength}),(0,i.jsx)("label",{className:"font-mono text-[9px] w-full text-center absolute left-1/2 transform -translate-x-1/2 -bottom-4 text-primary text-opacity-90 transition-transform duration-200 ease-in-out",children:e.placeholder})]},t):null)},t)]})),eZ=()=>!Object.values(I.imageData).every(e=>null===e),e$=e=>{if(!eW)return;let t=eG[eW];if(!t)return;let l=t.template;Object.keys(eQ).forEach(e=>{let t=eQ[e];l=l.replace("{".concat(e,"}"),t)}),"SpecialOccasions"===eW?(0,tq.A)({particleCount:100,spread:70,origin:{y:.6},colors:["#FAF7F5","#D1CBC7"]}):"Person"===eW?(eS(!0),setTimeout(()=>eS(!1),5e3)):"Activity"===eW?(eP(!0),setTimeout(()=>eP(!1),5e3)):"Moods"===eW?(eL(!0),setTimeout(()=>eL(!1),5e3)):"Greeting"===eW?(eD(!0),setTimeout(()=>eD(!1),5e3)):"Scrapbook"===eW?(eM(!0),setTimeout(()=>eM(!1),5e3)):"Vacation"===eW?(eH(!0),setTimeout(()=>eH(!1),5e3)):"Pet"===eW&&(ez(!0),setTimeout(()=>ez(!1),5e3)),I.setIsMadLibs(!0),I.setDescription(l),en(I,_,e),ed.LS.segmentTrack(ec.f7.generalEvent,{key:t.id,actionName:ec.a2.clickMadlibCreate,isMobile:!0})},e0=e=>{eV(e)},e1=!!I.coverClipId&&(0,tZ.x3)(M),e3=!!I.continueClipId,e6=(0,tZ.w9)(M),e5=(0,tZ.$l)(M),[e2,e4]=(0,h.useState)(!1);(0,h.useEffect)(()=>{M&&_&&I.coverClipId&&(async()=>{e4(await T.isCoverEnabledOrIsContest(I.coverClipId||"",M.userId||""))})()},[M,I.coverClipId,_]);let[e8,e7]=(0,h.useState)(!1),[e9,te]=(0,h.useState)(M.hasAcceptedTimbalandTerms);(0,h.useEffect)(()=>{(async()=>{let e=I.coverClipId&&await T.isContestClip(I.coverClipId),t=I.continueClipId&&await T.isContestClip(I.continueClipId);e7(e||t||!1)})()},[I.coverClipId,T]);let tt=async e=>{await M.setTimbalandTermsAccepted(),te(!0),ex(),await ei(e)},[tl,ta]=(0,h.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(tG.Drawer,{isOpen:N,placement:"bottom",onClose:ek,finalFocusRef:S,size:"lg",children:[(0,i.jsx)(V.ModalOverlay,{display:["block","block","none"]}),(0,i.jsxs)(tY.DrawerContent,{display:["flex","flex","none"],backgroundColor:"black",boxShadow:"0 0 10px 5px rgba(255, 255, 255, 0.08)",height:U||(null==M?void 0:null===(l=M.flags)||void 0===l?void 0:l.madlibs)?"100%":"60%",borderRadius:"40px 40px 0 0",sx:{transition:"height 0.3s ease-out",overflowY:U?"auto":"hidden"},children:[(0,i.jsxs)("div",{className:"flex justify-between items-center px-4 py-6",children:[(0,i.jsx)("span",{className:"text-center w-full font-sans font-normal text-secondary text-[16px]",children:"Create"}),(0,i.jsx)("div",{className:"absolute right-4",children:(0,i.jsx)(X.A,{onClick:ek})})]}),(0,i.jsxs)(Y.ModalBody,{sx:{overflowY:"auto"},children:[(null===(a=M.flags)||void 0===a?void 0:a.remix)&&I.isRemixCreate&&(0,i.jsx)(tK.A,{}),L.speed_clip_id&&(null===(r=M.flags)||void 0===r?void 0:r["remix-adjust-speed"])&&(0,i.jsx)(tQ.A,{clipId:L.speed_clip_id,onComplete:e=>{console.log(e,"It is done")}}),!eW&&!L.speed_clip_id&&(0,i.jsxs)(eT.Stack,{direction:"row",alignItems:"center",w:"100%",justifyContent:"space-between",children:[(0,i.jsx)(eT.Stack,{direction:"row",alignItems:"center",children:(0,i.jsx)(tu.A,{label:"Custom",checked:U,onChange:()=>{I.setIsSimple(!I.isSimple),H(e=>!e)},disabled:!O})}),(0,i.jsx)(tJ.A,{popoverTopMargin:90,fromMobileLibrary:!1,customHeight:"h-[28px]",iconSize:3,fontSize:"text-sm"}),(0,i.jsx)(s.Flex,{children:(0,i.jsx)(t3.A,{state:I})})]}),!U&&!(null===(d=M.flags)||void 0===d?void 0:d.madlibs)&&!L.speed_clip_id&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eT.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",mt:8,children:[(0,i.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Song Description"}),(0,i.jsx)(tu.A,{label:"Instrumental",checked:W,onChange:et})]}),(0,i.jsx)(eT.Stack,{py:2,children:(null==M?void 0:null===(u=M.flags)||void 0===u?void 0:u["onebox-lyrics-model-selector"])?(0,i.jsx)(li.A,{value:I.description,onChange:e=>I.setDescription(e.currentTarget.value),placeholder:I.placeholder,lyricsModel:I.lyricsModel,setLyricsModel:I.setLyricsModel,enableModelSelector:!0}):(0,i.jsx)(ln.A,{maxLength:200,value:I.description,resize:!0,onChange:e=>I.setDescription(e.target.value),placeholder:I.placeholder,customHeight:"h-[130px]",isScrollable:!0})}),(0,tZ.m2)(M)&&(0,i.jsx)(t1.A,{}),(null==M?void 0:null===(p=M.flags)||void 0===p?void 0:p.madlibs)&&(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsxs)("button",{onClick:()=>ta(!tl),className:"w-full flex justify-between items-center font-serif text-xl md:px-4 pt-2 pb-2 rounded-md transition-colors duration-200 ".concat(tl?"bg-tertiary":"hover:bg-tertiary"),children:[(0,i.jsx)("span",{children:"Need ideas?"}),tl?(0,i.jsx)(er.SwV,{className:"w-4 h-4"}):(0,i.jsx)(er.bDP,{className:"w-4 h-4"})]}),tl&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(lu.A,{setSelectedSuggestion:e0})})]})]}),!U&&(null===(m=M.flags)||void 0===m?void 0:m.madlibs)&&!L.speed_clip_id&&(0,i.jsxs)(i.Fragment,{children:[J&&(0,i.jsx)(lc.A,{imageButtonOnClick:()=>{Q(!q)},activeState:q}),q&&J?(0,i.jsx)(lc.g,{state:I,onGenerate:async(e,t)=>en(I,_,t)}):(0,i.jsx)(i.Fragment,{children:eW?(0,i.jsxs)("div",{className:"flex flex-col px-2 pt-4 pb-6 w-full gap-4 w-full max-w-full md:max-w-[340px]",children:[(0,i.jsx)("button",{onClick:()=>{eV(null),I.setDescription(""),I.setIsMadLibs(!1)},className:"ml-2 h-[32px] w-[32px] p-2 text-white bg-tertiary hover:bg-vinylBlack-darker focus:outline-none rounded-full border border-white-300 flex justify-center items-center","aria-label":"Back",children:(0,i.jsx)(tL.A,{src:"/icons/left-caret.svg",alt:"Back",width:8,height:8})}),(0,i.jsx)("h2",{className:"font-serif text-2xl px-2 pt-2 break-words max-w-[300px]",children:eW&&eY[eW]}),(0,i.jsx)("p",{className:"font-sans font-medium text-sm px-2 pb-4 text-secondary text-opacity-80",children:"Fill in the blanks to create your song."}),(0,i.jsx)("p",{children:eX[eW]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eT.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",mt:8,children:[(0,i.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Song Description"}),(0,i.jsx)(tu.A,{label:"Instrumental",checked:W,onChange:et})]}),(0,i.jsx)(eT.Stack,{py:2,children:(null==M?void 0:null===(f=M.flags)||void 0===f?void 0:f["onebox-lyrics-model-selector"])?(0,i.jsx)(li.A,{value:I.description,onChange:e=>I.setDescription(e.currentTarget.value),placeholder:I.placeholder,lyricsModel:I.lyricsModel,setLyricsModel:I.setLyricsModel,enableModelSelector:!0}):(0,i.jsx)(ln.A,{maxLength:200,value:I.description,resize:!0,onChange:e=>I.setDescription(e.target.value),placeholder:I.placeholder,customHeight:"h-[130px]",isScrollable:!0})}),(0,tZ.m2)(M)&&(0,i.jsx)(t1.A,{}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsxs)("button",{onClick:()=>ta(!tl),className:"w-full flex justify-between items-center font-serif text-xl px-4 pt-3 pb-2 rounded-md transition-colors duration-200 bg-tertiary",children:[(0,i.jsx)("span",{children:"Need ideas?"}),tl?(0,i.jsx)(er.SwV,{className:"w-4 h-4"}):(0,i.jsx)(er.bDP,{className:"w-4 h-4"})]}),tl&&(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(lu.A,{setSelectedSuggestion:e0})})]})]})})]}),U&&!L.speed_clip_id&&(0,i.jsxs)(eT.Stack,{direction:"column",children:[I.coverClipId&&e2&&(0,i.jsx)(lr.A,{clipId:I.coverClipId}),(0,i.jsx)(s.Flex,{mb:W?0:-8,w:"100%",children:(0,i.jsxs)("div",{className:"flex flex-row w-full",children:[(0,i.jsx)("div",{className:"flex-1 h-[30px]",children:(0,i.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:W?"Instrumental Mode":""})}),(0,i.jsx)("div",{className:"flex-1 flex justify-end",children:(0,i.jsx)(tu.A,{label:"Instrumental",checked:W,onChange:et})})]})}),!W&&(0,i.jsxs)(eT.Stack,{children:[(0,i.jsx)(eT.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",children:(0,i.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Lyrics"})}),(null==M?void 0:null===(g=M.flags)||void 0===g?void 0:g["ft-lyrics-model"])?(0,i.jsx)(la.A,{maxLyricsLength:ee,lyrics:I.lyrics,setLyrics:I.setLyrics,lyricsInputDisallowed:eg,onLyricsInputInteraction:()=>{eg&&eu()}}):(0,i.jsx)(ln.A,{maxLength:ee,value:I.lyrics,resize:!0,isScrollable:!0,customHeight:"h-[230px]",onChange:e=>I.setLyrics(e.target.value),placeholder:I.continueClipId?"Enter additional lyrics to extend the song based on your previous verses... \n\nOnce the extended songs have finished creating, click '...' and Get Whole Song to get the entire completed song.":"Enter your own lyrics or describe a song and click Write About...",onClick:()=>{eg&&eu()},onKeyDown:e=>{eg&&eu(),"Enter"===e.key&&eg&&e.preventDefault()},isReadOnly:eg,cursor:eg?"not-allowed":"text",leftAsset:(0,i.jsx)(ld.A,{lyrics:I.lyrics,isLoading:I.isLoadingLyrics,generateLyrics:I.generateLyrics}),paddingBottom:50})]}),(0,i.jsxs)(eT.Stack,{mt:4*!W,children:[(0,i.jsx)(eT.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",children:(0,i.jsxs)("div",{className:"flex flex-row w-full",children:[(0,i.jsx)("div",{className:"flex-1 h-[30px]",children:(0,i.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Style of Music"})}),(0,i.jsx)("div",{className:"flex-1 flex justify-end",children:e6?(0,i.jsx)(tu.A,{label:"Exclude Styles",checked:I.enableExcludeStyle,onChange:()=>{I.setEnableExcludeStyle(!I.enableExcludeStyle),ed.LS.logAudioCreationEvent(!0,I.enableExcludeStyle?ec.a2.enableNegativeTags:ec.a2.disableNegativeTags,I,M,{enableExcludeStyle:!I.enableExcludeStyle})}}):(0,i.jsx)(le.A,{label:"Exclude Styles",tooltipLabel:"Subscribe to exclude styles",onClick:()=>{ed.LS.logAudioCreationEvent(!0,ec.a2.clickDisabledNegativeTags,I,M,{})}})})]})}),(0,i.jsx)(ln.A,{placeholder:"Enter style of music...",maxLength:j.Ti,spacedLeftAsset:!0,resize:!1,value:I.style,isScrollable:!1,onChange:e=>I.setStyle(e.target.value),paddingBottom:44,leftAsset:(0,i.jsx)("div",{className:"flex space-x-1 overflow-x-auto mr-4 custom-scrollbar-transparent",style:{scrollbarWidth:"thin"},children:I.recommmendedStyles.map((e,t)=>(0,i.jsx)(ll.A,{style:e,onClick:()=>{(0,tX.YK)(e,I),ed.LS.logAudioCreationEvent(!1,ec.a2.useRecommendStyle,I,M,{recommendStyle:e})}},t))}),customHeight:"h-[100px]"})]}),e6&&I.enableExcludeStyle&&(0,i.jsxs)(eT.Stack,{mt:4,children:[(0,i.jsx)(eT.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",children:(0,i.jsxs)("div",{className:"font-sans text-[15px] leading-[20px] flex items-center space-x-1 w-fit",children:[(0,i.jsx)("span",{children:"Exclude Styles"}),(0,i.jsx)("span",{className:"inline-block pt-[1px]",children:(0,i.jsx)(lo.A,{label:"Describe the styles of music you want to exclude (e.g., dance pop)."})}),(0,i.jsx)(lt.A,{label:"Beta",tooltip:"This is a new feature. Liking and Disliking your songs helps us make it better!"})]})}),(0,i.jsx)(ln.A,{placeholder:"Enter styles to exclude...",maxLength:j.Ti,spacedLeftAsset:!1,resize:!1,value:I.negativeTags,isScrollable:!1,onChange:e=>I.setNegativeTags(e.target.value),customHeight:"h-[100px]"})]}),!e3&&!e1&&(0,i.jsx)(lp.A,{}),(0,i.jsxs)(eT.Stack,{mt:4,children:[(0,i.jsx)(eT.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",children:(0,i.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Title"})}),(0,i.jsx)(ln.A,{maxLength:80,value:I.title,onChange:e=>I.setTitle(e.target.value),placeholder:"Enter a title",customHeight:"h-2"})]}),I.continueClipId?(0,i.jsx)(tX.UA,{clipId:I.continueClipId}):null,(0,tZ.m2)(M)&&(0,i.jsx)(t1.A,{})]})]}),(0,i.jsx)(eO.ModalFooter,{flexDirection:"column",children:(0,i.jsxs)(s.Flex,{width:"100%",alignItems:"center",gap:2,children:[(""!==I.description||""!==I.style||""!==I.lyrics||""!==I.title||Object.values(eQ).some(e=>""!==e))&&(0,i.jsx)(s.Flex,{justifyContent:"flex-start",children:(0,i.jsx)("button",{onClick:()=>{I.setStyle(""),I.setNegativeTags(""),I.setEnableExcludeStyle(!1),I.setDescription(""),I.setTitle(""),I.setLyrics(""),I.resetContinueClip(),I.resetArtistClip(),I.resetCoverClip(),I.resetPersona(),y(!1),w(!1),eK(eq)},className:"text-[13px] font-sans font-medium text-primary bg-tertiary py-4 px-6 rounded-full",children:"Clear"})}),(0,i.jsx)(s.Flex,{width:""!==I.description||""!==I.style||""!==I.lyrics||""!==I.title||null!==I.continueClipId||null!==I.artistClipId||null!==I.coverClipId?"95%":"100%",children:q?(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(ls.A,{isDisabled:Z(),isMobile:!0,tooltipLabel:e5,onClick:()=>{if(Z()){window.open("/account","_blank"),ed.LS.logAudioCreationEvent(!0,ec.a2.redirectToAccountPage,I,M,{});return}},children:(0,i.jsx)(eF.A,{onClick:()=>{let e=(0,C.$E)();if(e.logWebUserEvent({actionName:"GenerateFromImageClicked"}),Z()){e.logWebUserEvent({actionName:"GenerationStartError",principalObjectType:"error_type",principalObjectValue:"Insufficient Credits"}),ed.LS.logAudioCreationEvent(!0,ec.a2.clickDisabledCreateSongWhenOutOfCredits,I,M,{});return}I.setGenerationType("IMAGE"),en(I,_,e)},text:"Extract",icon:(0,i.jsx)(er.WSU,{className:"fill-primary w-5 h-5"}),isDisabled:!eZ(),isLoading:I.isLoading,label:"Extract",fullWidth:!0,useV4ButtonStyle:I.mv.includes("v4"),backgroundImage:I.mv.includes("v4")?"/blue-button-bg.png":"/create-button-background.svg"})}),!eZ()&&(0,i.jsx)("div",{className:"font-sans text-sm",children:"* Please upload at least one image."})]}):(0,i.jsx)(ls.A,{isDisabled:Z(),isMobile:!0,tooltipLabel:e5,onClick:()=>{if(Z()){window.open("/account","_blank"),ed.LS.logAudioCreationEvent(!0,ec.a2.redirectToAccountPage,I,M,{});return}},children:(0,i.jsx)(eF.A,{onClick:async()=>{let e=(0,C.$E)();e.logWebUserEvent({actionName:"GenerateButtonClicked",context:{onebox:I.isSimple}}),e8&&!e9?em():await ei(e)},isDisabled:U&&!I.artistClipId&&!I.lyrics&&!I.style||!I.isContinueValid()||!(()=>{if(!eW)return!0;let e=eG[eW];return!e||e.content.every(e=>"object"!=typeof e||"input"!==e.type||""!==eQ[e.field].trim())})(),isLoading:I.isLoading,text:"Create",icon:(0,i.jsx)(er.WSU,{className:"fill-primary w-5 h-5"}),fullWidth:!0,useV4ButtonStyle:I.mv.includes("v4"),backgroundImage:I.mv.includes("v4")?"/blue-button-bg.png":"/create-button-background.svg"})})})]})})]})]}),eA&&(0,i.jsx)(t2.A,{}),eI&&(0,i.jsx)(t9.A,{}),e_&&(0,i.jsx)(t6.A,{}),eE&&(0,i.jsx)(t7.A,{}),eR&&(0,i.jsx)(t8.A,{}),eB&&(0,i.jsx)(t5.A,{}),eU&&(0,i.jsx)(t4.A,{}),(0,i.jsx)(t$.A,{isOpen:es,onClose:eo,onConfirm:eC,isLoading:eh}),e8&&!e9&&(0,i.jsx)(t0.A,{isOpen:ep,onClose:ex,onAccept:tt})]})});var lh=l(20547),lf=l(95838),lg=l(8882),lv=l(17485),ly=l(29734),lb=l(77700),lC=l(70024),lj=l(71921);let lw=e=>{let{className:t,avatarClassName:l,showClaimUserName:a,onDismissClaimUsername:n,onOpenWelcomeModal:s,displayName:o,handle:r,src:d,...c}=e,u=(0,h.useRef)(null);return(0,i.jsxs)("div",{className:(0,B.QP)("relative",t),...c,children:[(0,i.jsx)("div",{ref:u,children:(0,i.jsx)(lj.A,{displayName:o||r||"",handle:r,src:d,imageSize:j.M_,className:(0,B.QP)("w-9 h-9",l)})}),a&&n&&s&&(0,i.jsx)(ex,{btnRef:u,handleDismissClaimUsername:n,onOpenWelcomeModal:s})]})},lN=(0,p.PA)(e=>{var t,l,a,r,d,c,p,m,f,g,v,y,w,N,k,A,S,_;let{children:T=lw,avatarClassName:L,avatarButtonClassName:O,onOpenEditProfile:R,menuPlacement:D,menuOffset:F,...z}=e,{isLoaded:U,isSignedIn:H}=(0,o.d)(),W=(0,ev.RH)(),V=(0,K.ho)(),G=(0,o.d)(),{session:Y}=(0,P.gy)(),Q=(0,x.usePathname)(),J=(0,h.useRef)(null),[X,Z]=(0,h.useState)(!0===Y.shownClaimUsername),{isOpen:et,onOpen:ea,onClose:ei}=(0,n.useDisclosure)(),en=(0,u.useGateValue)("show-claim-username-tooltip"),es=(0,h.useCallback)(async()=>{try{await Y.updateShownClaimUsername(),Z(!0)}catch(e){console.error("Failed to update shown_claim_username:",e)}},[Y]);(0,h.useEffect)(()=>{Y.getUserConfig()},[]),(0,h.useEffect)(()=>{Z(!0===Y.shownClaimUsername)},[Y.shownClaimUsername]);let eo=en&&!X&&Y.shownCreationTour&&Y.user&&!(null===(t=Y.user)||void 0===t?void 0:t.is_handle_updated);return(0,i.jsxs)("div",{...z,children:[U&&!H?(0,i.jsx)(lb.Box,{whiteSpace:"nowrap",mr:[2,0,0],children:(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,icon:er.flY,onClick:()=>{(0,C.Ay)({actionName:"SignInButtonClicked"}),V.openSignUp({...(0,E.Of)(Q)})},children:"Sign In"})}):null,U&&H&&(0,i.jsx)(lb.Box,{mt:2,children:(0,i.jsxs)(q.Menu,{placement:D,offset:F,children:[(0,i.jsx)(eh.MenuButton,{"data-testid":"profile-menu-button","aria-label":"Profile menu button",ref:J,className:(0,B.QP)("group",O),onClick:e=>{eo&&(e.preventDefault(),es(),ea())},pt:0,children:"function"==typeof T?h.createElement(T,{avatarClassName:L,displayName:(null===(l=Y.user)||void 0===l?void 0:l.display_name)||(null===(a=Y.user)||void 0===a?void 0:a.handle)||"",handle:null===(r=Y.user)||void 0===r?void 0:r.handle,src:null===(d=Y.user)||void 0===d?void 0:d.avatar_image_url,showClaimUserName:eo,onDismissClaimUsername:es,onOpenWelcomeModal:ea}):T}),(0,i.jsx)(ef.Portal,{children:(0,i.jsxs)(ee.MenuList,{pt:0,sx:{...j.O$},zIndex:1e3,children:[(0,i.jsxs)("div",{className:"flex flex-grow gap-2 justify-start items-center px-2 min-h-14",children:[(0,i.jsx)(lj.A,{displayName:(null===(c=Y.user)||void 0===c?void 0:c.display_name)||(null===(p=Y.user)||void 0===p?void 0:p.handle)||"",handle:null===(m=Y.user)||void 0===m?void 0:m.handle,src:null===(f=Y.user)||void 0===f?void 0:f.avatar_image_url,imageSize:j.M_,className:(0,B.QP)("w-9 h-9",L)}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col items-start justify-center gap-0.5 border border-transparent",children:[(null===(g=Y.user)||void 0===g?void 0:g.display_name)||(null===(v=Y.user)||void 0===v?void 0:v.handle)?(0,i.jsx)("p",{className:"text-[14px] leading-[16px] font-medium text-left line-clamp-1",children:(null===(y=Y.user)||void 0===y?void 0:y.display_name)||(null===(w=Y.user)||void 0===w?void 0:w.handle)}):null,(0,i.jsx)("p",{className:"text-[13px] leading-[16px] text-foreground-inactive",children:(null===(A=V.user)||void 0===A?void 0:null===(k=A.emailAddresses)||void 0===k?void 0:null===(N=k[0])||void 0===N?void 0:N.emailAddress)||""})]})]}),(null===(S=Y.user)||void 0===S?void 0:S.handle)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)($.MenuItem,{fontSize:"14px",as:M.A,href:"/@".concat(null===(_=Y.user)||void 0===_?void 0:_.handle),bg:"transparent",_hover:{background:"rgba(255, 255, 255, 0.1)",textDecoration:"none"},children:[(0,i.jsx)(lb.Box,{ml:"11px",mr:"27px",children:(0,i.jsx)(lC.Image,{src:"/profile.svg",alt:"Profile",boxSize:"14px",display:"inline-block",verticalAlign:"middle"})})," ","View Profile"]}),(0,i.jsxs)($.MenuItem,{fontSize:"14px",as:eg.Link,onClick:()=>R&&R(),bg:"transparent",_hover:{background:"rgba(255, 255, 255, 0.1)",textDecoration:"none"},children:[(0,i.jsx)(lb.Box,{ml:"11px",mr:"27px",children:(0,i.jsx)(er.qUP,{})})," ","Edit Profile"]})]}):null,(0,i.jsxs)($.MenuItem,{fontSize:"14px",as:eg.Link,onClick:()=>V.openUserProfile({appearance:{elements:{modalContent:{height:"auto"},cardBox:{height:"20rem"},profileSection__profile:{display:"none"},button:"text-neutral-300 hover:text-neutral-500",badge:"text-neutral-300 outline outline-neutral-300"}}}),bg:"transparent",_hover:{background:"rgba(255, 255, 255, 0.1)",textDecoration:"none"},children:[(0,i.jsx)(lb.Box,{ml:"11px",mr:"27px",children:(0,i.jsx)(er.L64,{})})," ","Manage Account"]}),(0,i.jsxs)($.MenuItem,{fontSize:"14px",onClick:()=>{(0,C.y4)(),(0,C.Ay)({actionName:"SignOutButtonClicked"}),document.cookie="".concat(j._7,"=true; path=/; max-age=31536000"),W.POST("/api/signout/",{}),V.signOut({redirectUrl:"/"}).then(()=>{(0,ev.Sn)(),Y.loadSession(G,1,!0)})},bg:"transparent",_hover:{background:"rgba(255, 255, 255, 0.1)",textDecoration:"none"},children:[(0,i.jsx)(lb.Box,{ml:"11px",mr:"27px",children:(0,i.jsx)(er.A60,{})})," ","Sign Out"]}),(0,i.jsxs)(s.Flex,{flexDirection:"row",columnGap:4,ml:16,mt:2,children:[(0,i.jsx)(eg.Link,{href:"/terms",fontSize:"xs",color:"gray",children:"Terms of Service"}),(0,i.jsx)(eg.Link,{href:"/privacy",fontSize:"xs",color:"gray",children:(0,i.jsx)(I.Text,{fontSize:"xs",color:"gray",children:"Privacy"})})]})]})})]})}),et&&en&&(0,i.jsx)(el.A,{reclaim:!0,isOpen:et,onClose:()=>{ei(),es()}})]})});var lk=l(34101),lA=l(36554),lS=l(8947);let lI=(0,p.PA)(e=>{let{isOpen:t,onClose:l,changelogItems:a}=e;return(0,i.jsxs)(W.Modal,{isOpen:t,onClose:l,isCentered:!0,size:"2xl",children:[(0,i.jsx)(V.ModalOverlay,{}),(0,i.jsxs)(G.ModalContent,{bg:"#252020",borderRadius:"32px",children:[(0,i.jsxs)(lk.s,{justifyContent:"space-between",alignItems:"center",px:3,children:[(0,i.jsx)("span",{className:"font-serif text-3xl pl-12 pt-16",children:"What's New?"}),(0,i.jsx)(lk.s,{mt:-8,children:(0,i.jsx)(X.A,{onClick:l})})]}),(0,i.jsx)(eL.Divider,{mt:8,mb:2,mx:16,w:540}),(0,i.jsx)(Y.ModalBody,{p:0,h:"75%",maxHeight:"600px",display:"flex",children:(0,i.jsx)(eT.Stack,{py:2,px:0,spacing:[2,2,0],flexDirection:"column",overflow:"auto",flex:"1",w:"100%",children:a.map((e,t)=>{let{title:l,datetime:a,description:n,tags:s,linkUrl:o,linkText:r}=e,d=s&&s.length?s.split(",").map(e=>e.trim()):[];return(0,i.jsxs)(lb.Box,{px:16,pb:8,pt:4,children:[(0,i.jsx)("span",{className:"font-serif font-normal text-2xl mb-10",children:l}),(0,i.jsxs)(lk.s,{flexDirection:"row",columnGap:2,flexWrap:"wrap",alignItems:"center",my:4,children:[d.map((e,t)=>(0,i.jsxs)("span",{className:"relative font-sans font-medium text-sm px-2 inline-flex items-center justify-center h-6 rounded-md mr-4",style:{backgroundImage:"url('/auras/orange-aura.png')",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:[(0,i.jsx)("span",{className:"absolute inset-0 bg-black opacity-40 rounded-md",style:{zIndex:1}}),(0,i.jsx)("span",{className:"relative",style:{zIndex:2},children:(0,j.Zr)(e)})]},"".concat(t,"_").concat(e))),(0,i.jsx)("span",{className:"font-sans font-normal text-sm mr-2 tracking-wide",children:(0,E.Yq)(new Date(a))})]}),(0,i.jsx)(I.Text,{sx:{"& a":{textDecoration:"underline"}},dangerouslySetInnerHTML:{__html:n?lS.xI.parse(n):""},className:"font-sans text-16px font-normal"}),o&&r&&(0,i.jsx)(lb.Box,{mt:4,children:(0,i.jsx)(lA.N,{textDecoration:"underline",href:o,fontFamily:"Neue Montreal",children:r})}),(0,i.jsx)(eL.Divider,{mt:8,mb:8})]},t)})})})]})]})});var lP=l(83310),l_=l.n(lP),lM=l(8845);let lT="changelog_last_viewed_at",lE=function(){let{data:e}=(0,lM.Hl)(),t=l_()("localStorage"),l=t&&localStorage.getItem(lT)||null,a=(0,h.useMemo)(()=>{var t;return null!==(t=null==e?void 0:e.allChangelogItems)&&void 0!==t?t:[]},[null==e?void 0:e.allChangelogItems]),i=(0,h.useMemo)(()=>l?a.filter(e=>new Date(e.datetime)>new Date(l)):a,[l,a]),n=(0,h.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;t&&localStorage.setItem(lT,e.toUTCString())},[t]),s=[a,i,n];return s.items=a,s.unviewedItems=i,s.updateLastViewed=n,s};var lL=l(26700);let lO=(0,m.default)(()=>l.e(1912).then(l.bind(l,61912)),{loadableGenerated:{webpack:()=>[61912]},ssr:!1}),lR=(0,F.A)("enabled:before:hover:bg-transparent before:hover:bg-transparent","hover:text-foreground-primary focus-visible:text-foreground-primary"),lD=(0,p.PA)(e=>{var t,l,a,n,s,o,r,d,c,u;let{session:p}=(0,P.gy)(),m=(0,x.usePathname)(),h=!!((null===(t=p.user)||void 0===t?void 0:t.display_name)&&(null===(l=p.user)||void 0===l?void 0:l.handle)&&(null===(a=p.user)||void 0===a?void 0:a.is_handle_updated));return(0,i.jsxs)(lF,{active:m==="/@".concat(null===(n=p.user)||void 0===n?void 0:n.handle),iconEnd:er.D3D,className:(0,F.A)("group block w-full py-0 px-0.5",{"text-foreground-secondary":m!=="/@".concat(null===(s=p.user)||void 0===s?void 0:s.handle),"text-foreground-primary":m==="/@".concat(null===(o=p.user)||void 0===o?void 0:o.handle)}),contentClassName:"justify-start",iconClassName:"w-2 h-2 text-foreground-inactive",children:[(0,i.jsx)("div",{className:"w-max shrink-0",children:(0,i.jsx)(lw,{className:(0,F.A)("before:absolute before:-inset-[4px] before:border-transparent before:rounded-full","before:border-2 before:border-transparent","before:transition-colors before:duration-75","group-hover:before:border-border-primary","group-focus-within:before:border-border-primary"),...e})}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col items-start justify-center gap-0.5 min-w-0",children:[(0,i.jsx)("p",{className:(0,F.A)("max-w-full","text-[14px] leading-[16px] font-medium text-left","group-hover:text-foreground-primary group-focus:text-foreground-primary",{"line-clamp-1":h,"line-clamp-2":!h}),children:(null===(r=p.user)||void 0===r?void 0:r.display_name)||((null===(d=p.user)||void 0===d?void 0:d.handle)?"@".concat(null===(c=p.user)||void 0===c?void 0:c.handle):"Anonymous")}),h&&(0,i.jsxs)("p",{className:(0,F.A)("max-w-full","text-[13px] leading-[16px] text-left line-clamp-1","text-foreground-inactive","group-hover:text-foreground-tertiary group-focus:text-foreground-tertiary"),children:["@",null===(u=p.user)||void 0===u?void 0:u.handle]})]})]})}),lF=e=>(0,i.jsx)(b.Ay,{variant:b.Ak.Tertiary,size:b.Mp.Small,shape:b.aH.Rounded,active:!1,...e,className:(0,B.QP)(lR,"w-full px-2 py-1","text-[16px] leading-[16px]",e.className),contentClassName:"justify-start",iconClassName:(0,B.QP)("w-[18px] h-[18px]",e.iconClassName)}),lB=(0,p.PA)(e=>{let{className:t,onOpenEditProfile:l,isOpenEditProfile:a,onCloseEditProfile:s,onOpenInviteFriend:r,onOpenFeedback:d,isInMobileSongPageV2Experiment:c,...u}=e,{library:p,session:m,notifications:f}=(0,P.gy)(),{isLoaded:g,isSignedIn:v}=(0,o.d)(),y=(0,K.ho)(),w=(0,x.usePathname)(),N=(0,h.useRef)(null),{t:k}=(0,lg.Bd)(),{isOpen:A,onOpen:S,onClose:I}=(0,n.useDisclosure)(),[_,T,L]=lE(),{isOpen:O,onOpen:R,onClose:D}=(0,n.useDisclosure)(),{data:z}=(0,lf.useQuery)({queryKey:["subscriptionInfo"],queryFn:m.loadSubscriptionInfo}),U=null==z?void 0:z.is_active,H=w.startsWith("/song/"),W=(0,h.useCallback)(e=>(0,i.jsx)(lD,{...e}),[]),V={[j.gd]:w,[j.f1]:(0,E.wu)(w)};return c&&H&&(V={...V,[j.f1]:j.AC.SONG_PAGE_V2}),(0,i.jsxs)("div",{className:(0,F.A)("min-w-40 h-full w-[200px]","max-md:hidden flex flex-col gap-4 overflow-y-auto","bg-background-primary text-foreground-primary","border-r border-border-secondary",t),...u,children:[(0,i.jsx)("div",{className:"flex flex-row justify-start p-4 pt-8",children:(0,i.jsx)(Z.A,{delay:15e3,className:"w-full h-auto p-2 max-w-[7rem]"})}),(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-center px-4 gap-1 min-h-14",children:g&&m.sessionIsLoaded&&(!v||m.user)?v?(0,i.jsx)(lN,{onOpenEditProfile:l,menuPlacement:"top-start",menuOffset:[-6,-46],avatarButtonClassName:"w-full",children:W}):(0,i.jsx)("div",{children:(0,i.jsx)(b.Ay,{variant:b.Ak.Primary,icon:lv.w77,onClick:()=>{(0,C.Ay)({actionName:"SignInButtonClicked"}),y.openSignUp({...(0,E.Of)(w,V)})},children:k("nav.signIn")})}):(0,i.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,i.jsx)(ly.sj,{className:"rounded-full w-9 h-9"}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(ly.sj,{className:"w-3/4"})})]})}),(0,i.jsxs)("div",{className:"flex flex-col px-4 gap-1",children:[(0,i.jsx)(lF,{icon:er.fAJ,active:(0,E.zo)("home",w),href:"/",onClick:()=>{(0,C.Ay)({actionName:"NavbarHomeButtonClicked"})},children:k("nav.home")}),(0,i.jsx)(lF,{icon:er.WSU,active:(0,E.zo)("create",w),href:"/create",onClick:e=>{(0,C.Ay)({actionName:"NavbarCreateButtonClicked"}),v||(y.openSignUp({...(0,E.Of)("/create",V)}),e.preventDefault()),p.clearFilters()},children:k("nav.create")}),(0,i.jsx)(lF,{icon:er.$nG,href:"/me",active:(0,E.zo)("library",w),"data-testid":"navbar-library-tab",onClick:e=>{(0,C.Ay)({actionName:"NavbarLibraryButtonClicked"}),v||(y.openSignUp({...(0,E.Of)("/me",V)}),e.preventDefault())},children:k("nav.library")}),(0,i.jsx)(lF,{icon:er.rb7,active:(0,E.zo)("explore",w),href:"https://suno.com/explore",onClick:()=>{(0,C.Ay)({actionName:"NavbarExploreButtonClicked"})},children:k("nav.explore")}),(0,i.jsx)(lF,{icon:er.WIv,href:"/search",active:(0,E.zo)("search",w),onClick:e=>{(0,C.Ay)({actionName:"NavbarSearchButtonClicked"}),v||(y.openSignUp({...(0,E.Of)("/search",V)}),e.preventDefault())},children:k("nav.search")}),v&&(0,i.jsxs)(es.Nh,{mediaQuery:"(min-width: ".concat(j.j3,"px)"),children:[(0,i.jsx)(lF,{icon:er.CfE,href:"/notifications",active:(0,E.zo)("notifications",w)||O,iconEnd:f.unreadCount>0?(0,i.jsx)(ea.A,{className:"animate-popIn",children:f.unreadCount}):void 0,onClick:e=>{if((0,E.zo)("notifications",w)){f.loadNotifications();return}!e.ctrlKey&&!e.metaKey&&(e.preventDefault(),O?(e.shiftKey||f.markAllAsRead(),D(),(0,C.Ay)({actionName:"NotificationListClosed",context:{unreadCount:f.unreadCount,isMobile:!1}})):(f.newNotificationSession(),f.loadNotifications(),R(),(0,C.Ay)({actionName:"NotificationListOpened",context:{unreadCount:f.unreadCount,isMobile:!1}})))},children:k("nav.notifications")}),(0,i.jsx)(lO,{isOpen:O,onClose:D})]})]}),(0,i.jsx)("div",{className:"flex-1"}),(0,i.jsxs)("div",{className:"flex flex-col px-4 gap-2",children:[v&&m.isCreditsLoaded?(0,i.jsx)(M.A,{ref:N,href:"/account",className:"block text-[14px] text-foreground-inactive whitespace-pre text-center",children:(0,i.jsx)(lg.x6,{t:k,i18nKey:"account.numCredits",values:{count:m.credits,formattedCount:m.credits.toLocaleString()},components:{span:(0,i.jsx)("span",{className:"text-foreground-secondary"})}})}):null,(0,i.jsx)(b.Ay,{variant:b.Ak.Standard,shape:b.aH.Pill,size:b.Mp.Small,className:"w-full",href:"/account",children:k(U?"nav.upgrade":"nav.upgrade_to_pro")})]}),(0,i.jsxs)("div",{className:"flex flex-col px-4 gap-1",children:[r?(0,tZ.ZL)(m)?(0,i.jsx)(lF,{icon:er.okO,onClick:e=>{e.preventDefault(),(0,C.Ay)({actionName:"NavbarInviteFriendsButtonClicked"}),r()},children:k("nav.inviteFriends")}):(0,i.jsx)(lF,{icon:er.okO,onClick:e=>{e.preventDefault(),(0,C.Ay)({actionName:"NavbarInviteAndEarnButtonClicked"}),r()},children:k("nav.inviteAndEarn")}):null,_.length>0&&(0,i.jsx)(lF,{icon:er.LEX,onClick:e=>{e.preventDefault(),(0,C.Ay)({actionName:"NavbarWhatsNewButtonClicked"}),S(),L()},iconEnd:T.length?(0,i.jsx)("div",{className:"bg-foreground-primary text-background-primary rounded-full px-1 py-1 text-xs font-bold font-sans min-w-[24px] text-center",children:T.length}):void 0,children:k("nav.whatsNew")}),(0,i.jsxs)(lh.bL,{children:[(0,i.jsx)(lh.l9,{children:(0,i.jsx)(lh.Mz,{children:(0,i.jsx)(lF,{icon:er.FHP,className:(0,B.QP)(lR,"p-1"),children:k("nav.moreFromSuno")})})}),(0,i.jsx)(lh.ZL,{children:(0,i.jsxs)(lh.UC,{side:"bottom",sideOffset:10,className:(0,F.A)("flex flex-col gap-1 justify-start items-stretch rounded-md border","py-1 z-10 min-w-[160px] overflow-clip","bg-background-secondary text-foreground-secondary border-border-secondary md:box-shadow","font-sans font-medium text-sm"),children:[(0,i.jsx)(M.A,{className:"block py-1 px-4 hover:bg-background-secondary hover:text-foreground-primary focus:text-foreground-primary focus:bg-background-secondary outline-0",href:"https://help.suno.com",children:k("nav.help")}),(0,i.jsx)(M.A,{className:"block py-1 px-4 hover:bg-background-secondary hover:text-foreground-primary focus:text-foreground-primary focus:bg-background-secondary outline-0",href:"https://suno.com/about",children:k("nav.about")}),(0,i.jsx)(M.A,{href:"https://suno.com/blog",className:"block py-1 px-4 hover:bg-background-secondary hover:text-foreground-primary focus:text-foreground-primary focus:bg-background-secondary outline-0",children:k("nav.blog")}),(0,i.jsx)(M.A,{className:"block py-1 px-4 hover:bg-background-secondary hover:text-foreground-primary focus:text-foreground-primary focus:bg-background-secondary outline-0",href:"https://jobs.ashbyhq.com/suno",children:k("nav.careers")}),m.user&&(0,i.jsx)("button",{autoFocus:!1,className:"block text-left py-1 px-4 hover:bg-background-secondary hover:text-foreground-primary outline-0",onClick:()=>{(0,C.Ay)({actionName:"NavbarFeedbackButtonClicked"}),d()},children:k("nav.feedback")})]})})]})]}),(0,i.jsx)("div",{className:"border-t border-border-secondary",children:(0,i.jsx)(ep,{className:"py-4",buttonVariant:b.Ak.Tertiary,buttonClassName:(0,B.QP)(lR,"p-1"),buttonIconClassName:"w-5 h-5 m-0"})}),(0,i.jsx)(en.f,{isOpen:a,onClose:s,"data-qaid":"modal-edit-profile-title"}),(0,i.jsx)(lI,{changelogItems:_||[],onClose:I,isOpen:A}),m.shouldShowCreateOnboardingStep("credits_tooltip")&&N.current?(0,i.jsx)(lL.P,{title:"You still have credits left",description:"Got more ideas? Use your credits to make another song!",positionRef:N,position:"top-right",offsetTop:-50,isCentered:!0,onDismiss:()=>{m.updateShownCreateOnboarding()}}):null]})});var lz=l(58191),lU=l(94228);let lH=(0,p.PA)(e=>{var t,l;let{isOpen:a,onClose:n}=e,{session:s}=(0,P.gy)(),o=!(null===(t=s.flags)||void 0===t?void 0:t.madlibs);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(tG.Drawer,{isOpen:a,placement:"bottom",onClose:n,trapFocus:!1,children:(0,i.jsxs)(tY.DrawerContent,{display:["flex","flex","none"],backgroundColor:"black",boxShadow:"0 0 10px 5px rgba(255, 255, 255, 0.08)",height:o||(null==s?void 0:null===(l=s.flags)||void 0===l?void 0:l.madlibs)?"100%":"60%",borderRadius:"40px 40px 0 0",sx:{transition:"height 0.3s ease-out",overflowY:o?"auto":"hidden"},children:[(0,i.jsxs)("div",{className:"flex justify-between items-center px-4 py-6",children:[(0,i.jsx)("span",{className:"text-center w-full font-sans font-normal text-secondary text-[16px]",children:"Create"}),(0,i.jsx)("div",{className:"absolute right-4",children:(0,i.jsx)(X.A,{onClick:n})})]}),(0,i.jsx)(Y.ModalBody,{sx:{overflowY:"auto"},children:(0,i.jsx)(lU.i,{selectedOption:"",onGenerate:()=>{},setMadlibsHandler:()=>{}})}),(0,i.jsx)(eO.ModalFooter,{children:(0,i.jsx)(lz.A,{madlibsHandler:null,isDescendantOfContestClip:!1,hasAcceptedTerms:!1,onOpenTimbalandTermsModal:()=>{},handleCreate:()=>{}})})]})})})});var lW=l(47752);let lV="sh-last-interaction",lG=e=>{let{content:t,success:l}=e;return(0,i.jsx)("div",{className:"".concat(void 0===l?"bg-primary text-vinylBlack-darker":l?"bg-green-700 text-white":"bg-red-700 text-white"," text-lg font-sans rounded-lg w-auto h-auto mr-4 p-4"),children:t})},lY=e=>{let{data:t,setData:l}=e;return(0,i.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2 text-sm lg:text-base text-neutral-300",children:[(0,i.jsx)("span",{children:"We love hearing from our users."}),(0,i.jsxs)("span",{children:["As a reminder, this is for feedback only. For support requests (e.g. urgent issues with your account or credits), please email"," ",(0,i.jsx)("a",{className:"text-primary underline hover:text-neutral-300",href:"mailto:support@suno.com",children:"support@suno.com"})]}),(0,i.jsx)("span",{children:"How would you rate your overall experience with Suno?"})]}),(0,i.jsx)("div",{className:"flex flex-row gap-4 w-full justify-between text-center",children:j.Ok.map(e=>(0,i.jsxs)("div",{onClick:()=>{l({...t,rating:e.value})},title:e.label,className:"w-full flex flex-col items-center gap-2 cursor-pointer",children:[(0,i.jsx)("div",{className:"w-8 h-8 cursor-pointer border border-neutral-300 ease-linear transition rounded-full ".concat(t.rating==e.value?"bg-neutral-300":"bg-transparent hover:bg-neutral-500")}),(0,i.jsx)("h3",{className:"text-xs lg:text-sm text-primary",children:e.label})]},e.value))})]})},lq=e=>{let{data:t,setData:l}=e;return(0,i.jsxs)("section",{className:"flex flex-col gap-4 text-sm lg:text-base text-neutral-300",children:[(0,i.jsx)("span",{children:"Please tell us more about why you gave that rating and what feedback you have below:"}),(0,i.jsx)("span",{className:"text-neutral-400 lg:text-base text-sm",children:"For any bugs, please include what device/browser you were using, and any details that can help us reproduce the bug on our side."}),(0,i.jsx)("textarea",{className:"relative w-full h-24 p-2 rounded-md lg:text-base text-sm border border-neutral-300 resize-none",value:t.feedback,onChange:e=>l({...t,feedback:e.target.value})})]})},lQ=(0,p.PA)(e=>{var t;let{isOpen:l,onClose:a}=e,{session:n,menus:s}=(0,P.gy)(),[o,r]=(0,h.useState)({rating:0,feedback:""}),[d,c]=(0,h.useState)(!1);(0,h.useEffect)(()=>{l||(r({rating:0,feedback:""}),c(!1))},[l]);let u=(0,h.useMemo)(()=>async()=>{var e,t;if(c(!0),!(null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.email))return(0,P.oR)({duration:3e3,isClosable:!0,position:"bottom",render:()=>(0,i.jsx)(lG,{success:!1,content:"You must be logged in to submit feedback"})}),c(!1);let l=await s.submitFeedback({...o,email:null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.email});a(),c(!1),(0,P.oR)({duration:3e3,isClosable:!0,position:"bottom",render:()=>(0,i.jsx)(lG,{success:!l.error,content:l.error?"Error: ".concat(l.error):"Feedback submitted successfully"})})},[o,null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.email,s,a]);return l?(0,i.jsxs)(eP.A,{title:"Feedback",onClose:a,wrapperClasses:"max-h-[400px] flex flex-col gap-4 overflow-y-auto",withHorizontalPadding:!0,children:[(0,i.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,i.jsx)(lY,{data:o,setData:r}),(0,i.jsx)(lq,{data:o,setData:r})]}),(0,i.jsx)(b.Ay,{disabled:d||0==o.rating||""==o.feedback,onClick:u,children:"Submit"})]}):null}),lK=e=>{var t,l,a;let{clips:n}=e,o=1===n.length?(null===(t=n[0])||void 0===t?void 0:t.title)||(null===(a=n[0])||void 0===a?void 0:null===(l=a.metadata)||void 0===l?void 0:l.tags):"".concat(n.length," clips");return(0,i.jsx)(lb.Box,{p:4,color:"white",bg:"red.400",borderRadius:"md",display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"475px",children:(0,i.jsxs)(s.Flex,{alignItems:"center",flex:"1",children:[(0,i.jsxs)(I.Text,{children:[(0,i.jsx)("b",{children:o})," ",1===n.length?"has":"have"," been removed from your account."]}),(0,i.jsx)(eW.Icon,{as:er.Srz,ml:2})]})})};var lJ=l(56692);let lX=()=>{let e=(0,x.usePathname)(),{navigation:t}=(0,P.gy)();(0,h.useEffect)(()=>{t.addToHistory(e)},[e])},lZ=()=>{let[e,t]=(0,h.useState)(null);return(0,h.useEffect)(()=>{t({userAgent:navigator.userAgent,isMac:/Mac/.test(navigator.userAgent)})},[]),e};var l$=l(19014);let l0=()=>{let{genForm:e,edit:t}=(0,P.gy)(),l=(0,h.useCallback)(e=>{(0,C.Ay)({actionName:"CancelConfirmLyricsReplacement",context:{actionIndex:t.actionIndex,editTool:e?"extend":"infill",editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||""}})},[t.editSessionId,t.editingClipId]),a=(0,h.useCallback)(()=>{(0,C.Ay)({actionName:"ConfirmLyricsReplacement",context:{finalLyrics:e.lyrics,editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||"",editTool:t.activeEditTool,actionIndex:t.actionIndex}})},[]),i=(0,h.useCallback)(()=>{(0,C.Ay)({actionName:"ConfirmLyricsReplacement",context:{lyrics:e.lyrics,continuedAlignedPrompt:e.continuedAlignedPrompt||"",editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||"",editTool:t.activeEditTool,actionIndex:t.actionIndex}})},[e.lyrics,e.continuedAlignedPrompt,t.editSessionId,t.editingClipId,t.actionIndex,t.activeEditTool]),n=(0,h.useCallback)(()=>{(0,C.Ay)({actionName:"SubmitEditModeGenerateAction",context:{editTool:t.activeEditTool,editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||"",actionIndex:t.actionIndex}})},[t.editSessionId,t.editingClipId,t.actionIndex,t.activeEditTool]),s=(0,h.useCallback)(()=>{(0,C.Ay)({actionName:"StartLyricsReplacement",context:{editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||"",editTool:t.activeEditTool,actionIndex:t.actionIndex}})},[t.editSessionId,t.editingClipId,t.actionIndex,t.activeEditTool]),o=(0,h.useCallback)(()=>{(0,C.Ay)({actionName:"ExitEditMode",context:{editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||"",actionIndex:t.actionIndex}})},[t.editSessionId,t.editingClipId,t.actionIndex]),r=(0,h.useCallback)(e=>{(0,C.Ay)({actionName:"SelectEditModeTool",context:{editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||"",editTool:null==e?void 0:e.id,actionIndex:t.actionIndex}})},[t.editSessionId,t.editingClipId,t.actionIndex]),d=(0,h.useCallback)(e=>{(0,C.Ay)({actionName:"SelectGeneratedClipForConcat",context:{selectedClipId:e.id,editTool:t.activeEditTool,editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||"",actionIndex:t.actionIndex}})},[t.activeEditTool,t.editSessionId,t.editingClipId,t.actionIndex]),c=(0,h.useCallback)(()=>{(0,C.Ay)({actionName:"ResetWaveformSelection",context:{editSessionId:t.editSessionId||"",editTool:t.activeEditTool,editingClipId:t.editingClipId||"",actionIndex:t.actionIndex}})},[t.editSessionId,t.activeEditTool,t.editingClipId,t.actionIndex]),u=(0,h.useCallback)((e,l,a,i)=>{var n,s;(0,C.Ay)({actionName:"SetClipMetadataEditMode",context:{fields:[...i!==e.image_url?["imageUrl"]:[],...l!==e.title?["title"]:[],...a!==((null===(n=e.metadata)||void 0===n?void 0:n.prompt)||"")?["lyrics"]:[]],values:[...i!==e.image_url?[i]:[],...l!==e.title?[l]:[],...a!==((null===(s=e.metadata)||void 0===s?void 0:s.prompt)||"")?[a]:[]],editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||"",actionIndex:t.actionIndex}})},[t.editSessionId,t.editingClipId,t.actionIndex]);return{logCancelConfirmLyricsReplacement:l,logConfirmLyricsReplacementForInfill:a,logConfirmLyricsReplacementForExtend:i,logStartLyricsReplacement:s,logSubmitEditModeGenerateAction:n,logExitEditMode:o,logSelectEditModeTool:r,logSelectGeneratedClipForConcat:d,logResetWaveformSelection:c,logSetClipMetadata:u,logStartEditModeSession:(0,h.useCallback)(()=>{(0,C.Ay)({actionName:"StartEditModeSession",context:{editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||"",actionIndex:t.actionIndex,editTool:t.activeEditTool}})},[t.editSessionId,t.editingClipId,t.actionIndex,t.activeEditTool]),logEndEditModeSession:(0,h.useCallback)(()=>{(0,C.Ay)({actionName:"EndEditModeSession",context:{editSessionId:t.editSessionId||"",editingClipId:t.editingClipId||"",actionIndex:t.actionIndex}})},[t.editSessionId,t.editingClipId,t.actionIndex])}},l1=(0,m.default)(()=>Promise.all([l.e(1155),l.e(3783),l.e(4732),l.e(408)]).then(l.bind(l,80408)),{loadableGenerated:{webpack:()=>[80408]},ssr:!1}),l3=(0,h.createContext)({}),l6=(0,h.createContext)({}),l5=(0,h.createContext)({}),l2=(0,p.PA)(e=>{var t,l,a,p,m,v,y,b,w,k,A,I,M,T,L,D,F,B,z;let{children:U,supportedBrowser:W,supportedCountriesForMobileBanner:V,country:G,hideSidebars:Y,hideMobileNav:q}=e,{isSignedIn:Q}=(0,o.d)(),K=(0,u.useStatsigClient)(),J=!!K.client.getContext().stableID,{updateUserAsync:X}=(0,u.useStatsigUser)(),{session:Z,clips:$,playbar:ee,edit:et,genForm:el,iosInvite:ea,library:ei,playlist:en,menus:eo,project:er,trash:ec}=(0,P.gy)(),[eu,ep]=(0,h.useState)(null),[em,ex]=(0,h.useState)(!0),eh=(0,x.usePathname)(),ef=(0,x.useParams)(),eg=(0,x.useSearchParams)();(0,lJ.A)("revenue-layer",j.az,"download-upgrade"),lX();let[ey,eC]=(0,h.useState)(null),[ej,ew]=(0,h.useState)(null),[eA,eS]=(0,h.useState)(!1),eI=(0,h.useRef)(null),eP=(0,ev.RH)(),eT=(0,h.useRef)(null),eE=(0,h.useRef)(null),eL=(0,h.useRef)(null),eO=!(0,ty.Yo)(),eR=lZ();!function(){let e=(0,x.usePathname)(),t=(0,x.useParams)(),l=(0,h.useRef)({isInitialized:!1});(0,h.useEffect)(()=>{let a=!l.current.isInitialized,i=localStorage.getItem(lV),n=tC.QL.some(t=>e.startsWith(t)),s=!i||Date.now()-parseInt(i)>864e5;if(n&&a&&s){let l=(0,tC.Nj)(e),a=t.slug;(0,lW.vD)(null,l,a)}l.current.isInitialized=!0},[]);let{playbar:a}=(0,P.gy)();(0,h.useEffect)(()=>{l_()("localStorage")&&localStorage.setItem(lV,Date.now().toString())},[e,a.isPlaying,a.clip])}();let eF=(0,g.DE)(),eW=(0,ty.Nz)(),eG=(0,ty.gs)(),eY=!Y,eq="boolean"==typeof Y?eF&&!Y:eG,eQ=!q,eJ=eh.startsWith("/create"),eZ=eh.startsWith("/ios-invite/"),e$=eh.startsWith("/edit/")&&(null===(t=Z.flags)||void 0===t?void 0:t["edit-2025"]),e0=eh.startsWith("/studio/");eZ?(eY=!1,eq=!1,eQ=!1):eJ?eq=eW:e$?eq=!1:e0&&(eY=!1,eq=!1,eQ=!1);let{logStartEditModeSession:e1,logEndEditModeSession:e3}=l0();Z.captchaVerification=(0,h.useCallback)(async()=>eT.current&&(await eT.current.execute({async:!0})).response||null,[]);let{onOpen:e6}=(0,n.useDisclosure)(),e5=(0,n.useDisclosure)(),e2=(0,n.useDisclosure)(),e4=(0,n.useDisclosure)(),e9=(0,n.useDisclosure)(),tl=(0,n.useDisclosure)(),tn=(0,n.useDisclosure)(),ts=(0,n.useDisclosure)(),to=(0,n.useDisclosure)(),tr=(0,n.useDisclosure)(),td=(0,n.useDisclosure)(),tc=(0,n.useDisclosure)(),tu=(0,n.useDisclosure)(),tp=(0,n.useDisclosure)(),tm=(0,n.useDisclosure)(),th=(0,n.useDisclosure)(),tv=(0,n.useDisclosure)(),tb=(0,n.useDisclosure)(),tj=(0,n.useDisclosure)(),tw=()=>({[tF.H.ADD_TO_PLAYLIST]:e5,[tF.H.ADD_TO_PROJECT]:e2,[tF.H.CLIP_FEEDBACK]:e4,[tF.H.CREATE_PERSONA]:e9,[tF.H.DELETE_CLIP]:tl,[tF.H.DOWNLOAD_FILE]:tn,[tF.H.DOWNLOAD_SHARE_ASSET]:ts,[tF.H.FLAG_CLIP]:to,[tF.H.SHARE_CLIP]:tr,[tF.H.UPSAMPLE_MODEL_SELECT]:td,[tF.H.UPDATE_CLIP_METADATA]:tc,[tF.H.PERSONA_SUBSCRIBE]:tu,[tF.H.FEEDBACK_FORM]:tp,[tF.H.CONFIRM_PIN_REPLACEMENT]:tm,[tF.H.GENERIC_CONFIRM]:th,[tF.H.SONG_QUEUE]:tv,[tF.H.PUBLISH_SONG]:tb,[tF.H.UNPUBLISH_SONG]:tj}),{onOpen:tN,isOpen:tk,onClose:tS}=(0,n.useDisclosure)(),{onOpen:t_,isOpen:tM,onClose:tT}=(0,n.useDisclosure)(),{isOpen:tE,onOpen:tL,onClose:tO}=(0,n.useDisclosure)(),{isOpen:tR,onOpen:tD,onClose:tB}=(0,n.useDisclosure)(),tz=(0,h.useCallback)(()=>{ed.LS.logWebPageEvent({userId:Z.userId||"",eventType:ed.Y_.CLOSE,element:"side_nav_bar",secondaryElement:"invite_friends_modal",entityId:Z.user.handle,entityType:"inviter_handle",pageUrl:window.location.pathname}),tB()},[Z,tB]);(0,h.useEffect)(()=>{if(Z.notifyOutOfCredits){if(Z.notifyOutOfCredits=!1,(0,tZ.FJ)(Z)){tD();return}t_()}},[Z,Z.notifyOutOfCredits,t_,tD]),(0,h.useEffect)(()=>{Z.notifyOutOfConcurrency&&(Z.notifyOutOfConcurrency=!1,tL())},[Z.notifyOutOfConcurrency,tL]);let[tU,tH]=(0,h.useState)(!1),[tW,tG]=(0,h.useState)(!1),[tY,tq]=(0,h.useState)(!1),[tQ,tK]=(0,h.useState)(!1),tJ=eo.selectedClipIds.map(e=>$.clipById[e]);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e5,t=!(0,ty.Yo)(),{notifications:l}=(0,P.gy)(),a=(0,h.useRef)(!1),i=(0,h.useRef)(0);(0,h.useEffect)(()=>{let t;if(!(e<0))return a.current||(i(),a.current=!0),()=>{clearTimeout(t)};async function i(){await l.loadNotifications(),e&&(t=setTimeout(i,e))}},[l,e]),(0,h.useEffect)(()=>{0===i.current&&l.unreadCount&&(0,C.Ay)({actionName:"NotificationAlert",context:{unreadCount:l.unreadCount,isMobile:t}}),i.current=l.unreadCount},[l.unreadCount,t])}((null===(l=Z.flags)||void 0===l?void 0:l["web-notifications-feed"])?void 0:-1);let tX=()=>{tq(!0)},t$=()=>{tq(!1)},t0=async()=>{tJ&&(tK(!0),await $.deleteClips(tJ.map(e=>e.id))&&(tJ.forEach(e=>{ec.removeFromTrash(e.id)}),(0,P.oR)({duration:4e3,isClosable:!0,position:"bottom",render:()=>(0,i.jsx)(lK,{clips:tJ||[]})})),tK(!1),eo.closeModal(tF.H.DELETE_CLIP))},[,t1]=(0,f.lT)(["irclickid"]),t3=(0,x.useSearchParams)().get("irclickid"),t6=(0,x.useSearchParams)().get("open_feedback");(0,h.useEffect)(()=>{t3&&t1("irclickid",t3,{path:"/",expires:new Date(Date.now()+2592e6)}),null===t6||tp.isOpen||(Q?tp.onOpen():(0,P.oR)({duration:3e3,isClosable:!0,position:"bottom",render:()=>(0,i.jsx)(lG,{success:!1,content:"You must be logged in to submit feedback"})}))},[]),(0,h.useEffect)(()=>{eE.current&&ee.setPlaybarElement(eE.current)},[eE.current]),(0,h.useEffect)(()=>{eh!==eI.current&&(eI.current=eh,eh.startsWith("/edit/")?(et.initializeSession(),e1()):et.isEditSessionActive&&(et.isEditSessionActive=!1,et.incrementActionIndex(),et.resetEditState(),el.resetInfill(),eC(null),e3()))},[eh]),(0,h.useEffect)(()=>{G&&Z.setCountry(G)},[Z,G]),(0,h.useEffect)(()=>{var e;(null==K?void 0:null===(e=K.client)||void 0===e?void 0:e.loadingStatus)==="Ready"&&!1===ed.LS.initialized&&ed.LS.init(eP)},[eP,K,null==K?void 0:null===(a=K.client)||void 0===a?void 0:a.loadingStatus]),(0,h.useEffect)(()=>{let e=(0,E.IP)();if(Z.userId){var t,l;(null===(t=document)||void 0===t?void 0:t.cookie)&&(document.cookie="".concat(j._7,"=true; path=/; max-age=31536000")),X({userID:Z.userId,email:null==Z?void 0:null===(l=Z.user)||void 0===l?void 0:l.username,...G?{country:G}:{},customIDs:{"Anonymous ID":e||""}})}else X({customIDs:{"Anonymous ID":e||""},...G?{country:G}:{}})},[Z.userId,null==Z?void 0:null===(p=Z.user)||void 0===p?void 0:p.username,G]),(0,h.useEffect)(()=>{J&&(K.checkGate("web-clips-query-read")?($.writeClipToQuery=!0,$.readClipFromQuery=!0):K.checkGate("web-clips-query-write")&&($.writeClipToQuery=!0))},[J,K,$]),(0,h.useEffect)(()=>{eo.setAppModalDisclosures(tw())},[]),(0,h.useEffect)(()=>{ee.clip&&$.clipById[ee.clip.id]&&ep($.clipById[ee.clip.id])},[ee.clip]),(0,h.useEffect)(()=>{Q&&ea.getPromoCodeUrl()},[ea,Q]);let t5=eF&&!!window.AF_SMART_SCRIPT&&!!window.AF_SMART_SCRIPT.generateOneLinkURL,t2=(0,h.useMemo)(()=>t5&&eh.startsWith("/song/")?S({contentType:"song",contentId:ef.slug}):"",[t5,eh,ef.slug]);(0,h.useEffect)(()=>{if(!t5&&(0,E.un)()){let e=setTimeout(()=>{ex(!1)},500);return()=>clearTimeout(e)}ex(!1)},[t5,t2]),(0,h.useEffect)(()=>{if(tC.QL.some(e=>eh.startsWith(e))){let e=(0,tC.Nj)(eh),t=ef.slug;if(e&&t){let l=eg.get("sh");l&&"song"===e&&eP.POST("/api/gen/{gen_id}/increment_action_count/",{params:{path:{gen_id:t}},body:{action:"visit",share_id:l}})}}},[eh,ef.slug,eg]);let t4=(0,d.zy)(),t8=!(null==t4?void 0:null===(m=t4.hostname)||void 0===m?void 0:m.includes("localhost")),t7=(0,h.useCallback)(()=>{var e;ed.LS.logWebPageEvent({userId:null!==(e=null==Z?void 0:Z.userId)&&void 0!==e?e:"",element:"hcaptcha_challenge",eventType:ed.Y_.VIEW,pageUrl:eh})},[eh,null==Z?void 0:Z.userId]),t9=(0,h.useCallback)(()=>{var e;ed.LS.logWebPageEvent({userId:null!==(e=null==Z?void 0:Z.userId)&&void 0!==e?e:"",element:"hcaptcha_challenge_closed",eventType:ed.Y_.VIEW,pageUrl:eh})},[null==Z?void 0:Z.userId]),le=(0,h.useCallback)(e=>{c.Cp(e)},[]),lt=(0,h.useCallback)(()=>{var e;ed.LS.logWebPageEvent({userId:null!==(e=null==Z?void 0:Z.userId)&&void 0!==e?e:"",element:"hcaptcha_challenge_expired",eventType:ed.Y_.VIEW,pageUrl:eh})},[null==Z?void 0:Z.userId]),ll=(0,h.useMemo)(()=>({isExtendModeOn:tU,setExtendModeOn:tH,isReusePromptOn:tW,setReusePromptOn:tG}),[tU,tW]),la=(0,h.useMemo)(()=>({setPreviewClip:ep,setPreviewInfillRange:eC,setClipForSongRecs:ew,setAllowFlushToTop:eS,previewClip:eu}),[eu]),li=(0,h.useCallback)(()=>{var e;let t=1e4;(null===(e=Z.flags)||void 0===e?void 0:e["polling-v2"])?$.runningRequests.size?(t=$.uncreditedRequests.size?2e3:5e3,$.pollRunningGens(t)):t=1e3:$.runningRequests.size&&$.pollRunningGens(t),eL.current=setTimeout(li,t)},[Z.flags,eL.current,$.runningRequests,$.uncreditedRequests]);(0,h.useEffect)(()=>{var e;let t=null;return(null===(e=Z.flags)||void 0===e?void 0:e.websockets)&&(t=setInterval(async()=>{$.checkTimedOutGens()},5e3)),$.pinnedClipsInitialized||($.fetchPinnedClips(),$.pinnedClipsInitialized=!0),li(),()=>{t&&clearInterval(t),eL.current&&clearTimeout(eL.current)}},[Z.flags]);let{isOpen:ln,onOpen:ls,onClose:lo}=(0,n.useDisclosure)();(0,h.useEffect)(()=>{var e;Z.sessionIsLoaded&&Q&&(null===(e=Z.flags)||void 0===e?void 0:e["remix-perm"])&&!Z.hasSetRemixPerm&&setTimeout(()=>{ls()},500)},[Z.sessionIsLoaded,Q,null===(v=Z.flags)||void 0===v?void 0:v["remix-perm"],Z.hasSetRemixPerm]);let lr=eh.startsWith(j.bw.MY_RADIO)||eh.startsWith(j.bw.STREAM_RADIO),ld=null===(w=document)||void 0===w?void 0:null===(b=w.cookie)||void 0===b?void 0:null===(y=b.split(";"))||void 0===y?void 0:y.some(e=>e.trim().startsWith("".concat(j._7,"="))),lc=(0,E.rr)()&&!Q&&eh.startsWith("/song/")&&!ld,lu=ta();return(0,i.jsx)(l3.Provider,{value:eR,children:(0,i.jsxs)("div",{className:"@container bg-background-primary w-full h-full flex flex-col",children:[(0,i.jsxs)(s.Flex,{flex:"1",width:"100%",flexDirection:["column","column","row"],overflowY:"auto",children:[eY?eO?null:(0,i.jsx)(lB,{onOpenEditProfile:tN,isOpenEditProfile:tk,onCloseEditProfile:tS,onOpenInviteFriend:tD,onOpenFeedback:tp.onOpen}):null,(0,i.jsxs)(s.Flex,{flex:"1",flexDirection:"column",overflowY:"auto",position:"relative",children:[(0,i.jsxs)(es.hM,{children:[!em&&(t2&&(0,E.un)()&&!lc?(0,i.jsx)(N,{oneLinkUrl:t2}):!(0,E.un)()&&(0,i.jsx)(O,{supportedBrowser:W,country:G,supportedCountries:V})),eQ&&(0,i.jsx)(ek,{onOpen:e6,enableMobileSongPageV2:lc})]}),(0,i.jsx)(l6.Provider,{value:ll,children:(0,i.jsx)("div",{className:"relative flex flex-1 overflow-y-hidden overflow-x-hidden w-full ".concat(eA?"-mt-16":"mt-0"," md:mt-0"),children:(0,i.jsx)(l5.Provider,{value:la,children:(0,i.jsxs)(H,{visible:!eO&&eq&&(!!eu||!!ej||lr),className:"flex-1 w-full overflow-hidden z-10",barClassName:"bg-background-secondary",children:[(0,i.jsxs)("div",{className:"flex lg:min-w-[570px] flex-1 bg-background-primary w-full max-w-full",style:{position:"relative"},id:"main-container",children:[(0,i.jsx)(i.Fragment,{children:U}),(0,i.jsx)(tV,{ref:eE,hidden:!ee.clip||eh.startsWith("/edit/")||eh.startsWith("/studio/")||lc,disableControls:lr})]}),eq?(0,i.jsx)(l1,{previewClip:eu,setPreviewClip:ep,previewInfillRange:ey,clipForSongRecs:ej}):null]})})})})]})]}),Q?(0,i.jsx)(es.hM,{children:(null===(k=Z.flags)||void 0===k?void 0:k["create-form"])&&Z.isStaff?(0,i.jsx)(lH,{isExtendModeOn:tU,setExtendModeOn:tH,isReusePromptOn:tW,setReusePromptOn:tG,isOpen:tY,onClose:t$}):(0,i.jsx)(lx,{isExtendModeOn:tU,setExtendModeOn:tH,isReusePromptOn:tW,setReusePromptOn:tG,isOpen:tY,onClose:t$,onOpen:tX})}):null,(0,i.jsx)(es.hM,{children:eQ&&(0,i.jsx)(eN,{onOpen:e6,isOpenEditProfile:tk,onCloseEditProfile:tS,onOpenEditProfile:tN,onOpenCreate:tX,onOpenFeedback:tp.onOpen,hideMobileTopBar:lc,enableMobileSongPageV2:lc})}),tM&&(0,i.jsx)(te,{onClose:tT}),tE&&(0,i.jsx)(eB,{onClose:tO}),tR&&(0,i.jsx)(eb.A,{isOpen:!0,onClose:tz,userHandle:null===(A=Z.user)||void 0===A?void 0:A.handle}),(0,i.jsx)(_,{}),(t8||l$.zi)&&(0,i.jsx)("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:(0,i.jsx)(r.A,{sitekey:"d65453de-3f1a-4aac-9366-a0f06e52b2ce",onOpen:t7,onClose:t9,onError:le,onChalExpired:lt,size:"invisible",ref:eT,sentry:!1})}),(0,i.jsx)(e_,{isOpen:e5.isOpen,onClose:()=>eo.closeModal(tF.H.ADD_TO_PLAYLIST),onPlaylistClick:(e,t)=>{en.addClipsToPlaylist(e,t)}}),(0,i.jsx)(eM,{isOpen:e2.isOpen,onClose:()=>eo.closeModal(tF.H.ADD_TO_PROJECT),isInCreate:!!(null==eh?void 0:eh.startsWith(j.bw.CREATE)),onProjectClick:(e,t)=>{let l=!!(null==eh?void 0:eh.startsWith(j.bw.CREATE)),a=l?er.currentProjectId:j.Sk;a===j.Sk&&l?er.addClipsToProject(e,t,!1):er.moveClipsToProject(e,t,a,l),eo.setSelected(new Set([]))}}),(0,i.jsx)(e8,{isOpen:tc.isOpen,onClose:()=>eo.closeModal(tF.H.UPDATE_CLIP_METADATA),onSubmit:async(e,t,l,a,i,n)=>{var s,o,r;if(null===(s=ei.activeClip)||void 0===s?void 0:s.id){let s=await $.setMetadata({clipId:null===(o=ei.activeClip)||void 0===o?void 0:o.id,title:e,imageUrl:t,lyrics:l,caption:a,videoCoverUploadId:i,removeVideoCover:n});s&&s.success&&void 0!==a&&(0,C.Ay)({actionName:"CaptionAddedInMetadataModal",context:{clipId:null===(r=ei.activeClip)||void 0===r?void 0:r.id,caption:a||"",page:eh}})}}}),K.checkGate("web-publish-2025")&&(0,i.jsx)(ti.Provider,{value:lu,children:(0,i.jsx)(tf,{isOpen:tb.isOpen,onClose:()=>eo.closeModal(tF.H.PUBLISH_SONG)})}),(0,i.jsx)(lQ,{isOpen:tp.isOpen,onClose:tp.onClose}),(0,i.jsx)(eV,{isOpen:tl.isOpen,onClose:()=>eo.closeModal(tF.H.DELETE_CLIP),onConfirm:t0,clipTitle:tJ&&1===tJ.length?(null===(I=tJ[0])||void 0===I?void 0:I.title)||(null===(T=tJ[0])||void 0===T?void 0:null===(M=T.metadata)||void 0===M?void 0:M.tags)||"":"".concat((tJ||[]).length," Clips"),isLoading:tQ,headerText:tJ&&tJ.length>1?"Are you sure you want to delete these songs?":"Are you sure you want to delete this song?"}),(0,i.jsx)(e7,{isOpen:to.isOpen,onClose:()=>eo.closeModal(tF.H.FLAG_CLIP),clipId:(null===(L=eo.currentClip)||void 0===L?void 0:L.id)||"",clipTitle:(null===(D=eo.currentClip)||void 0===D?void 0:D.title)||"Untitled"}),(0,i.jsx)(eD,{isOpen:e4.isOpen,onClose:()=>eo.closeModal(tF.H.CLIP_FEEDBACK),clip:eo.currentClip||void 0,onFeedbackSubmit:()=>{var e;$.setFeedbackGivenForClip(null===(e=eo.currentClip)||void 0===e?void 0:e.id,!0),eo.closeModal(tF.H.CLIP_FEEDBACK)},onFeedbackRemoved:()=>{var e;$.setFeedbackGivenForClip(null===(e=eo.currentClip)||void 0===e?void 0:e.id,!1),eo.closeModal(tF.H.CLIP_FEEDBACK)}}),(0,i.jsx)(tA,{isOpen:tr.isOpen,onClose:()=>eo.closeModal(tF.H.SHARE_CLIP),song:eo.currentClip||void 0,type:"song"}),(0,i.jsx)(eX,{isOpen:tn.isOpen,onClose:()=>{eo.closeModal(tF.H.DOWNLOAD_FILE),$.clearWavDownload()}}),(0,i.jsx)(eK,{isOpen:ts.isOpen,onClose:()=>{eo.closeModal(tF.H.DOWNLOAD_SHARE_ASSET),$.clearShareAsset()}}),e9.isOpen?(0,i.jsx)(eH.A,{isOpen:e9.isOpen,onClose:()=>eo.closeModal(tF.H.CREATE_PERSONA),initialClip:eo.currentClip||void 0}):null,tu.isOpen&&(0,i.jsx)(tt.A,{isOpen:tu.isOpen,onClose:()=>eo.closeModal(tF.H.PERSONA_SUBSCRIBE)}),null,(0,i.jsx)(ez,{isOpen:tm.isOpen,onClose:()=>eo.closeModal(tF.H.CONFIRM_PIN_REPLACEMENT),onConfirm:()=>{if(eo.pendingPinClipId){let e=$.isClipPinned(eo.pendingPinClipId);$.pinClipToProfile(eo.pendingPinClipId),(0,C.Ay)({actionName:"SongMenuPinToProfileClicked",context:{clipId:eo.pendingPinClipId,isPinned:!e}}),(0,P.oR)({title:"This song has been ".concat(e?"unpinned from Profile":"pinned to Profile","."),status:"warning",duration:2e3,isClosable:!0}),eo.pendingPinClipId=null}eo.closeModal(tF.H.CONFIRM_PIN_REPLACEMENT)},title:null===(F=$.pinnedClipsModalOptions)||void 0===F?void 0:F.title,message:null===(B=$.pinnedClipsModalOptions)||void 0===B?void 0:B.message}),(0,i.jsx)(tI,{isOpen:tv.isOpen,onClose:()=>eo.closeModal(tF.H.SONG_QUEUE)}),eo.onConfirmFn?(0,i.jsx)(eU,{isOpen:th.isOpen,onClose:()=>{eo.closeModal(tF.H.GENERIC_CONFIRM),eo.onCloseFn&&eo.onCloseFn()},onConfirm:eo.onConfirmFn,onAction:eo.onActionFn,title:eo.confirmationTitle,renderMessage:eo.confirmationRenderMessage||void 0,confirmButtonText:eo.confirmButtonText,actionButtonText:eo.actionButtonText}):null,(0,i.jsx)(R.A,{session:Z}),Z.sessionIsLoaded&&(null===(z=Z.flags)||void 0===z?void 0:z["remix-perm"])&&!Z.hasSetRemixPerm&&(0,i.jsx)(tg,{isOpen:ln,onClose:lo}),K.checkGate("web-publish-2025")&&(0,i.jsx)(tP,{isOpen:tj.isOpen,onClose:()=>eo.closeModal(tF.H.UNPUBLISH_SONG),onConfirm:()=>{var e;(null===(e=ei.activeClip)||void 0===e?void 0:e.id)&&((0,C.Ay)({actionName:"UnpublishSongModalUnpublishClicked",principalObjectType:"song",principalObjectValue:ei.activeClip.id}),$.setClipVisibility(ei.activeClip.id,!1),(0,tx.L)({clip:ei.activeClip,session:Z}))}})]})})})},48704:(e,t,l)=>{l.d(t,{A:()=>F});var a=l(95155),i=l(52017),n=l(60078),s=l(274),o=l(1996),r=l(831),d=l(5520),c=l(23375),u=l(16299),p=l(27104),m=l(64430),x=l(58670),h=l(5643),f=l(46391),g=l(52596),v=l(63438),y=l(35695),b=l(12115),C=l(39688),j=l(77119),w=l(74955),N=l(59041),k=l(95625),A=l(86147),S=l(50649),I=l(78294),P=l(2918),_=l(7132),M=l(88008),T=l(99428),E=l(4869),L=l(61932),O=l(24423),R=l(44710);let D=e=>{let{children:t,...l}=e;return(0,a.jsx)(k.A,{...l})},F=(0,v.PA)(e=>{var t,l,v,F,B;let{clip:z,onRemoveFromPlaylist:U,showStats:H=!1,trendingMode:W=!1,isSongPage:V=!1,onPinClipToProject:G,mini:Y=!1,enablePin:q=!1,buttonClassName:Q,buttonVariant:K=w.Ak.Tertiary,buttonSize:J=w.Mp.Mini,buttonShape:X=w.aH.Rounded,buttonActive:Z,buttonAspectSquare:$,buttonIcon:ee=S.FHP,sectionName:et}=e,{playbar:el,clips:ea,session:ei,menus:en,project:es}=(0,j.gy)(),eo=(0,y.usePathname)(),{isOpen:er,onOpen:ed,onClose:ec}=(0,i.useDisclosure)(),[eu,ep]=(0,b.useState)(!1),em=(0,b.useRef)(null),ex=e=>!isNaN(parseInt(e.charAt(e.length-1),10));(0,b.useEffect)(()=>{var e,t;if(null===(e=ei.flags)||void 0===e?void 0:e["thumbs-exp"])return(null===(t=el.clip)||void 0===t?void 0:t.id)!==z.id||!el.isPlaying||(0,I.cW)(z)||(0,I.i8)(z)?(ep(!1),em.current&&clearTimeout(em.current)):(ep(!0),em.current&&clearTimeout(em.current),em.current=setTimeout(()=>{ep(!1)},1e4)),()=>{em.current&&clearTimeout(em.current)}},[null===(t=el.clip)||void 0===t?void 0:t.id,el.isPlaying,(0,I.cW)(z),(0,I.i8)(z),z.id]);let eh=(0,b.useRef)(void 0);(0,b.useEffect)(()=>()=>{clearTimeout(eh.current)},[]);let ef=(0,f.useStatsigClient)();return(0,a.jsxs)(n.Stack,{spacing:0,direction:"row",alignItems:"center",children:[(0,a.jsxs)(n.Stack,{direction:"row",spacing:0,alignItems:"center",children:[(null===(l=ei.user)||void 0===l?void 0:l.id)===z.user_id&&!z.is_trashed&&ef.checkGate("web-publish-2025")?(0,a.jsx)(A.I,{clip:z}):null,W&&!V?(0,a.jsx)(k.A,{variant:w.Ak.Tertiary,size:w.Mp.Mini,icon:S.udU,onClick:()=>el.playClip(z),"aria-label":"Play Count",active:!1,children:(0,L.Nr)(z.play_count||0)}):null,(null==ei?void 0:null===(v=ei.flags)||void 0===v?void 0:v["clip-feedback"])&&z.user_id===ei.userId&&!Y&&!V&&(0,a.jsx)(s.Tooltip,{label:ea.feedbackGivenByClipId[z.id]?"Feedback given, thank you!":"Song feedback",size:"sm",background:_.TJ,backdropFilter:"blur(40px)",rounded:"md",color:"#ffffff",padding:"10px",children:(0,a.jsx)(k.A,{variant:w.Ak.Tertiary,size:w.Mp.Mini,icon:S.hjC,iconClassName:"w-8 h-8",onClick:()=>{en.setCurrentClip(z),en.openModal(P.H.CLIP_FEEDBACK)},"aria-label":"Feedback Button",active:!!ea.feedbackGivenByClipId[z.id]})}),!V&&!Y&&(0,a.jsx)(k.A,{variant:w.Ak.Tertiary,size:w.Mp.Mini,icon:S.Gek,iconClassName:(0,g.A)({"animate-pulse":!ex(null!==(F=ei.userId)&&void 0!==F?F:"")&&eu}),onClick:()=>{let e=!(0,I.cW)(z);ea.likeClip(z.id,e),M.LS.logAudioActionEvent(!0,e?T.a2.likeSong:T.a2.undoLikeSong,z,ei,eo)},"aria-label":"Playbar: Like",active:(0,I.cW)(z),children:H?(0,L.Nr)(z.upvote_count||0):null}),W||V||Y?null:(0,a.jsx)(k.A,{variant:w.Ak.Tertiary,size:w.Mp.Mini,icon:S.d2e,iconClassName:(0,g.A)({"animate-pulse":!ex(null!==(B=ei.userId)&&void 0!==B?B:"")&&eu}),onClick:()=>{let e=!(0,I.i8)(z);ea.dislikeClip(z.id,e),M.LS.logAudioActionEvent(!0,e?T.a2.dislikeSong:T.a2.undoDislikeSong,z,ei,eo)},"aria-label":"Playbar: Dislike",active:(0,I.i8)(z)})]}),(0,E.m2)(ei)&&q&&(0,a.jsx)(k.A,{variant:w.Ak.Tertiary,size:w.Mp.Mini,icon:(0,a.jsx)(S.cFy,{width:20,height:20}),onClick:()=>{G&&G()},"aria-label":"Pin",active:es.isPinned(z.id)}),!V&&!Y&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(s.Tooltip,{label:"Copy Song Link",size:"sm",background:_.TJ,backdropFilter:"blur(40px)",rounded:"md",color:"#ffffff",padding:"10px",children:(0,a.jsx)(k.A,{variant:w.Ak.Tertiary,size:w.Mp.Mini,icon:S.liv,onClick:async()=>await (0,O.Kj)(ea.apiClient,z),"aria-label":"Share",active:!1})})}),(0,a.jsxs)(o.Menu,{children:[(0,a.jsx)(r.MenuButton,{padding:0,"aria-label":"More Actions",as:D,onClick:()=>{en.setSelected(new Set([z.id])),en.setCurrentClip(z),clearTimeout(eh.current),eh.current=setTimeout(()=>{ed()},100)},className:(0,C.QP)("outline-none",Q),variant:K,size:J,shape:X,active:Z,aspectSquare:$,icon:ee,iconClassName:(0,g.A)("flex justify-center items-center",{"mx-0":w.aH.Pill===X})}),(0,a.jsxs)(d.Modal,{isOpen:er,onClose:ec,size:"full",isCentered:!0,children:[(0,a.jsx)(c.ModalOverlay,{sx:{bgColor:"#0E0808"}}),(0,a.jsxs)(u.ModalContent,{maxH:"calc(100vh - 40px)",overflowY:"auto",sx:{bgColor:"#0E0808"},children:[(0,a.jsx)(p.ModalHeader,{sx:{bgColor:"#0E0808",marginTop:"20px"},children:z.is_trashed?(0,a.jsx)(x.Text,{fontSize:"xl",fontFamily:"Editorial New",fontWeight:300,children:(0,L.p8)(z)}):(0,a.jsx)(m.Link,{href:"/song/".concat(z.id),style:{textDecoration:"underline"},children:(0,a.jsx)(x.Text,{fontSize:"xl",fontFamily:"Editorial New",fontWeight:300,children:(0,L.p8)(z)})})}),(0,a.jsx)("div",{className:"absolute right-2 top-8",children:(0,a.jsx)(N.A,{onClick:ec})}),(0,a.jsx)(h.ModalBody,{sx:{overflowY:"auto",padding:"20px",bgColor:"#0E0808"},children:(0,a.jsx)(R.A,{clip:z,isMobile:!0,onRemoveFromPlaylist:U,onCloseMenuModal:ec,sectionName:et})})]})]})]})]})})},49746:(e,t,l)=>{l.d(t,{A:()=>G});var a=l(95155),i=l(12115),n=l(74955),s=l(59041),o=l(4837),r=l(52596),d=l(50649),c=l(94212);let u=e=>e.replace(/\.[^/.]+$/,"");var p=l(77119),m=l(47606),x=l(39688);let h=e=>(0,a.jsx)("div",{...e,className:(0,x.QP)("flex flex-col items-stretch gap-4 ",e.className)}),f=e=>(0,a.jsx)("h3",{...e,className:(0,x.QP)("font-serif text-3xl px-8",e.className)}),g=e=>(0,a.jsx)("div",{...e,className:(0,x.QP)("px-8 h-40",e.className)}),v=e=>(0,a.jsx)("div",{...e,className:(0,x.QP)("px-8 h-10 flex items-center justify-between",e.className)}),y=()=>{let{setClientSelectedFile:e,setAudioBuffer:t,setIsRecordingMode:l,setTitle:s,minSeconds:o,maxSeconds:x}=(0,i.useContext)(m.Ay),y=(0,i.useRef)(null),b=(0,i.useCallback)(async l=>{let a=Array.from(l.target.files||[]);if(0===a.length){e(null);return}let i=a[0],n=await i.arrayBuffer(),o=await c.A.decodeAudioData(n);e(i),t(o),s(u(i.name)),y.current&&(y.current.value="")},[t]),C=(0,i.useCallback)(e=>{(0,p.oR)({title:e,status:"error",duration:2e3,isClosable:!0})},[]),[j,w]=(0,i.useState)(!1),N=(0,i.useCallback)(e=>{e.preventDefault(),w(!0)},[]),k=(0,i.useCallback)(()=>w(!1),[]),A=(0,i.useCallback)(async e=>{if(e.preventDefault(),w(!1),!e.dataTransfer)return;let t=Array.from(e.dataTransfer.files);if(t.length>1)return C("Please upload one file at a time.");if(!t[0].type.startsWith("audio/"))return C("Please upload audio files only.");try{b({target:{files:t}})}catch(e){return C(e)}},[b,C]);return(0,i.useEffect)(()=>(window.addEventListener("dragover",N),window.addEventListener("dragleave",k),window.addEventListener("drop",A),()=>{window.removeEventListener("dragover",N),window.removeEventListener("dragleave",k),window.removeEventListener("drop",A)}),[N,k,A]),(0,a.jsxs)(h,{children:[(0,a.jsx)(f,{children:"Upload Audio"}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:(0,r.A)("text-center flex flex-col align-center justify-center gap-4 h-full border-2 border-dashed border-quaternary bg-tertiary rounded-lg",{"border-white":j}),children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{children:["Drag and drop audio file here, or"," ",(0,a.jsx)("span",{onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.click()},className:"underline cursor-pointer font-bold",children:"select a file"})]})}),(0,a.jsx)("input",{type:"file",ref:y,onChange:b,accept:"audio/mp3, audio/wav, audio/aac, audio/aiff, audio/m4a, audio/ogg, audio/opus, audio/wma, audio/flac, audio/alac",className:"hidden"}),(0,a.jsx)("div",{className:"text-center4",children:"- or -"}),(0,a.jsx)(n.Ay,{className:"mx-auto w-auto",variant:n.Ak.Primary,icon:(0,a.jsx)(d.cNw,{}),onClick:()=>l(!0),children:"Record Audio"})]})}),(0,a.jsx)(v,{children:(0,a.jsxs)("p",{className:"font-sans text-sm text-center w-full",children:["Next, well help you trim your audio to between ",o," and"," ",x," seconds long.",(0,a.jsx)("br",{}),"Audio with vocals detected will be made private-only."]})})]})};var b=l(33636),C=l(70024),j=l(13847),w=l(97942),N=l(7132);let k=()=>{let{library:e}=(0,p.gy)(),{title:t,setTitle:l,imageUrl:s,generatingImage:o,setImageUrl:r,finishedUploadId:c,handleFinish:u,handleGoBack:x,submittedFinal:y}=(0,i.useContext)(m.Ay),[k,A]=(0,i.useState)(!1),[S,I]=(0,i.useState)(""),[P,_]=(0,i.useState)(!1),[M,T]=(0,i.useState)(""),E=(0,i.useCallback)(async()=>{try{A(!0);let{data:t}=await e.apiClient.POST("/api/gen/prompt_image/",{body:{prompt:M}});t&&I(t.image_url)}catch(e){console.error(e)}finally{A(!1)}},[M,e.apiClient]),L=(0,i.useCallback)(()=>{_(!0),I("")},[]),O=(0,i.useCallback)(()=>{_(!1),I(""),A(!1)},[]),R=(0,i.useCallback)(()=>{_(!1),r(S),I(""),A(!1)},[S,r]);return(0,a.jsxs)(h,{children:[(0,a.jsx)(f,{children:"Finalize"}),(0,a.jsx)(g,{children:P?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-center justify-start gap-4",children:[(0,a.jsx)(j.A,{onImageChanged:e=>I(e||""),width:160,height:160,className:"w-[160px]"}),!S&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)(b.Input,{className:"w-full text-left",placeholder:"Prompt for AI-Generated Image",value:M,maxLength:N.nv,onChange:e=>T(e.currentTarget.value)}),(0,a.jsx)(n.Ay,{onClick:E,className:"whitespace-nowrap mt-2 w-aut",disabled:k,icon:k?(0,a.jsx)(w.A,{}):void 0,children:"Generate Image"})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{children:"Title"}),(0,a.jsx)(b.Input,{className:"mb-4",value:t,maxLength:N.m1,onChange:e=>l(e.currentTarget.value)}),(0,a.jsxs)("div",{className:"flex items-center justify-start gap-4",children:[(0,a.jsx)("div",{className:"w-[80px] h-[80px] rounded-md border border-quaternary relative animated-wave-background",children:(0,a.jsx)(C.Image,{alt:"",src:s||void 0,w:"80px"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between flex-1",children:[o?(0,a.jsx)("div",{className:"italic opacity-50",children:"Generating image..."}):(0,a.jsx)("div",{}),(0,a.jsx)(n.Ay,{onClick:L,icon:(0,a.jsx)(d.hpF,{}),children:"Add New Image"})]})]})]})}),(0,a.jsxs)(v,{children:[P&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Ay,{onClick:O,variant:n.Ak.Secondary,children:"Keep original image"}),(0,a.jsx)(n.Ay,{onClick:R,variant:n.Ak.Primary,disabled:!S,children:"Confirm Image"})]}),!P&&!c&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 w-full",children:[(0,a.jsx)(w.A,{})," Uploading..."]})}),!P&&c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Ay,{variant:n.Ak.Secondary,onClick:x,children:"Back"}),(0,a.jsx)(n.Ay,{variant:y?n.Ak.Tertiary:n.Ak.Primary,onClick:u,disabled:y,icon:y?(0,a.jsx)(w.A,{}):null,children:"Confirm & Save"})]})]})]})};var A=l(29658),S=l(14087);let I=e=>{let t=new AudioBuffer({sampleRate:e.sampleRate,length:e.length,numberOfChannels:e.numberOfChannels}),l=0;for(let t=0;t<e.numberOfChannels;t++){let a=e.getChannelData(t);for(let e=0;e<a.length;e++)l=Math.max(l,Math.abs(a[e]))}for(let a=0;a<e.numberOfChannels;a++){let i=e.getChannelData(a),n=t.getChannelData(a);for(let e=0;e<i.length;e++)n[e]=i[e]/l}return t};var P=l(61932),_=l(35162),M=l(66358),T=function(e){return e.Ready="Ready",e.Preparing="Preparing",e.Recording="Recording",e}({});let E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4*c.A.sampleRate,t=(0,i.useMemo)(()=>new Float32Array(e),[]),[a,n]=(0,i.useState)("Ready"),[s,o]=(0,i.useState)(null),r=(0,i.useRef)(1/0),d=(0,i.useRef)(()=>null),u=(0,i.useCallback)(()=>Math.max(0,Date.now()-r.current),[]),p=(0,i.useRef)(null),m="Ready"===a,x=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(m){n("Preparing"),o(null);try{let i=await new Promise((t,l)=>navigator.mediaDevices.getUserMedia({audio:{deviceId:e,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,...a,latency:0,sampleRate:c.A.sampleRate},video:!1}).then(e=>{t(e)}).catch(e=>{l(e)})),s=c.A.createMediaStreamSource(i);p.current||(await c.A.audioWorklet.addModule(new l.U(l(12010))),p.current=new window.AudioWorkletNode(c.A,"waveformGetterWorklet",{outputChannelCount:[2],numberOfInputs:1}));let o=p.current,u=new MediaRecorder(i),m=!1,x=!1;s.connect(o),o.port.onmessage=e=>{m||x||(m=!0),"waveform"===e.data.type&&(x||"inactive"!==u.state||(u.start(),x=!0),t.set(t.subarray(e.data.waveform.length)),t.set(e.data.waveform,t.length-e.data.waveform.length))};let h=[],f=!1;u.ondataavailable=e=>{f||(f=!0),h.push(e.data)};let g=()=>{},v=new Promise(e=>{g=e});u.onstop=async()=>{let e=await (0,_.A)(await new Blob(h).arrayBuffer());g(e)},r.current=Date.now(),n("Recording"),d.current=()=>(s.disconnect(),o.disconnect(),i.getAudioTracks().forEach(e=>e.stop()),u.stop(),v)}catch(e){d.current=()=>null,n("Ready"),console.error(e)}}},[m,t]),h=(0,i.useCallback)(async()=>{n("Ready");let e=await d.current();return o(e),e},[]);return(0,M.A)(h),{startRecording:x,stopRecording:h,recordedBuffer:s,visualizedWindow:t,stage:a,getCurrentDuration:u}},L=new Map,O=e=>{let{ctx:t,channelData:l,topPadding:a=0,inverse:i=!1,normalize:n=!0,enableCache:s=!0}=e,o=t.canvas,r=(o.height-a)/2,d=[],c=[],u=L.get(l);if(!u||!s){let e=1;if(n){let t=0;for(let e=0;e<l.length;e++)t=Math.max(t,Math.abs(l[e]));e=t?1/t:0}let t=[],a=[];for(let i=0;i<o.width;i+=2){let n=Math.floor(Math.max(0,i/(o.width-1)*l.length-128)),s=Math.floor(Math.min((i+2)/(o.width-1)*l.length+128,l.length-1)),r=-1/0,d=1/0;for(let e=n;e<=s;e++)r=Math.max(r,l[e]),d=Math.min(d,l[e]);t.push(r*e),a.push(d*e)}d=t,c=a,s&&L.set(l,{tops:t,bottoms:a})}u&&(d=u.tops,c=u.bottoms),i?(t.moveTo(0,0),t.lineTo(0,-(d[0]*r)+r+a)):t.moveTo(0,-(d[0]*r)+r+a);let p=0;for(let e=2;e<o.width;e+=2){let l=d[e/2],i=(l+d[Math.max(0,(e-2)/2)]+d[Math.min(d.length-1,(e+2)/2)])/3;t.lineTo(e,-(i*r)+r+a-1),p=e}if(t.lineTo(o.width,r+a),i){t.lineTo(o.width,0),t.lineTo(0,0),t.moveTo(0,o.height),t.lineTo(0,-(c[0]*r)+r+a);for(let e=2;e<o.width;e++){let l=c[e/2],i=(l+c[Math.max(0,(e-2)/2)]+c[Math.min(c.length-1,(e+2)/2)])/3;t.lineTo(e,-(i*r)+r+a+1),p=e}t.lineTo(o.width,r+a),t.lineTo(o.width,o.height),t.lineTo(0,o.height)}else{t.lineTo(o.width,0);for(let e=p;e>=0;e--){let l=c[e/2],i=(l+c[Math.max(0,(e-2)/2)]+c[Math.min(c.length-1,(e+2)/2)])/3;t.lineTo(e,-(i*r)+r+a+1)}t.lineTo(0,d[0]*r+r+a)}},R=()=>{let{setAudioBuffer:e,setTitle:t,handleGoBack:l}=(0,i.useContext)(m.Ay),{startRecording:s,stopRecording:o,stage:r,visualizedWindow:d,getCurrentDuration:c}=E(),u=(0,i.useRef)(!1);(0,i.useEffect)(()=>{u.current||(u.current=!0,s())},[s]);let p=(0,i.useRef)(null);(0,S.N)((0,i.useCallback)(()=>{let e=p.current;if(!e)return;let t=e.getContext("2d");if(!t)return;let l=e.getBoundingClientRect();e.width=l.width*window.devicePixelRatio,e.height=l.height*window.devicePixelRatio;let a=c(),i=Math.min(d.length,128*Math.ceil(e.width));t.clearRect(0,0,e.width,e.height),t.fillStyle="#222",t.beginPath(),O({ctx:t,channelData:d.subarray(d.length-i),topPadding:0,inverse:!0,normalize:!1,enableCache:!1}),t.fill(),t.font="".concat(12*window.devicePixelRatio,"px sans-serif"),t.fillStyle="white",t.fillText(a>0&&(0,P.N8)(a/1e3)||"",24,42)},[d]));let x=(0,i.useCallback)(async()=>{let l=await o();l&&(e(I(l)),t("".concat(l.duration.toFixed(1),"s Recording (").concat((0,A.A)(new Date,"MMM d @ h:mm a"),")")))},[o,e,t]);return(0,a.jsxs)(h,{children:[(0,a.jsx)(f,{children:"Recording"}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"relative w-full h-full rounded-lg",children:[r===T.Ready&&(0,a.jsx)("div",{className:"w-full h-full absolute z-[2] flex items-center justify-center text-gray-600 bg-black bg-opacity-40 animate-fadeIn",children:"Ready to start recording"}),(0,a.jsx)("canvas",{ref:p,className:"w-full h-full bg-white"})]})}),(0,a.jsxs)(v,{className:"justify-center gap-2",children:[(0,a.jsx)(n.Ay,{variant:n.Ak.Secondary,onClick:l,children:"Go Back"}),(0,a.jsx)(n.Ay,{variant:n.Ak.Primary,onClick:x,children:"Finish Recording"})]})]})};var D=l(83310),F=l.n(D);let B=()=>{let{setConfirmedTOS:e}=(0,i.useContext)(m.Ay);return(0,a.jsxs)(h,{children:[(0,a.jsx)(f,{children:"Upload Audio"}),(0,a.jsx)(g,{className:"h-auto",children:(0,a.jsx)("p",{children:"I certify that I own or exclusively control all rights in any content I will upload using this Suno feature. I understand that I am not allowed to upload content if I do not own or exclusively control the rights to it, and that if I do so in spite of this prohibition, I will (among other problems) be breaching a contract with Suno and I may be subject to various other forms of legal liability as well. By clicking this box, I acknowledge and agree to the foregoing."})}),(0,a.jsx)(v,{children:(0,a.jsx)(n.Ay,{onClick:()=>{e(!0),F()("localStorage")&&localStorage.setItem(N.G_,Date.now().toString())},variant:n.Ak.Primary,children:"Agree to Terms"})})]})};var z=l(94575),U=l(66121);(0,i.createContext)(void 0);let H=e=>{let{audioBuffer:t,maxLengthSeconds:l,minLengthSeconds:a,trimStart:i,trimEnd:n,maintainEnd:s=!1}=e,o=Math.min(l,Math.max(a,n-i)),r=new AudioBuffer({sampleRate:t.sampleRate,length:o*t.sampleRate,numberOfChannels:t.numberOfChannels}),[d,c]=s?[Math.max(i,n-o),n]:[i,Math.min(n,i+o)],u=d*t.sampleRate,p=c*t.sampleRate;for(let e=0;e<r.numberOfChannels;e++)r.copyToChannel(t.getChannelData(e).subarray(u,p),e,s?(o-(c-d))*t.sampleRate:0);return r},W=e=>{let{audioBufferDuration:t,trimRangePreviewRef:l,trimRange:n,setTrimRange:s,onSetEndTime:o,maxSeconds:r}=e,c=(0,i.useRef)(null),u=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.current[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.current[1],i=c.current;i&&(i.style.setProperty("left","".concat(e/t*100,"%")),i.style.setProperty("width","".concat((a-e)/t*100,"%")),l.current=[e,a],null==o||o(a))},[o,t,l]);(0,i.useEffect)(()=>{u(n[0],n[1])},[n,u]);let p=(0,i.useCallback)(()=>{s(l.current)},[s,l]),m=(0,i.useCallback)((e,a)=>{let[i,s]=n;if(s+a-(i+e)>r+1e-7||s+a<i+e||i+e>s+a)return;let o=Math.max(0,s+a-r,Math.min(s+a,i+e)),d=Math.min(t,o+r,Math.max(o,s+a));l.current=[o,d],u()},[t,n,l,u]),x=(0,i.useCallback)(e=>{var l;let a=null===(l=c.current)||void 0===l?void 0:l.parentElement;return a?e/a.getBoundingClientRect().width*t:0},[t]),h=(0,z.A)((0,i.useCallback)(()=>({onMouseMove:e=>{let{deltaXFromStart:t}=e,l=x(t);m(l,l)},onMouseUp:p}),[p,x,m])),f=(0,z.A)((0,i.useCallback)(()=>({onMouseMove:e=>{let{deltaXFromStart:t}=e;return m(x(t),0)},onMouseUp:p}),[p,m,x])),g=(0,z.A)((0,i.useCallback)(()=>({onMouseMove:e=>{let{deltaXFromStart:t}=e;return m(0,x(t))},onMouseUp:p}),[p,m,x]));return(0,a.jsxs)("div",{className:"absolute top-0 bottom-0 pointer-events-none",ref:c,children:[(0,a.jsx)("div",{ref:h,className:"absolute left-0 right-0 h-5 bg-white bg-opacity-30 cursor-grab active:cursor-grabbing text-white flex items-center justify-center pointer-events-auto",children:(0,a.jsx)(d._Vv,{})}),(0,a.jsx)("div",{className:"absolute left-0 h-full w-[1px] bg-white pointer-events-auto",children:(0,a.jsx)("div",{ref:f,className:"absolute left-[-8px] h-full w-[16px] cursor-ew-resize"})}),(0,a.jsx)("div",{className:"absolute right-0 h-full w-[1px] bg-white pointer-events-auto",children:(0,a.jsx)("div",{ref:g,className:"absolute left-[-8px] h-full w-[16px] cursor-ew-resize"})})]})},V=()=>{var e,t;let{audioBuffer:l,trimRange:s,setTrimRange:o,setTrimmedFile:u,handleGoBack:x,minSeconds:y,maxSeconds:b,clientSelectedFile:C,title:j}=(0,i.useContext)(m.Ay),{playing:w,load:k,play:A,stop:I,seek:P,getCurrentTime:_,setEndTime:T}=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,l]=(0,i.useState)(.8),[a,n]=(0,i.useState)(null),[s,o]=(0,i.useState)(0),[r,d]=(0,i.useState)(!1),[u,p]=(0,i.useState)(!1),m=(0,i.useRef)(0),x=(0,i.useRef)(t);(0,i.useEffect)(()=>{x.current=t},[t]);let h=(0,i.useRef)(0),f=(0,i.useRef)(0),g=(0,i.useRef)(0),v=(0,i.useRef)(null),y=(0,i.useRef)(!1),b=(0,i.useRef)(null),C=(0,i.useRef)(null),j=(0,i.useRef)(null),w=(0,i.useRef)(null),N=(0,i.useCallback)(()=>{if(!b.current||!e)return null;let t=b.current.frequencyBinCount,l=j.current||new Uint8Array(t);return j.current=l,b.current.getByteFrequencyData(l),l},[e]),k=(0,i.useCallback)(()=>{if(!y.current)return g.current;let e=Date.now();return h.current+(e-f.current)/1e3},[]),A=(0,i.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.current,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(w.current&&clearTimeout(w.current),!a){console.error("Tried to play audio without loading a buffer first.");return}let i=c.A.createBufferSource();i.buffer=a,v.current&&v.current();let n=C.current||c.A.createGain();if(C.current=n,n.gain.value=u?0:x.current,e){let e=b.current||c.A.createAnalyser();e.smoothingTimeConstant=.85,b.current=e,i.connect(e)}i.connect(n),n.connect(c.A.destination),i.start(0,t),d(!0),y.current=!0,f.current=Date.now(),h.current=t,w.current=setTimeout(()=>{var e;d(!1),y.current=!1,null===(e=v.current)||void 0===e||e.call(v)},1e3*(Math.min(a.duration,l)-t)),g.current=t,h.current=t,f.current=Date.now(),"running"!==c.A.state&&c.A.resume(),v.current=()=>{i.stop(),i.disconnect(),v.current=null}},[a,u,e]),S=(0,i.useCallback)(e=>{if(e<=k()){var t;d(!1),y.current=!1,null===(t=v.current)||void 0===t||t.call(v);return}w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{var e;d(!1),y.current=!1,null===(e=v.current)||void 0===e||e.call(v)},1e3*(e-k()))},[k,A,r]),I=(0,i.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];m.current=e,g.current=e,(t||!y.current)&&(h.current=e,f.current=Date.now()),t&&y.current&&A(e)},[A]),P=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?g.current=0:g.current=k(),v.current&&v.current(),e&&(m.current=0),y.current=!1,d(!1)},[k]),_=(0,i.useCallback)(e=>{o(e.duration),n(e)},[]),T=(0,i.useCallback)((e,t)=>{t&&l(e),C.current&&(C.current.gain.value=e)},[]);return(0,i.useEffect)(()=>{u?T(0,!1):T(t,!1)},[u,t,T]),(0,M.A)(P),{load:_,duration:s,playing:r,seek:I,play:A,stop:P,setEndTime:S,getCurrentTime:k,getSpectrum:N,volume:t,setVolume:T,muted:u,setMuted:p}}(),E=(0,i.useCallback)(()=>{w?(I(),P(s[0])):A(void 0,s[1])},[A,I,w,s]);(0,i.useEffect)(()=>{l&&k(l)},[l,k]);let L=(0,i.useRef)(null),R=(0,i.useRef)(s),D=(0,i.useMemo)(()=>null==l?void 0:l.getChannelData(0),[l]);(0,S.N)((0,i.useCallback)(()=>{if(!l||!D)return;let e=L.current;if(!e)return;let t=e.getContext("2d");if(!t)return;let a=e.getBoundingClientRect();e.width=a.width*window.devicePixelRatio,e.height=a.height*window.devicePixelRatio,t.clearRect(0,0,e.width,e.height);let[i,n]=R.current,s=e.width,o=e.height,r=i/l.duration*s,d=n/l.duration*s;t.fillStyle="#222",t.fillRect(0,0,r,o),t.fillRect(d,0,s,o),t.strokeStyle="#666",t.lineWidth=2*window.devicePixelRatio,t.save(),t.beginPath(),t.rect(0,0,r,o),t.rect(d,0,s,o),t.clip(),t.beginPath(),O({ctx:t,channelData:D,topPadding:20*window.devicePixelRatio}),t.stroke(),t.restore(),t.beginPath(),O({ctx:t,channelData:D,topPadding:20*window.devicePixelRatio,inverse:!0}),t.fill(),t.fillStyle="#00000099",t.fillRect(0,0,r,o),t.fillRect(d,0,s,o)},[l,D,R])),(0,i.useEffect)(()=>{R.current=s},[s]);let F=(0,i.useRef)(null);(0,S.N)((0,i.useCallback)(()=>{if(!l)return;let e=F.current;e&&(e.style.left="".concat(_()/l.duration*100,"%"))},[l,_]));let B=(0,i.useMemo)(()=>0===s[0]&&s[1]===(null==l?void 0:l.duration),[s,l]),V=(0,i.useCallback)(async()=>{if(l){if(C&&B)u(C);else{let e=await (0,U.A)(H({audioBuffer:l,minLengthSeconds:y+.5,maxLengthSeconds:b,trimStart:s[0],trimEnd:s[1],maintainEnd:!0})),t="Uploaded Audio.wav";C?t=C.name:j&&(t="".concat(j,".wav")),u(new File([e],t,{type:"audio/wav"}))}}},[l,y,b,s,u,B]),G=(null===(t=(0,p.gy)().session)||void 0===t?void 0:null===(e=t.roles)||void 0===e?void 0:e.pro)||!1,Y=((null==l?void 0:l.duration)||0)>b,q=(0,i.useCallback)(e=>{let t=L.current;return t&&l?e/t.getBoundingClientRect().width*l.duration:0},[null==l?void 0:l.duration]),Q=(0,i.useCallback)(e=>{if(!L.current)return;let t=e-L.current.getBoundingClientRect().left;P(Math.max(s[0],Math.min(s[1],q(t))))},[P,s,q]),K=(0,z.A)((0,i.useCallback)(e=>{let{clientX:t}=e;return w&&I(),Q(t),{onMouseMove:e=>{let{clientX:t}=e;Q(t)},onMouseUp:()=>{w&&A()}}},[Q,w,A,I]));return(0,a.jsxs)(h,{children:[(0,a.jsx)(f,{children:"Trim Audio"}),(0,a.jsx)(g,{className:"relative",children:(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsx)("canvas",{ref:L,className:"w-full h-full bg-white"}),(0,a.jsx)("div",{className:(0,r.A)("absolute top-0 bottom-0 w-[1px] bg-white pointer-events-none",{"opacity-0":!l}),ref:F}),(0,a.jsx)("div",{className:"absolute inset-0 top-[20px]",ref:K}),(null==l?void 0:l.duration)&&(0,a.jsx)(W,{audioBufferDuration:l.duration,trimRange:s,setTrimRange:o,trimRangePreviewRef:R,onSetEndTime:T,maxSeconds:b})]})}),(0,a.jsxs)(v,{className:(0,r.A)("justify-center gap-2 relative",{"-mt-1":Y}),children:[(0,a.jsx)(n.Ay,{variant:n.Ak.Secondary,icon:w?(0,a.jsx)(d.E$n,{className:"w-4 h-4"}):(0,a.jsx)(d.udU,{className:"w-4 h-4"}),onClick:()=>E(),className:"w-12 h-12 rounded-full"}),(0,a.jsx)(n.Ay,{variant:n.Ak.Primary,onClick:V,className:"w-[185px]",children:B?"Save without trimming":"Save trimmed audio"}),(0,a.jsx)(n.Ay,{variant:n.Ak.Secondary,icon:(0,a.jsx)(d.USm,{className:"w-8 h-8"}),className:"w-12 h-12 rounded-full",onClick:x}),Y&&(0,a.jsxs)("div",{className:"absolute -bottom-[26px] text-sm",children:["Trim up to ",b," seconds of audio.",!G&&b<N.fx&&" (Upgrade to Pro for ".concat(N.fx,"s uploads.)")]})]})]})},G=()=>{let{uiStage:e,isConfirmingClose:t,cancelClose:l,attemptClose:r,hasVocalsDetected:d,hasShownVocalsAlert:c,setHasShownVocalsAlert:u}=(0,i.useContext)(m.Ay),[p,x]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{d&&!c&&x(!0)},[d,c]),(0,a.jsxs)("div",{className:"py-8 relative",children:[(0,a.jsx)("div",{className:"absolute top-1 right-1 m-6 z-10",children:(0,a.jsx)(s.A,{onClick:r})}),p&&(0,a.jsxs)(o.A,{title:"Vocals Detected",onClose:()=>{x(!1),u(!0)},width:400,disableOutsideClick:!0,children:[(0,a.jsx)("div",{className:"text-center mb-4",children:"We've detected vocals in this audio, so you won't be able to create public songs with it. This audio will be link only."}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(n.Ay,{variant:n.Ak.Primary,size:n.Mp.Small,onClick:()=>{x(!1),u(!0)},children:"Ok"})})]}),t&&(0,a.jsxs)("div",{className:"absolute z-20 inset-0 flex flex-col items-center justify-center bg-black gap-4",children:[(0,a.jsx)("h4",{children:"Are you sure you want to cancel?"}),(0,a.jsx)("p",{children:"You will lose any unsaved changes."}),(0,a.jsxs)(v,{className:"gap-2",children:[(0,a.jsx)(n.Ay,{variant:n.Ak.Secondary,onClick:l,children:"Never mind, continue"}),(0,a.jsx)(n.Ay,{variant:n.Ak.Primary,onClick:r,children:"Im sure, cancel"})]})]}),e===m.ZW.TermsOfService&&(0,a.jsx)(B,{}),e===m.ZW.ChooseUploadMethod&&(0,a.jsx)(y,{}),e===m.ZW.Recording&&(0,a.jsx)(R,{}),e===m.ZW.Trim&&(0,a.jsx)(V,{}),e===m.ZW.Finalize&&(0,a.jsx)(k,{})]})}},50244:(e,t,l)=>{l.d(t,{A:()=>j});var a=l(95155),i=l(5520),n=l(23375),s=l(16299),o=l(27104),r=l(59108),d=l(58670),c=l(19782),u=l(5643),p=l(64430),m=l(19460),x=l(58195),h=l(45640),f=l(786),g=l(75983),v=l(12115),y=l(33881),b=l(56108),C=l(7132);let j=e=>{var t,l;let{isOpen:j,onClose:w,buttonRef:N,topMargin:k=0}=e,A=!(0,b.Yo)(),S=(0,v.useRef)(null);return((0,v.useEffect)(()=>{let e=e=>{let t=e.target;S.current&&!S.current.contains(t)&&w()};return j?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[j,w]),A)?(0,a.jsxs)(i.Modal,{isOpen:j,onClose:w,isCentered:!0,children:[(0,a.jsx)(n.ModalOverlay,{}),(0,a.jsxs)(s.ModalContent,{sx:{...C.O$},children:[(0,a.jsx)(o.ModalHeader,{children:(0,a.jsxs)(r.Flex,{alignItems:"center",direction:"row",children:[(0,a.jsx)(d.Text,{mr:2,children:"You're one step closer"})," ",(0,a.jsx)(y.EG0,{})]})}),(0,a.jsx)(c.ModalCloseButton,{}),(0,a.jsxs)(u.ModalBody,{fontSize:"sm",mb:4,children:["You must be a Pro or Premier subscriber to upload your own audio. Subscribe"," ",(0,a.jsx)(p.Link,{href:"/account",textDecoration:"underline",children:"here"}),"."]})]})]}):(0,a.jsx)(m.Popover,{isOpen:j,onClose:w,placement:"bottom",children:(0,a.jsxs)(x.PopoverContent,{ref:S,background:C.TJ,fontSize:"sm",backdropFilter:"blur(40px)",rounded:"md",display:j?"block":"none",color:"#ffffff",p:"10px",width:"310px",left:"".concat((null==N?void 0:null===(t=N.current)||void 0===t?void 0:t.getBoundingClientRect().left)-310,"px"),top:"".concat((null==N?void 0:null===(l=N.current)||void 0===l?void 0:l.getBoundingClientRect().top)-60+k,"px"),children:[(0,a.jsx)(h.PopoverArrow,{}),(0,a.jsx)(f.PopoverCloseButton,{}),(0,a.jsxs)(g.PopoverBody,{children:["You must be a Pro or Premier subscriber to upload your own audio. Subscribe"," ",(0,a.jsx)(p.Link,{href:"/account",textDecoration:"underline",children:"here"})]})]})})}},53012:(e,t,l)=>{l.d(t,{Q:()=>n});var a=l(95155),i=l(80377);let n=e=>{let{isTooltipEnabled:t,label:l,children:n}=e;return t?(0,a.jsx)(i.m,{label:l,children:(0,a.jsx)("div",{className:"cursor-pointer",children:n})}):n}},53485:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(4009),i=l(66766);let n=(0,a.chakra)(i.default,{shouldForwardProp:e=>["width","height","src","alt"].includes(e)})},56594:(e,t,l)=>{l.d(t,{Y:()=>i});var a=l(77119);function i(e,t){var l;let{playbar:i,queue:n}=(0,a.gy)(),s=(null===(l=i.clip)||void 0===l?void 0:l.id)===e,o=t?n.contextType===t.contextType&&n.contextId===t.contextId:void 0,r=(null==o||o)&&s;return{isCurrentSong:r,isPlaying:!!r&&i.isPlaying,isCurrentSongId:s,isCurrentContext:o}}},56692:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(12115),i=l(77119),n=l(52956);let s=(e,t,l)=>{let s=(0,n.RH)(),{session:o}=(0,i.gy)(),[r,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[p,m]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{var a;let i=async()=>{var l,a,i,n;let r=await s.POST("/api/statsig/experiment/",{body:{layer:e,parameter:t}});m(!1),d((null==r?void 0:null===(l=r.data)||void 0===l?void 0:l.data)||null),u(!(null==r?void 0:null===(a=r.data)||void 0===a?void 0:a.success)),o.setExperiment(t,!!(null==r?void 0:null===(n=r.data)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i[t]))};(o.flags||!l)&&s&&((null===(a=o.flags)||void 0===a?void 0:a[l||""])||!l)&&i()},[e,t,l,s,o.flags]),(0,a.useMemo)(()=>({data:r,error:c,isLoading:p}),[r,c,p])}},57511:(e,t,l)=>{l.d(t,{B:()=>o});var a=l(3445),i=l(85172),n=l(29543),s=l(77119);class o{constructor(e,t,l,o,r,d=!1){var c=this;this.uploadId=null,this.isUploading=!1,this.isProcessing=!1,this.uploadedFilename=null,this.uploadType=null,this.isVideoCover=!1,this.error=null,this.currentStatus=null,this.pollUploadStatus=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;if(!c.uploadId)return;let{data:t}=await c.apiClient.GET("/api/uploads/video/{upload_id}/",{params:{path:{upload_id:c.uploadId}}});if((null==t?void 0:t.status)==="error"){c.error=null==t?void 0:t.error_message,c.isProcessing=!1,(0,s.oR)({title:null==t?void 0:t.error_message,description:"Please upload a different video file.",status:"error",duration:4e3,isClosable:!0}),c.setShouldConfirmClose&&c.setShouldConfirmClose(!1);return}(null==t?void 0:t.status)!=="complete"?(c.currentStatus=null==t?void 0:t.status,e>0?setTimeout(()=>c.pollUploadStatus(e-1),2e3):(c.error="Video processing timed out. Please try again.",c.isProcessing=!1)):(c.isProcessing=!1,c.uploadClipMetadata={title:t.title||void 0,imageUrl:t.image_url||void 0,s3_id:t.s3_id||void 0})},(0,n.l_)(this),this.session=e,this.genform=t||void 0,this.apiClient=l,this.library=o,this.setShouldConfirmClose=r,this.isVideoCover=d,this.uppy=new i.A({restrictions:{maxNumberOfFiles:1,maxFileSize:0x6400000}}).use(a.A,{getUploadParameters:async e=>{let{data:t}=await l.POST("/api/uploads/video/",{body:{extension:e.extension}});if(!t)throw Error("Failed to fetch upload parameters");return this.isUploading=!0,this.uploadId=t.id,this.setShouldConfirmClose&&this.setShouldConfirmClose(!0),{url:null==t?void 0:t.url,fields:t.fields}}}),this.uppy.on("upload-success",async()=>{var e,t;if(!this.uploadId)return;this.isUploading=!1,this.isProcessing=!0,this.uploadedFilename=null===(t=this.uppy.getFiles())||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.name,this.uploadType="file_upload";let{data:a}=await l.POST("/api/uploads/video/{upload_id}/upload-finish/",{params:{path:{upload_id:this.uploadId}},body:{upload_type:this.uploadType,upload_filename:this.uploadedFilename,is_video_cover:this.isVideoCover}});a&&this.pollUploadStatus()}),this.uppy.on("upload-error",()=>{(0,s.oR)({title:"Upload failed",description:"Please try again.",status:"error",duration:4e3,isClosable:!0}),this.isUploading=!1}),this.uppy.on("complete",()=>{this.uppy.getFiles().forEach(e=>{this.uppy.removeFile(e.id)})})}}},58191:(e,t,l)=>{l.d(t,{A:()=>u});var a=l(95155),i=l(59108),n=l(63438),s=l(77119),o=l(24962),r=l(44081),d=l(50649),c=l(4869);let u=(0,n.PA)(e=>{let{madlibsHandler:t,isDescendantOfContestClip:l,hasAcceptedTerms:n,onOpenTimbalandTermsModal:u,handleCreate:p,showClear:m,onClear:x,showV4ButtonStyle:h}=e,{genForm:f,session:g,playbar:v}=(0,s.gy)(),y=(0,c.$l)(g),b=""!==f.description||""!==f.style||""!==f.lyrics||""!==f.title,C=()=>f.coverClipId?g.isOutOfCredits&&0===g.freeCoverClipsLeft:f.personaId?g.isOutOfCredits&&0===g.freePersonaClipsLeft:g.isOutOfCredits,j=()=>f.coverClipId?{text:"Create",isDisabled:C(),onClick:()=>{f.setTask("cover"),w()}}:f.personaId?{text:"Create",isDisabled:C(),onClick:()=>{f.setTask("artist_consistency"),w()}}:f.continueClipId?{text:"Extend",isDisabled:g.isOutOfCredits||!f.isContinueValid(),onClick:()=>{f.setTask("extend"),w()}}:{text:"Create",isDisabled:g.isOutOfCredits||!b,onClick:()=>{w()}},w=()=>{l&&!n?u():t?t():p()};return(0,a.jsxs)("div",{className:"flex w-full items-center gap-2 md:mt-4 ".concat(v.clip?"md:mb-24":"md:mb-0"),children:[m&&b&&(0,a.jsx)(i.Flex,{justifyContent:"flex-start",children:(0,a.jsx)("button",{onClick:x,className:"text-[13px] font-sans font-medium text-primary bg-tertiary py-4 px-6 rounded-full hover:bg-secondary/20",children:"Clear"})}),(0,a.jsx)(i.Flex,{className:"create-button",width:b?"95%":"100%",children:(0,a.jsx)(r.A,{isDisabled:C(),tooltipLabel:y,onClick:()=>{C()&&g.showOutOfCreditsNotification()},children:(0,a.jsx)(o.A,{onClick:j().onClick,text:j().text,icon:(0,a.jsx)(d.WSU,{className:"fill-primary w-5 h-5"}),isDisabled:j().isDisabled,isLoading:f.isLoading,fullWidth:!0,backgroundImage:h?"/blue-button-bg.png":"/create-button-background.svg",useV4ButtonStyle:h})})})]})})},60425:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(95155),i=l(12115),n=l(47650),s=l(50649);let o=e=>{var t,l;let{label:o,padded:r}=e,[d,c]=(0,i.useState)(!1),u=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=e=>{d&&u.current&&!u.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d]),(0,a.jsxs)("div",{className:"relative ".concat(r?"p-[2px]":""),ref:u,children:[(0,a.jsx)("button",{className:"p-1 rounded-full focus:outline-none color-primary cursor-default",onClick:()=>c(!d),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:(0,a.jsx)(s.NTw,{className:"w-4 h-4"})}),d&&u.current&&(0,n.createPortal)((0,a.jsx)("div",{style:{left:(null===(t=u.current)||void 0===t?void 0:t.getBoundingClientRect().left)+20,top:(null===(l=u.current)||void 0===l?void 0:l.getBoundingClientRect().top)+20},className:"absolute z-10 w-48 p-2 text-white bg-tertiary rounded shadow-lg font-sans text-sm border border-white border-opacity-20",children:o}),document.body)]})}},70634:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(95155);l(12115);let i=e=>{let{style:t,onClick:l}=e;return(0,a.jsx)("button",{onClick:()=>l(t),className:"font-sans text-foreground-primary text-[13px] rounded-full text-nowrap px-3 py-2 flex flex-row items-center bg-background-tertiary bg-opacity-75 hover:bg-gray-700/20 border border-gray-700/20",children:t})}},71013:(e,t,l)=>{l.d(t,{A:()=>b});var a=l(95155),i=l(35695),n=l(12115),s=l(77119),o=l(22011),r=l(13847),d=l(50649),c=l(63808),u=l(6411),p=l(7132),m=l(4869),x=l(78028),h=l(61932),f=l(74955),g=l(57851),v=l(97942),y=l(4837);let b=e=>{let{isOpen:t,onClose:l,initialClip:b}=e,{library:C,clips:j,persona:w,session:N,playbar:k,queue:A,search:S,genForm:I}=(0,s.gy)(),P=(0,i.usePathname)(),_=(0,i.useRouter)(),[M,T]=(0,n.useState)((null==b?void 0:b.id)||null),[E,L]=(0,n.useState)(""),[O,R]=(0,n.useState)(""),[D,F]=(0,n.useState)(!1),[B,z]=(0,n.useState)(null),[U,H]=(0,n.useState)(null),[W,V]=(0,n.useState)(null),[G,Y]=(0,n.useState)(null),[q,Q]=(0,n.useState)(!1),[K,J]=(0,n.useState)(!1),[X,Z]=(0,n.useState)([]),$=(0,n.useRef)(null),[ee,et]=(0,n.useState)(!1),[el,ea]=(0,n.useState)(""),ei=(0,n.useRef)(null),[en,es]=(0,n.useState)(null),eo=(0,n.useRef)(null),[er,ed]=(0,n.useState)(!0),ec=(null==N?void 0:N.isStaff)||!1,eu=async()=>{if(!K){J(!0);try{await C.loadClips(),Z([...C.clipIds])}catch(e){console.error("Error loading clips:",e)}finally{J(!1)}}},ep=e=>{null!==eo.current&&(clearTimeout(eo.current),eo.current=null),eo.current=setTimeout(async()=>{J(!0);let t=e.trim().substring(0,p.zP);await C.updateFiltersSync({...C.filters.clips,query:t,page:0}),Z([...C.clipIds]),requestAnimationFrame(()=>{J(!1)}),S.librarySearchTerm=t},p.Vk)};(0,n.useEffect)(()=>{eu()},[]),(0,n.useEffect)(()=>{let e=e=>{$.current&&!$.current.contains(e.target)&&F(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[$.current]),(0,n.useEffect)(()=>{D&&ei.current&&ei.current.focus()},[D]);let em=e=>{T(e),F(!1),z(null),(0,c.Ay)({actionName:"PersonaRootClipSelectClicked",context:{clipId:e}})},ex=e=>{let t=j.clipById[e],l=(0,h.p8)(t);return{title:(null==l?void 0:l.length)>100?"".concat(l.substring(0,100),"..."):l,playCount:null==t?void 0:t.play_count,imageUrl:null==t?void 0:t.image_url,metadata:null==t?void 0:t.metadata}},eh=e=>{en===e&&k.isPlaying?(k.togglePlay(),es(null)):(es(e),A.setPlayContext({clips:C.currentClips||[],currentIndex:(C.currentClips||[]).findIndex(t=>t.id===e),contextType:u.Lp.FEED,contextId:"persona_preview_list"}),k.playClip(j.clipById[e]))};(0,n.useEffect)(()=>{k.clip&&k.isPlaying?es(k.clip.id):es(null)},[k.clip,k.isPlaying]);let ef=async()=>{if(!M){z("You need to select a base clip!");return}if(!(0,x._d)({clip:j.clipById[M],session:N})){z("A Persona cannot be created from this clip.");return}Q(!0);let e={user_id:N.userId||"",root_clip_id:M,name:E,description:O,image_s3_id:W,clips:[M],is_public:er};try{let a=await w.createPersona(e);if(a){var t;j.clipById[M].persona={id:a.id,is_public:er},I.setPersona(a.id),I.setPersonaClipId(a.root_clip_id);let e=j.clipById[a.root_clip_id],i=(null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t.tags)||"";I.setStyle(i),I.setTask("artist_consistency"),I.setContinueClip(null),ev(),l(),(0,c.Ay)({actionName:"PersonaSaveButtonClicked",context:{createdPersona:null==a?void 0:a.id}}),"/me/personas"===P&&_.push("/persona/".concat(a.id))}}catch(e){console.error("Error creating persona:",e)}finally{Q(!1)}},eg=async()=>{if(!M){z("You need to select a base clip!");return}if(0===w.personas.length&&er){eC(!0);return}await ef()},ev=(0,n.useCallback)(()=>{T((null==b?void 0:b.id)||null),L(""),R(""),z(null),V(null),F(!1)},[b]),ey=(0,n.useCallback)(()=>{ev(),l(),(0,c.Ay)({actionName:"PersonaModalCloseClicked"})},[l,ev]),[eb,eC]=(0,n.useState)(!1),ej=async()=>{eC(!1),(0,c.Ay)({actionName:"PersonaPublicConfirmClicked"}),await ef()};return((0,n.useEffect)(()=>{t?T((null==b?void 0:b.id)||null):(ev(),S.librarySearchTerm="",C.updateFilters({...C.filters.clips,query:"",page:0}))},[t,b]),t)?(0,a.jsxs)(y.A,{title:"Create a Persona",onClose:ey,children:[(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex-grow overflow-y-auto",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("label",{className:"block mb-1 p-1",children:"Based on"}),B&&(0,a.jsx)("span",{className:"text-accentPink text-sm",children:B})]}),(0,a.jsxs)("div",{className:"relative",ref:$,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex bg-tertiary p-2 rounded-md border border-quaternary cursor-pointer hover:bg-secondary/20",onClick:()=>{F(!D)},children:[M&&(0,a.jsx)(g.A,{src:ex(M).imageUrl,alt:ex(M).title,className:"w-[30px] h-[41px] rounded-md mr-2 object-cover"}),(0,a.jsx)("div",{className:"w-full text-primary border-none pl-2",children:M?ex(M).title:"Select a song..."}),(0,a.jsx)("button",{children:(0,a.jsx)(d.bDP,{className:"w-4 h-4 fill-primary ml-2 z-[10000]"})})]}),D&&(0,a.jsxs)("div",{className:"absolute w-full bg-tertiary text-primary border border-quaternary rounded-md mt-1 max-h-[340px] overflow-y-auto pb-4 px-4 shadow-lg",style:{zIndex:p.KU,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1), 0 10px 15px rgba(0, 0, 0, 0.2)"},children:[(0,a.jsxs)("div",{className:"relative sticky top-0 bg-tertiary pb-1 px-1 pt-2",style:{zIndex:p._8},children:[(0,a.jsx)(d.WIv,{className:"absolute left-4 top-4 transform w-4 h-4 fill-primary"}),(0,a.jsx)("input",{ref:ei,type:"text",placeholder:"Search for a song in your library...",className:"w-full pl-10 pr-4 py-1 mb-2 bg-tertiary text-primary border border-secondary rounded-full focus:outline-none placeholder-secondary placeholder-opacity-70",onChange:e=>{ep(e.target.value)}})]}),K?(0,a.jsx)("div",{className:"flex justify-center items-center py-4",children:(0,a.jsx)(v.A,{})}):0===X.length?(0,a.jsx)("div",{className:"font-serif text-center py-4",children:"No clips found"}):C.clipIds.map(e=>{var t;let{title:l,playCount:i,imageUrl:n,metadata:s}=ex(e),o=en===e&&k.isPlaying,r=null==s?void 0:s.has_vocal,c=!r||ec||(null===(t=N.flags)||void 0===t?void 0:t["personas-audio-upload"]);return(0,a.jsxs)("div",{className:"flex items-center p-2 ".concat(c?"hover:bg-secondary/20 hover:rounded-lg cursor-pointer":"opacity-50 cursor-not-allowed"),onClick:()=>c&&em(e),onMouseEnter:()=>c&&H(e),onMouseLeave:()=>c&&H(null),children:[(0,a.jsxs)("div",{className:"relative flex-shrink-0 w-[30px] h-[41px] rounded-md mr-2 ".concat(c?"cursor-pointer":"cursor-not-allowed"),onMouseEnter:()=>c&&H(e),onMouseLeave:()=>c&&H(null),children:[(0,a.jsx)(g.A,{src:n,alt:l,className:"w-full h-full rounded-md object-cover ".concat(c?"":"opacity-50")}),c&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-md transition-opacity ".concat(U===e||en===e?"opacity-100":"opacity-0"),onClick:t=>{t.stopPropagation(),eh(e)},children:o?(0,a.jsx)(d.E$n,{className:"w-4 h-4 fill-primary"}):(0,a.jsx)(d.udU,{className:"w-4 h-4 fill-primary"})})]}),(0,a.jsxs)("div",{className:"font-sans font-medium text-sm flex-1 pl-2 ".concat(c?"":"text-gray-500 flex flex-col"),children:[l,r&&!ec&&(0,a.jsx)("div",{className:"font-sans font-normal text-xs text-gray-500",children:"(Personas from audio uploads are disabled at this time.)"})]}),(0,a.jsx)("div",{className:"".concat(c?"bg-primary text-vinylBlack-darker hover:bg-secondary cursor-pointer":"bg-gray-400 text-gray-600 cursor-not-allowed"," text-[10px] font-mono rounded-full px-2 py-1"),onClick:t=>{c&&(t.stopPropagation(),eh(e))},children:1===i?"1 PLAY":"".concat(i," PLAYS")})]},e)})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block p-1",children:"Name"}),(0,a.jsx)("input",{type:"text",className:"w-full p-2 bg-tertiary text-primary border border-quaternary rounded-lg focus:outline-none focus:border focus:border-0.5 focus:border-primary focus:shadow-[0_0_0_0.5px_primary] placeholder-secondary placeholder-opacity-70",value:E,placeholder:"This is shown on songs created with this Persona",onChange:e=>{L(e.target.value)}})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-1 p-1",children:"Avatar"}),(0,a.jsx)(r.A,{initialImageURL:G||void 0,onImageChanged:e=>{V(e)}}),((0,m.FJ)(N)||N.roles.staff)&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex gap-2 pt-1 mt-2",children:[(0,a.jsx)("input",{type:"text",className:"w-full p-2 text-sm bg-tertiary text-primary border border-quaternary rounded-lg focus:outline-none focus:border focus:border-0.5 focus:border-primary focus:shadow-[0_0_0_0.5px_primary] placeholder-secondary placeholder-opacity-70",value:el,maxLength:200,placeholder:"Prompt Suno to create an image...",onChange:e=>ea(e.target.value)}),(0,a.jsx)(f.Ay,{variant:f.Ak.Primary,size:f.Mp.Small,onClick:async()=>{et(!0);let{data:e}=await C.apiClient.POST("/api/gen/prompt_image/",{body:{prompt:el}});et(!1),e&&Y(e.image_url)},disabled:ee||""===el,icon:ee&&(0,a.jsx)(v.A,{className:"text-current"}),children:"Create"})]})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2",children:"Description"}),(0,a.jsx)("textarea",{className:"w-full p-2 bg-tertiary text-primary border border-quaternary rounded-lg focus:outline-none focus:border focus:border-0.5 focus:border-primary focus:shadow-[0_0_0_0.5px_primary] placeholder-secondary placeholder-opacity-70",rows:4,value:O,placeholder:"Describe this Persona's sound or bio",onChange:e=>{e.target.value.length<=p.Lj&&R(e.target.value)},maxLength:p.Lj}),(0,a.jsxs)("div",{className:"text-right text-sm text-secondary",children:[O.length,"/",p.Lj]})]})]}),(0,a.jsx)("div",{className:"sticky bottom-0 bg-tertiary pt-4 border-t border-quaternary",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(o.A,{buttonText:"Public",onChange:e=>ed(e),checked:er,tooltip:"Personas copy the voice and styles of a song to new songs you create. This feature is only available to Pro and Premier users. Subscribe to gain access."})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(f.Ay,{size:f.Mp.Small,onClick:ey,children:"Cancel"}),(0,a.jsx)(f.Ay,{variant:f.Ak.Primary,size:f.Mp.Small,icon:q&&(0,a.jsx)(v.A,{className:"text-current"}),onClick:eg,children:"Save"})]})]})})]}),eb&&(0,a.jsxs)(y.A,{title:"Make Persona Public?",onClose:()=>eC(!1),wrapperClasses:"overflow-y-auto",titleClassName:"text-xl",children:[(0,a.jsx)("div",{className:"text-primary",children:"Creation is better together! Making a Persona public allows other Pro & Premier users to create new songs using your Persona. Those songs will link to your profile and show up on your Persona's page so you get credit for your creations, and more listeners in the process."}),(0,a.jsxs)("div",{className:"flex justify-end items-center mt-4 px-4 pb-4 gap-2",children:[(0,a.jsx)(f.Ay,{onClick:()=>eC(!1),children:"Cancel"}),(0,a.jsx)(f.Ay,{variant:f.Ak.Primary,onClick:ej,children:"Confirm"})]})]})]}):null}},71791:(e,t,l)=>{l.d(t,{UA:()=>ep,YK:()=>em});var a=l(95155),i=l(77700),n=l(59108),s=l(79175),o=l(33636),r=l(52017),d=l(60078),c=l(5585),u=l(63438),p=l(12115),m=l(65015),x=l(50649),h=l(63808),f=l(6411),g=l(71164),v=l(88008),y=l(4869),b=l(61932),C=l(77119),j=l(7132),w=l(99428),N=l(24962),k=l(59041),A=l(57851),S=l(17219),I=l(99516),P=l(84899),_=l(76143),M=l(15933),T=l(13380);function E(){let e=(0,M._)(["\n  @keyframes flap {\n    0%,\n    100% {\n      transform: rotateY(0) rotateZ(0);\n    }\n    50% {\n      transform: rotateY(-40deg) rotateZ(-10deg);\n    }\n  }\n  @keyframes blink {\n    0%,\n    48%,\n    52%,\n    100% {\n      height: 10px;\n    }\n    50% {\n      height: 1px;\n    }\n  }\n  @keyframes slideLeft {\n    from {\n      transform: translateX(14px) translateY(2px);\n    }\n    to {\n      transform: translateX(0px) translateY(2px);\n    }\n  }\n  @keyframes walkIn {\n    from {\n      transform: translateX(40%) scale(0.25) translateX(0%);\n    }\n    to {\n      transform: translateX(15%) scale(0.25) translateX(0%);\n    }\n  }\n  @keyframes legMove {\n    0%,\n    100% {\n      transform: translateY(0);\n    }\n    50% {\n      transform: translateY(-5px);\n    }\n  }\n  @keyframes slideIn {\n    from {\n      transform: translateX(-50px) translateY(10px);\n    }\n    to {\n      transform: translateX(-30px);\n    }\n  }\n  @keyframes glitterFall {\n    0% {\n      transform: translateY(0) rotate(60deg);\n      opacity: 1;\n    }\n    100% {\n      transform: translateX(-40px) translateY(75px) rotate(270deg);\n      opacity: 0;\n    }\n  }\n  @keyframes legMoveInverse {\n    0%,\n    100% {\n      transform: translateY(-5px);\n    }\n    50% {\n      transform: translateY(0);\n    }\n  }\n  body {\n    position: relative;\n    height: 100vh;\n    margin: 0;\n    background: darkslategrey;\n  }\n"]);return E=function(){return e},e}let L=(0,T.AH)(E()),O=()=>{let[e,t]=(0,p.useState)(!1),[l,i]=(0,p.useState)(!1),n="0.5s";return(0,p.useEffect)(()=>{let e=setTimeout(()=>{t(!0)},5e3);return()=>clearTimeout(e)},[5]),(0,p.useEffect)(()=>{let e=setTimeout(()=>{i(!0)},8e3);return()=>clearTimeout(e)},[8]),(0,a.jsxs)("div",{className:"chicken",style:{position:"absolute",marginTop:"26px",left:"50%",transform:"translate(-50%, -50%) scale(0.25) translateX(0%)",width:"200px",height:"100px",animation:"walkIn ".concat(5,"s forwards")},children:[(0,a.jsxs)("div",{className:"head",style:{position:"absolute",top:"-50px",left:"0",width:"50px",height:"50px",background:"bisque",borderTopRightRadius:"23123px"},children:[(0,a.jsxs)("div",{className:"hair",style:{position:"absolute",top:"-5px",left:"-1px",width:"5px",height:"10px",background:"darkorange",borderTopLeftRadius:"100px",borderTopRightRadius:"100px",transform:"rotate(-10deg)"},children:[(0,a.jsx)("div",{style:{position:"absolute",top:"2px",left:"5px",width:"5px",height:"8px",background:"darkorange",borderTopLeftRadius:"100px",borderTopRightRadius:"100px"}}),(0,a.jsx)("div",{style:{position:"absolute",top:"4px",left:"10px",width:"5px",height:"6px",background:"darkorange",borderTopLeftRadius:"100px",borderTopRightRadius:"100px"}})]}),(0,a.jsx)("div",{className:"eye",style:{position:"absolute",top:"50%",left:"30%",width:"10px",height:"10px",borderRadius:"50%",background:"black",transform:"translate(-50%, -50%)",animation:"blink 5s infinite"}})]}),e&&(0,a.jsx)("div",{className:"party-popper",style:{position:"absolute",top:"-25px",left:"-20px",width:"30px",height:"0",borderBottom:"15px solid transparent",borderTop:"15px solid transparent",borderLeft:"40px solid orange",transform:"rotate(0deg)",animation:"slideIn 3s forwards"}}),l&&(0,a.jsx)("div",{children:[...Array(1e3)].map((e,t)=>(0,a.jsx)("div",{className:"glitter",style:{position:"absolute",top:"-10px",left:"".concat(-75+30*Math.random()-15,"px"),width:"16px",height:"9px",backgroundColor:["#ff0","#f0f","#0ff"][t%3],borderRadius:"30%",opacity:0,transform:"rotate(40deg)",animation:"glitterFall 3s ".concat(.2*t,"s forwards")}},t))}),(0,a.jsx)("div",{className:"beak",style:{position:"absolute",top:"-20px",left:"-20px",width:"0",height:"0",border:"10px solid transparent",borderRightColor:"darkorange"}}),(0,a.jsx)("div",{className:"body",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",borderBottomLeftRadius:"500px",borderBottomRightRadius:"500px",background:"bisque"},children:(0,a.jsx)("div",{className:"wing",style:{position:"absolute",top:"20%",left:"50%",width:"20%",height:"40%",borderBottomRightRadius:"1000px",border:"1px solid darkslategray",animation:"flap 1s infinite ease-out",transformOrigin:"0 0"}})}),(0,a.jsx)("div",{className:"tail",style:{position:"absolute",top:"-20px",right:"0",width:"20px",height:"20px",background:"bisque",borderTopLeftRadius:"123132px"}}),(0,a.jsx)("div",{className:"leg one",style:{position:"absolute",bottom:"-18px",left:"40%",width:"2px",height:"20px",background:"darkorange",animation:"legMove ".concat(n," ").concat(10," forwards")},children:(0,a.jsx)("div",{style:{position:"absolute",bottom:"0",left:"-5px",width:"12px",height:"2px",background:"darkorange"}})}),(0,a.jsx)("div",{className:"leg two",style:{position:"absolute",bottom:"-18px",left:"60%",width:"2px",height:"20px",background:"darkorange",animation:"legMoveInverse ".concat(n," ").concat(10," forwards")},children:(0,a.jsx)("div",{style:{position:"absolute",bottom:"0",left:"-5px",width:"12px",height:"2px",background:"darkorange"}})})]})},R=()=>{let[e,t]=(0,p.useState)("white");return(0,p.useEffect)(()=>{let e=setTimeout(()=>{t("url(#stripes)")},2e3);return()=>clearTimeout(e)},[]),console.log(e),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.mL,{styles:L}),(0,a.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",width:"max-content"},children:(0,a.jsx)(O,{})})]})};var D=l(21697),F=l(91135),B=l(96132),z=l(46995),U=l(83168),H=l(95902),W=l(99803),V=l(47659),G=l(57147),Y=l(70634),q=l(24874),Q=l(96728),K=l(19783),J=l(15307),X=l(44081),Z=l(60425),$=l(41301),ee=l(78131),et=l(32194),el=l(88659),ea=l(92819),ei=l(84821),en=l(74955),es=l(4837);let eo=()=>{let[e,t]=(0,p.useState)(!1),[l,n]=(0,p.useState)(0),[s,o]=(0,p.useState)(0),r=["The quick brown fox jumps over the lazy dog. This classic pangram contains every letter of the English alphabet at least once.","Waves crash against the shore, their rhythmic sound echoing across the beach. Seabirds soar overhead, riding the salty breeze.","In a garden filled with wildflowers, butterflies dance from petal to petal, their wings catching the golden afternoon light."],d=()=>{n(1)},c=()=>{s<r.length-1?o(s+1):n(2)},u=()=>{n(0),o(0)},m=()=>{n(3),setTimeout(()=>{n(4)},4e3)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{children:"\n  @keyframes waveform {\n    0%, 100% {\n      transform: scaleY(0.2);\n    }\n    50% {\n      transform: scaleY(1);\n    }\n  }\n"}),(0,a.jsx)(i.Box,{mx:2,children:(0,a.jsx)(en.Ay,{onClick:()=>t(!0),className:"w-full text-center py-2 mt-2",variant:en.Ak.Secondary,children:"Voice Persona"})}),e&&(0,a.jsx)(es.A,{onClose:()=>{t(!1),n(0),o(0)},title:"",children:(()=>{switch(console.log("Current step:",l),l){case 0:return(0,a.jsxs)("div",{className:"p-6 flex flex-col",children:[(0,a.jsx)("p",{className:"text-lg mb-8 text-left",children:"Please read the following text to capture your own Persona."}),(0,a.jsx)(en.Ay,{onClick:d,variant:en.Ak.Primary,className:"flex items-center justify-center gap-2",children:(0,a.jsx)("span",{children:"Continue"})})]});case 1:return(0,a.jsxs)("div",{className:"p-6 flex flex-col",children:[(0,a.jsx)("p",{className:"text-lg mb-8",children:r[s]}),(0,a.jsx)(en.Ay,{onClick:c,variant:en.Ak.Primary,className:"flex items-center justify-center gap-2",children:(0,a.jsx)("span",{children:"Next"})})]});case 2:return(0,a.jsxs)("div",{className:"p-6 flex flex-col",children:[(0,a.jsx)("p",{className:"text-lg mb-8 text-left",children:"Listen to your recordings to confirm creation."}),(0,a.jsx)(en.Ay,{onClick:()=>{console.log("SHOULD PLAY")},variant:en.Ak.Primary,className:"flex items-center justify-center gap-2 mb-8",children:(0,a.jsx)(x.udU,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(en.Ay,{onClick:u,variant:en.Ak.Secondary,className:"w-[48%]",children:"Start Over"}),(0,a.jsx)(en.Ay,{onClick:m,variant:en.Ak.Primary,className:"w-[48%]",children:"Confirm"})]})]});case 3:return(0,a.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-2 h-32",children:[...Array(12)].map((e,t)=>(0,a.jsx)("div",{style:{width:"8px",backgroundColor:"white",height:"100%",animation:"waveform 1s ease-in-out infinite",animationDelay:"".concat(-(t/12*1),"s"),transformOrigin:"bottom"}},t))}),(0,a.jsx)("div",{className:"mt-4 text-white",children:"Processing..."})]});case 4:return(0,a.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center",children:[(0,a.jsx)("h2",{className:"text-4xl font-serif mb-4",children:"Maria"}),(0,a.jsxs)("div",{className:"relative w-40 h-40 mb-4",children:[(0,a.jsx)(ei.A,{className:"w-full h-full"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(x.QXj,{className:"w-16 h-16"})})]}),(0,a.jsxs)(en.Ay,{onClick:()=>{console.log("SHOULD PLAY")},variant:en.Ak.Secondary,className:"flex items-center justify-center gap-2 mb-4 w-full",children:[(0,a.jsx)(x.udU,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Audio Sample"})]}),(0,a.jsx)(en.Ay,{onClick:()=>{console.log("SHOULD CREATE")},variant:en.Ak.Primary,className:"w-full",children:"Create with Maria"})]})}})()})]})};var er=l(76898),ed=l(87358);let ec=Object.fromEntries(er.map(e=>[e.id,e])),eu=Object.fromEntries(Object.entries(ec).map(e=>{let[t,l]=e;return[t,l.title]})),ep=(0,u.PA)(e=>{let{clipId:t}=e,{clips:l,genForm:r,playbar:d,session:c,queue:u}=(0,C.gy)(),m=l.clipById[t],[x,h]=(0,p.useState)(""),[g,v]=(0,p.useState)(null!==r.infillFromSeconds?(0,b.N8)(r.infillFromSeconds):null),[y,j]=(0,p.useState)(null!==r.infillToSeconds?(0,b.N8)(r.infillToSeconds):null);return((0,p.useEffect)(()=>{h((0,b.N8)(r.continueAtSeconds)||"00:00")},[t,r.continueAtSeconds]),(0,p.useEffect)(()=>{var e;(null===(e=c.flags)||void 0===e?void 0:e["waveform-infilling"])&&m&&l.loadAlignedLyrics(m)},[m]),(0,p.useEffect)(()=>{if(y&&g&&y!==g){let e=((0,b.tE)(y)||0)-((0,b.tE)(g)||0);e>0&&e<60&&(r.infillFromSeconds=(0,b.tE)(g),r.infillToSeconds=(0,b.tE)(y))}else r.infillFromSeconds=null,r.infillToSeconds=null},[y,g]),(0,p.useEffect)(()=>{let e=null!==r.infillFromSeconds?(0,b.N8)(r.infillFromSeconds):null,t=null!==r.infillToSeconds?(0,b.N8)(r.infillToSeconds):null;g!==e&&v(e),y!==t&&j(t)},[r.infillFromSeconds,r.infillToSeconds]),m)?(0,a.jsxs)(i.Box,{m:2,children:[r.infillFromSeconds||r.infillToSeconds||"infill"===r.task?null:(0,a.jsxs)(n.Flex,{direction:"row",alignItems:"center",justifyContent:"space-between",width:"100%",mb:6,mt:4,children:[(0,a.jsxs)(n.Flex,{alignItems:"center",children:[(0,a.jsx)(s.FormLabel,{fontSize:"sm",mr:2,fontFamily:"Neue Montreal",children:"Extend from"}),(0,a.jsx)(o.Input,{isInvalid:!r.isContinueValid(),isDisabled:y!==g,rounded:"md",size:"sm",fontSize:"md",fontWeight:"bold",fontFamily:"Neue Montreal",onChange:e=>{var t;let l=(0,b.tE)(e.target.value),a=Math.min(null!=l?l:0,null!==(t=r.continueClipDuration)&&void 0!==t?t:0);null!==l&&e.target.value.match(/:\d{2}/)&&null!==a?(a!==r.continueAtSeconds&&r.setContinueAtSeconds(a),h((0,b.N8)(a)||"")):h(e.target.value)},onBlur:()=>{var e;let t=(0,b.tE)(x),l=Math.min(null!=t?t:0,null!==(e=r.continueClipDuration)&&void 0!==e?e:0);r.setContinueAtSeconds(l)},value:x,borderColor:"white",maxLength:5,maxW:"80px",_focus:{borderColor:"0.5px solid white"}})]}),(0,a.jsx)(k.A,{onClick:()=>{r.resetContinueClip()},"aria-label":"Clear continue clip"})]}),(0,a.jsx)(_.A,{contextType:f.Lp.FEED,contextId:"continue_clip_preview",onPlay:()=>{var e;if((null===(e=d.clip)||void 0===e?void 0:e.id)===m.id){d.togglePlay();return}u.setPlayContext({clips:[m],currentIndex:0,contextType:f.Lp.FEED,contextId:"continue_clip_preview"}),d.playClip(m)},onClick:()=>{},clip:m,showActions:!1,condensed:!0})]}):null}),em=(e,t)=>{let l=t.style.trim();""==l?t.setStyle(e):(l=","==l.charAt(l.length-1)?l+" "+e:l+", "+e).length<=j.Ti&&t.setStyle(l)};(0,u.PA)(e=>{var t,l,s,o,u,f,b,k;let{state:_,onGenerate:M,isSimple:T=!0,hideTopStack:E,showMadlibs:L=!0,showPersonas:O=!0,textareaColor:ei,isInline:en=!1,reservedLyricsCount:es=0,showInfillingWarning:ex=!1,showInstrumentalToggle:eh=!0,showProjectSelector:ef=!0,showV4ButtonStyle:eg=!1}=e,{session:ev,clips:ey,genForm:eb,edit:eC,contest:ej}=(0,C.gy)(),[ew]=(0,p.useState)(!1),[eN,ek]=(0,p.useState)(!1),{isOpen:eA,onOpen:eS,onClose:eI}=(0,r.useDisclosure)(),{isOpen:eP,onOpen:e_,onClose:eM}=(0,r.useDisclosure)(),[eT,eE]=(0,p.useState)(!1),[eL,eO]=(0,p.useState)(!1),[eR,eD]=(0,p.useState)(!1),[eF,eB]=(0,p.useState)(!1),[ez,eU]=(0,p.useState)(!1),[eH,eW]=(0,p.useState)(!1),[eV,eG]=(0,p.useState)(!1),[eY,eq]=(0,p.useState)(!1),[eQ,eK]=(0,p.useState)(!1),[eJ,eX]=(0,p.useState)(0),eZ=async()=>{eE(!0),ek(!1),await ev.acceptTOS(),eI()};(0,p.useEffect)(()=>{(async()=>{ev.roles.has_accepted_custom_mode_tos?ek(!1):ek(!0)})()},[ev.roles.has_accepted_custom_mode_tos,eS]),(0,p.useEffect)(()=>{let e=localStorage.getItem("specialOccasionsCount");e&&eX(parseInt(e,10))},[]),(0,p.useEffect)(()=>{localStorage.setItem("specialOccasionsCount",eJ.toString())},[eJ]);let e$=_.continueClipId?ey.clipById[_.continueClipId]:null;(0,p.useEffect)(()=>{var e,t;e$&&(_.style&&0!==_.style.length||_.setStyle((null===(e=e$.metadata)||void 0===e?void 0:e.tags)||""),_.negativeTags&&0!==_.negativeTags.length||(_.setNegativeTags((null===(t=e$.metadata)||void 0===t?void 0:t.negative_tags)||""),_.resetEnableExcludeStyle()))},[e$,ew]);let[e0,e1]=(0,p.useState)(null);(0,p.useEffect)(()=>{E&&E(!!e0)},[e0,E]),(0,p.useEffect)(()=>{_.setIsMadLibs(!!e0)},[e0]);let e3=(e=>{let t={};return Object.values(e).forEach(e=>{e.content.forEach(e=>{"input"===e.type&&(t[e.field]="")})}),t})(er),[e6,e5]=(0,p.useState)(e3),e2=(e,t)=>{e5(l=>({...l,[e]:t}))},e4=Object.fromEntries(Object.entries(ec).map(e=>{let[t,l]=e;return[t,(0,a.jsx)("div",{className:"flex flex-wrap gap-1 max-w-xs font-sans px-2",children:l.content.map((e,t)=>"string"==typeof e?(0,a.jsx)("span",{children:e},t):"input"===e.type?(0,a.jsxs)("div",{className:"relative w-30 mb-6 inline-flex items-center",children:[(0,a.jsx)("input",{type:"text",placeholder:" ",className:"leading-tight w-full px-1 py-0.5 border-b-2 border-secondary focus:border-primary placeholder-transparent focus:outline-none text-center bg-vinylBlack-light bg-opacity-30 focus:bg-opacity-40",value:e6[e.field],onChange:t=>e2(e.field,t.target.value),maxLength:e.maxLength}),(0,a.jsx)("label",{className:"font-mono text-[9px] w-full text-center absolute left-1/2 transform -translate-x-1/2 -bottom-4 text-primary text-opacity-90 transition-transform duration-200 ease-in-out",children:e.placeholder})]},t):null)},t)]})),e8=e=>{if(!e0||tp())return;let t=ec[e0];if(!t)return;let l=t.template;Object.keys(e6).forEach(e=>{let t=e6[e];l=l.replace("{".concat(e,"}"),t)}),"SpecialOccasions"===e0?((0,c.A)({particleCount:100,spread:70,origin:{y:.6},colors:["#FAF7F5","#D1CBC7"]}),eX(e=>{let t=e+1;return t%10==0&&(eK(!0),setTimeout(()=>{eK(!1)},2e4)),t})):"Person"===e0?(eO(!0),setTimeout(()=>eO(!1),5e3)):"Activity"===e0?(eD(!0),setTimeout(()=>eD(!1),5e3)):"Moods"===e0?(eU(!0),setTimeout(()=>eU(!1),5e3)):"Greeting"===e0?(eW(!0),setTimeout(()=>eW(!1),5e3)):"Scrapbook"===e0?(eB(!0),setTimeout(()=>eB(!1),5e3)):"Vacation"===e0?(eq(!0),setTimeout(()=>eq(!1),5e3)):"Pet"===e0&&(eG(!0),setTimeout(()=>eG(!1),5e3)),_.setIsMadLibs(!0),_.setDescription(l),M(_,e),v.LS.segmentTrack(w.f7.generalEvent,{key:t.id,actionName:w.a2.clickMadlibCreate,isMobile:!1})},[e7,e9]=(0,p.useState)(!1),[te,tt]=(0,p.useState)(!1),[tl,ta]=(0,p.useState)(!1),[ti,tn]=(0,p.useState)(ev.hasAcceptedTimbalandTerms);(0,p.useEffect)(()=>{(async()=>{let e=eb.coverClipId&&await ej.isContestClip(eb.coverClipId),t=eb.continueClipId&&await ej.isContestClip(eb.continueClipId);ta(e||t||!1)})()},[eb.coverClipId,ej]);let ts=async e=>{await ev.setTimbalandTermsAccepted(),tn(!0),eM(),tu(e)};(0,p.useEffect)(()=>{ev&&ey&&_.coverClipId&&(async()=>{tt(await ej.isCoverEnabledOrIsContest(_.coverClipId||"",ev.userId||""))})()},[ev,_.coverClipId,ey]);let to=te&&!!eb.coverClipId,tr=!!eb.continueClipId,td=null===(t=ev.flags)||void 0===t?void 0:t["persona-cover"],tc=(0,y.$l)(ev),tu=e=>{tp()?(e.logWebUserEvent({actionName:"GenerationStartError",principalObjectType:"error_type",principalObjectValue:"Insufficient Credits"}),ev.showOutOfCreditsNotification(),v.LS.logAudioCreationEvent(!1,w.a2.clickDisabledCreateSongWhenOutOfCredits,eb,ev,{})):(_.setIsMadLibs(!1),M(_,e))},tp=()=>ev.isOutOfCredits&&(!eb.mv.includes("v4")||ev.isOutOfFreeV4Gens),[tm,tx]=(0,p.useState)(!1);if(e0)return(0,a.jsxs)(d.Stack,{p:2,spacing:4,py:{base:0,md:4},w:"100%",mt:8,mb:16,children:[eL&&(0,a.jsx)(B.A,{}),eR&&(0,a.jsx)(W.A,{}),eF&&(0,a.jsx)(D.A,{}),ez&&(0,a.jsx)(H.A,{}),eH&&(0,a.jsx)(U.A,{}),eV&&(0,a.jsx)(F.A,{}),eY&&(0,a.jsx)(z.A,{}),(0,a.jsx)("button",{onClick:()=>{e1(null),_.setDescription(""),_.setIsMadLibs(!1)},className:"ml-2 h-[32px] w-[32px] p-2 text-white bg-tertiary hover:bg-vinylBlack-darker focus:outline-none rounded-full border border-white-300 flex justify-center items-center","aria-label":"Back",children:(0,a.jsx)(A.A,{src:"/icons/left-caret.svg",alt:"Back",width:8,height:8})}),(0,a.jsx)("h2",{className:"font-serif text-2xl px-2 pt-2 break-words max-w-[300px]",children:e0&&eu[e0]}),(0,a.jsx)("p",{className:"font-sans font-medium text-sm px-2 pb-4 text-secondary text-opacity-80",children:"Fill in the blanks to create your song."}),(0,a.jsx)("p",{children:e4[e0]}),(0,a.jsxs)(d.Stack,{px:2,py:6,className:"create-button",pb:10,children:[(0,a.jsx)(X.A,{isDisabled:tp(),tooltipLabel:tc,onClick:()=>{tp()&&((0,h.Ay)({actionName:"GenerationStartError",principalObjectType:"error_type",principalObjectValue:"Insufficient Credits"}),ev.showOutOfCreditsNotification())},children:(0,a.jsx)(N.A,{onClick:()=>{let e=(0,h.$E)();e.logWebUserEvent({actionName:"GenerateMadlibsClicked",context:{madlibId:e0}}),tp()?(e.logWebUserEvent({actionName:"GenerationStartError",principalObjectType:"error_type",principalObjectValue:"Insufficient Credits"}),ev.showOutOfCreditsNotification(),v.LS.logAudioCreationEvent(!1,w.a2.clickDisabledCreateSongWhenOutOfCredits,eb,ev,{})):e8(e)},text:_.continueClipId?"Extend":"Create",icon:(0,a.jsx)(x.WSU,{className:"fill-primary w-5 h-5"}),isDisabled:!(()=>{if(!e0)return!0;let e=ec[e0];return!e||e.content.every(e=>"object"!=typeof e||"input"!==e.type||""!==e6[e.field].trim())})(),isLoading:_.isLoading,label:_.continueClipId?"Extend":"Create",backgroundImage:eg?"/blue-button-bg.png":"/auras/orange-aura.png",useV4ButtonStyle:eg,fullWidth:!0})}),eQ&&(0,a.jsx)(R,{})]})]});if(T)return(0,a.jsxs)(d.Stack,{p:2,spacing:0,py:{base:0,md:4},w:"100%",children:[(0,a.jsxs)(d.Stack,{direction:"row",alignItems:"alignItems",justifyContent:"space-between",p:2,children:[(0,a.jsxs)(d.Stack,{direction:"row",alignItems:"alignItems",spacing:1,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Song description"}),(0,a.jsx)(Z.A,{label:"Describe the style of music and topic you want (e.g. acoustic pop about the holidays). Use genres and vibes instead of specific artists and songs."})]}),eh?(0,a.jsx)(G.A,{label:"Instrumental",checked:eb.instrumental,onChange:e=>{eb.setInstrumental(e)}}):null]}),(0,a.jsx)(d.Stack,{flex:"1",direction:["row","row","column"],alignItems:["stretch","stretch","stretch"],px:2,children:(0,a.jsx)(d.Stack,{direction:"column",flex:"1",spacing:0,className:"simple-prompt-textarea",children:(null==ev?void 0:null===(b=ev.flags)||void 0===b?void 0:b["onebox-lyrics-model-selector"])?(0,a.jsx)(Q.A,{value:_.description,onChange:e=>_.setDescription(e.currentTarget.value),placeholder:_.placeholder,setLyricsModel:_.setLyricsModel,lyricsModel:_.lyricsModel,enableModelSelector:!0}):(0,a.jsx)(K.A,{maxLength:200,value:_.description,resize:!0,onChange:e=>_.setDescription(e.target.value),placeholder:_.placeholder,isScrollable:!0,customHeight:"h-[100px]",bgColor:ei})})}),(0,y.m2)(ev)&&(0,a.jsx)("div",{className:"py-4 pb-2",children:(0,a.jsx)(P.A,{editMode:!1})}),(0,a.jsx)(d.Stack,{px:2,py:6,className:"create-button",children:(0,a.jsx)(N.A,{onClick:()=>{let e=(0,h.$E)();e.logWebUserEvent({actionName:"GenerateButtonClicked",context:{onebox:!0}}),tp()?(e.logWebUserEvent({actionName:"GenerationStartError",principalObjectType:"error_type",principalObjectValue:"Insufficient Credits"}),ev.showOutOfCreditsNotification(),v.LS.logAudioCreationEvent(!1,w.a2.clickDisabledCreateSongWhenOutOfCredits,eb,ev,{})):(_.setIsMadLibs(!1),M(_,e))},text:_.continueClipId?"Extend":"Create",icon:(0,a.jsx)(x.WSU,{className:"fill-primary w-5 h-5"}),isLoading:_.isLoading,label:tp()?"Upgrade for more credits":_.continueClipId?"Extend":"Create",backgroundImage:eg?"/blue-button-bg.png":"/create-button-background.svg",useV4ButtonStyle:eg,fullWidth:!0})}),(null==ev?void 0:null===(k=ev.flags)||void 0===k?void 0:k.madlibs)&&L&&(0,a.jsxs)("div",{className:"mt-6 mx-2",children:[(0,a.jsxs)("button",{onClick:()=>tx(!tm),className:"w-full flex justify-between items-center font-serif text-xl md:px-4 pt-3 pb-2 bg-tertiary hover:bg-secondary/20 rounded-md",children:[(0,a.jsx)("div",{className:"font-serif text-[18px]",children:"Need ideas?"}),tm?(0,a.jsx)(x.SwV,{className:"w-4 h-4"}):(0,a.jsx)(x.bDP,{className:"w-4 h-4"})]}),tm&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(el.A,{setSelectedSuggestion:e1})})]})]});let th=(!_.mv.includes("v2")||_.continueClipId&&(null===(s=ey.clipById[_.continueClipId])||void 0===s?void 0:null===(l=s.metadata)||void 0===l?void 0:l.type)==="upload"?j.z3:j.w4)-es,tf=(0,y.w9)(ev);return(0,a.jsxs)("div",{className:"px-2 pb-2 flex flex-col flex-1 overflow-y-auto w-full ".concat(en?"":"mb-8"),children:[(0,a.jsx)(S.A,{isOpen:eA,onClose:eI,onConfirm:eZ,isLoading:eT}),(0,a.jsxs)(d.Stack,{flex:1,overflowY:"auto",py:{base:0,md:4},children:["true"===ed.env.NEXT_PUBLIC_ML_DEV_MODE&&(null===(o=ev.flags)||void 0===o?void 0:o.configs)&&g._$&&!eC.isEditSessionActive&&(0,a.jsxs)("div",{className:"mx-2",children:[(0,a.jsx)("div",{className:"pb-6 flex flex-row",children:(0,a.jsx)(G.A,{label:"The Matrix",checked:e7,onChange:e9})}),e7&&(0,a.jsx)(ee.A,{state:_,setConfiguration:(e,t)=>{if(null===t){let t={..._.configurations};delete t[e],_.configurations=t}else _.configurations={..._.configurations,[e]:t}}})]}),eb.coverClipId&&(0,a.jsx)($.A,{clipId:eb.coverClipId}),_.instrumental?(0,a.jsxs)(i.Box,{mx:2,children:[eh&&(0,a.jsxs)(d.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",py:2,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Instrumental Mode"}),(0,a.jsx)(G.A,{label:"Instrumental",checked:eb.instrumental,onChange:e=>{eb.setInstrumental(e)}})]}),(0,a.jsxs)(d.Stack,{direction:"row",alignItems:"alignItems",justifyContent:"space-between",p:0,className:"flex items-center",children:[(0,a.jsxs)(d.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",py:2,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Style of Music"}),(0,a.jsx)(Z.A,{label:"Describe the style of music you want (e.g., acoustic pop). Suno's models do not recognize artists' names but do understand genres and vibes."})]}),tf?(0,a.jsx)(G.A,{label:"Exclude Styles",checked:eb.enableExcludeStyle,onChange:e=>{eb.setEnableExcludeStyle(e),v.LS.logAudioCreationEvent(!1,e?w.a2.enableNegativeTags:w.a2.disableNegativeTags,eb,ev,{enableExcludeStyle:e})}}):(0,a.jsx)(V.A,{label:"Exclude Styles",tooltipLabel:"Subscribe to exclude styles",onClick:()=>{window.open("/account","_blank"),v.LS.logAudioCreationEvent(!1,w.a2.clickDisabledNegativeTags,eb,ev,{})}})]}),(0,a.jsx)(K.A,{maxLength:j.Ti,value:_.style,resize:!1,customHeight:"h-[130px]",enableExtraMargin:!0,onChange:e=>_.setStyle(e.target.value),placeholder:"Enter style of music",spacedLeftAsset:!0,isScrollable:!1,bgColor:ei,leftAsset:(0,a.jsx)("div",{className:"flex space-x-1 overflow-x-auto mr-4",children:_.recommmendedStyles.map((e,t)=>(0,a.jsx)(Y.A,{style:e,onClick:()=>{em(e,_),v.LS.logAudioCreationEvent(!1,w.a2.useRecommendStyle,_,ev,{recommendStyle:e})}},t))})})]}):(0,a.jsxs)(i.Box,{mx:2,children:[(0,a.jsxs)(d.Stack,{mb:5,children:[(0,a.jsxs)(d.Stack,{direction:"row",alignItems:"alignItems",justifyContent:"space-between",pt:2,children:[(0,a.jsxs)(d.Stack,{direction:"row",alignItems:"alignItems",children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Lyrics"}),(0,a.jsx)(Z.A,{label:"Create random lyrics, write your own, or get some help from AI. Use two verses (8 lines) for best results."})]}),eh?(0,a.jsx)(G.A,{label:"Instrumental",checked:eb.instrumental,onChange:e=>{eb.setInstrumental(e)}}):null]}),(null==ev?void 0:null===(u=ev.flags)||void 0===u?void 0:u["ft-lyrics-model"])?(0,a.jsx)(q.A,{maxLyricsLength:th,lyrics:_.lyrics,setLyrics:_.setLyrics,lyricsInputDisallowed:eN,onLyricsInputInteraction:()=>{eN&&eS()}}):(0,a.jsx)(K.A,{maxLength:th,value:_.lyrics,resize:!0,isScrollable:!0,onChange:e=>{_.setLyrics(e.target.value)},customHeight:"h-[230px]",bgColor:ei,placeholder:_.continueClipId?"Enter additional lyrics to extend the song based on your previous verses... \n\nOnce the extended songs have finished creating, click '...' and Get Whole Song to get the entire completed song.":"Enter your own lyrics or describe a song and click Write About...",onClick:()=>{eN&&eS()},onKeyDown:e=>{eN&&eS(),"Enter"===e.key&&eN&&e.preventDefault()},isReadOnly:eN,cursor:eN?"not-allowed":"text",leftAsset:(0,a.jsx)(et.A,{lyrics:_.lyrics,isLoading:_.isLoadingLyrics,generateLyrics:_.generateLyrics}),paddingBottom:50})]}),(0,a.jsxs)(d.Stack,{direction:"row",alignItems:"alignItems",justifyContent:"space-between",p:0,className:"flex items-center",children:[(0,a.jsxs)(d.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",py:2,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Style of Music"}),(0,a.jsx)(Z.A,{label:"Describe the style of music you want (e.g., acoustic pop). Suno's models do not recognize artists' names but do understand genres and vibes."})]}),tf?(0,a.jsx)(G.A,{label:"Exclude Styles",checked:eb.enableExcludeStyle,onChange:e=>{eb.setEnableExcludeStyle(e),v.LS.logAudioCreationEvent(!1,e?w.a2.enableNegativeTags:w.a2.disableNegativeTags,eb,ev,{enableExcludeStyle:e})}}):(0,a.jsx)(V.A,{label:"Exclude Styles",tooltipLabel:"Subscribe to exclude styles",onClick:()=>{window.open("/account","_blank"),v.LS.logAudioCreationEvent(!1,w.a2.clickDisabledNegativeTags,eb,ev,{})}})]}),(0,a.jsx)(K.A,{maxLength:j.Ti,value:_.style,resize:!1,onChange:e=>_.setStyle(e.target.value),placeholder:"Enter style of music",spacedLeftAsset:!0,enableExtraMargin:!0,isScrollable:!0,bgColor:ei,paddingBottom:44,leftAsset:(0,a.jsx)("div",{className:"flex space-x-1 overflow-x-auto mr-4 custom-scrollbar-transparent",style:{scrollbarWidth:"thin"},children:_.recommmendedStyles.map((e,t)=>(0,a.jsx)(Y.A,{style:e,onClick:()=>{em(e,_),v.LS.logAudioCreationEvent(!1,w.a2.useRecommendStyle,_,ev,{recommendStyle:e})}},t))}),customHeight:"h-[130px]"})]}),eb.enableExcludeStyle&&tf&&(0,a.jsxs)(i.Box,{mx:2,children:[(0,a.jsxs)("div",{className:"font-sans text-[15px] leading-[20px] flex items-center space-x-1 w-fit py-2",children:[(0,a.jsx)("span",{children:"Exclude Styles"}),(0,a.jsx)("span",{className:"inline-block pt-[1px]",children:(0,a.jsx)(Z.A,{label:"Describe the styles of music you want to exclude (e.g., dance pop)."})})]}),(0,a.jsx)(K.A,{maxLength:j.Ti,value:_.negativeTags,resize:!1,onChange:e=>_.setNegativeTags(e.target.value),placeholder:"Enter style of music",spacedLeftAsset:!1,isScrollable:!0,customHeight:"h-[130px]",enableExtraMargin:!0,bgColor:ei})]}),O&&!tr&&(td||!to)&&(0,a.jsx)(ea.A,{}),(null===(f=ev.flags)||void 0===f?void 0:f["voice-persona-proto"])&&(0,a.jsx)(eo,{}),(0,a.jsxs)(i.Box,{m:2,mt:0,children:[(0,a.jsxs)(d.Stack,{direction:"row",alignItems:"alignItems",spacing:1,py:2,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Title"}),(0,a.jsx)(Z.A,{label:"Give your song a title for sharing, discovery and organization."})]}),(0,a.jsx)(J.A,{maxLength:j.m1,value:_.title,onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},onChange:e=>_.setTitle(e.target.value),placeholder:"Enter a title",className:ei&&"bg-".concat(ei),rows:1})]}),"infill"===eC.activeEditTool?(0,a.jsxs)("div",{className:"font-sans text-sm flex flex-row gap-2 justify-start mt-2 ml-4",children:[(0,a.jsx)(G.A,{checked:eb.infillFixDuration,onChange:e=>{eb.infillFixDuration=e,eC.incrementActionIndex(),v.LS.logAudioCreationEvent(!1,w.a2.updateDurationControl,eb,ev,{editTool:eC.activeEditTool,editSessionId:eC.editSessionId,editingClipId:eC.editingClipId,actionIndex:eC.actionIndex,isFixedDuration:e})}})," ","Make same length as selection"," ",(0,a.jsx)(Z.A,{label:"This makes your new sections the same length as your selection. If turned off, your new sections may be shorter or longer than the length of your selection."})]}):null,_.continueClipId?(0,a.jsx)(ep,{clipId:_.continueClipId}):null]}),(0,y.m2)(ev)&&ef&&(0,a.jsx)("div",{className:"",children:(0,a.jsx)(P.A,{editMode:!0})}),(0,a.jsxs)("div",{className:"flex flex-col ".concat(eC.isEditorOpen?"mb-36":eC.isEditSessionActive?"":"mb-20"),children:[ex?(0,a.jsx)("span",{className:"text-sm text-accentPink p-4 font-bold",children:"Go to 'Edit Song Details' and make sure the displayed lyrics match what's being sung."}):null,(0,a.jsxs)(n.Flex,{width:"100%",alignItems:"center",gap:2,p:2,children:[(""!==eb.description||""!==eb.style||""!==eb.lyrics||""!==eb.title||Object.values(e6).some(e=>""!==e))&&!en&&(0,a.jsx)(n.Flex,{justifyContent:"flex-start",children:(0,a.jsx)("button",{onClick:()=>{eb.setStyle(""),eb.setNegativeTags(""),eb.setEnableExcludeStyle(!1),eb.setDescription(""),eb.setTitle(""),eb.setLyrics(""),eb.resetContinueClip(),eb.resetArtistClip(),eb.resetCoverClip(),eb.resetPersona(),e5(e3)},className:"text-[13px] font-sans font-medium text-primary bg-tertiary hover:bg-secondary/20 p-4 rounded-full",children:"Clear"})}),(0,a.jsx)(n.Flex,{className:"create-button",width:""!==eb.description||""!==eb.style||""!==eb.lyrics||""!==eb.title||null!==eb.continueClipId||null!==eb.artistClipId||null!==eb.coverClipId?"95%":"100%",children:(0,a.jsx)(N.A,{onClick:()=>{if(tl&&!ti)e_();else{let e=(0,h.$E)();e.logWebUserEvent({actionName:"GenerateButtonClicked",context:{onebox:!1}}),tu(e)}},text:_.continueClipId?null!==_.infillFromSeconds&&null!==_.infillToSeconds||"infill"===eC.activeEditTool?({infill:"Recreate Section",infill_intro:"Add Intro",infill_outro:"Add Outro"})[eC.activeEditTool]||"Recreate Section":"Extend":"Create",icon:(0,a.jsx)(x.WSU,{className:"fill-primary w-5 h-5"}),isDisabled:!_.coverClipId&&!_.artistClipId&&!_.lyrics&&!_.style||!(_.isContinueValid()||_.isInfillValid()),isLoading:_.isLoading,fullWidth:!0,backgroundImage:eg?"/blue-button-bg.png":"/create-button-background.svg",useV4ButtonStyle:eg})})]}),(null==ev?void 0:ev.isStaff)||(0,y.FJ)(ev)||"infill"!==eC.activeEditTool?null:(0,a.jsxs)("span",{className:"text-lightGray text-sm pt-2 text-center",children:[(0,a.jsx)(m.A,{href:"/account",className:"underline",onClick:e=>{e.preventDefault(),window.open("/account","_blank")},children:"Subscribe"})," ","to enable Replace Section"]})]}),tl&&!ti&&(0,a.jsx)(I.A,{isOpen:eP,onClose:eM,onAccept:ts})]})})},73222:(e,t,l)=>{l.d(t,{A:()=>h});var a=l(95155),i=l(52017),n=l(6798),s=l(63438),o=l(12115),r=l(47650),d=l(39688),c=l(77119),u=l(63808),p=l(78294),m=l(7132),x=l(61932);let h=(0,s.PA)(e=>{var t,l,s,h,f,g;let{state:v,forceModelKey:y,allowedModelNames:b,openPosition:C="bottom",logContext:j={},className:w="",wrapperClassName:N=""}=e,{session:k,clips:A}=(0,c.gy)(),{isOpen:S,onOpen:I,onClose:P}=(0,i.useDisclosure)(),_=(0,o.useRef)(null),M=(0,o.useRef)(null),T=b?k.models.filter(e=>null==b?void 0:b.includes(e.external_key||"")):k.models;(0,n.useOutsideClick)({ref:_,handler:e=>{var t;(null===(t=M.current)||void 0===t?void 0:t.contains(e.target))||P()}});let[E,L]=(0,o.useState)(y||(0,p.R9)(v,A,!1));(0,o.useEffect)(()=>{if(!v.root.session.models)return;let e=(0,p.R9)(v,A,!1);e===E||y||b?b&&(null==b?void 0:b.includes(v.mv))&&L(v.mv):L(e)},[v.mv,v.continueClipId,v.personaClipId,E,v.root.session.models]),(0,o.useEffect)(()=>{y?L(y):T.length>0&&!T.map(e=>e.external_key).includes(E)?L(T[0].external_key||x.Oe):0===T.length&&L(x.Oe)},[y,T]);let O=(e,t)=>{let l=v.mvUserPreference;t.preventDefault(),t.stopPropagation(),L(e),v.setMvUserPreference(e),P(),(0,u.Ay)({actionName:"ChangeAudioModel",context:{...j,modelBefore:l,modelAfter:e}})},R=()=>{S&&!y?P():I()},D=null===(t=M.current)||void 0===t?void 0:t.getBoundingClientRect(),F=D?D.left+(null===(l=window)||void 0===l?void 0:l.scrollX):0,B=null===(s=window)||void 0===s?void 0:s.innerWidth;F+192>B&&(F=B-192);let z={top:D?D.bottom+window.scrollY:0,left:F};return(0,a.jsxs)("div",{className:(0,d.QP)("relative inline-block text-left font-sans flex flex-row-reverse",N),children:[(0,a.jsxs)("div",{"aria-label":"Model Select Dropdown",tabIndex:0,className:(0,d.QP)("inline-flex items-center px-3 py-1 bg-tertiary hover:bg-quaternary text-primary font-medium text-sm rounded-full cursor-pointer select-none z-[".concat(m._8,"]"),-1!==((null===(h=k.models.find(e=>e.external_key===E))||void 0===h?void 0:h.external_key)||"").indexOf("v4")?"text-green-300":"",-1!==((null===(f=k.models.find(e=>e.external_key===E))||void 0===f?void 0:f.external_key)||"").indexOf("auk")?"text-pink-500":"",w),ref:M,onClick:e=>{e.preventDefault(),e.stopPropagation(),R()},onKeyDown:e=>{if("Enter"===e.key)e.preventDefault(),e.stopPropagation(),R();else if("Tab"===e.key&&S){var t;e.preventDefault(),e.stopPropagation();let l=null===(t=_.current)||void 0===t?void 0:t.querySelectorAll('[tabindex]:not([tabindex="-1"]');l&&l[0]&&l[0].focus()}else"Escape"===e.key&&S&&(e.preventDefault(),e.stopPropagation(),R())},children:[(0,a.jsx)("span",{className:"line-clamp-1 break-all",children:(null===(g=k.models.find(e=>e.external_key===E))||void 0===g?void 0:g.name)||"v3.5"}),y?null:(0,a.jsx)("span",{className:"flex-1 flex flex-row-reverse",children:(0,a.jsx)("svg",{className:"ml-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06 0L10 10.93l3.71-3.72a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.23 8.27a.75.75 0 010-1.06z",clipRule:"evenodd"})})})]}),S&&!y&&r.createPortal((0,a.jsx)("div",{className:"absolute w-48 rounded-md shadow-lg bg-tertiary z-[10000] overflow-y-auto h-60 mt-2 border border-vinylBlack-darker",style:"bottom"===C?{top:z.top,left:z.left}:{top:z.top-280,left:z.left},ref:_,children:(0,a.jsx)("div",{className:"py-1",children:T.map(e=>e.model_subtype?null:(0,a.jsxs)("div",{tabIndex:0,"aria-label":"Model Selection: ".concat(e.name),className:"flex items-center justify-between px-3 py-1 text-sm text-secondary cursor-pointer hover:bg-quaternary",onClick:t=>O(e.external_key,t),onKeyDown:t=>{"Enter"===t.key&&O(e.external_key,t)},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium font-sans text-md text-primary",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-secondary opacity-70 font-sans pr-2",children:e.description})]}),e.external_key===E&&(0,a.jsx)("svg",{className:"h-5 w-5 text-secondary",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",style:{minWidth:"16px",minHeight:"16px",maxHeight:"16px"},children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 00-1.414 0L8 12.586 4.707 9.293a1 1 0 00-1.414 1.414l4 4a1 1 0 001.414 0l8-8a1 1 0 000-1.414z",clipRule:"evenodd"})})]},e.external_key))})}),document.body)]})})},74027:(e,t,l)=>{l.d(t,{A:()=>y,g:()=>b});var a=l(95155),i=l(60078),n=l(63438),s=l(12115),o=l(13847),r=l(50649),d=l(63808),c=l(88008),u=l(99428),p=l(4869),m=l(77119),x=l(24962),h=l(74955),f=l(19783),g=l(44081),v=l(60425);let y=(0,n.PA)(e=>{let{imageButtonOnClick:t,activeState:l}=e;return(0,a.jsx)("button",{"aria-label":"Staff Testing: Image to Song",onClick:t,className:"font-sans text-white text-sm font-medium mb-4 px-4 rounded-full shadow-lg hover:bg-primary/30 h-[28px] mt-4 ml-auto mr-4 ".concat(l?"bg-primary/30":"bg-quaternary"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center h-full w-full",children:[(0,a.jsx)("img",{src:"/icons/play-song-card.svg",alt:"Upload",className:"w-3 h-3 mr-1 filter invert brightness-0"}),(0,a.jsx)("span",{className:"whitespace-nowrap text-md",children:"Upload Image"})]})})}),b=(0,n.PA)(e=>{let{state:t,onGenerate:l}=e,{session:n}=(0,m.gy)(),[y,b]=(0,s.useState)(1),{enabled:C}=n.isFeatureAllowed("image-to-song-web-gen"),j=()=>!Object.values(t.imageData).every(e=>null===e),w=(0,p.$l)(n);return(0,a.jsx)(a.Fragment,{children:C?(0,a.jsxs)(i.Stack,{p:2,spacing:0,py:{base:0,md:4},w:"100%",children:[(0,a.jsx)(i.Stack,{direction:"row",alignItems:"alignItems",justifyContent:"space-between",p:2,children:(0,a.jsxs)(i.Stack,{direction:"row",alignItems:"alignItems",spacing:1,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Image to Song"}),(0,a.jsx)(v.A,{label:"Upload up to 3 images to generate a song."})]})}),(0,a.jsxs)(i.Stack,{children:[Array.from({length:y}).map((e,l)=>(0,a.jsx)(o.A,{width:204,height:288,onImageChanged:e=>{t.setImageData(e,l)}},l)),(0,a.jsxs)(h.Ay,{variant:h.Ak.Secondary,onClick:()=>b(y+1),disabled:y>=3,children:["Add another image (Max ",3,")"]})]}),(0,a.jsx)(i.Stack,{direction:"row",alignItems:"alignItems",justifyContent:"space-between",p:2,children:(0,a.jsxs)(i.Stack,{direction:"row",alignItems:"alignItems",spacing:1,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Image Context and Song Style"}),(0,a.jsx)(v.A,{label:"Add names and places to images. Describe the style of music and topic you want."})]})}),(0,a.jsx)(i.Stack,{flex:"1",direction:["row","row","column"],alignItems:["stretch","stretch","stretch"],px:2,children:(0,a.jsx)(i.Stack,{direction:"column",flex:"1",spacing:0,className:"simple-prompt-textarea",children:(0,a.jsx)(f.A,{maxLength:200,value:t.description,resize:!0,onChange:e=>t.setDescription(e.target.value),placeholder:t.placeholder,isScrollable:!0,customHeight:"h-[100px]"})})}),(0,a.jsxs)("div",{className:"px-2 py-6 mb-20 create-button hidden md:flex flex flex-col",children:[(0,a.jsx)(g.A,{isDisabled:n.isOutOfCredits,tooltipLabel:w,onClick:()=>{n.isOutOfCredits&&(window.open("/account","_blank"),c.LS.logAudioCreationEvent(!1,u.a2.redirectToAccountPage,t,n,{}),c.LS.logWebPageEvent({userId:n.userId||"",eventType:c.Y_.CLICK,element:"create_page",secondaryElement:"ooc_image_to_song_create_button",entityId:n.user.handle,entityType:"inviter_handle",pageUrl:window.location.pathname}))},children:(0,a.jsx)(x.A,{onClick:()=>{let e=(0,d.$E)();if(e.logWebUserEvent({actionName:"GenerateFromImageClicked"}),n.isOutOfCredits){e.logWebUserEvent({actionName:"GenerationStartError",principalObjectType:"error_type",principalObjectValue:"Insufficient Credits"}),window.open("/account","_blank"),c.LS.logAudioCreationEvent(!1,u.a2.clickDisabledCreateSongWhenOutOfCredits,t,n,{}),c.LS.logAudioCreationEvent(!1,u.a2.redirectToAccountPage,t,n,{}),c.LS.logWebPageEvent({userId:n.userId||"",eventType:c.Y_.CLICK,element:"create_page",secondaryElement:"ooc_image_to_song_create_button",entityId:n.user.handle,entityType:"inviter_handle",pageUrl:window.location.pathname});return}t.setGenerationType("IMAGE"),l(t,e)},text:"Extract",icon:(0,a.jsx)(r.WSU,{className:"fill-primary w-5 h-5"}),isDisabled:!j(),isLoading:t.isLoading,label:"Extract",fullWidth:!0})}),!j()&&(0,a.jsx)("div",{className:"font-sans text-sm",children:"* Please upload at least one image."})]})]}):(0,a.jsx)(i.Stack,{p:2,spacing:0,py:{base:0,md:4},w:"100%",children:"Image to Song is not available. Please refresh the page."})})})},75778:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(12115),i=l(61932);let n=function(e){var t;let[l,n]=(0,a.useState)(e?(0,i.p8)(e):""),[s,o]=(0,a.useState)(""),[r,d]=(0,a.useState)(null==e?void 0:e.image_url),[c,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)([]),[v,y]=(0,a.useState)(null),[b,C]=(0,a.useState)(!1),[j,w]=(0,a.useState)([]),[N,k]=(0,a.useState)(null),[A,S]=(0,a.useState)(e),[I,P]=(0,a.useState)((null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t.prompt)||""),[_,M]=(0,a.useState)((null==e?void 0:e.caption)||void 0),[T,E]=(0,a.useState)(!1),[L,O]=(0,a.useState)(null);return{editedTitle:l,setEditedTitle:n,editedImagePrompt:s,setEditedImagePrompt:o,currentImage:r,setCurrentImage:d,isLoading:c,setIsLoading:u,isGenerating:x,setIsGenerating:h,addedImages:f,setAddedImages:g,isAddingImage:p,setIsAddingImage:m,addingImageDataURL:v,setAddingImageDataURL:y,addingImageChanged:b,setAddingImageChanged:C,continuedClips:j,setContinuedClips:w,initialImageURL:N,setInitialImageURL:k,currentActiveClip:A,setCurrentActiveClip:S,currentLyrics:I,setCurrentLyrics:P,currentCaption:_,setCurrentCaption:M,isAddingVideo:T,setIsAddingVideo:E,selectedVideo:L,setSelectedVideo:O}}},76143:(e,t,l)=>{l.d(t,{A:()=>D});var a=l(95155),i=l(59108),n=l(58670),s=l(77700),o=l(20338),r=l(60078),d=l(23006),c=l(3740),u=l(274),p=l(52596),m=l(63438),x=l(35695),h=l(12115),f=l(13648),g=l(55253),v=l(48420),y=l(76956),b=l(71921),C=l(65015),j=l(22430),w=l(79617),N=l(50649),k=l(78294),A=l(6411),S=l(61932),I=l(77119),P=l(7132),_=l(10573),M=l(97942),T=l(52512),E=l(26811),L=l(99082),O=l(48704),R=l(35540);let D=(0,m.PA)(e=>{var t,l,m,D,F,B,z,U,H,W,V,G,Y,q,Q,K,J,X,Z,$,ee,et,el,ea,ei,en,es;let{clip:eo,rowKey:er,onClick:ed,onPlay:ec,onTriggerEditMode:eu,onRemoveFromProject:ep,onRemoveFromPlaylist:em,onPinClipToProject:ex,trendingMode:eh=!1,showStats:ef=!1,showTags:eg=!0,showModelTagOnly:ev=!1,showActions:ey=!0,expanded:eb=!1,showUser:eC=!1,index:ej,playlistId:ew,contextId:eN,contextType:ek,isFromSongRow:eA=!0,isCreatePage:eS=!1,isLoading:eI=!1,condensed:eP=!1,isContestClip:e_=!1,mini:eM=!1,enablePin:eT=!1,rankingMode:eE=!1,showTopTrackIcon:eL=!1,showDislike:eO=!1,ref:eR,sectionName:eD}=e,{playbar:eF,genForm:eB,queue:ez,session:eU,menus:eH,clips:eW}=(0,I.gy)(),eV=!ez.currentPlayingSongIsRemoved&&(ej===ez.currentIndex||ez.contextType===A.Lp.FEATURED_FEED||void 0===ej)&&ez.contextType===ek&&ez.contextId===eN&&(null===(t=eF.clip)||void 0===t?void 0:t.id)===(null==eo?void 0:eo.id),[eG,eY]=(0,h.useState)(!1),eq=eI||(null==eo?void 0:eo.status)==="queued"||(null==eo?void 0:eo.status)==="submitted",eQ=eB.selectedClip,eK=(0,h.useContext)(v.pc),eJ=(null==eQ?void 0:null===(m=eQ.metadata)||void 0===m?void 0:null===(l=m.history)||void 0===l?void 0:l.map(e=>(null==e?void 0:e.id)||e).includes(eo.id))||(null==eQ?void 0:null===(F=eQ.metadata)||void 0===F?void 0:null===(D=F.concat_history)||void 0===D?void 0:D.map(e=>(null==e?void 0:e.id)||e).includes(eo.id))||(null==eQ?void 0:null===(z=eQ.metadata)||void 0===z?void 0:null===(B=z.history)||void 0===B?void 0:B.map(e=>(null==e?void 0:e.id)||e).includes("m_".concat(eo.id)))||(null==eQ?void 0:null===(H=eQ.metadata)||void 0===H?void 0:null===(U=H.concat_history)||void 0===U?void 0:U.map(e=>(null==e?void 0:e.id)||e).includes("m_".concat(eo.id)))||(null==eQ?void 0:null===(W=eQ.metadata)||void 0===W?void 0:W.stem_from_id)===(null==eo?void 0:eo.id),eX=(0,h.useRef)(null),eZ=new Date(eo.created_at),e$=(0,x.usePathname)(),[e0,e1]=(0,h.useState)(!1),[e3,e6]=(0,h.useState)(!1),[e5,e2]=(0,h.useState)(!1),e4=(0,R.AA)(eo);(0,h.useEffect)(()=>{var e;(null===(e=eF.clip)||void 0===e?void 0:e.id)===eo.id&&eF.isPlaying&&!e5&&(e5||e2(!0),eF.addToRecentlyPlayedIds(eo.id))},[null===(V=eF.clip)||void 0===V?void 0:V.id,eF.isPlaying]);let e8=[...(0,R.sE)((null===(G=eo.metadata)||void 0===G?void 0:G.tags)||""),...(0,R.Du)((0,R.sE)((null===(Y=eo.metadata)||void 0===Y?void 0:Y.negative_tags)||""))],e7=!(0,S.Lx)({handle:(null==eo?void 0:eo.handle)||""}),e9=Date.now(),te={width:eM?"32px":"56px",height:eM?"42px":"77px"},{pressProps:tt}=(0,f.d)({onPress:ed&&(e=>{ed(e)})}),{pressProps:tl}=(0,f.d)({onPress:ec&&(()=>{e2(!0),ec()})}),ta=(0,h.useMemo)(()=>({onPointerDownCapture:e=>{e.stopPropagation()}}),[]),ti=(0,h.useCallback)(e=>(0,a.jsx)(C.A,{...ta,...e}),[ta]);return(0,k.gz)(eo)||eW.isNotInterested(eo.id)?null:(0,a.jsxs)(i.Flex,{ref:eR,tabIndex:0,role:"button",sx:{"[data-selected] &":{background:"radial-gradient(3010.06% 152.11% at 27.33% 38.98%, rgba(81, 78, 78, 0.43) 0%, rgba(45, 44, 44, 0.57) 100%)"}},onMouseEnter:()=>{eY(!0)},onMouseLeave:()=>eY(!1),alignItems:["flex-start","flex-start","flex-start","center"],...tt,onDoubleClick:()=>{e2(!0),ec()},onPointerDown:e=>{let t=eK.isMac;(2===e.button||t&&0===e.button&&e.ctrlKey)&&e.stopPropagation()},onContextMenu:e=>{e6(!0),eH.setSongDropdownTriggeredAt({x:e.clientX,y:e.clientY}),requestAnimationFrame(()=>{e6(!1),(er||(null==eo?void 0:eo.id))&&![...eH.selected||[]].includes(er||(null==eo?void 0:eo.id))&&(eH.setSelected(new Set([er||(null==eo?void 0:eo.id)])),eo&&eH.setCurrentClip(eo))}),e.stopPropagation(),e.preventDefault()},userSelect:"none",cursor:"pointer",pr:eM?1:[3,6,6],ml:eM?0:[3,6,6],flexDirection:["column","column","row","row"],py:1,pl:eM||eP?1:[5,3,1],_hover:{background:(0,S.VA)("white",.03)},background:eJ?(0,S.VA)("white",.03):void 0,"data-clip-id":null==eo?void 0:eo.id,"data-testid":"song-row",children:[(0,a.jsxs)("div",{className:"relative flex items-center w-full",children:[0===eo.play_count&&0===((null===(q=eo.reaction)||void 0===q?void 0:q.play_count)||0)&&!eq&&!e5&&(null===(Q=eU.user)||void 0===Q?void 0:Q.id)===eo.user_id&&!eF.recentlyPlayedIds.includes(eo.id)&&!eM&&!ew&&(0,a.jsx)("div",{className:"absolute md:-left-4 -left-3 z-[".concat(P.TV,"] w-2 h-2 rounded-full bg-accentPink")}),(0,a.jsxs)(i.Flex,{flexDirection:"row",alignItems:"center",flex:"1",opacity:eq?.6:1,children:[void 0!==ej&&eE&&(0,a.jsx)("div",{className:"flex flex-col items-center mr-[14px]",children:ej>=3?(0,a.jsx)(n.Text,{fontSize:"lg",fontWeight:"bold",width:"50px",textAlign:"center",color:"whiteAlpha.800",className:"font-mono",children:ej+1}):(0,a.jsx)(N.pw5,{className:(0,p.A)("h-[30px] w-[50px]",{"text-[#ffd700]":0===ej,"text-[#c0c0c0]":1===ej,"text-[#cd7f32]":2===ej}),"aria-label":"".concat(0===ej?"Gold":1===ej?"Silver":"Bronze"," crown")})}),(0,a.jsxs)(s.Box,{position:"relative",display:"flex",...tl,"aria-label":"Play Song",flexShrink:"0",width:te.width,height:te.height,"min-width":te.width,"min-height":te.height,"data-testid":"song-row-play-button",children:[(null==eo?void 0:eo.image_url)?(0,a.jsxs)("div",{className:"relative",children:[!eM&&(0,a.jsxs)("span",{className:"flex absolute bottom-[2px] items-center right-[2px] text-[11px] font-mono bg-background-primary/70 text-foreground-primary font-bold px-[2px] rounded-sm",children:[e4&&(e4==R.sx.VIDEO?(0,a.jsx)(N.npA,{className:"mr-1 w-3 h-3"}):(0,a.jsx)(N.xfq,{className:"mr-1 w-3 h-3"})),(0,R.a3)(null===(K=eo.metadata)||void 0===K?void 0:K.duration,(0,R.qM)(eo))]}),void 0!==eW.recentCompleteUpsampleClipIds[eo.id]&&!eM&&e9-(eW.recentCompleteUpsampleClipIds[eo.id]||0)<P.EX?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.Sup,{className:"fill-green-300 absolute top-0 left-0 w-4 h-4 animate-[sparklePop_1.5s_ease-out_infinite]"}),(0,a.jsx)(N.Sup,{className:"fill-green-300 absolute top-0 right-0 w-3 h-3  animate-[sparklePop_1s_ease-out_infinite]"}),(0,a.jsx)(N.Sup,{className:"fill-green-300 absolute bottom-0 left-0 w-4 h-4 animate-[sparklePop_0.8s_ease-out_infinite]"}),(0,a.jsx)(N.Sup,{className:"fill-green-300 absolute bottom-0 right-0 w-5 h-5 animate-[sparklePop_2.1s_ease-out_infinite]"})]}):null,(0,a.jsx)(_.A,{alt:"Song Image",width:te.width,height:te.height,borderRadius:"4px",src:null==eo?void 0:eo.image_url,objectFit:"cover","flex-shrink":"0",border:eV?eM?"1px solid white":"2px solid white":void 0})]}):(0,a.jsx)(o.Skeleton,{width:te.width,height:te.height,startColor:"#252020",endColor:"#363030"}),eq?(0,a.jsx)(i.Flex,{width:te.width,height:te.height,position:"absolute",top:0,left:0,alignItems:"center",justifyContent:"center","data-testid":"loading-clip",children:(0,a.jsx)(M.A,{className:"w-8 h-8"})}):(0,a.jsx)("div",{"aria-label":eF.isPlaying?"Pause":"Play",onMouseEnter:()=>e1(!0),onMouseLeave:()=>e1(!1),className:(0,p.A)("absolute inset-0 flex justify-center items-center text-white transition-colors duration-200",{"opacity-100":eV||eG,"opacity-0":!(eV||eG)}),children:eV&&eF.isPlaying?e0?(0,a.jsx)(N.E$n,{className:eM?"w-4 h-4":"w-6 h-6"}):(0,a.jsx)(y.vv,{className:eM?"w-4 h-4":"w-6 h-6"}):(0,a.jsx)(N.udU,{className:eM?"w-4 h-4":"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:(0,p.A)("flex flex-1",{"flex-row":eM,"flex-col @3xl/rows:flex-row":!eM&&eS,"flex-col xl:flex-row":!eM&&!eS}),children:[(0,a.jsx)(r.Stack,{flex:"1",ml:eM?2:5,pb:1,spacing:0,justifyContent:["flex-start","flex-start","center"],children:(null==eo?void 0:eo.status)==="submitted"?(0,a.jsx)(d.SkeletonText,{py:1,noOfLines:2,startColor:"#252020",endColor:"#363030"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-sans text-base font-medium line-clamp-1 break-all text-foreground-primary",title:(0,S.p8)(eo),children:"streaming"===eo.status||"complete"===eo.status?(0,a.jsx)(C.A,{...ta,href:"/song/".concat(null==eo?void 0:eo.id,"/"),children:(0,a.jsx)("span",{className:"hover:underline cursor-pointer",children:(0,S.p8)(eo)})}):(0,S.p8)(eo)}),"/feed"===e$&&(0,a.jsx)("span",{className:"font-sans text-xs text-lightGray",children:"\xb7 "+R.eP.format(eZ,"mini")+" ago"}),eL&&(0,a.jsx)(w.b4,{}),eg||ev?(0,a.jsxs)(r.Stack,{direction:"row",gap:2,children:[(0,a.jsx)(w.Ay,{className:"mb-1",clip:eo,variant:(null===(J=eo.major_model_version)||void 0===J?void 0:J.toLowerCase())==="v4"?"green":"default"}),ev?null:(0,a.jsxs)(a.Fragment,{children:[eo.is_trashed?(0,a.jsx)(w.vw,{children:(0,a.jsx)(c.Icon,{as:N.ucK})}):null,(null===(X=eo.metadata)||void 0===X?void 0:X.history)&&!(null===(Z=eo.metadata)||void 0===Z?void 0:Z.infill)?(0,a.jsxs)(w.vw,{className:"part-tag",children:[(0,a.jsx)(c.Icon,{as:N.PWG}),(0,a.jsxs)(n.Text,{ml:1,whiteSpace:"nowrap",children:["Part ",eo.metadata.history.length+1]})]}):null,(null===($=eo.metadata)||void 0===$?void 0:$.infill)?(0,a.jsxs)(w.vw,{children:[(0,a.jsx)(c.Icon,{as:N.PWG}),(0,a.jsx)(n.Text,{ml:1,children:"Section"})]}):null,["concat","concat_infilling"].includes((null===(ee=eo.metadata)||void 0===ee?void 0:ee.type)||"")?(0,a.jsxs)(w.vw,{children:[(0,a.jsx)(c.Icon,{as:N.kib}),(0,a.jsx)(n.Text,{ml:1,whiteSpace:"nowrap",children:"Full Song"})]}):null,(null===(et=eo.metadata)||void 0===et?void 0:et.refund_credits)?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u.Tooltip,{label:"Generation was too short, so no credits were used. If generations are silent and you continued a clip, that clip probably ended in silence. You may want to try continuing from a different clip.",placement:"auto-start",background:P.TJ,backdropFilter:"blur(40px)",rounded:"md",color:"#ffffff",padding:"10px",children:(0,a.jsx)(w.vw,{ref:eX,children:"Credits Refunded"})})}):null,["edit_crop","edit_fade","edit_speed"].includes((null===(el=eo.metadata)||void 0===el?void 0:el.type)||"")&&(null===(ea=eU.flags)||void 0===ea?void 0:ea["edit-mode-ui"])?(0,a.jsxs)(w.vw,{children:[(0,a.jsx)(c.Icon,{as:g.uO9}),(0,a.jsx)(n.Text,{ml:1,children:(null===(ei=eo.metadata)||void 0===ei?void 0:ei.type)==="edit_crop"?"Crop":(null===(en=eo.metadata)||void 0===en?void 0:en.type)==="edit_fade"?"Fade":"Speed"})]}):null]})]}):null]}),(0,a.jsxs)("div",{className:"flex",children:[eC&&(0,a.jsxs)("div",{className:"font-sans text-sm font-medium flex text-foreground-primary items-center",children:[(0,a.jsxs)("div",{className:"relative mr-2",children:[(0,a.jsx)(b.A,{className:"h-4 w-4",src:eo.avatar_image_url||null,imageSize:P.M_,alt:"User avatar"}),(0,S.aV)({handle:eo.handle||""})&&(0,a.jsx)(L.A,{className:"absolute w-2 h-2 end-0 bottom-0 drop-shadow-avatarOverlay"})]}),(0,a.jsx)("div",{className:"line-clamp-1 flex-1 hover:underline max-w-full break-all",children:(0,a.jsx)(C.A,{...ta,href:"/@".concat(eo.handle),children:eo.display_name||"Untitled User"})})]}),eo.persona&&!eM&&(0,a.jsx)("div",{className:"flex items-center ".concat(eC?"ml-2":""),children:(0,a.jsx)(E.A,{persona:eo.persona,showAvatar:!0,showUser:!1,size:"small"})})]}),e8.length||e7?(0,a.jsx)(r.Stack,{direction:"row",children:(0,a.jsx)(T.A,{className:"text-foreground-primary text-xs flex-nowrap line-clamp-1 pr-2",tags:e8,title:eo.metadata.tags||"",renderTag:ti})}):null]})}),ey&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Flex,{px:[0],display:["flex","none","none"],ml:eM?2:5,children:(0,a.jsx)(O.A,{trendingMode:eh,showStats:ef,clip:eo,onPinClipToProject:ex,enablePin:eT,mini:eM,buttonActive:!1,sectionName:eD})}),(0,a.jsx)(i.Flex,{px:[0],display:["none","flex","flex"],children:(0,a.jsx)(j.A,{rowKey:er,trendingMode:eh,showStats:ef,clip:eo,isFromSongRow:eA,onTriggerEditMode:eu,onRemoveFromProject:ep,onRemoveFromPlaylist:em,isDropdownTriggered:e3,isContestClip:e_,className:eA&&!eM?"ml-4":void 0,onPinClipToProject:ex,enablePin:eT,mini:eM,onPlayCountClick:ed,showDislike:eO,sectionName:eD})})]})]})]})]}),eb&&eB.showLyrics?(0,a.jsx)(n.Text,{display:["flex","flex","flex","none"],fontSize:"xs",whiteSpace:"pre-wrap",children:null===(es=eo.metadata)||void 0===es?void 0:es.prompt}):null]})})},76898:e=>{e.exports=JSON.parse('[{"id":"Person","title":"Let\'s make a song to celebrate a special person in your life","buttonTitle":"Person","description":"Make a song about your mom, partner, best friend, or anyone else in your life.","content":["I\'m celebrating ",{"type":"input","field":"personName","placeholder":"NAME OF PERSON","maxLength":100}," my ",{"type":"input","field":"personRelationship","placeholder":"RELATIONSHIP TO PERSON","maxLength":100},".","My favorite thing about them is ",{"type":"input","field":"personFavoriteThing","placeholder":"FAVORITE THING ABOUT THEM","maxLength":100},","," and the funniest thing about them is ",{"type":"input","field":"personFunniestThing","placeholder":"FUNNIEST THING ABOUT THEM","maxLength":100},".","Their favorite genre of music is ",{"type":"input","field":"personGenre","placeholder":"GENRE","maxLength":100},"."],"template":"I\'m celebrating {personName} my {personRelationship}. My favorite thing about them is {personFavoriteThing}, and the funniest thing about them is {personFunniestThing}. Please write the song in {personGenre} genre."},{"id":"SpecialOccasions","title":"Let\'s make a song to celebrate a special occasion!","buttonTitle":"Special Occasions","description":"Make a song to celebrate a birthday, holiday, or other special life events.","content":["I\'m celebrating ",{"type":"input","field":"specialOccasionTitleOccasion","placeholder":"TITLE OF SPECIAL OCCASION","maxLength":125}," with/for ",{"type":"input","field":"specialOccasionName","placeholder":"NAME OF RECIPIENT","maxLength":125},". ","My favorite part about this day is ",{"type":"input","field":"specialOccasionFavoritePart","placeholder":"FAVORITE PART OF OCCASION","maxLength":125},", ","and my favorite genre of music is ",{"type":"input","field":"specialOccasionFavoriteGenre","placeholder":"GENRE OF MUSIC","maxLength":125},"."],"template":"I\'m celebrating {specialOccasionTitleOccasion} with/for {specialOccasionName}. My favorite part about this day is {specialOccasionFavoritePart} and my favorite genre of music is {specialOccasionFavoriteGenre}."},{"id":"Moods","title":"Let\'s make a song to match your mood","buttonTitle":"Moods","description":"Make a song to chill to, get hype to, or any vibe you want to feel.","content":["I\'m currently feeling ",{"type":"input","field":"moodsMood","placeholder":"MOOD","maxLength":166}," and I want to feel ",{"type":"input","field":"moodsDesiredMood","placeholder":"YOUR DESIRED MOOD","maxLength":166},".","My favorite genre of music is ",{"type":"input","field":"moodsGenre","placeholder":"GENRE","maxLength":166},"."],"template":"I\'m currently feeling {moodsMood} and I want to feel {moodsDesiredMood}. My favorite genre of music is {moodsGenre}. Please write the song in {moodsGenre} style."},{"id":"Activity","title":"Let\'s make a song to soundtrack your activity","buttonTitle":"Activity","description":"Make a song to jam to at your next group hangout or party.","content":["I\'m going to ",{"type":"input","field":"activityActivity","placeholder":"ACTIVITY","maxLength":125}," with ",{"type":"input","field":"activityPerson","placeholder":"PERSON","maxLength":125},".","The vibes we want to feel are ",{"type":"input","field":"activityDesiredMood","placeholder":"DESIRED MOOD","maxLength":125}," and our favorite genre of music is ",{"type":"input","field":"activityGenre","placeholder":"GENRE","maxLength":125},"."],"template":"I\'m going to {activityActivity} with {activityPerson}. The vibes we want to feel are {activityDesiredMood} and our favorite genre of music is {activityGenre}. Please write the song in {activityGenre} style."},{"id":"Greeting","title":"Let\'s make a song to give someone in your life a special greeting","buttonTitle":"Greeting","description":"Make a song to say thank you, congratulations, or get well soon.","content":["I\'m saying ",{"type":"input","field":"greetingGreeting","placeholder":"GREETING","maxLength":125}," to ",{"type":"input","field":"greetingName","placeholder":"NAME OF PERSON","maxLength":125},".","This person is special to me because ",{"type":"input","field":"greetingThing","placeholder":"THING YOU LOVE ABOUT THEM","maxLength":125},".","Their favorite genre of music is ",{"type":"input","field":"greetingGenre","placeholder":"GENRE","maxLength":125},"."],"template":"I\'m saying {greetingGreeting} to {greetingName}. This person is special to me because {greetingThing}. Please write the song in {greetingGenre} genre."},{"id":"Vacation","title":"Let\'s make a song to get excited for your upcoming trip","buttonTitle":"Vacation","description":"Make a song to get excited for your next fun trip.","content":["I\'m traveling to ",{"type":"input","field":"vacationPlace","placeholder":"NAME OF PLACE","maxLength":100}," in/on ",{"type":"input","field":"vacationDate","placeholder":"WHEN YOU WILL TRAVEL THERE","maxLength":100},".","When I get there, I\'m most excited to see ",{"type":"input","field":"vacationAttraction","placeholder":"NAME OF ATTRACTION","maxLength":100},","," eat ",{"type":"input","field":"vacationFood","placeholder":"NAME OF FOOD","maxLength":100},","," and try ",{"type":"input","field":"vacationActivity","placeholder":"ACTIVITY","maxLength":100},"."],"template":"I\'m traveling to {vacationPlace} when {vacationDate}. When I get there, I\'m most excited to see {vacationAttraction}, eat {vacationFood}, and try {vacationActivity}. Write a song about this, please."},{"id":"Scrapbook","title":"Let\'s make a song to commemorate your special memory","buttonTitle":"Scrapbook","description":"Make a song to commemorate your most treasured memories.","content":["I\'m celebrating the time that ",{"type":"input","field":"scrapbookPerson","placeholder":"NAME OF PERSON","maxLength":125}," ",{"type":"input","field":"scrapbookAction","placeholder":"WHAT THEY DID","maxLength":125},".","This memory is special because ",{"type":"input","field":"scrapbookReason","placeholder":"REASON","maxLength":125},".","Their favorite genre of music is ",{"type":"input","field":"scrapbookGenre","placeholder":"GENRE","maxLength":125},"."],"template":"I\'m celebrating the time that {scrapbookPerson} {scrapbookAction}. This memory is special because {scrapbookReason}. Their favorite genre of music is {scrapbookGenre}, write the song in this style."},{"id":"Pet","title":"Let\'s make a song to celebrate your pet and how they make your life better","buttonTitle":"Pet","description":"Make a song to celebrate how cute and quirky your pet is.","content":["My pet\'s name is ",{"type":"input","field":"petName","placeholder":"NAME OF PET","maxLength":100}," and they are a ",{"type":"input","field":"petType","placeholder":"TYPE OF PET","maxLength":100},".","They are ",{"type":"input","field":"petPhysical","placeholder":"PHYSICAL APPEARANCE","maxLength":100},","," and they always make me smile because ",{"type":"input","field":"petSmile","placeholder":"THING YOU LOVE ABOUT THEM","maxLength":100},".","If they listened to music, their favorite genre would be ",{"type":"input","field":"petGenre","placeholder":"GENRE","maxLength":100},"."],"template":"Write a song about my pet, {petName} which is a {petType}. They are a {petType}. I love their {petPhysical} and {petSmile}. Make the song in the genre {petGenre}."}]')},77478:(e,t,l)=>{l.d(t,{MobileBannerProvider:()=>s,a:()=>o});var a=l(95155),i=l(12115);let n=(0,i.createContext)({isBannerVisible:!1,setIsBannerVisible:()=>{}}),s=e=>{let{children:t}=e,[l,s]=(0,i.useState)(!1);return(0,a.jsx)(n.Provider,{value:{isBannerVisible:l,setIsBannerVisible:s},children:t})},o=()=>(0,i.useContext)(n)},78131:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(95155),i=l(63438),n=l(12115);let s=(0,i.PA)(e=>{let{state:t,setConfiguration:l}=e,[i,s]=(0,n.useState)(t.configurations),o=(e,t)=>{s(l=>({...l,[e]:t}))},r=(e,t)=>{if(""===t.trim()){s(t=>{let l={...t};return delete l[e],l}),l(e,null);return}l(e,t.trim())};return(0,a.jsx)("div",{className:"font-sans",children:(0,a.jsx)("div",{className:"flex flex-row gap-2 flex-wrap pt-2",children:Object.keys(t.getAdvancedParams()||{}).map(e=>(0,a.jsx)("input",{className:"p-2 font-sans text-sm bg-tertiary border border-quaternary rounded-lg text-primary w-[134px]",placeholder:e,value:i[e]||"",onChange:t=>o(e,t.target.value),onBlur:t=>r(e,t.target.value)},e))})})})},79376:(e,t,l)=>{l.d(t,{c:()=>s});var a=l(95155),i=l(73502),n=l(39688);let s=e=>{let{label:t,value:l,onChange:s,onChangeEnd:o,labelClassName:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,n.QP)("w-fit whitespace-nowrap",r||""),children:t}),(0,a.jsx)("div",{className:"w-full h-auto flex-1 flex flex-row-reverse",children:(0,a.jsx)(i.Ap,{"aria-label":t,defaultValue:l,className:"w-[280px]",onChange:s,onChangeEnd:o,children:(0,a.jsx)(i.hB,{className:"relative w-full h-2 bg-background-fog-dense rounded-full cursor-pointer",children:e=>{let{state:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute h-2 rounded-full bg-foreground-secondary",style:{width:100*t.getThumbPercent(0)+"%"}}),(0,a.jsx)(i.OQ,{className:"w-4 h-4 bg-primary rounded-full shadow absolute top-1 cursor-pointer"})]})}})})})]})}},79801:(e,t,l)=>{l.d(t,{A:()=>v,m:()=>g});var a=l(95155),i=l(79175),n=l(26418),s=l(33636),o=l(46391),r=l(63438),d=l(12115),c=l(74955),u=l(57851),p=l(82961),m=(l(56518),l(15307)),x=l(50649),h=l(63808),f=l(7132);let g=(0,r.PA)(e=>{var t;let{clipId:l,editedTitle:r,setEditedTitle:g,currentActiveClip:v,currentImage:y,setIsAddingImage:b,audioUploadClipMetadata:C,currentLyrics:j,setCurrentLyrics:w,currentCaption:N,setCurrentCaption:k,showLyricsTextarea:A=!0,selectedVideo:S,setIsAddingVideo:I,uploadState:P,hideDisplayedLyrics:_=!1,children:M}=e,T=(0,o.useStatsigClient)(),E=T.checkGate("web-captions"),L=T.checkGate("web-video-cover-upload");return(0,d.useEffect)(()=>{var e;w&&w((null==v?void 0:null===(e=v.metadata)||void 0===e?void 0:e.prompt)||"")},[null==v?void 0:null===(t=v.metadata)||void 0===t?void 0:t.prompt]),(0,d.useEffect)(()=>{k&&k((null==v?void 0:v.caption)||void 0)},[null==v?void 0:v.caption]),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row align-start gap-4",children:[((null==v?void 0:v.status)==="complete"||C)&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 min-w-40",children:[(0,a.jsx)(i.FormLabel,{fontFamily:"Neue Montreal",alignSelf:"flex-start",mb:1,children:"Cover Art"}),(0,a.jsx)("div",{className:"aspect-[9/16] overflow-hidden rounded-lg",style:{height:p.Zs},children:S||(null==v?void 0:v.video_cover_url)?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("video",{src:S?URL.createObjectURL(S):(null==v?void 0:v.video_cover_url)||"",controls:!0,style:{width:p.wm,height:p.Zs,objectFit:"cover"},controlsList:"nodownload nofullscreen noremoteplayback"}),(null==P?void 0:P.isUploading)&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center text-white",children:(0,a.jsx)("p",{children:"Uploading..."})}),(null==P?void 0:P.isProcessing)&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center text-white",children:(0,a.jsx)("p",{children:"Processing..."})})]}):(0,a.jsx)(u.A,{className:"w-full h-full object-cover",alt:"",src:y||void 0})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsx)(c.Ay,{onClick:()=>{b(!0),(0,h.Ay)({actionName:"SongEditCoverArtClicked",principalObjectType:"song",principalObjectValue:l,context:{clipId:l,mediaType:"image"}})},icon:x.urm,className:"w-full",children:"Edit Photo"}),L&&(0,a.jsx)(c.Ay,{onClick:()=>{null==I||I(!0),(0,h.Ay)({actionName:"SongEditCoverArtClicked",principalObjectType:"song",principalObjectValue:l,context:{clipId:l,mediaType:"video"}})},icon:x.DqI,className:"w-full",children:"Upload a Video"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,a.jsxs)(n.FormControl,{mb:4,children:[(0,a.jsx)(i.FormLabel,{fontFamily:"Neue Montreal",children:"Title"}),(0,a.jsx)(s.Input,{value:r||"",fontFamily:"Neue Montreal",maxLength:f.m1,onChange:e=>g(e.target.value),_focus:{border:"solid",borderWidth:"0.5px",borderColor:"#FAF7F5",boxShadow:"0 0 0 0.5px #FAF7F5"}})]}),E&&(0,a.jsxs)(n.FormControl,{mb:4,children:[(0,a.jsx)(i.FormLabel,{fontFamily:"Neue Montreal",children:(0,a.jsxs)("span",{className:"flex items-center gap-[3px]",children:["Caption",!1]})}),(0,a.jsx)(m.A,{minRows:L?2:1,maxRows:L?2:1,maxLength:500,value:N||"",resize:!0,onChange:e=>{let t=e.target.value.replace(/\n/g,"");null==k||k(t)},onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},placeholder:"Add caption"})]}),((null==v?void 0:v.status)==="complete"||C)&&A&&!_&&(0,a.jsxs)(n.FormControl,{mb:4,children:[(0,a.jsx)(i.FormLabel,{fontFamily:"Neue Montreal",children:"Displayed Lyrics"}),(0,a.jsx)(m.A,{minRows:L?5:4,maxRows:L?5:4,maxLength:7500,value:j,resize:!0,onChange:e=>w(e.target.value),placeholder:"Add lyrics"})]}),M||null]})]})}),v=g},80360:(e,t,l)=>{l.d(t,{Ay:()=>b});var a=l(95155),i=l(5643),n=l(33636),s=l(43508),o=l(49174),r=l(63438),d=l(77119),c=l(74955),u=l(59041),p=l(13847),m=l(82961),x=l(97942),h=l(50649),f=l(63808),g=l(88008),v=l(4869);let y=(0,r.PA)(e=>{var t;let{initialImageURL:l,setAddingImageDataURL:r,addingImageDataURL:u,addingImageChanged:h,setAddingImageChanged:y,editedImagePrompt:b,setEditedImagePrompt:C,setInitialImageURL:j,isGenerating:w,setIsGenerating:N,setIsAddingImage:k,setAddedImages:A,setCurrentImage:S,addedImages:I}=e,{session:P,library:_}=(0,d.gy)(),M=(null===(t=_.activeClip)||void 0===t?void 0:t.id)||"";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.ModalBody,{overflowY:"auto",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 shrink-0",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-4",children:[(0,a.jsx)("div",{className:"mx-auto shrink-0",children:(0,a.jsx)(p.A,{className:"w-full",width:Math.max(m.wm,m.Zs),height:Math.max(m.wm,m.Zs),style:{width:m.wm,height:m.Zs},initialImageURL:l||void 0,onImageChanged:e=>{r(e),y(!0),(0,f.Ay)({actionName:"SongEditCoverArtUploadClicked",principalObjectType:"song",principalObjectValue:M,context:{clipId:M,mediaType:"image"}})}})}),(0,a.jsxs)("div",{className:"w-full font-sans font-normal text-base leading-relaxed",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Upload a photo"}),(0,a.jsx)("ul",{className:"list-disc pl-4",children:(0,a.jsx)("li",{children:"Images that do not follow our policies will be removed"})}),(0,a.jsx)("h4",{className:"font-semibold",children:"File requirements"}),(0,a.jsxs)("ul",{className:"list-disc pl-4",children:[(0,a.jsx)("li",{children:"at least 720px tall"}),(0,a.jsx)("li",{children:"JPG, PNG, WEBP files"})]})]})]}),((0,v.FJ)(P)||P.roles.staff)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Input,{fontFamily:"Neue Montreal",placeholder:"Prompt for an AI-generated image...",value:b,maxLength:200,onChange:e=>C(e.target.value),_focus:{border:"solid",borderWidth:"0.5px",borderColor:"#FAF7F5",boxShadow:"0 0 0 0.5px #FAF7F5"}}),(0,a.jsx)(c.Ay,{variant:c.Ak.Secondary,className:"px-6",onClick:async()=>{N(!0),(0,f.Ay)({actionName:"SongEditCoverArtPromptClicked",principalObjectType:"song",principalObjectValue:M,context:{clipId:M,mediaType:"image",prompt:b}});let{data:e}=await _.apiClient.POST("/api/gen/prompt_image/",{body:{prompt:b}});N(!1),e&&j(e.image_url)},disabled:w||""===b,children:"Generate"})]}),w&&(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsx)(x.A,{className:"mr-2"}),(0,a.jsx)("span",{children:"Generating AI image..."})]})]})]})}),(0,a.jsx)(s.Divider,{}),(0,a.jsxs)(o.ModalFooter,{className:"flex gap-2",children:[(0,a.jsx)(c.Ay,{variant:c.Ak.Secondary,onClick:()=>k(!1),children:"Cancel"}),(0,a.jsx)(c.Ay,{variant:c.Ak.Primary,disabled:!h,onClick:()=>{A([...I,...u?[u]:[]]),S(u),k(!1),g.LS.logWebPageEvent({userId:P.userId||"",eventType:g.Y_.CLICK,element:"edit_song_details_modal",secondaryElement:"add_image_button",pageUrl:window.location.pathname}),(0,f.Ay)({actionName:"SongEditCoverArtSaveClicked",principalObjectType:"song",principalObjectValue:M,context:{clipId:M,mediaType:"image"}})},className:"px-6",children:"Save"})]})]})}),b=(0,r.PA)(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center px-6",children:[e.showBackButton&&(0,a.jsx)("div",{className:"px-2",children:(0,a.jsx)(c.Ay,{variant:c.Ak.Secondary,onClick:()=>e.setIsAddingImage(!1),className:"p-2",iconStart:h.YJP,shape:c.aH.Pill})}),(0,a.jsx)("div",{className:"flex-1 font-serif text-2xl py-6",children:"Add Image"}),(0,a.jsx)("div",{children:(0,a.jsx)(u.A,{onClick:e.onClose})})]}),(0,a.jsx)(y,{...e})]}))},81271:(e,t,l)=>{l.d(t,{A:()=>f});var a=l(95155),i=l(274),n=l(52596),s=l(63438),o=l(12115),r=l(77119),d=l(74955),c=l(50649),u=l(63808),p=l(7132),m=l(63175),x=l(4869);let h=[{id:"cover",icon:c.Rw8,label:"Cover"},{id:"extend",icon:c.SKP,label:"Extend"},{id:"styles",icon:c.qaf,label:"Use Styles & Lyrics"},{id:"speed",icon:c.rlE,label:"Adjust Speed",disabled:!0}],f=(0,s.PA)(()=>{var e;let{genForm:t,session:l,createV2:s}=(0,r.gy)();if((0,o.useEffect)(()=>{if((null==s?void 0:s.reusePromptMode)===!0){let e=!s.tagInput||""===s.tagInput.trim(),l=!s.activeLyrics||""===s.activeLyrics.trim();e&&l&&(s.setReusePromptMode(!1),t.setIsRemixCreate(!1))}},[null==s?void 0:s.tagInput,null==s?void 0:s.activeLyrics,null==s?void 0:s.reusePromptMode,s,t]),!(null===(e=l.flags)||void 0===e?void 0:e.remix)||!t.isRemixCreate)return null;let c=e=>{var a,i,n,o,r;if(("cover"!==e||(0,x.FJ)(l)||(0,x.Xl)(l))&&("speed"!==e||(null===(a=l.flags)||void 0===a?void 0:a["remix-adjust-speed"])))switch(e){case"cover":t.selectedClip&&((0,u.Ay)({actionName:"RemixBarCoverClicked",context:{clipId:null===(i=t.selectedClip)||void 0===i?void 0:i.id}}),(0,m.dM)({clip:t.selectedClip,session:l,genForm:t,createV2:s}));break;case"extend":t.selectedClip&&((0,u.Ay)({actionName:"RemixBarExtendClicked",context:{clipId:null===(n=t.selectedClip)||void 0===n?void 0:n.id}}),(0,m.k8)({clip:t.selectedClip,genForm:t,createV2:s}));break;case"styles":t.selectedClip&&((0,u.Ay)({actionName:"RemixBarUseStylesLyricsClicked",context:{clipId:null===(o=t.selectedClip)||void 0===o?void 0:o.id}}),(0,m.Dw)({clip:t.selectedClip,genForm:t,createV2:s}));break;case"speed":t.selectedClip&&((0,u.Ay)({actionName:"RemixBarAdjustSpeedClicked",context:{clipId:null===(r=t.selectedClip)||void 0===r?void 0:r.id}}),(0,m.jn)({clip:t.selectedClip,genForm:t,createV2:s,showRemixCreate:!0}))}},f=e=>{switch(e){case"cover":return!!t.coverClipId||(null==s?void 0:s.coverExtendMode)==="cover";case"extend":return!!t.continueClipId||(null==s?void 0:s.coverExtendMode)==="extend";case"styles":return(null==s?void 0:s.reusePromptMode)===!0;case"speed":return!!(null==s?void 0:s.speed_clip_id);default:return!1}},g=h.map(e=>{if("speed"===e.id){var t;return{...e,disabled:!(null===(t=l.flags)||void 0===t?void 0:t["remix-adjust-speed"])}}return e});return(0,o.useEffect)(()=>{t.coverClipId&&t.continueClipId&&t.resetContinueClip(),(t.coverClipId||t.continueClipId)&&(null==s?void 0:s.reusePromptMode)&&s.setReusePromptMode(!1)},[t.coverClipId,t.continueClipId,s,t]),(0,a.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 pt-6 px-0 md:px-2 w-full rounded-full mb-4",children:g.map(e=>{let t=f(e.id),s=e.icon;if(e.disabled){var o;return(0,a.jsx)(i.Tooltip,{label:"speed"!==e.id||(null===(o=l.flags)||void 0===o?void 0:o["remix-adjust-speed"])?"Coming soon":"Feature not available",placement:"top",size:"sm",fontSize:"md",background:p.TJ,backdropFilter:"blur(40px)",rounded:"md",color:"#ffffff",padding:"10px",fontFamily:"Neue Montreal",children:(0,a.jsx)("button",{disabled:!0,className:"h-12 w-12 min-w-[3rem] min-h-[3rem] rounded-full flex items-center justify-center bg-transparent border border-primary/30 opacity-50 cursor-not-allowed flex-shrink-0",children:(0,a.jsx)(s,{className:"w-5 h-5 text-white/70"})})},e.id)}return t?(0,a.jsx)(d.Ay,{variant:d.Ak.Primary,shape:d.aH.Pill,size:d.Mp.Medium,onClick:()=>c(e.id),className:(0,n.A)("transition-all bg-[#FAF7F533] hover:bg-secondary/20 min-w-0 flex-shrink"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full overflow-hidden",children:[(0,a.jsx)(s,{className:"w-5 h-5 text-primary flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm font-medium text-primary truncate",children:e.label})]})},e.id):(0,a.jsx)(i.Tooltip,{label:e.label,placement:"top",size:"sm",fontSize:"md",background:p.TJ,backdropFilter:"blur(40px)",rounded:"md",color:"#ffffff",padding:"10px",fontFamily:"Neue Montreal",children:(0,a.jsx)("button",{onClick:()=>c(e.id),className:"h-12 w-12 min-w-[3rem] min-h-[3rem] rounded-full flex items-center justify-center bg-transparent border border-primary/30 hover:bg-secondary/20 transition-all flex-shrink-0 relative",children:(0,a.jsx)(s,{className:"w-5 h-5 text-white/70"})})},e.id)})})})},82274:(e,t,l)=>{let a,i;l.d(t,{OT:()=>ec,Ay:()=>ev});var n=l(95155),s=l(5295),o=l(27016),r=l(52596),d=l(29543),c=l(63438),u=l(35695),p=l(12115),m=l(91218),x=l(45113),h=l(39688),f=l(77119),g=l(74955),v=l(4837),y=l(27235),b=l(71921),C=l(65015),j=l(63808),w=l(7132),N=l(10573),k=l(99082);let A=e=>{let{artistHref:t="",artistName:l="",avatarImageUrl:a="",children:i,imageClassName:s,imageUrl:o,isCurrentSong:d,isPlaying:c,isVerifiedArtist:u,onArtistClick:m,onPlayPauseClick:x,onTitleClick:f,title:g="Untitled",titleExtras:v,titleHref:A="",...S}=e,[I,P]=(0,p.useState)(!1),_=(0,p.useCallback)(()=>{P(!0)},[]),M=(0,p.useCallback)(()=>{P(!1)},[]);return(0,n.jsxs)("div",{...S,className:(0,h.QP)("@container flex flex-row items-center gap-3",e.className),children:[(0,n.jsxs)("div",{className:(0,h.QP)("relative overflow-clip rounded-md cursor-pointer","w-[56px] h-[77px] flex-shrink-0",s),onClick:e=>{null==x||x(e),(0,j.Ay)({actionName:"V4PromoSongPlayClicked"})},onMouseEnter:_,onMouseLeave:M,children:[(0,n.jsx)(N.A,{className:"absolute inset-0 w-full h-full object-cover",src:o||w.tL,alt:"Image for ".concat(g||"Untitled")}),(0,n.jsx)("div",{className:"flex justify-center items-center overflow-hidden absolute inset-0",children:(0,n.jsx)(y.A,{className:(0,r.A)("p-2 w-8 h-8 text-primary transition duration-75",{"opacity-0":!(I||c||null!=d)}),icon:c?I?"pause":"playing":"play"})})]}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col gap-1",children:[(0,n.jsxs)("div",{className:"font-sans font-medium text-sm @xs:text-base",children:[(0,n.jsx)(C.A,{className:"hover:underline",href:A,onClick:f,children:g||"Untitled"}),v]}),(0,n.jsxs)("div",{className:"flex flex-row gap-1 items-center",children:[a&&(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(C.A,{href:t,onClick:m,children:(0,n.jsx)(b.A,{className:"h-6 w-6",src:a,imageSize:w.M_,alt:"User avatar"})}),u&&(0,n.jsx)(k.A,{className:"absolute w-2 h-2 end-0 bottom-0 drop-shadow-avatarOverlay"})]}),l&&(0,n.jsx)("div",{className:"line-clamp-1 flex-1 font-sans font-medium text-xs @xs:text-sm hover:underline max-w-full break-all opacity-40",children:(0,n.jsx)(C.A,{href:t,onClick:m,children:l})})]}),i&&(0,n.jsx)("div",{className:"@container flex-1 mt-2",children:i})]})]})};var S=l(56108),I=l(56594),P=l(50649),_=l(6411),M=l(71164),T=l(4869),E=l(61932);function L(){return"/auras/".concat((0,E.Mk)())}let O=e=>{let{backgroundImage:t,style:l,children:a,...i}=e,[s]=(0,p.useState)(L),o=t||s;return(0,n.jsxs)("div",{...i,style:o?{"--background-image":"url('".concat(o,"')"),...l}:l,children:[(0,n.jsx)("div",{className:(0,r.A)("absolute inset-0","before:absolute before:inset-0 before:bg-[image:var(--background-image)] before:bg-cover before:bg-top before:opacity-70","after:absolute after:top-[32px] after:bottom-0 after:inset-x-0 after:bg-gradient-to-t after:from-tertiary after:via-tertiary after:via-50%")}),a]})};var R=l(85805),D=l(85005);let F=e=>{let{active:t,children:l,...a}=e,i=(0,h.QP)((0,r.A)("relative rounded-full overflow-hidden p-2 text-primary -outline-offset-[.25rem]","before:absolute before:inset-1 before:rounded-full before:transition before:duration-150","after:absolute after:inset-1 after:rounded-full after:transition after:duration-150","before:bg-current before:scale-0","after:border after:border-current after:opacity-75",{"before:scale-100 after:opacity-0":t,"inline-block w-2 h-2":!l,"inline-flex items-center justify-center p-1":!!l,"min-w-6 text-xs font-bold font-sans":!!l,"cursor-pointer":!!e.onClick}),e.className);return a.onClick?(0,n.jsx)("button",{type:"button",...a,className:i,children:l}):(0,n.jsx)("div",{...a,className:i,children:l})},B=0,z=e=>{let{autoplay:t=!1,id:l,loop:a=!1,draggable:i=!0,index:s,navClassName:o,onIndexInit:d,onIndexChange:c,showIndicators:u,slides:m={},slideOrder:x=m?Object.keys(m):[],...f}=e,[g,v]="boolean"==typeof t?[t,7e3]:[!0,t],y=(0,p.useMemo)(()=>null!=l?l:"carousel-".concat(B++),[l]),[b,C]=(0,D.A)({watchDrag:i,duration:20,loop:a},g?[(0,R.A)({playOnInit:g,delay:v,stopOnMouseEnter:!0,stopOnInteraction:!1,stopOnFocusIn:!0,stopOnLastSnap:!1})]:void 0),[j,w]=(0,p.useState)(!1),N=(0,p.useRef)({index:s||0,slides:x,isFirstSlide:!0});(0,p.useEffect)(()=>{N.current.index=s||0,N.current.slides=x},[s,x]);let k=(0,p.useCallback)(e=>{let{index:t,slides:l}=N.current,a=l.length,i=null!=e?Math.max(0,Math.min(e,a-1)):a&&(t+1)%a;null==c||c(i,l[i])},[c]);return(0,p.useEffect)(()=>{null!=s&&C&&(C.scrollTo(s,N.current.isFirstSlide),N.current.isFirstSlide=!1)},[s,C]),(0,p.useEffect)(()=>{if(C){let e=!1,t=()=>{let e=C.selectedScrollSnap();null==d||d(e,N.current.slides[e])},l=()=>{let e=C.selectedScrollSnap();null==c||c(e,N.current.slides[e])},a=()=>{w(!1)},i=()=>{let t;e&&w(!0);let{limit:l,target:a,location:i,offsetLocation:n,scrollTo:s,translate:o,scrollBody:r,options:d}=C.internalEngine();l.reachedMax(a.get())&&(t=l.max),l.reachedMin(a.get())&&(t=l.min),d.loop||void 0===t?o.toggleActive(!0):(n.set(t),i.set(t),a.set(t),o.to(t),o.toggleActive(!1),r.useDuration(0).useFriction(0),s.distance(0,!1))},n=()=>{e=!0,w(!1)},s=()=>{e=!1,w(!1)};return C.on("init",t).on("reInit",l).on("select",l).on("scroll",i).on("settle",a).on("pointerDown",n).on("pointerUp",s),()=>{C.off("init",t).off("reInit",l).off("select",l).off("scroll",i).off("settle",a).off("pointerDown",n).off("pointerUp",s)}}},[c,d,C]),(0,n.jsxs)("div",{...f,className:(0,h.QP)("flex flex-col justify-start items-stretch","w-full h-full",e.className),children:[(0,n.jsx)("div",{className:"relative flex-1 overflow-clip",ref:b,children:(0,n.jsx)("div",{className:(0,r.A)("absolute inset-0 flex flex-row",{"select-none":i&&j}),children:x.map((e,t)=>(0,n.jsx)("div",{className:(0,r.A)("@container relative w-full min-h-full flex-none basis-full",{"pointer-none overflow-clip":t!==s,"overflow-y-auto overflow-x-clip":t===s}),"aria-hidden":t!==s,"aria-labelledby":"".concat(y,"-button-").concat(t),children:m[e]},e))})}),(0,n.jsx)("div",{className:(0,h.QP)((0,r.A)("absolute inset-x-0 bottom-0 pointer-events-none",{hidden:!1===u||!0!==u&&x.length<2}),o),children:(0,n.jsx)("nav",{className:"flex flex-row justify-center items-center w-max mx-auto p-2 pointer-events-auto",children:x.map((e,t)=>(0,n.jsx)(F,{active:t===s,id:"".concat(y,"-button-").concat(t),onClick:C&&(()=>{C.scrollTo(t),k(t)}),"aria-label":"Go to slide ".concat(t+1)},e))})})]})},U=e=>{let{defaultIndex:t,onIndexChange:l,...a}=e,[i,s]=(0,p.useState)(t||0),o=(0,p.useCallback)(e=>{s(e),null==l||l(e)},[l]);return(0,n.jsx)(z,{index:i,onIndexChange:o,...a})},H=e=>{let{className:t,navClassName:l,slides:a={},slideOrder:i=[],defaultSlide:s=i[0],id:o,onSlideInit:r,onSlideChange:d,...c}=e,[u,m]=(0,p.useState)(null!=s?s:i[0]),x=(0,p.useMemo)(()=>i.indexOf(u),[u,i]),f=(0,p.useCallback)((e,t)=>{let l=t||i[e];null==r||r(l,e)},[i,r]),g=(0,p.useCallback)((e,t)=>{let l=t||i[e];m(l),null==d||d(l,e)},[i,d]);return(0,n.jsx)(U,{className:t,slides:a,slideOrder:i,defaultIndex:x,navClassName:(0,h.QP)("[@media(min-height:1081px)]:bottom-10","pointer-events-auto drop-shadow-promoCarouselNav","before:absolute before:inset-0 before:transition before:duration-150 before:opacity-0","hover:before:opacity-100 before:bg-gradient-to-t before:from-tertiary/40",l),onIndexInit:r&&f,onIndexChange:g,...c})};var W=l(97942);let V=e=>(0,n.jsxs)("div",{...e,className:(0,h.QP)("flex flex-col justify-center items-center text-primary/40",e.className),children:[(0,n.jsx)(W.A,{className:"text-current"}),e.children]}),G=(0,c.PA)(e=>{var t,l;let{className:a,hiddenContent:i,loadingContent:s,isHidden:o,isLoading:r,id:d,onHide:c,onShow:u,onSlideInit:x,onSlideChange:f,...v}=e,{t:y}=(0,m.Bd)(),[b,C]=(0,p.useState)(null!==(l=e.defaultSlide)&&void 0!==l?l:null===(t=e.slideOrder)||void 0===t?void 0:t[0]),j=(0,p.useCallback)((e,t)=>{C(e),null==x||x(e,t)},[x]),w=(0,p.useCallback)((e,t)=>{C(e),null==f||f(e,t)},[f]);return(0,n.jsxs)("div",{className:(0,h.QP)("@container relative flex flex-col justify-start items-center",a),children:[o?"function"==typeof i?p.createElement(i,{className:"absolute inset-0"}):i||(0,n.jsx)(O,{className:"absolute inset-0"}):r?"function"==typeof s?p.createElement(s,{className:"absolute inset-0"}):s||(0,n.jsx)(V,{className:"absolute inset-0"}):(0,n.jsx)(H,{className:"absolute inset-0",defaultSlide:b,onSlideInit:j,onSlideChange:w,...v}),o&&u?(0,n.jsx)(g.Ay,{className:"absolute end-2 top-2 opacity-50 hover:opacity-100 transition duration-150",onClick:()=>{u(d?"".concat(d,":").concat(b):d)},variant:g.Ak.Glass,size:g.Mp.Mini,shape:g.aH.Pill,children:y("sidebar.show")}):!o&&c?(0,n.jsx)(g.Ay,{className:"absolute end-2 top-2 opacity-50 hover:opacity-100 transition duration-150",onClick:()=>{c(d?"".concat(d,":").concat(b):d)},variant:g.Ak.Glass,size:g.Mp.Mini,shape:g.aH.Pill,children:y("sidebar.hide")}):null]})}),Y="v4_promo_modal",q="v4_promo_sidebar",Q=M.Cu||M.YG?"a861e728-f6e5-4a86-8ea8-381069a39bb3":"aad1ee63-d217-430d-8299-521e42a5de9f",K=M.Cu||M.YG?"6dc2f2a9-176c-46c6-b471-3bb0c40915df":"0b9f43a6-7754-4069-9e3b-93b061be361d",J={newModel:"New Model Release",whatsNew:"What's New",freeRemasterRemaining:" free Remaster remaining",freeRemastersRemaining:" free Remasters remaining",testDriveTitle:"Test drive v4 on web",testDriveBody:"Crisper audio, better lyrics, and more dynamic song structures. Experience v4 free on web, iOS, and Android",androidTitle:"Suno is now on Android",androidBody:"Download the mobile app to have the power of Suno in your pocket.",mobileLoggedOutTitle:"Try v4 free on our mobile app",mobileLoggedOutBody:"Experience the magic of v4crisper audio, better lyrics, more creative song structures.",mobileFreeTitle:"Try v4 free on iOS and Android",mobileFreeBody:"Experience the magic of v4crisper audio, better lyrics, more creative song structures. Try it for free on our mobile app.",mobileTitle:"Create anytime, anywhere",mobileBody:"Bring your ideas to life wherever you are. Sunos mobile app puts the power of music creation in your pocket.",ctaDownloadAndroid:"Download on Android",ctaDownloadIos:"Download on iOS",ctaDownloadNow:"Download now",listenTitle:"Hear the difference",listenBody:"Need proof? Listen to a song remastered in v4.",remasterTitle:"Upgrade your sound with v4",remasterBody:"We all have favoritespick yours and Remaster it in v4 quality.",modalMobileFreeTitle:"Try v4 free on our mobile app",modalMobileFreeBody:"Experience the magic of v4crisper audio, better lyrics, more creative song structures.",modalMobileTestDriveTitle:"Test drive v4 on mobile",modalMobileTestDriveBody:"Unlock crisper audio, better lyrics, more creative song structures.",modalMobileTitle:"Use v4 on our mobile app",modalMobileBody:"The power of v4 wherever you go. Download the app.",modalUpgradeNoCreditsTitle:"Songs left today",modalUpgradeNoCreditsBody:"You'll get free 50 credits every day. Or upgrade your account to get more credits and access to v4 now.",modalRemasterTitle:"Hear your songs in v4",modalRemasterBody:"Try Remastering one of your songs with v4 quality.",modalListenTitle:"The v4 Difference",modalListenBody:"Compare the original with the v4 Remaster.",ctaTryV4:"Try v4",ctaUpgradeNow:"Upgrade Now",ctaUpgradeForMore:"Upgrade for More",ctaListenNow:"Listen Now",ctaLibrary:"Go to Library",ctaRemasterNow:"Remaster Now"},X=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M15.8584 15.2237H14.8145V13.6965H11.6345V12.7299L14.8145 8.54468H15.8584V12.7976H16.796V13.6965H15.8584V15.2237ZM14.8145 9.88821L12.6011 12.7976H14.8145V9.88821Z"}),(0,n.jsx)("path",{d:"M9.55359 15.2233H8.49036L6.7312 10.2938H7.7461L9.04131 14.2471H9.05098L10.3269 10.2938H11.3128L9.55359 15.2233Z"}),(0,n.jsx)("path",{d:"M10.3859 0.398409C10.8386 0.137401 11.352 0 11.8746 0C12.3971 0 12.9105 0.137401 13.3632 0.398409C13.3637 0.398706 13.3643 0.399002 13.3648 0.399299L21.2589 4.91025C21.7116 5.17158 22.0875 5.54734 22.3491 5.99983C22.6106 6.45233 22.7486 6.96565 22.7491 7.4883L22.7491 16.511C22.7486 17.0336 22.6106 17.5477 22.3491 18.0002C22.0875 18.4527 21.7116 18.8284 21.2589 19.0897L21.2561 19.0914L13.3648 23.6007C13.3643 23.601 13.3638 23.6013 13.3633 23.6016C12.9105 23.8626 12.3972 24 11.8746 24C11.352 24 10.8386 23.8626 10.3859 23.6016C10.3854 23.6013 10.3849 23.601 10.3844 23.6007L2.493 19.0914L2.4902 19.0897C2.03757 18.8284 1.66162 18.4527 1.40006 18.0002C1.1385 17.5477 1.00054 17.0343 1 16.5117L1 7.48905C1.00054 6.96639 1.1385 6.45233 1.40006 5.99983C1.66162 5.54734 2.03757 5.17158 2.4902 4.91025L2.493 4.90864L10.3844 0.399299C10.3849 0.399002 10.3854 0.398706 10.3859 0.398409ZM11.8746 1.44986C11.6059 1.44986 11.342 1.52058 11.1093 1.65491L11.1065 1.65652L3.21513 6.16587C3.2147 6.16611 3.21428 6.16636 3.21385 6.16661C2.98198 6.30078 2.78938 6.49346 2.65531 6.72541C2.52104 6.95768 2.4502 7.22116 2.44986 7.48944V16.5106C2.4502 16.7788 2.52104 17.0423 2.65531 17.2746C2.78938 17.5065 2.98198 17.6992 3.21385 17.8334C3.21428 17.8336 3.2147 17.8339 3.21513 17.8341L11.1093 22.3451C11.342 22.4794 11.6059 22.5501 11.8746 22.5501C12.1432 22.5501 12.4072 22.4794 12.6398 22.3451L12.6426 22.3435L20.534 17.8341C20.5344 17.8339 20.5349 17.8336 20.5353 17.8334C20.7672 17.6992 20.9598 17.5065 21.0938 17.2746C21.2282 17.0422 21.299 16.7786 21.2993 16.5102V7.48979C21.299 7.22139 21.2282 6.95778 21.0938 6.72541C20.9598 6.49346 20.7672 6.30078 20.5353 6.16661C20.5349 6.16636 20.5344 6.16611 20.534 6.16587L12.6398 1.65492C12.4072 1.52059 12.1432 1.44986 11.8746 1.44986Z"})]})}),Z=e=>(0,n.jsx)("div",{...e,className:(0,h.QP)("w-full h-full bg-[100%_auto] bg-top","after:absolute after:inset-0 after:bg-gradient-to-t after:from-background-primary","bg-[image:var(--v4-promo-background-image,url(/campaign/v4/v4-promo-upgrade-bg.jpg))]",e.className)}),$=e=>(0,n.jsxs)("div",{...e,className:(0,h.QP)("flex flex-row justify-start items-center w-[140px] gap-2 text-[#c3e734]",e.className),children:[(0,n.jsx)(X,{className:"w-8 h-8"}),(0,n.jsx)("span",{className:"font-sans font-medium text-[11px] leading-tight uppercase",children:J.newModel})]}),ee=e=>(0,n.jsx)("div",{...e,className:(0,h.QP)("pointer-events-none overflow-clip",e.className),children:(0,n.jsx)("div",{className:(0,r.A)("mx-auto w-[34px] h-[20px] animate-slideInBottom animate-delay-500","bg-cover bg-no-repeat bg-center","bg-[image:url(/campaign/android-launch/android-head.png)]")})}),et=(0,c.PA)(e=>{let{clip:t,clips:l=[t],contextId:a="v4-promo",contextType:i=_.Lp.SONG_RECOMMENDATIONS,showArtist:s=!0,...o}=e,{playbar:r,queue:d}=(0,f.gy)(),c=(0,I.Y)(t.id,{contextId:a,contextType:i}),u=(0,p.useRef)(c.isPlaying);(0,p.useEffect)(()=>{u.current=c.isPlaying},[c.isPlaying]);let m=(0,p.useCallback)(()=>{if(u.current){r.togglePlay();return}d.setPlayContext({clips:l,currentIndex:l.indexOf(t),contextId:a,contextType:i}),r.playClip(t)},[t,l,r,d,a,i]);return(0,n.jsx)(A,{...o,className:"text-primary",imageUrl:t.image_url||"",title:t.title,titleHref:"/song/".concat(t.id),artistHref:"/@".concat(t.handle),artistName:s&&(t.display_name||t.handle)||"",isCurrentSong:c.isCurrentSong,isPlaying:c.isPlaying,onPlayPauseClick:m})}),el=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"46",viewBox:"0 0 48 46",fill:"currentColor",...e,children:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M19.2593 36.6279C19.3837 36.2638 19.8986 36.2638 20.0229 36.6279L20.7069 38.6306C20.7472 38.7488 20.8401 38.8417 20.9583 38.882L22.961 39.566C23.3251 39.6903 23.3251 40.2052 22.961 40.3296L20.9583 41.0135C20.8401 41.0539 20.7472 41.1467 20.7069 41.2649L20.0229 43.2677C19.8986 43.6318 19.3837 43.6318 19.2593 43.2677L18.5754 41.2649C18.535 41.1467 18.4422 41.0539 18.324 41.0135L16.3212 40.3296C15.9571 40.2052 15.9571 39.6903 16.3212 39.566L18.324 38.882C18.4422 38.8417 18.535 38.7488 18.5754 38.6306L19.2593 36.6279Z"}),(0,n.jsx)("path",{d:"M24.6853 31.0006V27.7653L39.162 4H42.0955V27.7653H46.0053V31.0006H42.0955V36.264C42.0955 39.1576 42.5482 39.7256 45.8545 39.7256V40.7774H34.6885V39.7256C38.0747 39.7256 38.5229 39.1221 38.5229 36.264V31.0006H24.6853ZM26.7135 27.7653H38.483V8.06074L26.7135 27.6499V27.8008V27.7653Z"}),(0,n.jsx)("path",{d:"M23.5671 4.00005L23.2653 4.9764C26.8733 4.9764 27.0642 5.42908 25.5952 7.68356L9.72504 34.0806H9.64072V8.43802C9.64072 5.69092 10.1289 4.9764 14.416 4.9764V4.00005H1V5.01635C5.24713 5.01635 5.73975 5.73086 5.73975 8.47796V40.8174L5.77525 40.7553L5.74419 40.8174H7.62589L27.7432 7.68356C29.4341 5.27819 30.9785 4.9764 33.0821 4.9764L33.3838 4.00005H23.5671Z"}),(0,n.jsx)("path",{d:"M19.2557 36.6275C19.3799 36.2636 19.8947 36.2636 20.019 36.6275L20.7025 38.629C20.7424 38.7489 20.8356 38.8421 20.9554 38.882L22.9569 39.5655C23.3209 39.6897 23.3209 40.2045 22.9569 40.3288L20.9554 41.0122C20.8356 41.0522 20.7424 41.1454 20.7025 41.2652L20.019 43.2667C19.8947 43.6306 19.3799 43.6306 19.2557 43.2667L18.5722 41.2652C18.5323 41.1454 18.4391 41.0522 18.3193 41.0122L16.3177 40.3288C15.9538 40.2045 15.9538 39.6897 16.3177 39.5655L18.3193 38.882C18.4391 38.8421 18.5323 38.7489 18.5722 38.629L19.2557 36.6275Z"})]})}),ea=[/v4/,(e,t)=>(0,n.jsx)(el,{className:"inline-block w-auto h-[1em] align-text-top","aria-label":e},t)],ei=e=>{let{text:t}=e;return(0,n.jsx)(en,{text:t,decorators:[ea]})},en=e=>{let{text:t,decorators:l}=e;if(!l)return t;let a=RegExp(l.map(e=>{let[t]=e;return"(".concat(t.toString().replace(/^\/(.*)\/[^/]*$/,"$1"),")")}).join("|"),"i");return(0,x.A)({pattern:a,decorator(e,t,a){let[,i=e=>e]=l.find(t=>{let[l]=t;return l.test(e)})||[];return i(e,t,a)},input:t})},es=e=>{let{children:t,backgroundClassName:l,backgroundImage:a,...i}=e,s=(0,h.QP)("flex flex-col justify-start items-center bg-background-primary text-[#c3e734]",e.className),o=a?{"--v4-promo-background-image":"url(".concat(a,")"),...e.style}:e.style;return(0,n.jsxs)("div",{...i,className:s,style:o,children:[(0,n.jsx)(Z,{className:(0,h.QP)("absolute inset-x-0 top-0 max-h-[600px]",l)}),(0,n.jsx)("div",{className:"relative py-8 px-6 [@media(min-height:1081px)]:pb-16",children:t})]})};function eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"chirp-v4",{session:t,genForm:l}=(0,f.gy)();return(0,p.useCallback)(()=>{t.models.map(e=>e.external_key).includes(e)&&(0,d.h5)(()=>{l.mv=e})},[t,l,e])}let er=e=>{let{isSignedIn:t=!1,isSubscribed:l=!1,isGaLaunch:a=!1,onClose:i=()=>{},onShow:s}=e,o=(0,E.un)(),r=(0,E.m0)();(0,p.useEffect)(()=>{null==s||s()},[s]);let[d,c]=l?[J.modalMobileTitle,J.modalMobileBody]:a?[J.modalMobileTestDriveTitle,J.modalMobileTestDriveBody]:[J.modalMobileFreeTitle,J.modalMobileFreeBody];return(0,n.jsx)(v.A,{title:"",onClose:i,className:"overflow-auto",closeButtonClasses:"text-vinylBlack-darker bg-primary hover:bg-secondary",wrapperClasses:"-m-6 -mt-10 rounded-[32px] overflow-clip overflow-y-auto before:rounded-[inherit] before:pointer-none",children:(0,n.jsxs)(es,{backgroundClassName:"max-h-none after:from-black/80",backgroundImage:"/campaign/v4/v4-promo-upgrade-bg.jpg",className:"@container relative pt-[20px] text-center max-w-full",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-serif font-light text-[36px] leading-none uppercase my-4 mx-auto max-w-[300px] @lg:max-w-none",children:(0,n.jsx)(ei,{text:d})}),(0,n.jsx)("p",{className:"mx-auto max-w-[300px]",children:c})]}),(0,n.jsxs)("div",{className:"relative mt-8 mx-auto @md:max-w-[300px] flex flex-col gap-4",children:[!o&&(0,n.jsxs)("div",{className:"mt-8 relative w-full",children:[(0,n.jsx)(ee,{className:"absolute inset-x-0 bottom-full pointer-events-none"}),(0,n.jsx)(g.Ay,{className:"w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/android",onClick:()=>{(0,j.Ay)({actionName:"V4PromoCtaAndroidClicked",context:{promoType:"modal",slide:"mobile",userType:t?l?"pro":"free":void 0}}),i()},children:J.ctaDownloadAndroid})]}),!r&&(0,n.jsx)(g.Ay,{className:"w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/ios",onClick:()=>{(0,j.Ay)({actionName:"V4PromoCtaIosClicked",context:{promoType:"modal",userType:t?l?"pro":"free":void 0}}),i()},children:J.ctaDownloadIos})]})]})})},ed=e=>{let{isSignedIn:t=!1,isSubscribed:l=!1,onClose:a=()=>{},onShow:i}=e;return(0,p.useEffect)(()=>{null==i||i()},[i]),(0,n.jsx)(v.A,{title:"",onClose:a,className:"overflow-auto",closeButtonClasses:"text-vinylBlack-darker bg-primary hover:bg-secondary",wrapperClasses:"-m-6 -mt-10 rounded-[32px] overflow-clip overflow-y-auto before:rounded-[inherit] before:pointer-none",children:(0,n.jsxs)(es,{backgroundClassName:"max-h-none bg-cover bg-center after:bg-none after:bg-black/40",backgroundImage:"/campaign/android-launch/background.jpg",className:"@container relative pt-[20px] text-center max-w-full text-white",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-serif font-light text-[36px] leading-none uppercase my-4 mx-auto max-w-[270px]",children:J.androidTitle}),(0,n.jsx)("figure",{className:"pt-4 pb-8",children:(0,n.jsx)(N.A,{className:"mx-auto w-full max-w-[200px]",alt:"Android character",src:"/campaign/android-launch/android-3d.png"})}),(0,n.jsx)("p",{className:"mx-auto max-w-[300px]",children:J.androidBody})]}),(0,n.jsx)("div",{className:"relative mt-8 mx-auto @md:max-w-[300px]",children:(0,n.jsx)(g.Ay,{className:"relative block w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/android",onClick:()=>{(0,j.Ay)({actionName:"V4PromoCtaCreateClicked",context:{promoType:"modal",slide:"upgrade",userType:t&&l?"pro":"free"}}),null==a||a()},children:J.ctaDownloadNow})})]})})},ec=e=>{let{onClose:t=()=>{},onShow:l}=e,{session:a}=(0,f.gy)(),i=Math.max(0,Math.floor(a.credits/T.I5));return(0,p.useEffect)(()=>{null==l||l()},[l]),(0,n.jsx)(v.A,{title:"",onClose:t,className:"overflow-auto",closeButtonClasses:"text-vinylBlack-darker bg-primary hover:bg-secondary",wrapperClasses:"-m-6 -mt-10 rounded-[32px] overflow-clip overflow-y-auto before:rounded-[inherit] before:pointer-none",children:(0,n.jsxs)(es,{backgroundClassName:"after:from-black/80",backgroundImage:"/campaign/v4/v4-promo-upgrade-bg.jpg",className:"@container relative pt-[20px] text-center max-w-full",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:(0,r.A)("relative mx-auto mb-8 flex justify-center items-center","w-max min-w-[70px] aspect-square px-4","pt-[.25em] font-serif font-light text-[32px] leading-none","before:absolute before:inset-0 before:rounded-full before:border-2 before:border-current before:opacity-25"),children:i.toLocaleString()}),(0,n.jsx)("h3",{className:"font-serif font-light text-[30px] leading-none my-4 mx-auto",children:(0,n.jsx)(ei,{text:J.modalUpgradeNoCreditsTitle})}),(0,n.jsx)("p",{className:"mx-auto pb-8 max-w-[220px] text-sm",children:J.modalUpgradeNoCreditsBody})]}),(0,n.jsx)("div",{className:"mt-8 mx-auto @md:max-w-[300px]",children:(0,n.jsx)(g.Ay,{className:"block w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/account",onClick:()=>{(0,j.Ay)({actionName:"V4PromoCtaUpgradeClicked",context:{promoType:"modal",slide:"outOfCredits",userType:"free"}}),null==t||t()},children:J.ctaUpgradeNow})})]})})},eu=(0,c.PA)(e=>{let{isSignedIn:t=!1,isSubscribed:l=!1,clips:a=[],onClose:i=()=>{},onShow:o}=e,d=(0,s.ho)();return(0,p.useEffect)(()=>{null==o||o()},[o]),(0,n.jsx)(v.A,{title:"",onClose:i,className:"overflow-auto",closeButtonClasses:"text-vinylBlack-darker bg-primary hover:bg-secondary",wrapperClasses:"-m-6 -mt-10 rounded-[32px] overflow-clip overflow-y-auto before:rounded-[inherit] before:pointer-none",children:(0,n.jsxs)(es,{backgroundClassName:"after:from-black/80",backgroundImage:"/campaign/v4/v4-promo-listen-bg.jpg",className:"@container relative pt-[20px] text-center max-w-full",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-serif font-light text-[36px] @sm:text-[44px] leading-none uppercase my-4 mx-auto max-w-[300px] @lg:max-w-none",children:(0,n.jsx)(ei,{text:J.modalListenTitle})}),(0,n.jsx)("p",{children:J.modalListenBody})]}),(0,n.jsx)("div",{className:"mt-8 mx-auto flex flex-col gap-4 text-left max-w-[300px]",children:a.slice(0,2).map((e,t)=>(0,n.jsx)(et,{clip:e,clips:a,contextId:"v4-promo-listen",titleExtras:(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)("div",{className:(0,r.A)("inline-block px-1 p-0.5 rounded-sm font-sans font-medium text-xs",{"bg-gray-400 text-gray-50":"v4"!==e.major_model_version,"bg-gray-50 text-[#c3e734]":"v4"===e.major_model_version}),children:e.major_model_version})]}),imageClassName:"v4"===e.major_model_version?"drop-shadow-v4PromoGlow":"grayscale"},(null==e?void 0:e.id)||t))}),(0,n.jsx)("div",{className:"mt-8 mx-auto @md:max-w-[300px]",children:(0,n.jsx)(g.Ay,{className:"block w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/playlist/".concat(Q),onClick:e=>{(0,j.Ay)({actionName:"V4PromoCtaLibraryClicked",context:{promoType:"modal",slide:"remaster",userType:t&&l?"pro":"free"}}),t||(d.openSignUp({...(0,E.Of)("/me")}),e.preventDefault()),null==i||i()},children:J.ctaListenNow})})]})})}),ep=(0,c.PA)(e=>{let{isSignedIn:t=!1,isSubscribed:l=!1,clips:a=[],onClose:i=()=>{},onShow:o}=e,{t:r}=(0,m.Bd)(),d=(0,s.ho)(),{session:c,clips:x}=(0,f.gy)(),h=(0,u.useRouter)(),y=(0,u.usePathname)(),[b,C]=(0,p.useState)(c.freeRemastersLeft);(0,p.useEffect)(()=>{C(c.freeRemastersLeft)},[c.freeRemastersLeft]);let[w,N]=(0,p.useState)(null),k=eo(),A=(0,p.useCallback)(e=>{!async function(){N(e.id),await x.upsampleClip(e),C(e=>Math.max(0,e-1)),k(),"/create"!==y&&h.push("/create"),N(null)}()},[y,h,x,k]);return(0,p.useEffect)(()=>{null==o||o()},[o]),(0,n.jsx)(v.A,{title:"",onClose:i,className:"overflow-auto",closeButtonClasses:"text-vinylBlack-darker bg-primary hover:bg-secondary",wrapperClasses:"-m-6 -mt-10 rounded-[32px] overflow-clip overflow-y-auto before:rounded-[inherit] before:pointer-none",children:(0,n.jsxs)(es,{backgroundClassName:"after:from-black/80",backgroundImage:"/campaign/v4/v4-promo-remaster-bg.jpg",className:"@container relative pt-[20px] text-center max-w-full",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-serif font-light text-[36px] @sm:text-[44px] leading-none uppercase my-4 mx-auto max-w-[200px] @md:max-w-[300px]",children:(0,n.jsx)(ei,{text:J.modalRemasterTitle})}),(0,n.jsx)("p",{children:J.modalRemasterBody})]}),l||b?(0,n.jsx)("div",{className:"mt-8 mx-auto flex flex-col gap-4 text-left max-w-[300px]",children:a.slice(0,1).map((e,t)=>(0,n.jsx)(et,{clip:e,clips:a,contextId:"v4-promo-remaster",children:(0,n.jsx)("div",{className:"flex flex-col justify-end min-h-full",children:(0,n.jsx)(g.Ay,{className:"block w-full",variant:g.Ak.Secondary,size:g.Mp.Mini,shape:g.aH.Pill,disabled:!!w,href:l||b?void 0:"/account",onClick:()=>{(0,j.Ay)({actionName:"V4PromoRemasterButtonClicked",context:{promoType:"sidebar_carousel",slide:"remaster",userType:l?"pro":"free",song:null==e?void 0:e.id}}),(l||b)&&A(e),null==i||i()},children:e.id===w?(0,n.jsx)(W.A,{}):r("songActions.remaster")})})},(null==e?void 0:e.id)||t))}):null,(0,n.jsx)("div",{className:"mt-8 mx-auto @md:max-w-[300px]",children:(0,n.jsx)(g.Ay,{className:"block w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/me",onClick:e=>{(0,j.Ay)({actionName:"V4PromoCtaLibraryClicked",context:{promoType:"modal",slide:"remaster",userType:t&&l?"pro":"free"}}),t||(d.openSignUp({...(0,E.Of)("/me")}),e.preventDefault()),null==i||i()},children:J.ctaLibrary})})]})})}),em=(0,c.PA)(e=>{let{isSignedIn:t=!1,isSubscribed:l=!1,...a}=e,i=eo();return(0,n.jsxs)(es,{backgroundImage:"/campaign/v4/v4-promo-upgrade-bg.jpg",...a,children:[(0,n.jsxs)("div",{className:"flex flex-row justify-start items-center w-[140px] gap-2 mt-[100px] mb-8",children:[(0,n.jsx)(P.sqe,{className:"w-6 h-6"}),(0,n.jsx)("span",{className:"font-sans font-medium text-[11px] leading-tight uppercase",children:J.whatsNew})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("h2",{className:"font-serif font-light text-[32px] leading-none uppercase max-w-[180px]",children:(0,n.jsx)(en,{text:J.testDriveTitle,decorators:[ea]})}),(0,n.jsx)("p",{className:"font-sans text-sm",children:J.testDriveBody})]}),(0,n.jsx)("div",{className:"mt-8 flex flex-col gap-4",children:(0,n.jsx)(g.Ay,{className:"w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/create",onClick:()=>{i(),(0,j.Ay)({actionName:"V4PromoCtaIosClicked",context:{promoType:"sidebar_carousel",slide:"mobile",userType:t?l?"pro":"free":void 0}})},children:J.ctaTryV4})})]})}),ex=(0,c.PA)(e=>{let{isSignedIn:t=!1,isSubscribed:l=!1,...a}=e,[i,s]=t?l?[J.mobileTitle,J.mobileBody]:[J.mobileFreeTitle,J.mobileFreeBody]:[J.mobileLoggedOutTitle,J.mobileLoggedOutBody];return(0,n.jsxs)(es,{backgroundImage:"/campaign/v4/v4-promo-upgrade-bg.jpg",...a,children:[(0,n.jsxs)("div",{className:"flex flex-row justify-start items-center w-[140px] gap-2 mt-[100px] mb-8",children:[(0,n.jsx)(P.sqe,{className:"w-6 h-6"}),(0,n.jsx)("span",{className:"font-sans font-medium text-[11px] leading-tight uppercase",children:J.whatsNew})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("h2",{className:"font-serif font-light text-[32px] leading-none uppercase max-w-[180px]",children:(0,n.jsx)(en,{text:i,decorators:[ea,[/and Android/,e=>(0,n.jsx)("span",{className:"text-white",children:e})]]})}),(0,n.jsx)("p",{className:"font-sans text-sm",children:s})]}),(0,n.jsxs)("div",{className:"mt-8 flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"mt-8 relative w-full",children:[(0,n.jsx)(ee,{className:"absolute inset-x-0 bottom-full pointer-events-none"}),(0,n.jsx)(g.Ay,{className:"w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/android",onClick:()=>{(0,j.Ay)({actionName:"V4PromoCtaAndroidClicked",context:{promoType:"sidebar_carousel",slide:"mobile",userType:t?l?"pro":"free":void 0}})},children:J.ctaDownloadAndroid})]}),(0,n.jsx)(g.Ay,{className:"w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/ios",onClick:()=>{(0,j.Ay)({actionName:"V4PromoCtaIosClicked",context:{promoType:"sidebar_carousel",slide:"mobile",userType:t?l?"pro":"free":void 0}})},children:J.ctaDownloadIos})]})]})}),eh=(0,c.PA)(e=>{let{isSignedIn:t=!1,isSubscribed:l=!1,...a}=e;return(0,n.jsxs)(es,{className:"text-white",backgroundClassName:"before:absolute before:inset-0 before:bg-black before:opacity-25 bg-cover",backgroundImage:"/campaign/android-launch/background.jpg",...a,children:[(0,n.jsx)("div",{className:"inline-block font-sans font-medium text-[11px] leading-normal uppercase border border-white rounded-[3.5px] py-[5px] px-[8px]",children:"Mobile Exclusive"}),(0,n.jsxs)("div",{className:"flex flex-row justify-start items-center w-[140px] gap-2 mt-[100px] mb-8",children:[(0,n.jsx)(P.xq2,{className:"w-6 h-6"}),(0,n.jsx)("span",{className:"font-sans font-medium text-[11px] leading-tight uppercase",children:J.whatsNew})]}),(0,n.jsxs)("div",{className:"relative flex flex-col gap-4",children:[(0,n.jsx)(N.A,{className:"absolute left-full top-0 origin-top-left -translate-x-14 rotate-[-24deg] w-[140px]",alt:"Android character",src:"/campaign/android-launch/android-3d.png"}),(0,n.jsx)("h2",{className:"relative font-serif font-light text-[32px] leading-none uppercase max-w-[180px]",children:J.androidTitle}),(0,n.jsx)("p",{className:"relative font-sans text-sm",children:J.androidBody})]}),(0,n.jsx)("div",{className:"mt-8 flex flex-col gap-4",children:(0,n.jsx)(g.Ay,{className:"w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/android",onClick:()=>{(0,j.Ay)({actionName:"V4PromoCtaDownloadClicked",context:{promoType:"sidebar_carousel",slide:"android",userType:t?l?"pro":"free":void 0}})},children:J.ctaDownloadNow})})]})}),ef=(0,c.PA)(e=>{let{isSignedIn:t=!1,isSubscribed:l=!1,clips:a=[],...i}=e,o=(0,s.ho)(),d=eo();return(0,n.jsxs)(es,{backgroundImage:"/campaign/v4/v4-promo-listen-bg.jpg",...i,children:[(0,n.jsx)($,{className:"mt-[100px] mb-8"}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("h2",{className:"font-serif font-light text-[32px] leading-none uppercase",children:(0,n.jsx)(ei,{text:J.listenTitle})}),(0,n.jsx)("p",{className:"font-sans text-sm",children:J.listenBody})]}),(0,n.jsx)("div",{className:"mt-8 flex flex-col gap-4",children:a.slice(0,2).map((e,t)=>(0,n.jsx)(et,{clip:e,clips:a,contextId:"v4-promo-listen",titleExtras:(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)("div",{className:(0,r.A)("inline-block px-1 p-0.5 rounded-sm font-sans font-medium text-xs",{"bg-gray-400 text-gray-50":"v4"!==e.major_model_version,"bg-gray-50 text-[#c3e734]":"v4"===e.major_model_version}),children:e.major_model_version})]}),imageClassName:"v4"===e.major_model_version?"drop-shadow-v4PromoGlow":"grayscale"},(null==e?void 0:e.id)||t))}),(0,n.jsx)("div",{className:"mt-8",children:l||!t?(0,n.jsx)(g.Ay,{className:"w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/create",onClick:e=>{(0,j.Ay)({actionName:"V4PromoCtaButtonClicked",context:{promoType:"sidebar_carousel",slide:"listen",userType:t?"pro":"free"}}),d(),t||(o.openSignUp({...(0,E.Of)("/create")}),e.preventDefault())},children:J.ctaRemasterNow}):(0,n.jsx)(g.Ay,{className:"w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/account",onClick:e=>{(0,j.Ay)({actionName:"V4PromoCtaButtonClicked",context:{promoType:"sidebar_carousel",slide:"listen",userType:"free"}}),t||(o.openSignUp({...(0,E.Of)("/account")}),e.preventDefault())},children:J.ctaUpgradeNow})})]})}),eg=(0,c.PA)(e=>{let{isSignedIn:t=!1,isSubscribed:l=!1,clips:a=[],...i}=e,{t:o}=(0,m.Bd)(),r=(0,s.ho)(),{session:d,clips:c}=(0,f.gy)(),x=(0,u.useRouter)(),h=(0,u.usePathname)(),[v,y]=(0,p.useState)(d.freeRemastersLeft);(0,p.useEffect)(()=>{y(d.freeRemastersLeft)},[d.freeRemastersLeft]);let[b,C]=(0,p.useState)(null),w=eo(),N=(0,p.useCallback)(e=>{!async function(){C(e.id),await c.upsampleClip(e),y(e=>Math.max(0,e-1)),w(),"/create"!==h&&x.push("/create"),C(null)}()},[h,x,c,w]);return(0,n.jsxs)(es,{backgroundImage:"/campaign/v4/v4-promo-remaster-bg.jpg",...i,children:[(0,n.jsx)($,{className:"mt-[100px] mb-8"}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("h2",{className:"font-serif font-light text-[32px] leading-none uppercase",children:(0,n.jsx)(ei,{text:J.remasterTitle})}),(0,n.jsx)("p",{className:"font-sans text-sm",children:J.remasterBody})]}),(0,n.jsx)("div",{className:"mt-8 flex flex-col gap-4",children:a.slice(0,3).map((e,t)=>(0,n.jsx)(et,{clip:e,clips:a,contextId:"v4-promo-remaster",children:(0,n.jsx)("div",{className:"flex flex-col justify-end min-h-full",children:(0,n.jsx)(g.Ay,{className:"block w-full",variant:g.Ak.Secondary,size:g.Mp.Mini,shape:g.aH.Pill,disabled:!!b,href:v?void 0:"/account",onClick:()=>{(0,j.Ay)({actionName:"V4PromoRemasterButtonClicked",context:{promoType:"sidebar_carousel",slide:"remaster",userType:l?"pro":"free",song:null==e?void 0:e.id}}),v&&N(e)},children:e.id===b?(0,n.jsx)(W.A,{}):o("songActions.remaster")})})},(null==e?void 0:e.id)||t))}),(0,n.jsx)("div",{className:"mt-8",children:l||!t?(0,n.jsx)(g.Ay,{className:"w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/create",onClick:e=>{(0,j.Ay)({actionName:"V4PromoCtaButtonClicked",context:{promoType:"sidebar_carousel",slide:"remaster",userType:t?"pro":"free"}}),w(),t||(r.openSignUp({...(0,E.Of)("/create")}),e.preventDefault())},children:J.ctaRemasterNow}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Ay,{className:"w-full",variant:g.Ak.LightPrimary,size:g.Mp.Small,shape:g.aH.Pill,href:"/account",onClick:e=>{(0,j.Ay)({actionName:"V4PromoCtaButtonClicked",context:{promoType:"sidebar_carousel",slide:"remaster",userType:"pro"}}),t||(r.openSignUp({...(0,E.Of)("/account")}),e.preventDefault())},children:J.ctaUpgradeForMore}),(0,n.jsxs)("p",{className:"mt-2 text-xs text-primary text-center",children:[v,1===v?J.freeRemasterRemaining:J.freeRemastersRemaining]})]})})]})}),ev=(0,c.PA)(e=>{let{isLoading:t,...l}=e,{slides:s,slideOrder:r,defaultSlide:c,modal:m,isLoading:x}=function(e){let{canTriggerModal:t=!0}={},{session:l,clips:s,library:r,promo:c}=(0,f.gy)(),{isSignedIn:m}=(0,o.d)(),x=(0,T.Xl)(l)||(0,T.FJ)(l),h=!x,[g,v]=(0,p.useState)(a);(0,p.useEffect)(()=>{async function e(){await s.loadPlaylist(K,0,void 0,!0);let e=s.getPlaylistClips(K);e&&(a=Array(Math.floor((a=e.map(e=>{let{clip:t}=e;return t})).length/2)).fill(0).map((e,t)=>t).sort(()=>Math.random()-.5).map(e=>[a[2*e],a[2*e+1]]).flatMap(e=>e)),v(a||[])}(null==a?void 0:a.length)?v((a=Array(Math.floor(a.length/2)).fill(0).map((e,t)=>t).sort(()=>Math.random()-.5).map(e=>[a[2*e],a[2*e+1]]).flatMap(e=>e))||[]):e()},[s]);let[y,b]=(0,p.useState)(i);(0,p.useEffect)(()=>{async function e(){if(m){let e=await r.loadTopClips();e&&(i=e)}b(i||[])}(null==i?void 0:i.length)||e()},[s,r]);let C=(0,p.useMemo)(()=>({testDrive:(0,n.jsx)(em,{isSignedIn:m,isSubscribed:x}),mobile:(0,n.jsx)(ex,{isSignedIn:m,isSubscribed:x}),android:(0,n.jsx)(eh,{isSignedIn:m,isSubscribed:x}),listen:(0,n.jsx)(ef,{isSignedIn:m,isSubscribed:x,clips:g}),remaster:(0,n.jsx)(eg,{isSignedIn:m,isSubscribed:x,clips:y})}),[m,x,g,y]),j=(0,p.useMemo)(()=>m&&((null==y?void 0:y.length)||0)>=3?[h?"testDrive":"mobile","listen","remaster"]:[h?"testDrive":"mobile","listen"],[m,h,null==y?void 0:y.length]),w=(0,p.useMemo)(()=>{let e=0,t=c.slideId&&c.slideId.replace("".concat(q,":"),"");return t&&(e=Math.max(j.indexOf(t)),(c.previouslyDismissed||c.sessionTimestamp&&Date.now()>=c.sessionTimestamp+3e5)&&e++),j[Math.max(0,e%j.length)]},[c,j]);(0,p.useEffect)(()=>{c.previouslyDismissed=!1,c.sessionTimestamp=Date.now();let e=setInterval(()=>{(0,d.h5)(()=>{c.sessionTimestamp=Date.now()})},3e5);return()=>{clearInterval(e)}},[c]);let[N,k]=(0,p.useState)(!1),A=(0,u.usePathname)(),I=(0,p.useMemo)(()=>!(g&&y),[g,y]),P=!(0,S.gs)();return(0,p.useEffect)(()=>{t&&"/account"!==A&&P&&!c.dismissedModal&&!I&&l.sessionIsLoaded&&(c.dismissedModal=!0,k(!0))},[t,P,I,c,l.sessionIsLoaded,A]),{slides:C,slideOrder:j,defaultSlide:w,modal:(0,p.useMemo)(()=>{if(!N)return null;let e=(0,E.m0)();return c.isDismissed("".concat(Y,":mobile"))?m&&!c.isDismissed("".concat(Y,":listen"))&&(null==g?void 0:g.length)?(0,n.jsx)(eu,{isSignedIn:m,isSubscribed:x,clips:g||[],onClose:()=>{c.dismiss("".concat(Y,":listen")),k(!1)},onShow:()=>{c.impression("".concat(Y,":listen"))}}):m&&!c.isDismissed("".concat(Y,":remaster"))&&(null==y?void 0:y.length)?(0,n.jsx)(ep,{isSignedIn:m,isSubscribed:x,clips:y||[],onClose:()=>{c.dismiss("".concat(Y,":remaster")),k(!1)},onShow:()=>{c.impression("".concat(Y,":remaster"))}}):null:x&&e?(0,n.jsx)(ed,{isSignedIn:m,isSubscribed:x,onClose:()=>{c.dismiss("".concat(Y,":mobile")),k(!1)},onShow:()=>{c.impression("".concat(Y,":mobile"))}}):(0,n.jsx)(er,{isSignedIn:m,isSubscribed:x,isGaLaunch:!0,onClose:()=>{c.dismiss("".concat(Y,":mobile")),k(!1)},onShow:()=>{c.impression("".concat(Y,":mobile"))}})},[!0,N,m,x,g,y,c]),isLoading:I}}(),h=(0,u.usePathname)(),g="/"===h||h.startsWith("/discover");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G,{navClassName:"[@media(min-height:1081px)]:bottom-10",slides:s,slideOrder:r,defaultSlide:c,isLoading:t||x,id:q,autoplay:!e.isHidden&&!!g&&12e3,...l}),m]})})},82961:(e,t,l)=>{l.d(t,{Zs:()=>a,wm:()=>i});let a=284,i=Math.round(9/16*284)},83168:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(95155);l(12115);let i=()=>{let e=Array.from({length:10});return(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none z-[10000]",children:e.map((e,t)=>(0,a.jsx)("div",{className:"absolute w-8 h-8 opacity-80 animate-float",style:{left:"".concat(100*Math.random(),"%"),animationDuration:"".concat(3*Math.random()+5,"s"),animationDelay:"".concat(5*Math.random(),"s"),top:"-100px"},children:(0,a.jsx)("img",{src:"/icons/gift.svg",alt:"Gift",className:"w-full h-full object-contain"})},t))})}},84821:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(95155);l(12115);let i=e=>(0,a.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 380 380",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M370 190C370 213.145 342.654 230.677 334.305 250.784C325.956 270.891 332.258 303.253 316.539 319.039C300.82 334.825 269.205 328.253 248.361 336.894C227.517 345.535 210.711 372.5 187.5 372.5C164.289 372.5 146.744 345.227 126.639 336.894C106.534 328.561 74.1486 334.825 58.4609 319.039C42.7732 303.253 49.0439 270.891 40.6945 250.784C32.3452 230.677 5 213.145 5 190C5 166.855 32.3452 149.323 40.6945 129.216C49.0439 109.109 42.7732 76.7467 58.4609 60.9609C74.1486 45.1751 106.764 51.7467 126.639 43.1056C145.744 34.7731 164.289 7.5 187.5 7.5C210.711 7.5 227.517 34.4645 248.361 43.1056C269.205 51.7467 300.82 45.1751 316.539 60.9609C332.258 76.7467 325.956 109.109 334.305 129.216C342.654 149.323 370 166.855 370 190Z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})},85834:(e,t,l)=>{l.d(t,{fw:()=>n});let a=[["seconds",1e3],["minutes",6e4],["hours",36e5],["days",864e5],["weeks",6048e5],["years",314496e5]],i={long:new Intl.RelativeTimeFormat("en",{style:"long"}),narrow:new Intl.RelativeTimeFormat("en",{style:"narrow"})};function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long",l=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return l&&Math.abs(e)<n?l:i[t].format(...function(e){let t=Math.abs(e),l=a[0];for(let e=1;e<a.length&&!(t<=a[e][1]);e++)l=a[e];return[Math.round(e/l[1]),l[0]]}(e))}},86147:(e,t,l)=>{l.d(t,{I:()=>m});var a=l(95155),i=l(63438),n=l(77119),s=l(53012),o=l(74955),r=l(95625),d=l(63808),c=l(2918),u=l(90037),p=l(7132);let m=(0,i.PA)(e=>{let{clip:t}=e,{library:l,menus:i}=(0,n.gy)(),m=()=>{(0,d.Ay)({actionName:"PublishButtonPublishClicked",principalObjectType:"song",principalObjectValue:t.id}),l.setActiveClip(t),i.openModal(c.H.PUBLISH_SONG)},x=()=>{(0,d.Ay)({actionName:"PublishButtonUnpublishClicked",principalObjectType:"song",principalObjectValue:t.id}),l.setActiveClip(t),i.openModal(c.H.UNPUBLISH_SONG)};return(0,a.jsx)(r.A,{variant:o.Ak.Primary,size:o.Mp.Mini,shape:o.aH.Rounded,onClick:()=>{t.is_public?x():m()},disabled:(0,u.a)(t),children:(0,a.jsx)(s.Q,{label:p.qj,isTooltipEnabled:(0,u.a)(t),children:t.is_public?"Unpublish":"Publish"})})})},88066:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(95155);l(12115);var i=l(39688),n=l(65015);let s=e=>{let{children:t,handle:l,href:s="/@".concat(l),...o}=e;return(0,a.jsx)(n.A,{href:s,...o,className:(0,i.QP)("hover:underline",e.className),children:t})}},88590:(e,t,l)=>{l.d(t,{A:()=>y});var a=l(95155),i=l(77700),n=l(36342),s=l(63438),o=l(35695),r=l(12115),d=l(97908),c=l(39688),u=l(77119),p=l(50649),m=l(7132),x=l(88008),h=l(99428),f=l(61932),g=l(74955),v=l(97942);let y=(0,s.PA)(e=>{var t,l,s,y,b,C,j,w,N,k,A,S,I;let{index:P,clip:_,className:M,height:T,fillColor:E,strokeColor:L,initialStartValue:O,selectionType:R,maxSelectionRangeSecs:D,quantizeSelectionSecs:F=.2,isDraggingPlaybar:B=!1,actionMode:z,setWaveformStartInput:U,setWaveformEndInput:H,startPosition:W,endPosition:V,setStartPosition:G,setEndPosition:Y,showTimestamps:q=!0,actionButtonText:Q,onActionButtonClick:K,pinEndPosition:J=!1,initialStartPosition:X}=e,{playbar:Z,edit:$,session:ee,genForm:et,clips:el}=(0,u.gy)(),ea=(0,r.useRef)(null),ei=(0,r.useRef)(null),en=(0,r.useRef)(null),es=(0,o.usePathname)(),[eo,er]=(0,r.useState)(!1),[ed,ec]=(0,r.useState)([]),[eu,ep]=(0,r.useState)(!1),[em,ex]=(0,r.useState)(!1),[eh,ef]=(0,r.useState)(null),[eg,ev]=(0,r.useState)(!1),ey=(0,r.useRef)(null),eb=null===(t=ee.flags)||void 0===t?void 0:t["edit-mode-ui"],[eC,ej]=(0,r.useState)(null),[ew,eN]=(0,r.useState)(void 0),ek=T||200,eA=(null==_?void 0:null===(l=_.metadata)||void 0===l?void 0:l.duration)?(null==_?void 0:null===(s=_.metadata)||void 0===s?void 0:s.duration)*15:2e3,eS=e=>{let t=(0,f.yd)(e.start,F),l=(0,f.yd)(e.end,F);$.setSelectionRange(t,l),U((0,f.N8)(t,1)||""),H((0,f.N8)(l,1)||""),null!==ey.current&&clearTimeout(ey.current),ey.current=setTimeout(()=>{es.startsWith("/edit/")&&($.incrementActionIndex(),x.LS.logAudioCreationEvent(!1,h.a2.makeWaveformSelection,et,ee,{startSeconds:t,endSeconds:l,editTool:$.activeEditTool,editSessionId:$.editSessionId,editingClipId:$.editingClipId,actionIndex:$.actionIndex}))},1e3)},eI=()=>{ep(!1),G(null),Y(null)};(0,d.vC)("left",()=>{var e,t,l,a,i,n,s,o,r,d,c,u,p;if($.isSelectionRangeActive()&&(null==_?void 0:null===(e=_.metadata)||void 0===e?void 0:e.duration)&&ei.current){if("l"===eh){let e=Math.max(0,(W||0)-F/(null==_?void 0:null===(t=_.metadata)||void 0===t?void 0:t.duration)*(null===(l=ei.current)||void 0===l?void 0:l.getBoundingClientRect().width));G(e),(!D||((null===(a=$.selectionRange)||void 0===a?void 0:a.end)||0)-e/ei.current.getBoundingClientRect().width*(null==_?void 0:null===(i=_.metadata)||void 0===i?void 0:i.duration)<=(D||0))&&eS({start:e/ei.current.getBoundingClientRect().width*(null==_?void 0:null===(n=_.metadata)||void 0===n?void 0:n.duration),end:null===(s=$.selectionRange)||void 0===s?void 0:s.end})}else if("r"===eh){let e=Math.max((W||0)+20,(V||0)-F/(null==_?void 0:null===(o=_.metadata)||void 0===o?void 0:o.duration)*(null===(r=ei.current)||void 0===r?void 0:r.getBoundingClientRect().width));Y(e),(!D||e/ei.current.getBoundingClientRect().width*(null==_?void 0:null===(d=_.metadata)||void 0===d?void 0:d.duration)-((null===(c=$.selectionRange)||void 0===c?void 0:c.start)||0)<=(D||0))&&eS({end:e/ei.current.getBoundingClientRect().width*(null==_?void 0:null===(u=_.metadata)||void 0===u?void 0:u.duration),start:null===(p=$.selectionRange)||void 0===p?void 0:p.start})}}}),(0,d.vC)("right",()=>{var e,t,l,a,i,n,s,o,r,d,c,u,p;if($.isSelectionRangeActive()&&(null==_?void 0:null===(e=_.metadata)||void 0===e?void 0:e.duration)&&ei.current){if("l"===eh){let e=Math.min((V||0)-20,(W||0)+F/(null==_?void 0:null===(t=_.metadata)||void 0===t?void 0:t.duration)*(null===(l=ei.current)||void 0===l?void 0:l.getBoundingClientRect().width));G(e),(!D||((null===(a=$.selectionRange)||void 0===a?void 0:a.end)||0)-e/ei.current.getBoundingClientRect().width*(null==_?void 0:null===(i=_.metadata)||void 0===i?void 0:i.duration)<=(D||0))&&eS({start:e/ei.current.getBoundingClientRect().width*(null==_?void 0:null===(n=_.metadata)||void 0===n?void 0:n.duration),end:null===(s=$.selectionRange)||void 0===s?void 0:s.end})}else if("r"===eh){let e=Math.min(null===(o=ei.current)||void 0===o?void 0:o.getBoundingClientRect().width,(V||0)+F/(null==_?void 0:null===(r=_.metadata)||void 0===r?void 0:r.duration)*(null===(d=ei.current)||void 0===d?void 0:d.getBoundingClientRect().width));Y(e),(!D||e/ei.current.getBoundingClientRect().width*_.metadata.duration-((null===(c=$.selectionRange)||void 0===c?void 0:c.start)||0)<=(D||0))&&eS({end:e/ei.current.getBoundingClientRect().width*(null==_?void 0:null===(u=_.metadata)||void 0===u?void 0:u.duration),start:null===(p=$.selectionRange)||void 0===p?void 0:p.start})}}}),(0,d.vC)("shift",()=>{ev(!0)},{keydown:!0,keyup:!1}),(0,d.vC)("shift",()=>{ev(!1)},{keydown:!1,keyup:!0}),(0,r.useEffect)(()=>{var e,t,l,a;let i=null===(e=ea.current)||void 0===e?void 0:e.getBoundingClientRect().width;(null==_?void 0:null===(t=_.metadata)||void 0===t?void 0:t.duration)!==null&&(null==_?void 0:null===(l=_.metadata)||void 0===l?void 0:l.duration)!==void 0&&void 0!==O&&void 0!==i&&G(O/(null==_?void 0:null===(a=_.metadata)||void 0===a?void 0:a.duration)*i)},[O,null==_?void 0:null===(y=_.metadata)||void 0===y?void 0:y.duration]),(0,r.useEffect)(()=>{let e=async()=>{if(er(!1),eI(),el.pregenWaveformByClipId[null==_?void 0:_.id]){let e=el.pregenWaveformByClipId[null==_?void 0:_.id].waveformData,t=1/Math.max(...e);ec(e.map(e=>e*t));return}let e=Z.audioData[null==_?void 0:_.id];if((!e||eo)&&(e=await Z.decodeAudio(_)),!e)return;let t=e.getChannelData(0),l=e.numberOfChannels>1?e.getChannelData(1):new Float32Array([...t]),a=Array.from(Array(Math.floor(t.length/eA)).keys()).map(e=>{let a=t.slice(e*eA,(e+1)*eA),i=l.slice(e*eA,(e+1)*eA);return Math.sqrt((a.map(e=>e**2).reduce((e,t)=>e+t,0)+i.map(e=>e**2).reduce((e,t)=>e+t,0))/(2*eA))});el.pregenWaveformByClipId[null==_?void 0:_.id]={waveformData:a,hootErrorRate:null};let i=1/Math.max(...a);ec(a.map(e=>e*i))};el.isLoadingAlignedLyrics||e()},[_,el.isLoadingAlignedLyrics]),(0,r.useEffect)(()=>{var e,t;X&&(null==_?void 0:null===(e=_.metadata)||void 0===e?void 0:e.duration)&&G(X/(null==_?void 0:null===(t=_.metadata)||void 0===t?void 0:t.duration)*ei.current.getBoundingClientRect().width),J&&Y(ei.current.getBoundingClientRect().width)},[J,X,null==_?void 0:null===(b=_.metadata)||void 0===b?void 0:b.duration]);let eP=()=>{var e;let t=n.m4Y().domain([0,ed.length]).range([0,null===(e=ei.current)||void 0===e?void 0:e.getBoundingClientRect().width]),l=n.m4Y().domain([0,Math.max(...ed)]).range([(T||0)/2,T||0]),a=n.m4Y().domain([0,Math.max(...ed)]).range([(T||0)/2,T||0]),i=n.Wcw().x(e=>t(e.x)).y0(e=>l(e.y)).y1(e=>a(-1*e.y)).curve(n.oDi),s=n.n8j().x(e=>t(e.x)).y(e=>l(e.y)).curve(n.oDi),o=n.n8j().x(e=>t(e.x)).y(e=>a(-1*e.y)).curve(n.oDi);n.Ltv("#demo".concat(P||"")).selectAll("path").remove();let r=n.Ltv("#demo".concat(P||"")).append("defs").append("linearGradient").attr("id","linear-gradient");r.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),r.append("stop").attr("offset","0%").attr("stop-color","rgba(250, 247, 245, 0.1)"),r.append("stop").attr("offset","40%").attr("stop-color","rgba(250, 247, 245, 0.3)"),r.append("stop").attr("offset","50%").attr("stop-color","rgba(250, 247, 245, 0.32)"),r.append("stop").attr("offset","60%").attr("stop-color","rgba(250, 247, 245, 0.3)"),r.append("stop").attr("offset","100%").attr("stop-color","rgba(250, 247, 245, 0.1)"),n.Ltv("#demo".concat(P||"")).append("path").attr("d",i(ed.map((e,t)=>({x:t,y:e})))).attr("pointer-events","none").attr("fill",E||"#FAF7F5").attr("stroke","none"),n.Ltv("#demo".concat(P||"")).append("path").attr("d",s(ed.map((e,t)=>({x:t,y:e})))).attr("pointer-events","none").attr("fill","none").attr("stroke",L||"rgb(250, 247, 245, 0.6)").attr("stroke-width","1"),n.Ltv("#demo".concat(P||"")).append("path").attr("d",o(ed.map((e,t)=>({x:t,y:e})))).attr("pointer-events","none").attr("fill","none").attr("stroke",L||"rgb(250, 247, 245, 0.6)").attr("stroke-width","1")};(0,r.useEffect)(()=>{eP()},[ed]),(0,r.useEffect)(()=>{eu||$.isScrubbing||em?document.body.classList.add("no-drag"):document.body.classList.remove("no-drag")},[eu,em,$.isScrubbing]),(0,r.useEffect)(()=>{let e=new ResizeObserver(()=>{var e,t,l,a,i,n,s,o;if(eu)return;let r=null===(e=ei.current)||void 0===e?void 0:e.getBoundingClientRect().width;r&&(null==_?void 0:null===(t=_.metadata)||void 0===t?void 0:t.duration)&&(null!==W&&(null===(l=$.selectionRange)||void 0===l?void 0:l.start)&&G((null===(i=$.selectionRange)||void 0===i?void 0:i.start)/(null==_?void 0:null===(n=_.metadata)||void 0===n?void 0:n.duration)*r),null!==V&&(null===(a=$.selectionRange)||void 0===a?void 0:a.end)&&Y((null===(s=$.selectionRange)||void 0===s?void 0:s.end)/(null==_?void 0:null===(o=_.metadata)||void 0===o?void 0:o.duration)*r)),eP()});return e.observe(ei.current),()=>{ei.current&&e.unobserve(ei.current),e.disconnect()}},[ed,W,V,null==_?void 0:null===(C=_.metadata)||void 0===C?void 0:C.duration,eu]),(0,r.useEffect)(()=>{let e=0*ek;e!==ew&&eN(e)},[W,null===(j=ea.current)||void 0===j?void 0:j.offsetLeft]),(0,r.useEffect)(()=>{if(null===$.selectionRange)G(null),Y(null),U("00:00.0"),H("00:00.0");else{var e,t,l;if(!ei.current||!(null==_?void 0:null===(e=_.metadata)||void 0===e?void 0:e.duration))return;let a=ei.current.getBoundingClientRect().width;G($.selectionRange.start/(null==_?void 0:null===(t=_.metadata)||void 0===t?void 0:t.duration)*a),Y($.selectionRange.end/(null==_?void 0:null===(l=_.metadata)||void 0===l?void 0:l.duration)*a),U((0,f.N8)($.selectionRange.start,1)||""),H((0,f.N8)($.selectionRange.end,1)||"")}},[$.selectionRange,z]);let e_=e=>{var t,l,a,i;let n=e.clientX,s=null===(t=ei.current)||void 0===t?void 0:t.getBoundingClientRect(),o=n-($.selectionBoxDragStart||0),r=((null===(l=$.selectionBoxPositionStart)||void 0===l?void 0:l.startPosition)||0)+o,d=((null===(a=$.selectionBoxPositionStart)||void 0===a?void 0:a.endPosition)||0)+o,c=r<0?-1*r:d>s.width?s.width-d:0;G(r+c),Y(d+c);let u=(null==_?void 0:null===(i=_.metadata)||void 0===i?void 0:i.duration)||0,p={};p.start=(r+c)/s.width*u,p.end=(d+c)/s.width*u,eS(p)};return(0,a.jsx)("div",{className:(0,c.QP)("py-4 h-auto w-auto",M),id:"outerouter",onMouseMove:e=>{if(em){e_(e);return}if(eu||$.isScrubbing){var t,l,a,i,n,s,o,r,d,c,u;let p={},m=e.target.getBoundingClientRect(),x=(null==_?void 0:null===(t=_.metadata)||void 0===t?void 0:t.duration)||0,h=e.clientX-m.x,g=(0,f.yd)(h/m.width*(x||0),F)/(x||1)*m.width;if($.isScrubbing){$.setScrubPosition(h);return}if(eh){let e=W||0,t=V||0;if("l"===eh?e=Math.max(0,Math.min(g,t)):t=Math.max(g,e),D){let l=D/x*m.width;t-e>l&&("l"===eh?e=t-l:t=e+l)}G(Math.max(e,0)),Y(Math.min(t,m.width));let l=(0,f.yd)(x,F),a=l>x?l-F:l;p.start=Math.max(e/m.width*x,0),p.end=Math.min(t/m.width*x,a),eS(p);return}let v=Math.min(Math.max(g,eC&&(null==_?void 0:null===(l=_.metadata)||void 0===l?void 0:l.duration)?eC-(D||(null===(a=_.metadata)||void 0===a?void 0:a.duration))/(null===(i=_.metadata)||void 0===i?void 0:i.duration)*m.width:0),eC||0),y=Math.max(Math.min(g,eC&&(null==_?void 0:null===(n=_.metadata)||void 0===n?void 0:n.duration)?eC+(D||(null==_?void 0:null===(s=_.metadata)||void 0===s?void 0:s.duration))/(null==_?void 0:null===(o=_.metadata)||void 0===o?void 0:o.duration)*m.width:0),eC||0);"range"===R?(p.start=v/m.width*((null==_?void 0:null===(r=_.metadata)||void 0===r?void 0:r.duration)||0),p.end=J?null==_?void 0:null===(d=_.metadata)||void 0===d?void 0:d.duration:y/m.width*((null==_?void 0:null===(c=_.metadata)||void 0===c?void 0:c.duration)||0),G(v),Y(J?m.width:y)):(p.start=h/m.width*((null==_?void 0:null===(u=_.metadata)||void 0===u?void 0:u.duration)||0),p.end=void 0,G(h),Y(null)),eS(p)}},onMouseLeave:e=>{var t,l;if(em){ex(!1);return}if(!eu&&!$.isScrubbing)return;let a=null===(t=ei.current)||void 0===t?void 0:t.getBoundingClientRect();if(a){let t=e.clientX;if($.isScrubbing){Z.userSetCurrentProgress(($.scrubPosition||0)/(null===(l=ei.current)||void 0===l?void 0:l.getBoundingClientRect().width)*100),requestAnimationFrame(()=>{$.setIsScrubbing(!1)});return}if($.selectionRange&&D&&$.selectionRange.end-$.selectionRange.start===D)return;t<a.left?requestAnimationFrame(()=>{var e;G(0),eS({start:0,end:null===(e=$.selectionRange)||void 0===e?void 0:e.end})}):t>a.right&&requestAnimationFrame(()=>{var e,t;Y(a.width),eS({start:null===(e=$.selectionRange)||void 0===e?void 0:e.start,end:null==_?void 0:null===(t=_.metadata)||void 0===t?void 0:t.duration})}),ex(!1),ep(!1),$.setIsScrubbing(!1),ef(null),null!==W&&null!==V&&10>Math.abs(V-W)&&$.clearSelectionRange()}},onMouseUp:()=>{if(em){ex(!1);return}if(ep(!1),null!==$.scrubPosition||null!==W&&(null===V||isNaN(V))||null!==W&&null!==V&&V-W<.1){$.isScrubbing||($.clearSelectionRange(),$.setIsScrubbing(!0)),requestAnimationFrame(()=>{var e,t,l,a;_.id!==(null===(e=Z.clip)||void 0===e?void 0:e.id)?Z.playClip(_,null,null,!0,($.scrubPosition||W||0)/(null===(t=ei.current)||void 0===t?void 0:t.getBoundingClientRect().width)*((null==_?void 0:null===(l=_.metadata)||void 0===l?void 0:l.duration)||0)):Z.userSetCurrentProgress(($.scrubPosition||W||0)/(null===(a=ei.current)||void 0===a?void 0:a.getBoundingClientRect().width)*100),requestAnimationFrame(()=>{$.setIsScrubbing(!1)})});return}null!==W&&null!==V&&10>Math.abs(V-W)&&$.clearSelectionRange(),$.setIsScrubbing(!1)},onMouseOut:()=>{},children:(0,a.jsxs)(i.Box,{position:"relative",ref:ei,children:[(!ed.length||(null==_?void 0:_.id)&&el.pendingAlignedLyricsClipIds.has(null==_?void 0:_.id))&&(0,a.jsx)("div",{className:"absolute top-0 flex flex-row w-full h-full items-center justify-center",children:(0,a.jsx)(v.A,{})}),(0,a.jsx)(i.Box,{backgroundColor:eb?"rgba(199, 61, 102, 0.4)":"rgba(255,255,255,0.1)",position:"absolute",h:"".concat(+ek,"px"),top:"".concat(ew,"px"),display:null!==W?"block":"none",left:W?"".concat(W,"px"):void 0,width:null!==V&&null!==W&&(null===(w=_.metadata)||void 0===w?void 0:w.duration)?"".concat(V-W,"px"):null!==W?"1px":0,cursor:em?"grabbing":eg?"grab":"pointer",pointerEvents:null===W||null===V||eu||$.isScrubbing?"none":void 0,zIndex:m.CX,onMouseDown:e=>{if(!J){if(e.shiftKey){ex(!0),$.setSelectionBoxDragStart(e.clientX),$.setSelectionBoxPositionStart({startPosition:W||0,endPosition:V||0});return}$.setIsScrubbing(!0),requestAnimationFrame(()=>{var t;let l=null===(t=ei.current)||void 0===t?void 0:t.getBoundingClientRect(),a=e.clientX-l.x;Z.userSetCurrentProgress(a/l.width*100)})}},onMouseMove:e=>{em&&e_(e)},onMouseUp:()=>{ex(!1),$.setSelectionBoxDragStart(null),$.setSelectionBoxPositionStart(null)},children:null!==W&&null!==V&&(Math.abs(V-W)>10||J)?(0,a.jsxs)(a.Fragment,{children:[eb?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{onMouseDown:e=>{ep(!0),ef("l"),e.stopPropagation()},className:"bg-transparent ".concat("l"===eh?"brightness-150":""," hover:brightness-150 h-full left-0 absolute w-2 content-center items-center cursor-ew-resize active:cursor-ew-resize border-l-2 border-accentPink"),children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"bottom-0 absolute left-0 w-3 h-3",style:{marginBottom:"-10px",marginLeft:"-7px"},children:(0,a.jsx)("path",{d:"M0 480L256 32 512 480H0z",fill:"#C73D66"})}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"rotate-180 top-0 absolute left-0 w-3 h-3",style:{marginTop:"-10px",marginLeft:"-7px"},children:(0,a.jsx)("path",{d:"M0 480L256 32 512 480H0z",fill:"#C73D66"})})]}),J?null:(0,a.jsxs)("div",{onMouseDown:e=>{ep(!0),ef("r"),e.stopPropagation()},className:"bg-transparent ".concat("r"===eh?"brightness-150":""," hover:brightness-150 h-full right-0 absolute w-2 content-center items-center cursor-ew-resize active:cursor-ew-resize border-r-2 border-accentPink"),children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"bottom-0 absolute right-0 w-3 h-3",style:{marginBottom:"-10px",marginRight:"-7px"},children:(0,a.jsx)("path",{d:"M0 480L256 32 512 480H0z",fill:"#C73D66"})}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"rotate-180 top-0 absolute right-0 w-3 h-3",style:{marginTop:"-10px",marginRight:"-7px"},children:(0,a.jsx)("path",{d:"M0 480L256 32 512 480H0z",fill:"#C73D66"})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{onMouseDown:e=>{ep(!0),ef("l"),e.stopPropagation()},className:"".concat("l"===eh?"bg-white":"bg-neutral-400"," hover:bg-white h-full left-0 absolute w-1 content-center items-center rounded-lg cursor-ew-resize")}),J?null:(0,a.jsx)("div",{onMouseDown:e=>{ep(!0),ef("r"),e.stopPropagation()},className:"".concat("r"===eh?"bg-white":"bg-neutral-400"," hover:bg-white h-full right-0 absolute w-1 content-center items-center rounded-lg cursor-ew-resize")})]}),q?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{draggable:!1,className:"absolute text-[8px] select-none font-bold font-mono text-primary bg-vinylBlack-darker bg-opacity-70 backdrop-blur-md w-min-content rounded-sm h-auto px-1 bottom-0 left-0 transition-opacity duration-[525ms] pointer-events-none",children:(0,f.N8)(Math.max((null===(N=$.selectionRange)||void 0===N?void 0:N.start)||0,0),1)}),(0,a.jsx)("div",{draggable:!1,className:"absolute text-[8px] select-none font-bold font-mono text-primary bg-vinylBlack-darker bg-opacity-70 backdrop-blur-md w-min-content rounded-sm h-auto px-1 bottom-0 right-0 transition-opacity duration-[525ms] pointer-events-none",children:(0,f.N8)(null===(k=$.selectionRange)||void 0===k?void 0:k.end,1)})]}):null,Q&&K&&$.checkActionButtonVisibility()?(0,a.jsx)("div",{className:"left-2 absolute w-[calc(100%-16px)] h-full flex flex-row ".concat(ei.current.getBoundingClientRect().width-W<40?"justify-end":V<40?"justify-start":"justify-center"," items-center"),children:(0,a.jsx)("div",{className:"h-auto w-auto z-[1000]",onMouseDown:e=>e.stopPropagation(),children:(0,a.jsx)(g.Ay,{shape:g.aH.Pill,icon:(0,a.jsx)(p.Srz,{className:"h-4 w-4 stroke-primary fill-primary group-hover:stroke-vinylBlack-darker group-hover:fill-vinylBlack-darker"}),onClick:e=>{e.stopPropagation(),K()}})})}):null]}):null}),Z.currentTime&&(null===(A=Z.clip)||void 0===A?void 0:A.id)===(null==_?void 0:_.id)&&ei.current?(0,a.jsx)("div",{className:"w-[0px] border border-metallicWhite-darkest brightness-75 h-full absolute pointer-events-none ".concat($.isScrubbing||B?"":"transition transition-[left] ease-linear duration-[525ms]"),style:{left:"".concat($.isScrubbing&&null!==$.scrubPosition?$.scrubPosition:Z.currentTime/Z.duration*ei.current.getBoundingClientRect().width,"px")}}):null,(null==_?void 0:_.id)&&el.pendingAlignedLyricsClipIds.has(null==_?void 0:_.id)?(0,a.jsx)("div",{style:{width:"100%",height:"".concat(ek,"px")}}):null,(0,a.jsx)("div",{className:"cursor-pointer ".concat((null==_?void 0:_.id)&&el.pendingAlignedLyricsClipIds.has(null==_?void 0:_.id)?"hidden":""),onMouseDown:e=>{var t,l,a;let i=e.target.getBoundingClientRect(),n=e.clientX-i.x;if(!R||null!==W&&null!==V&&!isNaN(W)&&!isNaN(V)){$.setIsScrubbing(!0),requestAnimationFrame(()=>{var e,t;(null==_?void 0:_.id)!==(null===(e=Z.clip)||void 0===e?void 0:e.id)?Z.playClip(_,null,null,!0,n/i.width*((null==_?void 0:null===(t=_.metadata)||void 0===t?void 0:t.duration)||0)):Z.userSetCurrentProgress(n/i.width*100)});return}J?(G(n),ej(n),Y(i.width),ep(!0),ef(null),eS({start:n/i.width*((null==_?void 0:null===(t=_.metadata)||void 0===t?void 0:t.duration)||0),end:null==_?void 0:null===(l=_.metadata)||void 0===l?void 0:l.duration})):(Y(null),G(n),ej(n),ep(!0),ef(null),eS({start:n/i.width*((null==_?void 0:null===(a=_.metadata)||void 0===a?void 0:a.duration)||0),end:void 0}))},children:(0,a.jsx)("svg",{ref:en,style:{width:"100%",height:"".concat(ek,"px"),paddingLeft:"0px",paddingRight:"0px"},id:"demo".concat(P||"")})}),null===W||null===V||eb&&"extend"!==$.activeEditTool?null:(0,a.jsxs)(a.Fragment,{children:[eb?null:(0,a.jsx)("div",{className:"h-full absolute top-0 left-0 opacity-70 bg-quaternary pointer-events-none z-[2] select-none",style:{width:W?"".concat(Math.max(W,0),"px"):"0px"}}),(0,a.jsx)("div",{className:"h-full absolute top-0 right-0 opacity-70 bg-quaternary pointer-events-none z-[2] select-none",style:{width:eb&&"extend"===$.activeEditTool?W&&ei.current?"".concat(Math.max((null===(S=ei.current)||void 0===S?void 0:S.getBoundingClientRect().width)-W,0),"px"):"0px":V&&ei.current?"".concat(Math.max((null===(I=ei.current)||void 0===I?void 0:I.getBoundingClientRect().width)-V,0),"px"):"0px"}})]})]})})})},88659:(e,t,l)=>{l.d(t,{A:()=>d});var a=l(95155);l(12115);var i=l(77119),n=l(88008),s=l(99428);let o=e=>{let{title:t,titleIcon:l,description:i,madlibsPrompt:n,onClick:s}=e;return(0,a.jsxs)("button",{onClick:s,className:"bg-tertiary hover:bg-secondary hover:bg-opacity-20 text-white font-bold font-sans py-6 px-8 rounded-lg flex flex-col items-center w-full h-[124px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center w-full text-center",children:[(0,a.jsx)("span",{className:"text-md font-normal break-words",children:t}),l&&(0,a.jsx)("span",{className:"ml-2",children:l})]}),(0,a.jsx)("p",{className:"font-normal text-sm text-lighterGray mt-2 break-words text-center",children:i}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1 break-words",children:n})]})};var r=l(76898);let d=e=>{let{setSelectedSuggestion:t}=e,{edit:l,playbar:d}=(0,i.gy)(),c=e=>{n.LS.segmentTrack(s.f7.generalEvent,{key:e.id,title:e.buttonTitle,actionName:s.a2.clickSuggestion}),t(e.id)};return(0,a.jsx)("div",{className:"flex flex-col gap-4 max-w-full",style:{marginBottom:d.clip?108+136*!!l.isEditorOpen:0},children:r.map(e=>(0,a.jsx)(o,{title:e.buttonTitle,description:e.description,madlibsPrompt:"",onClick:()=>c(e)},e.id))})}},88857:(e,t,l)=>{l.d(t,{A:()=>h,W:()=>y});var a=l(27016),i=l(5295),n=l(46391),s=l(41923),o=l(35695),r=l(12115),d=l(77119),c=l(63808),u=l(7132);let p=e=>{let t=!!window.singularSdk;(0,r.useEffect)(()=>{if(t)try{let e=new window.SingularConfig("suno_47466688","96c86b12d6c6918a4a317fd29da36cf5","com.suno").withAutoPersistentSingularDeviceId("suno.com");window.singularSdk.init(e)}catch(e){console.error("Error initializing Singular SDK:",e)}},[t]),(0,r.useEffect)(()=>{if(t&&e.sessionIsLoaded){if(e.userId)try{window.singularSdk.login(e.userId)}catch(e){console.error("Error setting Singular Custom User ID:",e)}else window.singularSdk.logout()}},[t,e.sessionIsLoaded,e.userId]);let l=(0,r.useCallback)((e,l)=>{if(!t){console.warn("Singular SDK not available, cannot publish event:",e);return}try{window.singularSdk.event(e,l)}catch(t){console.error('Error publishing Singular event "'.concat(e,'":'),t)}},[t]),a=(0,r.useCallback)((e,l,a,i)=>{if(!t){console.warn("Singular SDK not available, cannot publish event:",e);return}try{window.singularSdk.revenue(e,l,a,i)}catch(t){console.error('Error publishing Singular revenue event "'.concat(e,'":'),t)}},[t]);return{publishSignupEvent:(0,r.useCallback)(()=>{l("sng_complete_registration")},[l]),publishSubscriptionEvent:(0,r.useCallback)(e=>{let t={};void 0!==e.subscription_id&&(t.sng_attr_subscription_id=e.subscription_id),l("sng_subscribe",t);let{currency:i,value:n}=e;a("sng_subscribe",i||"USD",n||0)},[l,a])}};var m=l(47752);let x="use-singular-web-events";function h(e){let{session:t}=e,{isLoaded:l,isSignedIn:s}=(0,a.d)(),{user:c}=(0,i.Jd)(),{ga4:u}=(0,d.gy)(),h=(0,o.usePathname)(),y=(0,o.useSearchParams)(),{publishSignupEvent:b,publishSubscriptionEvent:C}=p(t),j=(0,n.useStatsigClient)();(0,r.useEffect)(()=>{(0,m.vD)(y.get("sh"),null,null)},[y]),(0,r.useEffect)(()=>{if(!l||!s||!c)return;let e=j.checkGate(x);g({clerkUser:c,searchParams:y,session:t,apiClient:u.apiClient,pathname:h,publishSignupEvent:b,useSingularEvents:e}),f({clerkUser:c,searchParams:y,session:t,publishSubscriptionEvent:C,useSingularEvents:e})},[l,s,c,h,y,t,t.sessionIsLoaded,t.isSubLoaded,u,b,C,j]);let w=!!window.AF;return(0,r.useEffect)(()=>{let e=j.checkGate(x);if(w&&!e){try{window.AF("pba","setCustomerUserId",t.userId||"")}catch(e){console.error("Error setting cuid:",e)}l&&s&&c&&t.sessionIsLoaded&&v(c,y,t.userId||"",window.AF)}},[l,s,c,t.sessionIsLoaded,t.userId,w,y,j]),null}let f=e=>{var t,l;let{clerkUser:a,searchParams:i,session:n,publishSubscriptionEvent:o,useSingularEvents:r}=e;if(!n.isSubLoaded||!i.get("checkout_session_id")||!(null===(t=n.sub)||void 0===t?void 0:t.subscription_anchor))return;let d="user-subscription-".concat(a.id),c=(0,m.fn)(d);if((0,m.hl)((0,s.A)(null===(l=n.sub)||void 0===l?void 0:l.subscription_anchor))&&(!c.expires||Date.now()>c.expires)){n.loadSubscriptionInfo();let e=(e=>({subscription_id:e.subscription_id,value:e.plan_price,currency:"USD",items:[{item_id:e.plan.id,item_name:e.plan.name,item_category:e.period,price:e.plan_price,quantity:1}]}))(n.sub);(0,m.OT)(a,"user_subscription",e),r&&o(e);let t=Date.now()+30*u.ky;(0,m.V8)(d,t)}},g=e=>{let{clerkUser:t,searchParams:l,session:a,apiClient:i,pathname:n,publishSignupEvent:s,useSingularEvents:o}=e;if(!t.createdAt||!a.sessionIsLoaded)return;let r=l.get(u.bY),d=l.get(u.f1),p=l.get(u.gd),x=(0,m.hl)(t.createdAt);if(d&&void 0!==d&&(x?(0,c.Ay)({actionName:"UserSignedUpFromPage",context:{signupSource:d,referrer:p||void 0,currentPathname:n}}):(0,c.Ay)({actionName:"UserSignedInFromPage",context:{signinSource:d,referrer:p||void 0,currentPathname:n}})),d&&(d===u.AC.SONG_PAGE_V2||d===u.AC.SONG_PAGE)&&(x?(0,c.Ay)({actionName:"SignedUpOnSongPage",context:{signupSource:d,referrer:p||void 0}}):(0,c.Ay)({actionName:"SignedInOnSongPage",context:{signinSource:d,referrer:p||void 0}})),!r)return;let h="user-auth-".concat(t.id),f=(0,m.fn)(h),g=(0,m.hl)(t.createdAt)&&r===u.yo.SIGNUP;if(!f.expires||Date.now()>f.expires){if(g){(0,m.OT)(t,"user_signup",{user_status:"new_user"}),o&&s();let e=(0,m.VS)(),l=e&&e.sid,a=e&&e.scid&&e.sct;(l||a)&&(0,m.r3)(i,e)}else(0,m.OT)(t,"user_signin",{user_status:"existing_user"});let e=Date.now()+30*u.ky;(0,m.V8)(h,e)}},v=(e,t,l,a)=>{if(!e.createdAt||!window.AF)return;let i=t.get(u.bY);if(!i)return;let n="af-auth-".concat(e.id),s=(0,m.fn)(n);(0,m.hl)(e.createdAt)&&i===u.yo.SIGNUP&&(!s||0===Object.keys(s).length)&&(a("pba","setCustomerUserId",l||""),a("pba","event",{eventType:"EVENT",eventName:"af_complete_registration"}));let o=Date.now()+1e3*u.ky;(0,m.V8)(n,o)},y=()=>{let[e,t]=(0,r.useState)(!1),{ga4:l}=(0,d.gy)(),{user:n}=(0,i.Jd)(),{isSignedIn:s}=(0,a.d)();return(0,r.useEffect)(()=>{(async()=>{e&&s&&n&&n&&(await l.loadHasCreatedSong(),l.hasCreatedSong||(0,m.OT)(n,"user_initial_song_creation",null))})()},[e,n,s,l]),{triedCreate:e,setTriedCreate:t}}},91135:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(95155);l(12115);let i=()=>{let e=Array.from({length:10});return(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none z-[10000]",children:e.map((e,t)=>(0,a.jsx)("div",{className:"absolute w-10 h-10 opacity-80 animate-float",style:{left:"".concat(100*Math.random(),"%"),animationDuration:"".concat(3*Math.random()+5,"s"),animationDelay:"".concat(5*Math.random(),"s"),top:"-100px"},children:(0,a.jsx)("img",{src:"/icons/dog.svg",alt:"Dog",className:"w-full h-full object-contain"})},t))})}},92819:(e,t,l)=>{l.d(t,{A:()=>E});var a=l(95155),i=l(39376),n=l(42066),s=l(49747),o=l(33636),r=l(52596),d=l(45964),c=l.n(d),u=l(29543),p=l(63438),m=l(12115),x=l(3096),h=l(77119),f=l(84821),g=l(65015),v=l(50649),y=l(63808),b=l(6411),C=l(7132),j=l(4869),w=l(61932),N=l(10573),k=l(74955),A=l(59041),S=l(71921),I=l(71013),P=l(40177),_=l(97942),M=l(56518),T=l(60425);let E=(0,p.PA)(e=>{var t,l,d,p,E,L;let{compact:O=!1,onSelect:R}=e,{persona:D,genForm:F,playbar:B,clips:z,session:U,queue:H,library:W,search:V,createV2:G}=(0,h.gy)(),[Y,q]=(0,m.useState)(!!O),[Q,K]=(0,m.useState)("made_by_me"),[J,X]=(0,m.useState)(!1),[Z,$]=(0,m.useState)(null),[ee,et]=(0,m.useState)(null),[el,ea]=(0,m.useState)(!1),ei=(0,m.useRef)(null),[en,es]=(0,m.useState)({}),[eo,er]=(0,m.useState)(!1),ed=(0,m.useRef)(null),[ec,eu]=(0,m.useState)(!1),ep=(0,m.useRef)(!1),[em,ex]=(0,m.useState)(""),[eh,ef]=(0,m.useState)(!1);(0,m.useEffect)(()=>{G.setIsCreatePersonaModalOpen(J)},[J]);let eg=(0,m.useRef)(c()(async e=>{if("made_by_me"===Q){let t=await V.libraryPersonaSearch(e);t&&(0,u.h5)(()=>{D.personas=t.result})}},300)).current;(0,m.useEffect)(()=>{ey()},[]);let{ref:ev}=(0,x.Wx)({threshold:0,onChange:async e=>{e&&!em&&("made_by_me"===Q&&D.getPersonasByUser(D.currentPageUserPersonas+1),"favorite"===Q&&D.getLovePersonas(D.currentPageLovedPersonas+1),"following"===Q&&D.getFollowedPersonas(D.currentPageFollowedPersonas+1))}}),ey=async()=>{ea(!0);try{await D.getPersonasByUser(),z.updateClips((D.personas||[]).map(e=>null==e?void 0:e.clip))}catch(e){console.error("Error fetching personas:",e)}finally{ea(!1)}},eb=async e=>{var t,l,a,i,n,s;F.setPersona(e.id),F.setPersonaClipId(e.root_clip_id),q(!1),(null===(t=U.flags)||void 0===t?void 0:t["auk-features"])||F.resetContinueClip(),(null===(l=U.flags)||void 0===l?void 0:l["persona-cover"])||F.resetCoverClip();let o=z.clipById[e.root_clip_id]||e.clip;if(o||(z.updateClips([e.clip].filter(Boolean)),o=e.clip),o){F.setStyle((null===(n=o.metadata)||void 0===n?void 0:n.tags)||"");let e=(null===(s=o.metadata)||void 0===s?void 0:s.negative_tags)||"";F.setNegativeTags(e),""!==e.trim()?F.setEnableExcludeStyle(!0):F.setEnableExcludeStyle(!1)}(null===(a=U.flags)||void 0===a?void 0:a["persona-cover"])&&F.coverClipId?F.setTask("artist_cover"):F.setTask("artist_consistency"),(null===(i=U.flags)||void 0===i?void 0:i["allow-v3-5-override"])&&!U.isAukEnabled()&&("v4"===o.major_model_version&&(0,j.NV)(U)?F.mv="chirp-v4":F.mv="chirp-v3-5"),(0,y.Ay)({actionName:"PersonaSelectedClicked",context:{personaId:null==e?void 0:e.id}})},eC=e=>{var t;e.stopPropagation();let l=z.clipById[F.personaClipId||""];l&&F.style===(null==l?void 0:null===(t=l.metadata)||void 0===t?void 0:t.tags)&&(F.setStyle(""),F.setNegativeTags(""),F.setEnableExcludeStyle(!1)),F.resetPersona(),F.resetArtistClip(),"artist_consistency"===F.task?F.setTask(null):"artist_cover"===F.task&&F.setTask(F.coverClipId?"cover":null),(0,y.Ay)({actionName:"PersonaClearedClicked",context:{rootClipId:null==l?void 0:l.id}})},ej=e=>{var t;(null===(t=B.clip)||void 0===t?void 0:t.id)===e?B.togglePlay():(H.setPlayContext({clips:W.currentClips||[],currentIndex:(W.currentClips||[]).findIndex(t=>t.id===e)||0,contextType:b.Lp.FEED,contextId:"persona_dropdown_preview"}),B.playClip(z.clipById[e]))};(0,m.useEffect)(()=>{let e=e=>{O||!ei.current||ei.current.contains(e.target)||q(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,m.useEffect)(()=>{var e;let t={...en};null===(e=D.personas)||void 0===e||e.forEach(e=>{t[e.id]||(t[e.id]=(0,w.Mk)())}),es(t)},[D.personas]),(0,m.useEffect)(()=>{(async()=>{if(F.personaId)try{let e=await D.getPersonaById(F.personaId);$(e),e&&R&&R(e)}catch(e){console.error("Error fetching persona:",e),$(null)}finally{}else $(null)})()},[F.personaId,D]),(0,m.useEffect)(()=>{ed.current&&(ed.current.style.maxHeight=Y?O?"500px":"400px":"0")},[Y]);let ew=async(e,t)=>{e.stopPropagation();try{let e=await D.toggleLovePersona(t.id);e&&((0,u.h5)(()=>{D.updatePersona(t.id,{...t,is_loved:e.loved})}),"favorite"!==Q||e.loved?ep.current=!0:await D.getLovePersonas(),(0,y.Ay)({actionName:"TogglePersonaLoveClicked",context:{personaId:null==t?void 0:t.id,lovedState:e.loved?"on":"off"}}))}catch(e){console.error("Error toggling persona love:",e)}};return(0,a.jsxs)("div",{className:"".concat(O?"":(null===(t=U.flags)||void 0===t?void 0:t["create-form"])?"md:mx-0":"md:mx-2"," relative font-sans ").concat(O?"pb-0":"pb-2"),ref:ei,children:[O?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"font-sans py-3 text-[15px]",children:"Persona"}),(0,a.jsx)("span",{className:"inline-block pt-[1px]",children:(0,a.jsx)(T.A,{label:"Personas copy the voice and styles of a song to new songs you create. Songs created with a Persona will be up to 4 minutes long each. This feature is only available to Pro and Premier users. Subscribe to gain access."})}),(0,a.jsx)(M.A,{label:"Beta",auraImage:"/auras/Aura-07.jpg"})]}),(0,a.jsxs)("div",{className:"items-center justify-between bg-tertiary px-3 rounded-md border border-quaternary h-[48px] flex text-sm cursor-pointer ".concat((0,j.FJ)(U)||(0,j.Xl)(U)?"hover:bg-secondary/20":"opacity-50"),onClick:()=>{if(!(0,j.FJ)(U)&&!(0,j.Xl)(U)){eu(!0);return}Y?(0,y.Ay)({actionName:"PersonaDropdownClicked",context:{state:"close"}}):(0,y.Ay)({actionName:"PersonaDropdownClicked",context:{state:"open"}}),q(!Y)},children:[(0,a.jsxs)("div",{className:"flex items-center",children:[Z&&(0,a.jsx)("div",{className:"relative w-[30px] h-[30px] mr-3",onMouseEnter:()=>er(!0),onMouseLeave:()=>er(!1),children:(0,a.jsxs)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full h-full overflow-hidden",style:{mask:"url(/persona-shape.svg)",WebkitMask:"url(/persona-shape.svg)",maskSize:"contain",WebkitMaskSize:"contain",maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat",maskPosition:"center",WebkitMaskPosition:"center"},children:[(0,a.jsx)(N.A,{imageSize:C.M_,className:"object-cover w-full h-full",src:Z.image_s3_id||(null===(l=Z.clip)||void 0===l?void 0:l.image_url)||C.tL,alt:"Persona picture for ".concat(Z.name)}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center transition-opacity duration-300",style:{opacity:eo||(null===(d=B.clip)||void 0===d?void 0:d.id)===(null==Z?void 0:Z.root_clip_id)&&B.isPlaying?1:0},children:(0,a.jsx)(i.IconButton,{"aria-label":"Play",icon:(null===(p=B.clip)||void 0===p?void 0:p.id)===(null==Z?void 0:Z.root_clip_id)&&B.isPlaying?(0,a.jsx)(v.E$n,{className:"w-4 h-4 fill-white"}):(0,a.jsx)(v.udU,{className:"w-3 h-3 fill-white"}),size:"sm",variant:"unstyled",display:"flex",alignItems:"center",justifyContent:"center",onClick:e=>{e.stopPropagation(),ej(Z.root_clip_id)}})})]})}),(0,a.jsx)("span",{children:Z?(0,a.jsxs)("div",{className:"font-sans font-medium text-sm flex flex-col max-w-[200px]",children:[(0,a.jsx)("div",{className:"block truncate whitespace-nowrap overflow-hidden text-ellipsis",children:Z.name}),(0,a.jsx)("div",{className:"block truncate whitespace-nowrap overflow-hidden text-ellipsis text-secondary/50 text-xs",children:(null===(L=Z.clip)||void 0===L?void 0:null===(E=L.metadata)||void 0===E?void 0:E.tags)||""})]}):(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"relative w-[30px] h-[30px]",children:(0,a.jsx)(f.A,{className:"absolute inset-0 w-full h-full fill-primary"})}),(0,a.jsx)("div",{className:"font-sans text-md",children:"No Persona selected"})]})})]}),Z?(0,a.jsx)(A.A,{onClick:e=>eC(e),size:k.Mp.Medium}):(0,a.jsx)("button",{children:Y?(0,a.jsx)(v.SwV,{className:"w-4 h-4 fill-primary ml-2 z-[10000]"}):(0,a.jsx)(v.bDP,{className:"w-4 h-4 fill-primary ml-2 z-[10000]"})})]})]}),(0,a.jsx)("div",{ref:ed,className:(0,r.A)("overflow-hidden transition-all duration-300 ease-in-out",{"mt-2":!O}),style:{maxHeight:0},children:(0,a.jsxs)("div",{className:(0,r.A)("text-primary px-4 rounded-lg w-full shadow-xl flex flex-col",{"border border-quaternary bg-tertiary":!O}),style:{maxHeight:O?"500px":"400px"},children:[(0,a.jsxs)("div",{className:(0,r.A)("flex flex-col gap-2 sticky top-0 py-4 z-20 select-none",{"bg-tertiary":!O}),children:[(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsx)("button",{className:(0,r.A)("flex-1 text-sm font-medium",{"rounded-full p-4":O,"rounded-lg p-2":!O,"bg-primary text-tertiary":"made_by_me"===Q&&!O,"bg-vinylBlack-darker text-primary hover:bg-secondary/20":"made_by_me"!==Q&&!O,"bg-white/20 text-primary":"made_by_me"===Q&&O,"bg-transparent text-primary hover:bg-white/10":"made_by_me"!==Q&&O}),onClick:()=>{K("made_by_me"),ex(""),ey()},children:"My Personas"}),(0,a.jsx)("button",{className:(0,r.A)("flex-1 text-sm font-medium flex items-center justify-center",{"rounded-full p-4":O,"rounded-lg p-2":!O,"bg-primary text-tertiary":"favorite"===Q&&!O,"bg-vinylBlack-darker text-primary hover:bg-secondary/20":"favorite"!==Q&&!O,"bg-white/20 text-primary":"favorite"===Q&&O,"bg-transparent text-primary hover:bg-white/10":"favorite"!==Q&&O}),onClick:async()=>{if(K("favorite"),ex(""),!D.lovedPersonas.length||ep.current){ef(!0);try{await D.getLovePersonas()}finally{ef(!1)}}ep.current=!1},children:"Favorites"})]}),"made_by_me"===Q&&(0,a.jsxs)(n.InputGroup,{className:"w-full !overflow-x-hidden mt-2 outline-none",children:[(0,a.jsx)(s.InputLeftElement,{pointerEvents:"none",h:"32px",children:(0,a.jsx)(v.WIv,{className:(0,r.A)("w-4 h-4 fill-secondary",{"mt-8":O})})}),(0,a.jsx)(o.Input,{py:O?8:void 0,placeholder:"Search",value:em,onChange:e=>{let t=e.target.value;ex(t),t?null==eg||eg(t):ey()},size:"sm",fontSize:O?"md":void 0,borderRadius:"full",bg:"vinylBlack-darker",pl:9,outline:"none",borderWidth:0,boxShadow:"none",_focus:{borderWidth:0,boxShadow:"none"}}),em&&(0,a.jsx)(s.InputRightElement,{h:"32px",children:(0,a.jsx)(k.Ay,{onClick:()=>{ex(""),ey()},variant:k.Ak.Inherit,enableHoverState:!1,children:(0,a.jsx)(v.USm,{className:(0,r.A)("w-3 h-3 fill-secondary",{"mt-8":O})})})})]})]}),(0,a.jsx)("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:el||"favorite"===Q&&eh?(0,a.jsx)("div",{className:"flex justify-center items-center h-20",children:(0,a.jsx)(_.A,{})}):(0,a.jsxs)("div",{className:"pb-2",children:["made_by_me"===Q&&(0,a.jsx)("div",{className:"flex items-center gap-4 cursor-pointer p-2 w-full hover:bg-secondary/20 hover:rounded-lg justify-between group",onClick:()=>{X(!0),O||q(!1),(0,y.Ay)({actionName:"CreatePersonaClicked",context:{modalState:"open"}})},children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative w-[30px] h-[30px]",children:[(0,a.jsx)("div",{className:"absolute inset-0 w-full h-full fill-primary bg-gray-950",style:S.J.Persona}),(0,a.jsx)(v.EKe,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-4 h-4 text-vinylBlack-darker"})]}),(0,a.jsx)("div",{className:"font-sans font-medium text-sm max-w-[150px] overflow-hidden flex flex-col items-start",children:(0,a.jsx)("div",{className:"block truncate",children:"Create New Persona"})})]})}),((e,t,l)=>(0,a.jsxs)(a.Fragment,{children:["made_by_me"===t&&0===e.length?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center px-4 py-10",children:em?(0,a.jsx)("p",{className:"font-sans text-sm text-secondary/80",children:"No Personas found"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"No Personas"}),(0,a.jsx)("p",{className:"text-secondary text-sm",children:"Personas let you create songs that have a similar style and voice."})]})}):"favorite"===t&&0===e.length?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center px-4 py-10",children:(0,a.jsx)("p",{className:"text-secondary text-sm",children:"Favorite a persona to see it here."})}):"following"===t&&0===e.length?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center px-4 py-10",children:(0,a.jsx)("p",{className:"text-secondary text-sm",children:"Follow a Persona to see it here."})}):e.map(e=>{var t,l,n,s;return(0,a.jsxs)("div",{className:"flex items-center gap-4 cursor-pointer p-2 w-full hover:bg-secondary/20 hover:rounded-lg justify-between group",onClick:()=>eb(e),onMouseEnter:()=>et(e.id),onMouseLeave:()=>et(null),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"relative w-[30px] h-[30px]",onMouseEnter:()=>et(e.id),onMouseLeave:()=>et(null),children:(0,a.jsxs)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full h-full overflow-hidden",style:S.J.Persona,children:[(0,a.jsx)(N.A,{imageSize:C.M_,className:"object-cover w-full h-full",src:e.image_s3_id||(null===(t=e.clip)||void 0===t?void 0:t.image_url)||C.tL,alt:"Persona image for ".concat(e.name)}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center transition-opacity duration-300",style:{opacity:+(ee===e.id)},children:(0,a.jsx)(i.IconButton,{"aria-label":"Play",icon:(null===(l=B.clip)||void 0===l?void 0:l.id)===(null==e?void 0:e.root_clip_id)&&B.isPlaying?(0,a.jsx)(v.E$n,{className:"w-4 h-4 fill-white"}):(0,a.jsx)(v.udU,{className:"w-3 h-3 fill-white"}),size:"sm",variant:"unstyled",display:"flex",alignItems:"center",justifyContent:"center",onClick:t=>{var l;ej(null===(l=e.clip)||void 0===l?void 0:l.id),t.stopPropagation(),(0,y.Ay)({actionName:"PersonaPlayButtonClicked",context:{personaId:null==e?void 0:e.id}})}})})]})}),(0,a.jsxs)("div",{className:"font-sans font-medium text-sm max-w-[140px] overflow-hidden flex flex-col items-start",children:[(0,a.jsx)("div",{className:"whitespace-nowrap overflow-hidden text-ellipsis w-full",children:e.name}),(0,a.jsx)("div",{className:"text-secondary/50 text-xs whitespace-nowrap overflow-hidden text-ellipsis w-full",children:(null===(s=e.clip)||void 0===s?void 0:null===(n=s.metadata)||void 0===n?void 0:n.tags)||""})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:t=>ew(t,e),className:"w-6 h-6 flex items-center justify-center rounded-full opacity-0 group-hover:opacity-100 ".concat(e.is_loved?"bg-primary":"bg-quaternary hover:bg-secondary/20"),children:e.is_loved?(0,a.jsx)(v.C3E,{className:"w-3 h-3 fill-vinylBlack-darker"}):(0,a.jsx)(v.yhu,{className:"w-3 h-3 fill-secondary"})}),(0,a.jsx)(g.A,{href:"/persona/".concat(e.id),target:"_blank",rel:"noopener noreferrer",onClick:t=>{t.stopPropagation(),(0,y.Ay)({actionName:"LinkToPersonaPageClicked",context:{personaId:e.id}})},className:"w-6 h-6 flex items-center justify-center rounded-full bg-quaternary hover:bg-secondary/20 opacity-0 group-hover:opacity-100",children:(0,a.jsx)(v.qYV,{className:"w-2 h-2 fill-primary z-[10000]"})})]})]},e.id)}),e.length<(l||0)&&!em?(0,a.jsx)("div",{className:"flex justify-center items-center h-20",ref:ev,children:(0,a.jsx)(_.A,{})}):null]}))("made_by_me"===Q?D.personas:"favorite"===Q?D.lovedPersonas:D.followedPersonas,Q,"made_by_me"===Q?D.totalUserPersonas:"favorite"===Q?D.totalLovedPersonas:D.totalFollowedPersonas)]})})]})}),(0,a.jsx)(I.A,{isOpen:J,onClose:()=>{X(!1)}}),ec&&(0,a.jsx)(P.A,{isOpen:ec,onClose:()=>eu(!1)})]})})},94228:(e,t,l)=>{l.d(t,{i:()=>J});var a=l(95155),i=l(52017),n=l(60078),s=l(5585),o=l(63438),r=l(12115),d=l(77119),c=l(47088),u=l(47606),p=l(49746),m=l(84899),x=l(73222),h=l(21697),f=l(91135),g=l(96132),v=l(46995),y=l(83168),b=l(95902),C=l(99803),j=l(57147),w=l(19783),N=l(60425),k=l(56108),A=l(50649),S=l(71164),I=l(88008),P=l(99428),_=l(4869),M=l(41301),T=l(78131),E=l(71791),L=l(88659),O=l(17219),R=l(97942),D=l(47659),F=l(56518),B=l(70634),z=l(24874),U=l(7132),H=l(32194),W=l(92819);let V=(e,t)=>{let l=t.style.trim();""==l?t.setStyle(e):(l=","==l.charAt(l.length-1)?l+" "+e:l+", "+e).length<=U.Ti&&t.setStyle(l)},G=(0,o.PA)(e=>{var t,l,s;let{state:o,textareaColor:c,showExcludeStyles:u,showInstrumentalToggle:p,enableExcludeStyles:m,formOption:x,reservedLyricsCount:h=0}=e,{session:f,genForm:g,clips:v,contest:y}=(0,d.gy)(),[b,C]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),[S,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f&&v&&o.coverClipId&&(async()=>{_(await y.isCoverEnabledOrIsContest(o.coverClipId||"",f.userId||""))})()},[f,o.coverClipId,v]);let M=S&&!!g.coverClipId,T=!!g.continueClipId,{isOpen:E,onOpen:L,onClose:G}=(0,i.useDisclosure)(),Y=("chirp-v3-5"===o.mv||"chirp-v3-5-tau"===o.mv||o.continueClipId&&(null===(l=v.clipById[o.continueClipId])||void 0===l?void 0:null===(t=l.metadata)||void 0===t?void 0:t.type)==="upload"?U.z3:U.w4)-h,q=async()=>{C(!0),A(!1),await f.acceptTOS(),G()};return(0,r.useEffect)(()=>{"extend"===x?(o.resetCoverClip(),o.resetArtistClip(),o.resetPersona(),o.resetInfill(),o.lyrics="",o.title="",o.instrumental=!1,o.videoUploadId=null,o.imageData={},o.enableExcludeStyle=!1):"cover"===x?(o.resetContinueClip(),o.resetArtistClip(),o.resetPersona(),o.resetInfill(),o.style="",o.negativeTags="",o.description="",o.title="",o.instrumental=!1,o.continueClipDuration=null,o.continueAtSeconds=null,o.videoUploadId=null,o.imageData={},o.enableExcludeStyle=!1):"persona"===x?(o.resetContinueClip(),o.resetCoverClip(),o.resetInfill(),o.lyrics="",o.title="",o.instrumental=!1,o.continueClipDuration=null,o.continueAtSeconds=null,o.videoUploadId=null,o.imageData={},o.enableExcludeStyle=!1):"audio"===x&&(o.resetContinueClip(),o.resetArtistClip(),o.resetPersona(),o.resetInfill(),o.resetCoverClip(),o.lyrics="",o.style="",o.negativeTags="",o.description="",o.title="",o.instrumental=!1,o.continueClipDuration=null,o.continueAtSeconds=null,o.videoUploadId=null,o.imageData={},o.enableExcludeStyle=!1),o.resetConfigurations()},[x]),(0,r.useEffect)(()=>{(async()=>{f.roles.has_accepted_custom_mode_tos?A(!1):A(!0)})()},[f.roles.has_accepted_custom_mode_tos,L]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.A,{isOpen:E,onClose:G,onConfirm:q,isLoading:b}),(0,a.jsxs)(n.Stack,{flex:1,overflowY:"auto",py:{base:0,md:2},px:2,mt:6,children:[o.instrumental?(0,a.jsxs)(a.Fragment,{children:[u&&p&&(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",py:2,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Instrumental Mode"}),(0,a.jsx)(j.A,{label:"Instrumental",checked:g.instrumental,onChange:e=>{g.setInstrumental(e)}})]}),(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"alignItems",justifyContent:"space-between",p:0,className:"flex items-center",children:[(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",py:2,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Style of Music"}),(0,a.jsx)(N.A,{label:"Describe the style of music you want (e.g., acoustic pop). Suno's models do not recognize artists' names but do understand genres and vibes."})]}),u?m?(0,a.jsx)(j.A,{label:"Exclude Styles",checked:g.enableExcludeStyle,onChange:e=>{g.setEnableExcludeStyle(e),I.LS.logAudioCreationEvent(!1,e?P.a2.enableNegativeTags:P.a2.disableNegativeTags,g,f,{enableExcludeStyle:e})}}):(0,a.jsx)(D.A,{label:"Exclude Styles",tooltipLabel:"Subscribe to exclude styles",onClick:()=>{window.open("/account","_blank"),I.LS.logAudioCreationEvent(!1,P.a2.clickDisabledNegativeTags,g,f,{})}}):p?(0,a.jsx)(j.A,{label:"Instrumental",checked:g.instrumental,onChange:e=>{g.setInstrumental(e)}}):null]}),(0,a.jsx)(w.A,{maxLength:U.Ti,value:o.style,resize:!1,customHeight:"h-[130px]",enableExtraMargin:!0,onChange:e=>o.setStyle(e.target.value),placeholder:"Enter style of music",spacedLeftAsset:!0,isScrollable:!1,bgColor:c,leftAsset:(0,a.jsx)("div",{className:"flex space-x-1 overflow-x-auto mr-4",children:o.recommmendedStyles.map((e,t)=>(0,a.jsx)(B.A,{style:e,onClick:()=>{V(e,o),I.LS.logAudioCreationEvent(!1,P.a2.useRecommendStyle,o,f,{recommendStyle:e})}},t))})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Stack,{mb:5,children:[(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"alignItems",justifyContent:"space-between",children:[(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"alignItems",children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Lyrics"}),(0,a.jsx)(N.A,{label:"Create random lyrics, write your own, or get some help from AI. Use two verses (8 lines) for best results."})]}),p?(0,a.jsx)(j.A,{label:"Instrumental",checked:g.instrumental,onChange:e=>{g.setInstrumental(e)}}):null]}),(null==f?void 0:null===(s=f.flags)||void 0===s?void 0:s["ft-lyrics-model"])?(0,a.jsx)(z.A,{maxLyricsLength:Y,lyrics:o.lyrics,setLyrics:o.setLyrics,lyricsInputDisallowed:k,onLyricsInputInteraction:()=>{k&&L()}}):(0,a.jsx)(w.A,{maxLength:Y,value:o.lyrics,resize:!0,isScrollable:!0,onChange:e=>{o.setLyrics(e.target.value)},customHeight:"h-[230px]",bgColor:c,placeholder:"Enter your own lyrics or describe a song and click Write About...",onClick:()=>{k&&L()},onKeyDown:e=>{k&&L(),"Enter"===e.key&&k&&e.preventDefault()},isReadOnly:k,cursor:k?"not-allowed":"text",leftAsset:(0,a.jsx)(H.A,{lyrics:o.lyrics,isLoading:o.isLoadingLyrics,generateLyrics:()=>o.generateLyrics()}),paddingBottom:50})]}),(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"alignItems",justifyContent:"space-between",p:0,className:"flex items-center",children:[(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"alignItems",spacing:1,justifyContent:"space-between",py:2,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Style of Music"}),(0,a.jsx)(N.A,{label:"Describe the style of music you want (e.g., acoustic pop). Suno's models do not recognize artists' names but do understand genres and vibes."})]}),u&&(m?(0,a.jsx)(j.A,{label:"Exclude Styles",checked:g.enableExcludeStyle,onChange:e=>{g.setEnableExcludeStyle(e),I.LS.logAudioCreationEvent(!1,e?P.a2.enableNegativeTags:P.a2.disableNegativeTags,g,f,{enableExcludeStyle:e})}}):(0,a.jsx)(D.A,{label:"Exclude Styles",tooltipLabel:"Subscribe to exclude styles",onClick:()=>{window.open("/account","_blank"),I.LS.logAudioCreationEvent(!1,P.a2.clickDisabledNegativeTags,g,f,{})}}))]}),(0,a.jsx)(w.A,{maxLength:U.Ti,value:o.style,resize:!1,onChange:e=>o.setStyle(e.target.value),placeholder:"Enter style of music",spacedLeftAsset:!0,enableExtraMargin:!0,isScrollable:!0,bgColor:c,leftAsset:(0,a.jsx)("div",{className:"flex space-x-1 overflow-x-auto mr-4",children:o.recommmendedStyles.map((e,t)=>(0,a.jsx)(B.A,{style:e,onClick:()=>{V(e,o),I.LS.logAudioCreationEvent(!1,P.a2.useRecommendStyle,o,f,{recommendStyle:e})}},t))}),customHeight:"h-[130px]"})]}),g.enableExcludeStyle&&m&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"font-sans text-[15px] leading-[20px] flex items-center space-x-1 w-fit py-2",children:[(0,a.jsx)("span",{children:"Exclude Styles"}),(0,a.jsx)("span",{className:"inline-block pt-[1px]",children:(0,a.jsx)(N.A,{label:"Describe the styles of music you want to exclude (e.g., dance pop)."})}),(0,a.jsx)(F.A,{label:"Beta",tooltip:"This is a new feature. Liking and Disliking your songs helps us make it better!"})]}),(0,a.jsx)(w.A,{maxLength:U.Ti,value:o.negativeTags,resize:!1,onChange:e=>o.setNegativeTags(e.target.value),placeholder:"Enter style of music",spacedLeftAsset:!1,isScrollable:!0,customHeight:"h-[130px]",enableExtraMargin:!0,bgColor:c})]}),!T&&!M&&(0,a.jsx)(W.A,{}),(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"alignItems",spacing:1,py:2,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Title"}),(0,a.jsx)(N.A,{label:"Give your song a title for sharing, discovery and organization."})]}),(0,a.jsx)(w.A,{maxLength:80,value:o.title,onChange:e=>o.setTitle(e.target.value),placeholder:"Enter a title",customHeight:"h-[12px]",isScrollable:!1,bgColor:c,isReadOnly:o.isLoadingLyrics,cursor:o.isLoadingLyrics?"not-allowed":"text",leftAsset:o.isLoadingLyrics?(0,a.jsx)(R.A,{}):null})]})]})}),Y=[{id:"Person",title:"Let's make a song to celebrate a special person in your life",buttonTitle:"Person",description:"Make a song about your mom, partner, best friend, or anyone else in your life.",content:["I'm celebrating ",{type:"input",field:"personName",placeholder:"NAME OF PERSON",maxLength:100}," my ",{type:"input",field:"personRelationship",placeholder:"RELATIONSHIP TO PERSON",maxLength:100},".","My favorite thing about them is ",{type:"input",field:"personFavoriteThing",placeholder:"FAVORITE THING ABOUT THEM",maxLength:100},","," and the funniest thing about them is ",{type:"input",field:"personFunniestThing",placeholder:"FUNNIEST THING ABOUT THEM",maxLength:100},".","Their favorite genre of music is ",{type:"input",field:"personGenre",placeholder:"GENRE",maxLength:100},"."],template:"I'm celebrating {personName} my {personRelationship}. My favorite thing about them is {personFavoriteThing}, and the funniest thing about them is {personFunniestThing}. Please write the song in {personGenre} genre."},{id:"SpecialOccasions",title:"Let's make a song to celebrate a special occasion!",buttonTitle:"Special Occasions",description:"Make a song to celebrate a birthday, holiday, or other special life events.",content:["I'm celebrating ",{type:"input",field:"specialOccasionTitleOccasion",placeholder:"TITLE OF SPECIAL OCCASION",maxLength:125}," with/for ",{type:"input",field:"specialOccasionName",placeholder:"NAME OF RECIPIENT",maxLength:125},". ","My favorite part about this day is ",{type:"input",field:"specialOccasionFavoritePart",placeholder:"FAVORITE PART OF OCCASION",maxLength:125},", ","and my favorite genre of music is ",{type:"input",field:"specialOccasionFavoriteGenre",placeholder:"GENRE OF MUSIC",maxLength:125},"."],template:"I'm celebrating {specialOccasionTitleOccasion} with/for {specialOccasionName}. My favorite part about this day is {specialOccasionFavoritePart} and my favorite genre of music is {specialOccasionFavoriteGenre}."},{id:"Moods",title:"Let's make a song to match your mood",buttonTitle:"Moods",description:"Make a song to chill to, get hype to, or any vibe you want to feel.",content:["I'm currently feeling ",{type:"input",field:"moodsMood",placeholder:"MOOD",maxLength:166}," and I want to feel ",{type:"input",field:"moodsDesiredMood",placeholder:"YOUR DESIRED MOOD",maxLength:166},".","My favorite genre of music is ",{type:"input",field:"moodsGenre",placeholder:"GENRE",maxLength:166},"."],template:"I'm currently feeling {moodsMood} and I want to feel {moodsDesiredMood}. My favorite genre of music is {moodsGenre}. Please write the song in {moodsGenre} style."},{id:"Activity",title:"Let's make a song to soundtrack your activity",buttonTitle:"Activity",description:"Make a song to jam to at your next group hangout or party.",content:["I'm going to ",{type:"input",field:"activityActivity",placeholder:"ACTIVITY",maxLength:125}," with ",{type:"input",field:"activityPerson",placeholder:"PERSON",maxLength:125},".","The vibes we want to feel are ",{type:"input",field:"activityDesiredMood",placeholder:"DESIRED MOOD",maxLength:125}," and our favorite genre of music is ",{type:"input",field:"activityGenre",placeholder:"GENRE",maxLength:125},"."],template:"I'm going to {activityActivity} with {activityPerson}. The vibes we want to feel are {activityDesiredMood} and our favorite genre of music is {activityGenre}. Please write the song in {activityGenre} style."},{id:"Greeting",title:"Let's make a song to give someone in your life a special greeting",buttonTitle:"Greeting",description:"Make a song to say thank you, congratulations, or get well soon.",content:["I'm saying ",{type:"input",field:"greetingGreeting",placeholder:"GREETING",maxLength:125}," to ",{type:"input",field:"greetingName",placeholder:"NAME OF PERSON",maxLength:125},".","This person is special to me because ",{type:"input",field:"greetingThing",placeholder:"THING YOU LOVE ABOUT THEM",maxLength:125},".","Their favorite genre of music is ",{type:"input",field:"greetingGenre",placeholder:"GENRE",maxLength:125},"."],template:"I'm saying {greetingGreeting} to {greetingName}. This person is special to me because {greetingThing}. Please write the song in {greetingGenre} genre."},{id:"Vacation",title:"Let's make a song to get excited for your upcoming trip",buttonTitle:"Vacation",description:"Make a song to get excited for your next fun trip.",content:["I'm traveling to ",{type:"input",field:"vacationPlace",placeholder:"NAME OF PLACE",maxLength:100}," in/on ",{type:"input",field:"vacationDate",placeholder:"WHEN YOU WILL TRAVEL THERE",maxLength:100},".","When I get there, I'm most excited to see ",{type:"input",field:"vacationAttraction",placeholder:"NAME OF ATTRACTION",maxLength:100},","," eat ",{type:"input",field:"vacationFood",placeholder:"NAME OF FOOD",maxLength:100},","," and try ",{type:"input",field:"vacationActivity",placeholder:"ACTIVITY",maxLength:100},"."],template:"I'm traveling to {vacationPlace} when {vacationDate}. When I get there, I'm most excited to see {vacationAttraction}, eat {vacationFood}, and try {vacationActivity}. Write a song about this, please."},{id:"Scrapbook",title:"Let's make a song to commemorate your special memory",buttonTitle:"Scrapbook",description:"Make a song to commemorate your most treasured memories.",content:["I'm celebrating the time that ",{type:"input",field:"scrapbookPerson",placeholder:"NAME OF PERSON",maxLength:125}," ",{type:"input",field:"scrapbookAction",placeholder:"WHAT THEY DID",maxLength:125},".","This memory is special because ",{type:"input",field:"scrapbookReason",placeholder:"REASON",maxLength:125},".","Their favorite genre of music is ",{type:"input",field:"scrapbookGenre",placeholder:"GENRE",maxLength:125},"."],template:"I'm celebrating the time that {scrapbookPerson} {scrapbookAction}. This memory is special because {scrapbookReason}. Their favorite genre of music is {scrapbookGenre}, write the song in this style."},{id:"Pet",title:"Let's make a song to celebrate your pet and how they make your life better",buttonTitle:"Pet",description:"Make a song to celebrate how cute and quirky your pet is.",content:["My pet's name is ",{type:"input",field:"petName",placeholder:"NAME OF PET",maxLength:100}," and they are a ",{type:"input",field:"petType",placeholder:"TYPE OF PET",maxLength:100},".","They are ",{type:"input",field:"petPhysical",placeholder:"PHYSICAL APPEARANCE",maxLength:100},","," and they always make me smile because ",{type:"input",field:"petSmile",placeholder:"THING YOU LOVE ABOUT THEM",maxLength:100},".","If they listened to music, their favorite genre would be ",{type:"input",field:"petGenre",placeholder:"GENRE",maxLength:100},"."],template:"Write a song about my pet, {petName} which is a {petType}. They are a {petType}. I love their {petPhysical} and {petSmile}. Make the song in the genre {petGenre}."}];var q=l(87358);let Q=Object.fromEntries(Y.map(e=>[e.id,e])),K=Object.fromEntries(Object.entries(Q).map(e=>{let[t,l]=e;return[t,l.title]})),J=(0,o.PA)(e=>{var t,l,o;let{selectedOption:O,textareaColor:R,showInstrumentalToggle:D=!0,onGenerate:F,showMadlibs:B=!0,setMadlibsHandler:z}=e,{session:U,clips:H,genForm:W,library:V,contest:J}=(0,d.gy)(),X=!(0,k.Yo)(),[Z,$]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),{onClose:el}=(0,i.useDisclosure)(),[ea,ei]=(0,r.useState)(!1);(0,r.useEffect)(()=>{U&&H&&W.coverClipId&&(async()=>{ei(await J.isCoverEnabledOrIsContest(W.coverClipId||"",U.userId||""))})()},[U,W.coverClipId,H]);let[en,es]=(0,r.useState)(null);(0,r.useEffect)(()=>{W.setIsMadLibs(!!en)},[en]);let eo=(e=>{let t={};return Object.values(e).forEach(e=>{e.content.forEach(e=>{"input"===e.type&&(t[e.field]="")})}),t})(Y),[er,ed]=(0,r.useState)(eo),ec=(e,t)=>{ed(l=>({...l,[e]:t}))},eu=Object.fromEntries(Object.entries(Q).map(e=>{let[t,l]=e;return[t,(0,a.jsx)("div",{className:"flex flex-wrap gap-1 max-w-xs font-sans px-2",children:l.content.map((e,t)=>"string"==typeof e?(0,a.jsx)("span",{children:e},t):"input"===e.type?(0,a.jsxs)("div",{className:"relative w-30 mb-6 inline-flex items-center",children:[(0,a.jsx)("input",{type:"text",placeholder:" ",className:"leading-tight w-full px-1 py-0.5 border-b-2 border-secondary focus:border-primary placeholder-transparent focus:outline-none text-center bg-vinylBlack-light bg-opacity-30 focus:bg-opacity-40",value:er[e.field],onChange:t=>ec(e.field,t.target.value),maxLength:e.maxLength}),(0,a.jsx)("label",{className:"font-mono text-[9px] w-full text-center absolute left-1/2 transform -translate-x-1/2 -bottom-4 text-primary text-opacity-90 transition-transform duration-200 ease-in-out",children:e.placeholder})]},t):null)},t)]})),[ep,em]=(0,r.useState)(!1),[ex,eh]=(0,r.useState)(!1),[ef,eg]=(0,r.useState)(!1),[ev,ey]=(0,r.useState)(!1),[eb,eC]=(0,r.useState)(!1),[ej,ew]=(0,r.useState)(!1),[eN,ek]=(0,r.useState)(!1),eA=()=>{if(!en||U.isOutOfCredits)return;let e=Q[en];if(!e)return;let t=e.template;Object.keys(er).forEach(e=>{let l=er[e];t=t.replace("{".concat(e,"}"),l)}),"SpecialOccasions"===en?(0,s.A)({particleCount:100,spread:70,origin:{y:.6},colors:["#FAF7F5","#D1CBC7"]}):"Person"===en?(em(!0),setTimeout(()=>em(!1),5e3)):"Activity"===en?(eh(!0),setTimeout(()=>eh(!1),5e3)):"Moods"===en?(ey(!0),setTimeout(()=>ey(!1),5e3)):"Greeting"===en?(eC(!0),setTimeout(()=>eC(!1),5e3)):"Scrapbook"===en?(eg(!0),setTimeout(()=>eg(!1),5e3)):"Vacation"===en?(ek(!0),setTimeout(()=>ek(!1),5e3)):"Pet"===en&&(ew(!0),setTimeout(()=>ew(!1),5e3)),W.setIsMadLibs(!0),W.setDescription(t),F(W),I.LS.segmentTrack(P.f7.generalEvent,{key:e.id,actionName:P.a2.clickMadlibCreate,isMobile:!1})};(0,r.useEffect)(()=>{en?z(()=>eA):z(null)},[en]);let eS=(0,r.useCallback)(async(e,t,l,a)=>{let{data:i,error:n}=await V.apiClient.POST("/api/uploads/audio/{upload_id}/initialize-clip/",{params:{path:{upload_id:e||""}}});if(n||!i){(0,d.oR)({title:"Invalid upload. Please try again.",status:"error",duration:2e3,isClosable:!0}),el();return}let s=i.clip_id;await V.loadClips(),await H.setMetadata({clipId:s,title:t,imageUrl:l,isAudioUploadTOSAccepted:!0}),I.LS.logAudioCreationEvent(X,P.a2.uploadSong,W,U,{hasVocal:H.clipById[s].metadata.has_vocal,newClipIds:[s],isUploaded:!0,uploadType:a}),el()},[H,W,X,V,el,U]),eI=(0,u.M6)({onFinish:eS,onClose:el});if(en)return(0,a.jsxs)(n.Stack,{p:2,spacing:4,py:{base:0,md:4},w:"100%",mt:8,mb:16,children:[ep&&(0,a.jsx)(g.A,{}),ex&&(0,a.jsx)(C.A,{}),ef&&(0,a.jsx)(h.A,{}),ev&&(0,a.jsx)(b.A,{}),eb&&(0,a.jsx)(y.A,{}),ej&&(0,a.jsx)(f.A,{}),eN&&(0,a.jsx)(v.A,{}),(0,a.jsx)("button",{onClick:()=>{es(null),W.setDescription(""),W.setIsMadLibs(!1)},className:"ml-2 h-[32px] w-[32px] p-2 text-white bg-tertiary hover:bg-vinylBlack-darker focus:outline-none rounded-full border border-white-300 flex justify-center items-center","aria-label":"Back",children:(0,a.jsx)(A.eCO,{className:"w-3 h-3 fill-primary"})}),(0,a.jsx)("h2",{className:"font-serif text-2xl px-2 pt-2 break-words max-w-[300px]",children:en&&K[en]}),(0,a.jsx)("p",{className:"font-sans font-medium text-sm px-2 pb-4 text-secondary text-opacity-80",children:"Fill in the blanks to create your song."}),(0,a.jsx)("p",{children:eu[en]})]});let eP=!!W.continueClipId,e_=!!W.coverClipId&&ea;return"audio"===O?(0,a.jsx)(u.Ay.Provider,{value:eI,children:(0,a.jsx)(p.A,{})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,a.jsx)(j.A,{label:"Custom",checked:!W.isSimple,onChange:e=>W.setIsSimple(!e)}),(0,a.jsx)(c.A,{popoverTopMargin:90,fromMobileLibrary:!1,customHeight:"h-[28px]",iconSize:3,fontSize:"text-sm"}),(0,a.jsx)(x.A,{state:W})]}),"true"===q.env.NEXT_PUBLIC_ML_DEV_MODE&&S._$&&(null===(t=U.flags)||void 0===t?void 0:t.configs)&&(0,a.jsx)(j.A,{label:"The Matrix",checked:ee,onChange:et}),"true"===q.env.NEXT_PUBLIC_ML_DEV_MODE&&(null===(l=U.flags)||void 0===l?void 0:l.configs)&&ee&&(0,a.jsx)("div",{className:"mt-2 mb-2",children:(0,a.jsx)(T.A,{state:W,setConfiguration:(e,t)=>{if(null===t){let t={...W.configurations};delete t[e],W.configurations=t}else W.configurations={...W.configurations,[e]:t}}})}),eP&&!W.isSimple&&(0,a.jsx)(E.UA,{clipId:W.continueClipId||""}),e_&&!W.isSimple&&(0,a.jsx)(M.A,{clipId:W.coverClipId||""}),!W.isSimple&&(0,a.jsx)(G,{state:W,textareaColor:R,showExcludeStyles:(0,_.w9)(U),showInstrumentalToggle:D,enableExcludeStyles:(0,_.w9)(U),formOption:O}),W.isSimple&&(0,a.jsxs)(n.Stack,{spacing:0,py:8,px:2,w:"100%",children:[(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"alignItems",justifyContent:"space-between",children:[(0,a.jsxs)(n.Stack,{direction:"row",alignItems:"alignItems",spacing:1,children:[(0,a.jsx)("span",{className:"font-sans font-normal text-primary text-[15px]",children:"Song description"}),(0,a.jsx)(N.A,{label:"Describe the style of music and topic you want (e.g. acoustic pop about the holidays). Use genres and vibes instead of specific artists and songs."})]}),D?(0,a.jsx)(j.A,{label:"Instrumental",checked:W.instrumental,onChange:e=>{W.setInstrumental(e)}}):null]}),(0,a.jsx)(n.Stack,{flex:"1",direction:["row","row","column"],alignItems:["stretch","stretch","stretch"],children:(0,a.jsx)(n.Stack,{direction:"column",flex:"1",spacing:0,className:"simple-prompt-textarea",pt:2,children:(0,a.jsx)(w.A,{maxLength:200,value:W.description,resize:!0,onChange:e=>W.setDescription(e.target.value),placeholder:W.placeholder,isScrollable:!0,customHeight:"h-[100px]",bgColor:R})})}),(null==U?void 0:null===(o=U.flags)||void 0===o?void 0:o.madlibs)&&B&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("button",{onClick:()=>$(!Z),className:"w-full flex justify-between items-center font-serif text-xl px-4 pt-3 pb-2 bg-tertiary hover:bg-secondary/20 rounded-md",children:[(0,a.jsx)("div",{className:"font-serif text-[18px]",children:"Need ideas?"}),Z?(0,a.jsx)(A.SwV,{className:"w-4 h-4"}):(0,a.jsx)(A.bDP,{className:"w-4 h-4"})]}),Z&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(L.A,{setSelectedSuggestion:es})})]})]}),(0,_.m2)(U)&&(0,a.jsx)("div",{className:"py-4 pb-2",children:(0,a.jsx)(m.A,{editMode:!1})})]})})},95278:(e,t,l)=>{l.d(t,{A:()=>N});var a=l(15933),i=l(95155),n=l(61715),s=l(63438),o=l(12115),r=l(77119),d=l(74955),c=l(22011),u=l(99304),p=l(97942),m=l(50649),x=l(63175),h=l(61932);function f(){let e=(0,a._)(["\n  font-family:\n    'PP Editorial New', 'Editorial New', ui-serif, Georgia, Cambria,\n    'Times New Roman';\n  font-weight: 400;\n  font-size: 60px;\n"]);return f=function(){return e},e}function g(){let e=(0,a._)(["\n  width: 350px;\n  height: 40px;\n"]);return g=function(){return e},e}function v(){let e=(0,a._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  height: 100%;\n  padding-top: 0;\n  margin-top: -300px;\n"]);return v=function(){return e},e}function y(){let e=(0,a._)(["\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n"]);return y=function(){return e},e}let b=n.A.h4(f()),C=n.A.div(g()),j=n.A.div(v()),w=n.A.div(y()),N=(0,s.PA)(function(e){var t;let{clipId:l,onComplete:a}=e,n=[.25,.5,.75,1,1.25,1.5,2],{project:s,clips:f,session:g,createV2:v,genForm:y}=(0,r.gy)(),[N,k]=(0,o.useState)(!1),[A,S]=(0,o.useState)(1),[I,P]=(0,o.useState)(!1),[_,M]=(0,o.useState)(null),[T,E]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=f.getClipById(l);e&&(M(e),E(e.user_id===g.userId))},[l,f,g.userId]);let L=(0,o.useCallback)(async()=>{P(!0);try{await s.apiClient.POST("/api/clips/adjust-speed/",{body:{clip_id:l,speed_multiplier:A,keep_pitch:N,title:T?(0,h.p8)(_):(0,x.LK)((0,h.p8)(_))},params:{query:{data:{}}}}).then(e=>{var t;let l=null===(t=e.data)||void 0===t?void 0:t.id;if(l){let t=e.data;t&&(f.addClip(t,!0),s.addClip(t,!0),s.currentProjectId&&s.addClipsToProject([t],s.currentProjectId),f.runningRequests.add(t.id),a&&a(l))}return e})}catch(e){(0,r.oR)({title:"Speed Adjustment Error",description:"Please try again later, or contact us if this problem persists.",status:"error",duration:5e3,isClosable:!0})}finally{P(!1)}},[l,N,A,s,f,a,_,T]);return(0,i.jsxs)("div",{className:"flex flex-col w-full h-full",children:[!y.isRemixCreate&&(null===(t=g.flags)||void 0===t?void 0:t["remix-adjust-speed"])&&v.speed_clip_id&&(0,i.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 pt-2 px-0 md:px-2 w-full rounded-full mb-2",children:(0,i.jsx)(d.Ay,{variant:d.Ak.Primary,shape:d.aH.Pill,size:d.Mp.Medium,onClick:()=>{v.setSpeedClipId(null)},className:"transition-all bg-[#FAF7F533] hover:bg-secondary/20 min-w-0 flex-shrink",children:(0,i.jsxs)("div",{className:"flex items-center gap-2 w-full overflow-hidden",children:[(0,i.jsx)(m.A60,{className:"w-5 h-5 text-primary flex-shrink-0"}),(0,i.jsx)("span",{className:"text-sm font-medium text-primary truncate",children:"Back to Create"})]})})}),(0,i.jsxs)(j,{children:[(0,i.jsxs)(b,{children:[A%1==0?A.toFixed(0):A.toFixed(2),"x"]}),(0,i.jsx)(C,{children:(0,i.jsx)(u.A,{value:A<1?(A-.25)/.75*.5:.5+(A-1)/1*.5,anchorValue:.5,onChange:e=>{let t;t=(e=Math.max(0,Math.min(1,e)))<.5?.25+e/.5*.75:1+(e-.5)/.5*1,S(n.reduce((e,l)=>Math.abs(l-t)<Math.abs(e-t)?l:e))},onCommit:()=>{}})}),(0,i.jsxs)(w,{children:[(0,i.jsx)(d.Ay,{className:"px-0 w-10",onClick:()=>S(.25),variant:d.Ak.Secondary,shape:d.aH.Pill,children:".25"}),(0,i.jsx)(d.Ay,{className:"px-0 w-10",onClick:()=>S(.5),variant:d.Ak.Secondary,shape:d.aH.Pill,children:".5"}),(0,i.jsx)(d.Ay,{className:"px-0 w-10",onClick:()=>S(.75),variant:d.Ak.Secondary,shape:d.aH.Pill,children:".75"}),(0,i.jsx)(d.Ay,{className:"px-0 w-10",onClick:()=>S(1),variant:d.Ak.Secondary,shape:d.aH.Pill,children:"1"}),(0,i.jsx)(d.Ay,{className:"px-0 w-10",onClick:()=>S(1.25),variant:d.Ak.Secondary,shape:d.aH.Pill,children:"1.25"}),(0,i.jsx)(d.Ay,{className:"px-0 w-10",onClick:()=>S(1.5),variant:d.Ak.Secondary,shape:d.aH.Pill,children:"1.5"}),(0,i.jsx)(d.Ay,{className:"px-0 w-10",onClick:()=>S(2),variant:d.Ak.Secondary,shape:d.aH.Pill,children:"2"})]}),(0,i.jsx)(c.A,{buttonText:"Keep Pitch",onChange:()=>k(!N),checked:N}),(0,i.jsx)(d.Ay,{disabled:I||1===A,variant:d.Ak.Primary,shape:d.aH.Pill,size:d.Mp.Medium,className:"w-[350px] mt-8 text-xl font-medium text-white",onClick:()=>L(),style:{"--button-background-image":"url(/auras-v2/Aura-1.png)",backgroundImage:"var(--button-background-image)",position:"relative",backgroundSize:"cover",backgroundPosition:"center",border:"1px solid rgba(255,255,255,0.2)",opacity:1===A?.5:1,boxShadow:"inset 0 0 0 2000px rgba(255,107,74,0.1), inset 0 0 20px rgba(255,255,255,1)"},icon:T?m.rlE:m.x7r,iconClassName:"w-6 h-6",children:I?(0,i.jsx)(p.A,{}):T?"Adjust Speed":"Remix"})]})]})})},95625:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(95155),i=l(12115),n=l(82451),s=l(74955);let o=e=>{let{children:t,onClick:l,disabled:o,...r}=e,d=(0,i.useRef)(null),{buttonProps:c}=(0,n.s)({isDisabled:o,onPress:l&&(e=>{l(e)})},d);return(0,a.jsx)(s.Ay,{...{...r,...c},children:t})}},95902:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(95155);l(12115);let i=()=>{let e=Array.from({length:15});return(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none z-[10000]",children:e.map((e,t)=>(0,a.jsx)("div",{className:"absolute w-6 h-6 opacity-80 animate-float",style:{left:"".concat(100*Math.random(),"%"),animationDuration:"".concat(3*Math.random()+5,"s"),animationDelay:"".concat(5*Math.random(),"s"),top:"-60px"},children:(0,a.jsx)("img",{src:"/icons/smile.svg",alt:"Smile",className:"w-full h-full object-contain"})},t))})}},96103:(e,t,l)=>{l.d(t,{Nh:()=>o,hM:()=>s,jD:()=>n});var a=l(95155),i=l(74692);let n=e=>{let{showAtBreakpoint:t="md",children:l}=e;return(0,a.jsx)("div",{className:"hidden ".concat(t,":block"),children:l})},s=e=>{let{hideAtBreakpoint:t="md",children:l}=e;return(0,a.jsx)("div",{className:"block ".concat(t,":hidden"),children:l})},o=e=>{let{mediaQuery:t,children:l}=e;return(0,i.Ub)(t)?l:null}},96132:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(95155);l(12115);let i=()=>{let e=Array.from({length:50});return(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none z-[10000]",children:e.map((e,t)=>(0,a.jsx)("div",{className:"absolute w-5 h-5 bg-cover opacity-80 animate-float",style:{backgroundImage:"url('/icons/heart.svg')",left:"".concat(100*Math.random(),"%"),animationDuration:"".concat(3*Math.random()+5,"s"),animationDelay:"".concat(5*Math.random(),"s"),top:"-20px"}},t))})}},96728:(e,t,l)=>{l.d(t,{A:()=>d});var a=l(95155),i=l(52596),n=l(39688),s=l(74955),o=l(1349),r=l(15307);let d=e=>{let{lyricsModel:t,setLyricsModel:l,enableModelSelector:d,...c}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(r.A,{...c,maxLength:c.maxLength||200,textAreaClassName:(0,n.QP)((0,i.A)({"pb-14":d}),c.textAreaClassName)}),d&&(0,a.jsx)("div",{className:"absolute bottom-0 p-2",children:(0,a.jsx)(o.A,{value:t,onSetValue:l,variant:s.Ak.Secondary,menuClassName:"bg-quaternary"})})]})}},99082:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(95155),i=l(39688),n=l(10573);let s=e=>(0,a.jsx)(n.A,{src:"/campaign/timbaland/verified-badge.png",alt:"Verified",...e,className:(0,i.QP)("w-8 h-8",e.className)})},99516:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(95155),i=l(63438);l(12115);var n=l(63808),s=l(74955),o=l(4837);let r=(0,i.PA)(e=>{let{isOpen:t,onClose:l,onAccept:i}=e;return t?(0,a.jsx)(o.A,{title:"Terms & Conditions",onClose:l,width:600,wrapperClasses:"overflow-y-auto max-h-[80vh]",children:(0,a.jsxs)("div",{className:"px-2 py-6",children:[(0,a.jsx)("hr",{className:"border-t border-gray-600 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"How to Enter:"}),(0,a.jsxs)("ul",{className:"list-disc pl-5 mb-6 space-y-3",children:[(0,a.jsx)("li",{className:"text-sm",children:"Select a stem below"}),(0,a.jsx)("li",{className:"text-sm",children:"Transform \"Love Again\" using Suno's 'Covers' feature. Feel free to use additional Suno tools like Extend or Replace Section to make remix magic"}),(0,a.jsx)("li",{className:"text-sm",children:"Make your song Public and your remix will be automatically submitted"})]}),(0,a.jsx)("p",{className:"mb-6 text-xs text-secondary",children:"NO PURCHASE NECESSARY. VOID WHERE PROHIBITED. Open to U.S. residents only, must be 18+. Subject to Official Rules available here: https://suno.com/loveagain/terms"}),(0,a.jsx)("div",{className:"flex justify-end space-x-4",children:(0,a.jsx)(s.Ay,{variant:s.Ak.Primary,onClick:()=>{let e=(0,n.$E)();e.logWebUserEvent({actionName:"GenerateTimbalandAgreeToTermsClicked"}),i(e)},children:"Accept and Continue"})})]})}):null})},99803:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(95155),i=l(12115);let n=()=>{let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let e=setInterval(()=>{t(e=>{let t=[...e];return t.length<50||t.shift(),t.push(Date.now()),t})},400);return()=>clearInterval(e)},[]),(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none z-[10000]",children:e.map(e=>(0,a.jsx)("div",{className:"absolute w-5 h-5 opacity-80",style:{left:"".concat(95*Math.random(),"%"),top:"".concat(95*Math.random(),"%"),animation:"sparkle 1s ease-in-out infinite"},children:(0,a.jsx)("img",{src:"/icons/star.svg",alt:"Star",className:"w-full h-full object-contain"})},e))})}}}]);