(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{3445:(e,t,i)=>{"use strict";let r,s,o,n,a;i.d(t,{A:()=>id});var l=i(65824);class u extends Error{constructor(){super(...arguments),this.name="UserFacingApiError"}}var h=i(84896);let d=Object.prototype.toString,p=e=>"[object Error]"===d.call(e),c=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);class f extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}let m=(e,t,i)=>{let r=i.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=r,e};async function g(e,t){return new Promise((i,r)=>{t={...t},t.onFailedAttempt??=()=>{},t.shouldRetry??=()=>!0,t.retries??=10;let s=h.operation(t),o=()=>{s.stop(),r(t.signal?.reason)};t.signal&&!t.signal.aborted&&t.signal.addEventListener("abort",o,{once:!0});let n=()=>{t.signal?.removeEventListener("abort",o),s.stop()};s.attempt(async o=>{try{let t=await e(o);n(),i(t)}catch(e){try{if(!(e instanceof Error))throw TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(e instanceof f)throw e.originalError;if(e instanceof TypeError&&!(e&&p(e)&&"TypeError"===e.name&&"string"==typeof e.message&&("Load failed"===e.message?void 0===e.stack:c.has(e.message))))throw e;if(m(e,o,t),await t.shouldRetry(e)||(s.stop(),r(e)),await t.onFailedAttempt(e),!s.retry(e))throw s.mainError()}catch(e){m(e,o,t),n(),r(e)}}})})}class y extends Error{constructor(e,t){void 0===t&&(t=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}class _ extends Error{constructor(e,t){super(e),this.cause=null==t?void 0:t.cause,this.cause&&v(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}let b=i(91959)(function(e,t,i){let{progress:r,bytesUploaded:s,bytesTotal:o}=t;r&&(e.uppy.log(`Upload progress: ${r}`),e.uppy.emit("upload-progress",i,{uploader:e,bytesUploaded:s,bytesTotal:o}))},300,{leading:!0,trailing:!0});class w extends Error{constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}}function P(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var S=0;function O(e){return"__private_"+S+++"_"+e}class E extends Error{constructor(e){let{statusCode:t,message:i}=e;super(i),this.name="HttpError",this.statusCode=t}}async function A(e){let t;if(401===e.status)throw new w;if(e.ok)return e.json();let i=`Failed request with status: ${e.status}. ${e.statusText}`;try{(t=await e.json()).message&&(i=`${i} message: ${t.message}`),t.requestId&&(i=`${i} request-Id: ${t.requestId}`)}catch(e){throw Error(i,{cause:e})}if(e.status>=400&&e.status<=499&&t.message)throw new u(t.message);throw new E({statusCode:e.status,message:i})}var F=O("companionHeaders"),T=O("getUrl"),U=O("requestSocketToken"),x=O("awaitRemoteFileUpload");r=Symbol.for("uppy test: getCompanionHeaders");class j{constructor(e,t){Object.defineProperty(this,x,{value:k}),Object.defineProperty(this,T,{value:C}),Object.defineProperty(this,F,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:async e=>{var t;let{file:i,postBody:r,signal:s}=e;if((null==(t=i.remote)?void 0:t.url)==null)throw Error("Cannot connect to an undefined URL");return(await this.post(i.remote.url,{...i.remote.body,...r},{signal:s})).token}}),this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),P(this,F)[F]=null==t?void 0:t.companionHeaders}setCompanionHeaders(e){P(this,F)[F]=e}[r](){return P(this,F)[F]}get hostname(){let{companion:e}=this.uppy.getState(),t=this.opts.companionUrl;return(e&&e[t]?e[t]:t).replace(/\/$/,"")}async headers(e){return void 0===e&&(e=!1),{...{Accept:"application/json",...e?void 0:{"Content-Type":"application/json"}},...P(this,F)[F]}}onReceiveResponse(e){let{headers:t}=e,i=this.uppy.getState().companion||{},r=this.opts.companionUrl;t.has("i-am")&&t.get("i-am")!==i[r]&&this.uppy.setState({companion:{...i,[r]:t.get("i-am")}})}async request(e){let{path:t,method:i="GET",data:r,skipPostResponse:s,signal:o}=e;try{let e=await this.headers(!r),n=await function(){return fetch(...arguments).catch(e=>{if("AbortError"===e.name)throw e;throw new y(e)})}(P(this,T)[T](t),{method:i,signal:o,headers:e,credentials:this.opts.companionCookiesRule||"same-origin",body:r?JSON.stringify(r):null});return s||this.onReceiveResponse(n),await A(n)}catch(e){if(e.isAuthError||"UserFacingApiError"===e.name||"AbortError"===e.name)throw e;throw new _(`Could not ${i} ${P(this,T)[T](t)}`,{cause:e})}}async get(e,t){return"boolean"==typeof t&&(t={skipPostResponse:t}),this.request({...t,path:e})}async post(e,t,i){return"boolean"==typeof i&&(i={skipPostResponse:i}),this.request({...i,path:e,method:"POST",data:t})}async delete(e,t,i){return"boolean"==typeof i&&(i={skipPostResponse:i}),this.request({...i,path:e,method:"DELETE",data:t})}async uploadRemoteFile(e,t,i){var r=this;try{let{signal:s,getQueue:o}=i||{};return await g(async()=>{var i;let n=null==(i=this.uppy.getFile(e.id))?void 0:i.serverToken;if(null!=n)return this.uppy.log(`Connecting to exiting websocket ${n}`),P(this,x)[x]({file:e,queue:o(),signal:s});let a=o().wrapPromiseFunction(async function(){try{return await P(r,U)[U](...arguments)}catch(t){if(t.isAuthError)throw new f(t);if(null==t.cause)throw t;let e=t.cause;if("HttpError"===e.name&&!([408,409,429,418,423].includes(e.statusCode)||e.statusCode>=500&&e.statusCode<=599&&![501,505].includes(e.statusCode)))throw new f(e);throw e}},{priority:-1}),l=await a({file:e,postBody:t,signal:s}).abortOn(s);if(this.uppy.getFile(e.id))return this.uppy.setFileState(e.id,{serverToken:l}),P(this,x)[x]({file:this.uppy.getFile(e.id),queue:o(),signal:s})},{retries:10,signal:s,onFailedAttempt:e=>this.uppy.log(`Retrying upload due to: ${e.message}`,"warning")})}catch(t){if("AbortError"===t.name)return;throw this.uppy.emit("upload-error",e,t),t}}}function C(e){return/^(https?:|)\/\//.test(e)?e:`${this.hostname}/${e}`}async function k(e){let t,{file:i,queue:r,signal:s}=e,{capabilities:o}=this.uppy.getState();try{return await new Promise((e,n)=>{let a,l,u;let h=i.serverToken,d=function(e){var t;let i=null==(t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i.exec(e))?void 0:t[1],r=/^http:\/\//i.test(e)?"ws":"wss";return`${r}://${i}`}(i.remote.companionUrl),{isPaused:p}=i,c=(e,t)=>{if(null==a||a.readyState!==a.OPEN){var r;this.uppy.log(`Cannot send "${e}" to socket ${i.id} because the socket state was ${String(null==(r=a)?void 0:r.readyState)}`,"warning");return}a.send(JSON.stringify({action:e,payload:null!=t?t:{}}))};function f(){o.resumableUploads&&(p?c("pause"):c("resume"))}let m=async()=>{l&&l.abort(),l=new AbortController;let t=e=>{var t;this.uppy.setFileState(i.id,{serverToken:null}),null==(t=l)||null==t.abort||t.abort(),n(e)};function s(){clearTimeout(u),p||(u=setTimeout(()=>t(Error("Timeout waiting for message from Companion socket")),3e5))}try{await r.wrapPromiseFunction(async()=>{let r=async()=>new Promise((r,o)=>{a=new WebSocket(`${d}/api/${h}`),s(),a.addEventListener("close",()=>{a=void 0,o(Error("Socket closed unexpectedly"))}),a.addEventListener("error",e=>{var t;this.uppy.log(`Companion socket error ${JSON.stringify(e)}, closing socket`,"warning"),null==(t=a)||t.close()}),a.addEventListener("open",()=>{f()}),a.addEventListener("message",r=>{s();try{let{action:t,payload:s}=JSON.parse(r.data);switch(t){case"progress":b(this,s,this.uppy.getFile(i.id));break;case"success":{var o,n,a,u;let t=null==(o=s.response)?void 0:o.responseText;this.uppy.emit("upload-success",this.uppy.getFile(i.id),{uploadURL:s.url,status:null!=(n=null==(a=s.response)?void 0:a.status)?n:200,body:t?JSON.parse(t):void 0}),null==(u=l)||null==u.abort||u.abort(),e();break}case"error":{let{message:e}=s.error;throw Object.assign(Error(e),{cause:s.error})}default:this.uppy.log(`Companion socket unknown action ${t}`,"warning")}}catch(e){t(e)}});let n=()=>{this.uppy.log(`Closing socket ${i.id}`,"info"),clearTimeout(u),a&&a.close(),a=void 0};l.signal.addEventListener("abort",()=>{n()})});await g(r,{retries:10,signal:l.signal,onFailedAttempt:()=>{l.signal.aborted||this.uppy.log(`Retrying websocket ${i.id}`,"info")}})})().abortOn(l.signal)}catch(e){if(l.signal.aborted)return;t(e)}},y=e=>{if(o.resumableUploads){if(p=e,a&&f(),e){var t;null==(t=l)||null==t.abort||t.abort()}else m()}},v=t=>{var r;o.individualCancellation&&t.id===i.id&&(c("cancel"),null==(r=l)||null==r.abort||r.abort(),this.uppy.log(`upload ${i.id} was removed`,"info"),e())},_=t=>{var r;let{reason:s}=t;"user"===s&&c("cancel"),null==(r=l)||null==r.abort||r.abort(),this.uppy.log(`upload ${i.id} was canceled`,"info"),e()},w=(e,t)=>{e===i.id&&y(t)},P=()=>y(!0),S=()=>y(!1);this.uppy.on("file-removed",v),this.uppy.on("cancel-all",_),this.uppy.on("upload-pause",w),this.uppy.on("pause-all",P),this.uppy.on("resume-all",S),t=()=>{this.uppy.off("file-removed",v),this.uppy.off("cancel-all",_),this.uppy.off("upload-pause",w),this.uppy.off("pause-all",P),this.uppy.off("resume-all",S)},s.addEventListener("abort",()=>{var e;null==(e=l)||e.abort()}),m()})}finally{null==t||t()}}j.VERSION="3.8.2";var R=0;R++;i(25994);function M(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}Symbol.for("uppy test: getSocket"),Symbol.for("uppy test: getQueued");var $=0;function N(e){return"__private_"+$+++"_"+e}var L=N("uppy"),I=N("events");class z{constructor(e){Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:[]}),M(this,L)[L]=e}on(e,t){return M(this,I)[I].push([e,t]),M(this,L)[L].on(e,t)}remove(){for(let[e,t]of M(this,I)[I].splice(0))M(this,L)[L].off(e,t)}onFilePause(e,t){this.on("upload-pause",(i,r)=>{e===i&&t(r)})}onFileRemove(e,t){this.on("file-removed",i=>{e===i.id&&t(i.id)})}onPause(e,t){this.on("upload-pause",(i,r)=>{e===i&&t(r)})}onRetry(e,t){this.on("upload-retry",i=>{e===i&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{M(this,L)[L].getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{M(this,L)[L].getFile(e)&&t()})}onCancelAll(e,t){var i=this;this.on("cancel-all",function(){M(i,L)[L].getFile(e)&&t(...arguments)})}onResumeAll(e,t){this.on("resume-all",()=>{M(this,L)[L].getFile(e)&&t()})}}function D(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var H=0;function q(e){return"__private_"+H+++"_"+e}function B(e){if(null!=e){var t;let i=()=>this.abort(e.reason);e.addEventListener("abort",i,{once:!0});let r=()=>{e.removeEventListener("abort",i)};null==(t=this.then)||t.call(this,r,r)}return this}var W=q("activeRequests"),X=q("queuedHandlers"),V=q("paused"),Y=q("pauseTimer"),G=q("downLimit"),J=q("upperLimit"),K=q("rateLimitingTimer"),Q=q("call"),Z=q("queueNext"),ee=q("next"),et=q("queue"),ei=q("dequeue"),er=q("resume"),es=q("increaseLimit");class eo{constructor(e){Object.defineProperty(this,ei,{value:eh}),Object.defineProperty(this,et,{value:eu}),Object.defineProperty(this,ee,{value:el}),Object.defineProperty(this,Z,{value:ea}),Object.defineProperty(this,Q,{value:en}),Object.defineProperty(this,W,{writable:!0,value:0}),Object.defineProperty(this,X,{writable:!0,value:[]}),Object.defineProperty(this,V,{writable:!0,value:!1}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:1}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,er,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,es,{writable:!0,value:()=>{if(D(this,V)[V]){D(this,K)[K]=setTimeout(D(this,es)[es],0);return}D(this,G)[G]=this.limit,this.limit=Math.ceil((D(this,J)[J]+D(this,G)[G])/2);for(let e=D(this,G)[G];e<=this.limit;e++)D(this,Z)[Z]();D(this,J)[J]-D(this,G)[G]>3?D(this,K)[K]=setTimeout(D(this,es)[es],2e3):D(this,G)[G]=Math.floor(D(this,G)[G]/2)}}),"number"!=typeof e||0===e?this.limit=1/0:this.limit=e}run(e,t){return!D(this,V)[V]&&D(this,W)[W]<this.limit?D(this,Q)[Q](e):D(this,et)[et](e,t)}wrapSyncFunction(e,t){var i=this;return function(){for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];let n=i.run(()=>(e(...s),queueMicrotask(()=>n.done()),()=>{}),t);return{abortOn:B,abort(){n.abort()}}}}wrapPromiseFunction(e,t){var i=this;return function(){let r;for(var s=arguments.length,o=Array(s),n=0;n<s;n++)o[n]=arguments[n];let a=new Promise((s,n)=>{r=i.run(()=>{let t,i;try{i=Promise.resolve(e(...o))}catch(e){i=Promise.reject(e)}return i.then(e=>{t?n(t):(r.done(),s(e))},e=>{t?n(t):(r.done(),n(e))}),e=>{t=Error("Cancelled",{cause:e})}},t)});return a.abort=e=>{r.abort(e)},a.abortOn=B,a}}resume(){D(this,V)[V]=!1,clearTimeout(D(this,Y)[Y]);for(let e=0;e<this.limit;e++)D(this,Z)[Z]()}pause(e){void 0===e&&(e=null),D(this,V)[V]=!0,clearTimeout(D(this,Y)[Y]),null!=e&&(D(this,Y)[Y]=setTimeout(D(this,er)[er],e))}rateLimit(e){clearTimeout(D(this,K)[K]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(D(this,J)[J]=this.limit-1,this.limit=D(this,G)[G],D(this,K)[K]=setTimeout(D(this,es)[es],e))}get isPaused(){return D(this,V)[V]}}function en(e){let t;D(this,W)[W]+=1;let i=!1;try{t=e()}catch(e){throw D(this,W)[W]-=1,e}return{abort:e=>{i||(i=!0,D(this,W)[W]-=1,null==t||t(e),D(this,Z)[Z]())},done:()=>{i||(i=!0,D(this,W)[W]-=1,D(this,Z)[Z]())}}}function ea(){queueMicrotask(()=>D(this,ee)[ee]())}function el(){if(D(this,V)[V]||D(this,W)[W]>=this.limit||0===D(this,X)[X].length)return;let e=D(this,X)[X].shift();if(null==e)throw Error("Invariant violation: next is null");let t=D(this,Q)[Q](e.fn);e.abort=t.abort,e.done=t.done}function eu(e,t){let i={fn:e,priority:(null==t?void 0:t.priority)||0,abort:()=>{D(this,ei)[ei](i)},done:()=>{throw Error("Cannot mark a queued request as done: this indicates a bug")}},r=D(this,X)[X].findIndex(e=>i.priority>e.priority);return -1===r?D(this,X)[X].push(i):D(this,X)[X].splice(r,0,i),i}function eh(e){let t=D(this,X)[X].indexOf(e);-1!==t&&D(this,X)[X].splice(t,1)}let ed=Symbol("__queue");function ep(e){let t=e=>"error"in e&&!!e.error;return e.filter(e=>!t(e))}function ec(e){return e.filter(e=>{var t;return!(null!=(t=e.progress)&&t.uploadStarted)||!e.isRestored})}let{AbortController:ef}=globalThis,{AbortSignal:em}=globalThis,eg=function(e,t){void 0===e&&(e="Aborted");let i=new DOMException(e,"AbortError");return null!=t&&v(t,"cause")&&Object.defineProperty(i,"cause",{__proto__:null,configurable:!0,writable:!0,value:t.cause}),i};function ey(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var ev=0;function e_(e){return"__private_"+ev+++"_"+e}let eb={getChunkSize:e=>Math.ceil(e.size/1e4),onProgress(){},onPartComplete(){},onSuccess(){},onError(e){throw e}},ew=Symbol("pausing upload, not an actual error");var eP=e_("abortController"),eS=e_("chunks"),eO=e_("chunkState"),eE=e_("data"),eA=e_("file"),eF=e_("uploadHasStarted"),eT=e_("onError"),eU=e_("onSuccess"),ex=e_("shouldUseMultipart"),ej=e_("isRestoring"),eC=e_("onReject"),ek=e_("maxMultipartParts"),eR=e_("minPartSize"),eM=e_("initChunks"),e$=e_("createUpload"),eN=e_("resumeUpload"),eL=e_("onPartProgress"),eI=e_("onPartComplete"),ez=e_("abortUpload");class eD{constructor(e,t){var i,r;Object.defineProperty(this,ez,{value:eW}),Object.defineProperty(this,eN,{value:eB}),Object.defineProperty(this,e$,{value:eq}),Object.defineProperty(this,eM,{value:eH}),Object.defineProperty(this,eP,{writable:!0,value:new ef}),Object.defineProperty(this,eS,{writable:!0,value:void 0}),Object.defineProperty(this,eO,{writable:!0,value:void 0}),Object.defineProperty(this,eE,{writable:!0,value:void 0}),Object.defineProperty(this,eA,{writable:!0,value:void 0}),Object.defineProperty(this,eF,{writable:!0,value:!1}),Object.defineProperty(this,eT,{writable:!0,value:void 0}),Object.defineProperty(this,eU,{writable:!0,value:void 0}),Object.defineProperty(this,ex,{writable:!0,value:void 0}),Object.defineProperty(this,ej,{writable:!0,value:void 0}),Object.defineProperty(this,eC,{writable:!0,value:e=>(null==e?void 0:e.cause)===ew?null:ey(this,eT)[eT](e)}),Object.defineProperty(this,ek,{writable:!0,value:1e4}),Object.defineProperty(this,eR,{writable:!0,value:5242880}),Object.defineProperty(this,eL,{writable:!0,value:e=>t=>{if(!t.lengthComputable)return;ey(this,eO)[eO][e].uploaded=function(e){if("string"==typeof e)return parseInt(e,10);if("number"==typeof e)return e;throw TypeError("Expected a number")}(t.loaded);let i=ey(this,eO)[eO].reduce((e,t)=>e+t.uploaded,0);this.options.onProgress(i,ey(this,eE)[eE].size)}}),Object.defineProperty(this,eI,{writable:!0,value:e=>t=>{ey(this,eS)[eS][e]=null,ey(this,eO)[eO][e].etag=t,ey(this,eO)[eO][e].done=!0,this.options.onPartComplete({PartNumber:e+1,ETag:t})}}),this.options={...eb,...t},null!=(i=this.options).getChunkSize||(i.getChunkSize=eb.getChunkSize),ey(this,eE)[eE]=e,ey(this,eA)[eA]=t.file,ey(this,eU)[eU]=this.options.onSuccess,ey(this,eT)[eT]=this.options.onError,ey(this,ex)[ex]=this.options.shouldUseMultipart,ey(this,ej)[ej]=t.uploadId&&t.key,ey(this,eM)[eM]()}start(){ey(this,eF)[eF]?(ey(this,eP)[eP].signal.aborted||ey(this,eP)[eP].abort(ew),ey(this,eP)[eP]=new ef,ey(this,eN)[eN]()):ey(this,ej)[ej]?(this.options.companionComm.restoreUploadFile(ey(this,eA)[eA],{uploadId:this.options.uploadId,key:this.options.key}),ey(this,eN)[eN]()):ey(this,e$)[e$]()}pause(){ey(this,eP)[eP].abort(ew),ey(this,eP)[eP]=new ef}abort(e){null!=e&&e.really?ey(this,ez)[ez]():this.pause()}get chunkState(){return ey(this,eO)[eO]}}function eH(){let e=ey(this,eE)[eE].size,t="function"==typeof ey(this,ex)[ex]?ey(this,ex)[ex](ey(this,eA)[eA]):!!ey(this,ex)[ex];if(t&&e>ey(this,eR)[eR]){let i=Math.max(this.options.getChunkSize(ey(this,eE)[eE]),ey(this,eR)[eR]),r=Math.floor(e/i);r>ey(this,ek)[ek]&&(r=ey(this,ek)[ek],i=e/ey(this,ek)[ek]),ey(this,eS)[eS]=Array(r);for(let r=0,s=0;r<e;r+=i,s++){let o=Math.min(e,r+i),n=()=>{let e=r;return ey(this,eE)[eE].slice(e,o)};if(ey(this,eS)[eS][s]={getData:n,onProgress:ey(this,eL)[eL](s),onComplete:ey(this,eI)[eI](s),shouldUseMultipart:t},ey(this,ej)[ej]){let t=r+i>e?e-r:i;ey(this,eS)[eS][s].setAsUploaded=()=>{ey(this,eS)[eS][s]=null,ey(this,eO)[eO][s].uploaded=t}}}}else ey(this,eS)[eS]=[{getData:()=>ey(this,eE)[eE],onProgress:ey(this,eL)[eL](0),onComplete:ey(this,eI)[eI](0),shouldUseMultipart:t}];ey(this,eO)[eO]=ey(this,eS)[eS].map(()=>({uploaded:0}))}function eq(){this.options.companionComm.uploadFile(ey(this,eA)[eA],ey(this,eS)[eS],ey(this,eP)[eP].signal).then(ey(this,eU)[eU],ey(this,eC)[eC]),ey(this,eF)[eF]=!0}function eB(){this.options.companionComm.resumeUploadFile(ey(this,eA)[eA],ey(this,eS)[eS],ey(this,eP)[eP].signal).then(ey(this,eU)[eU],ey(this,eC)[eC])}function eW(){ey(this,eP)[eP].abort(),this.options.companionComm.abortFileUpload(ey(this,eA)[eA]).catch(e=>this.options.log(e))}function eX(e){if(null!=e&&e.aborted)throw eg("The operation was aborted",{cause:e.reason})}let eV=new TextEncoder,eY={name:"HMAC",hash:"SHA-256"};async function eG(e){let{subtle:t}=globalThis.crypto;return t.digest(eY.hash,eV.encode(e))}async function eJ(e){let{subtle:t}=globalThis.crypto;return t.importKey("raw","string"==typeof e?eV.encode(e):e,eY,!1,["sign"])}function eK(e){let t=new Uint8Array(e),i="";for(let e=0;e<t.length;e++)i+=t[e].toString(16).padStart(2,"0");return i}async function eQ(e,t){let{subtle:i}=globalThis.crypto;return i.sign(eY,await eJ(e),eV.encode(t))}async function eZ(e){let{accountKey:t,accountSecret:i,sessionToken:r,bucketName:s,Key:o,Region:n,expires:a,uploadId:l,partNumber:u}=e,h=`${s}.s3.${n}.amazonaws.com`,d=`/${encodeURI(o).replace(/[;?:@&=+$,#!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)}`,p="UNSIGNED-PAYLOAD",c=new Date().toISOString().replace(/[-:]|\.\d+/g,""),f=c.slice(0,8),m=`${f}/${n}/s3/aws4_request`,g=new URL(`https://${h}${d}`);g.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),g.searchParams.set("X-Amz-Content-Sha256",p),g.searchParams.set("X-Amz-Credential",`${t}/${m}`),g.searchParams.set("X-Amz-Date",c),g.searchParams.set("X-Amz-Expires",a),g.searchParams.set("X-Amz-Security-Token",r),g.searchParams.set("X-Amz-SignedHeaders","host"),u&&g.searchParams.set("partNumber",u),l&&g.searchParams.set("uploadId",l),g.searchParams.set("x-id",u&&l?"UploadPart":"PutObject");let y=function(e){let{method:t="PUT",CanonicalUri:i="/",CanonicalQueryString:r="",SignedHeaders:s,HashedPayload:o}=e,n=Object.keys(s).map(e=>e.toLowerCase()).sort();return[t,i,r,...n.map(e=>`${e}:${s[e]}`),"",n.join(";"),o].join("\n")}({CanonicalUri:d,CanonicalQueryString:g.search.slice(1),SignedHeaders:{host:h},HashedPayload:p}),v=["AWS4-HMAC-SHA256",c,m,eK(await eG(y))].join("\n"),_=await eQ(`AWS4${i}`,f),b=await eQ(_,n),w=await eQ(b,"s3"),P=await eQ(w,"aws4_request"),S=eK(await eQ(P,v));return g.searchParams.set("X-Amz-Signature",S),g}function e0(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var e1=0;function e2(e){return"__private_"+e1+++"_"+e}var e3=e2("abortMultipartUpload"),e4=e2("cache"),e6=e2("createMultipartUpload"),e5=e2("fetchSignature"),e8=e2("getUploadParameters"),e9=e2("listParts"),e7=e2("previousRetryDelay"),te=e2("requests"),tt=e2("retryDelays"),ti=e2("sendCompletionRequest"),tr=e2("setS3MultipartState"),ts=e2("uploadPartBytes"),to=e2("getFile"),tn=e2("shouldRetry"),ta=e2("nonMultipartUpload");class tl{constructor(e,t,i,r){Object.defineProperty(this,ta,{value:th}),Object.defineProperty(this,tn,{value:tu}),Object.defineProperty(this,e3,{writable:!0,value:void 0}),Object.defineProperty(this,e4,{writable:!0,value:new WeakMap}),Object.defineProperty(this,e6,{writable:!0,value:void 0}),Object.defineProperty(this,e5,{writable:!0,value:void 0}),Object.defineProperty(this,e8,{writable:!0,value:void 0}),Object.defineProperty(this,e9,{writable:!0,value:void 0}),Object.defineProperty(this,e7,{writable:!0,value:void 0}),Object.defineProperty(this,te,{writable:!0,value:void 0}),Object.defineProperty(this,tt,{writable:!0,value:void 0}),Object.defineProperty(this,ti,{writable:!0,value:void 0}),Object.defineProperty(this,tr,{writable:!0,value:void 0}),Object.defineProperty(this,ts,{writable:!0,value:void 0}),Object.defineProperty(this,to,{writable:!0,value:void 0}),e0(this,te)[te]=e,e0(this,tr)[tr]=i,e0(this,to)[to]=r,this.setOptions(t)}setOptions(e){let t=e0(this,te)[te];if("abortMultipartUpload"in e&&(e0(this,e3)[e3]=t.wrapPromiseFunction(e.abortMultipartUpload,{priority:1})),"createMultipartUpload"in e&&(e0(this,e6)[e6]=t.wrapPromiseFunction(e.createMultipartUpload,{priority:-1})),"signPart"in e&&(e0(this,e5)[e5]=t.wrapPromiseFunction(e.signPart)),"listParts"in e&&(e0(this,e9)[e9]=t.wrapPromiseFunction(e.listParts)),"completeMultipartUpload"in e&&(e0(this,ti)[ti]=t.wrapPromiseFunction(e.completeMultipartUpload,{priority:1})),"retryDelays"in e){var i;e0(this,tt)[tt]=null!=(i=e.retryDelays)?i:[]}"uploadPartBytes"in e&&(e0(this,ts)[ts]=t.wrapPromiseFunction(e.uploadPartBytes,{priority:1/0})),"getUploadParameters"in e&&(e0(this,e8)[e8]=t.wrapPromiseFunction(e.getUploadParameters))}async getUploadId(e,t){let i;for(;null!=(i=e0(this,e4)[e4].get(e.data));)try{return await i}catch{}let r=e0(this,e6)[e6](e0(this,to)[to](e),t),s=()=>{r.abort(t.reason),e0(this,e4)[e4].delete(e.data)};return t.addEventListener("abort",s,{once:!0}),e0(this,e4)[e4].set(e.data,r),r.then(async i=>{t.removeEventListener("abort",s),e0(this,tr)[tr](e,i),e0(this,e4)[e4].set(e.data,i)},()=>{t.removeEventListener("abort",s),e0(this,e4)[e4].delete(e.data)}),r}async abortFileUpload(e){let t;let i=e0(this,e4)[e4].get(e.data);if(null!=i){e0(this,e4)[e4].delete(e.data),e0(this,tr)[tr](e,Object.create(null));try{t=await i}catch{return}await e0(this,e3)[e3](e0(this,to)[to](e),t)}}async uploadFile(e,t,i){if(eX(i),1===t.length&&!t[0].shouldUseMultipart)return e0(this,ta)[ta](e,t[0],i);let{uploadId:r,key:s}=await this.getUploadId(e,i);eX(i);try{let o=await Promise.all(t.map((t,r)=>this.uploadChunk(e,r+1,t,i)));return eX(i),await e0(this,ti)[ti](e0(this,to)[to](e),{key:s,uploadId:r,parts:o,signal:i},i).abortOn(i)}catch(t){throw(null==t?void 0:t.cause)!==ew&&(null==t?void 0:t.name)!=="AbortError"&&this.abortFileUpload(e),t}}restoreUploadFile(e,t){e0(this,e4)[e4].set(e.data,t)}async resumeUploadFile(e,t,i){if(eX(i),1===t.length&&null!=t[0]&&!t[0].shouldUseMultipart)return e0(this,ta)[ta](e,t[0],i);let{uploadId:r,key:s}=await this.getUploadId(e,i);eX(i);let o=await e0(this,e9)[e9](e0(this,to)[to](e),{uploadId:r,key:s,signal:i},i).abortOn(i);eX(i);let n=await Promise.all(t.map((t,r)=>{let s=r+1,n=o.find(e=>{let{PartNumber:t}=e;return t===s});return null==n?this.uploadChunk(e,s,t,i):(null==t||null==t.setAsUploaded||t.setAsUploaded(),{PartNumber:s,ETag:n.ETag})}));return eX(i),e0(this,ti)[ti](e0(this,to)[to](e),{key:s,uploadId:r,parts:n,signal:i},i).abortOn(i)}async uploadChunk(e,t,i,r){eX(r);let{uploadId:s,key:o}=await this.getUploadId(e,r),n=e0(this,tt)[tt].values(),a=e0(this,tt)[tt].values(),l=()=>{let e=n.next();return null==e||e.done?null:e.value};for(;;){let n;eX(r);let u=i.getData(),{onProgress:h,onComplete:d}=i;try{n=await e0(this,e5)[e5](e0(this,to)[to](e),{uploadId:s,key:o,partNumber:t,body:u,signal:r}).abortOn(r)}catch(t){let e=l();if(null==e||r.aborted)throw t;await new Promise(t=>setTimeout(t,e));continue}eX(r);try{return{PartNumber:t,...await e0(this,ts)[ts]({signature:n,body:u,size:u.size,onProgress:h,onComplete:d,signal:r}).abortOn(r)}}catch(e){if(!await e0(this,tn)[tn](e,a))throw e}}}}async function tu(e,t){var i;let r=e0(this,te)[te],s=null==e||null==(i=e.source)?void 0:i.status;if(null==s)return!1;if(403===s&&"Request has expired"===e.message){if(!r.isPaused){if(1===r.limit||null==e0(this,e7)[e7]){let e=t.next();if(null==e||e.done)return!1;e0(this,e7)[e7]=e.value}r.rateLimit(0),await new Promise(e=>setTimeout(e,e0(this,e7)[e7]))}}else if(429===s){if(!r.isPaused){let e=t.next();if(null==e||e.done)return!1;r.rateLimit(e.value)}}else if(s>400&&s<500&&409!==s)return!1;else if("undefined"!=typeof navigator&&!1===navigator.onLine)r.isPaused||(r.pause(),window.addEventListener("online",()=>{r.resume()},{once:!0}));else{let e=t.next();if(null==e||e.done)return!1;await new Promise(t=>setTimeout(t,e.value))}return!0}async function th(e,t,i){let r;let{method:s="POST",url:o,fields:n,headers:a}=await e0(this,e8)[e8](e0(this,to)[to](e),{signal:i}).abortOn(i),l=t.getData();if("POST"===s.toUpperCase()){let e=new FormData;Object.entries(n).forEach(t=>{let[i,r]=t;return e.set(i,r)}),e.set("file",l),r=e}else r=l;let{onProgress:u,onComplete:h}=t,d=await e0(this,ts)[ts]({signature:{url:o,headers:a,method:s},body:r,size:l.size,onProgress:u,onComplete:h,signal:i}).abortOn(i);return"location"in d?d:{location:function(e){let t=new URL(e);return t.search="",t.hash="",t.href}(o),...d}}function td(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var tp=0;function tc(e){return"__private_"+tp+++"_"+e}function tf(e){if(null!=e&&e.error){let t=Error(e.message);throw Object.assign(t,e.error),t}return e}function tm(e){let t=e.Expiration;if(t){let e=Math.floor((new Date(t)-Date.now())/1e3);if(e>9)return e}}function tg(e){let{meta:t,allowedMetaFields:i,querify:r=!1}=e,s=null!=i?i:Object.keys(t);return t?Object.fromEntries(s.filter(e=>null!=t[e]).map(e=>[r?`metadata[${e}]`:e,String(t[e])])):{}}let ty={allowedMetaFields:null,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:e=>0!==e.size,retryDelays:[0,1e3,3e3,5e3],companionHeaders:{}};var tv=tc("companionCommunicationQueue"),t_=tc("client"),tb=tc("cachedTemporaryCredentials"),tw=tc("getTemporarySecurityCredentials"),tP=tc("setS3MultipartState"),tS=tc("getFile"),tO=tc("uploadLocalFile"),tE=tc("getCompanionClientArgs"),tA=tc("upload"),tF=tc("setCompanionHeaders"),tT=tc("setResumableUploadsCapability"),tU=tc("resetResumableCapability");n=Symbol.for("uppy test: getClient");class tx extends l.A{constructor(e,t){var i;super(e,{...ty,uploadPartBytes:tx.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...t}),Object.defineProperty(this,tE,{value:tk}),Object.defineProperty(this,tO,{value:tC}),Object.defineProperty(this,tw,{value:tj}),Object.defineProperty(this,tv,{writable:!0,value:void 0}),Object.defineProperty(this,t_,{writable:!0,value:void 0}),Object.defineProperty(this,tb,{writable:!0,value:void 0}),Object.defineProperty(this,tP,{writable:!0,value:(e,t)=>{let{key:i,uploadId:r}=t,s=this.uppy.getFile(e.id);null!=s&&this.uppy.setFileState(e.id,{s3Multipart:{...s.s3Multipart,key:i,uploadId:r}})}}),Object.defineProperty(this,tS,{writable:!0,value:e=>this.uppy.getFile(e.id)||e}),Object.defineProperty(this,tA,{writable:!0,value:async e=>{if(0===e.length)return;let t=ep(this.uppy.getFilesByIds(e)),i=ec(t);this.uppy.emit("upload-start",i);let r=t.map(e=>{if(e.isRemote){td(this,tT)[tT](!1);let t=new AbortController,i=i=>{i.id===e.id&&t.abort()};this.uppy.on("file-removed",i);let r=this.uppy.getRequestClientForFile(e).uploadRemoteFile(e,td(this,tE)[tE](e),{signal:t.signal,getQueue:()=>this.requests});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",i)},{priority:-1})(),r}return td(this,tO)[tO](e)}),s=await Promise.all(r);return td(this,tT)[tT](!0),s}}),Object.defineProperty(this,tF,{writable:!0,value:()=>{td(this,t_)[t_].setCompanionHeaders(this.opts.companionHeaders)}}),Object.defineProperty(this,tT,{writable:!0,value:e=>{let{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,resumableUploads:e}})}}),Object.defineProperty(this,tU,{writable:!0,value:()=>{td(this,tT)[tT](!0)}}),this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",this.title="AWS S3 Multipart",td(this,t_)[t_]=new j(e,t);let r={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:null!=t&&t.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:null!=t&&t.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(let e of Object.keys(r))null==this.opts[e]&&(this.opts[e]=r[e].bind(this));(null==t?void 0:t.prepareUploadParts)!=null&&null==t.signPart&&(this.opts.signPart=async(e,i)=>{let{uploadId:r,key:s,partNumber:o,body:n,signal:a}=i,{presignedUrls:l,headers:u}=await t.prepareUploadParts(e,{uploadId:r,key:s,parts:[{number:o,chunk:n}],signal:a});return{url:null==l?void 0:l[o],headers:null==u?void 0:u[o]}}),this.requests=null!=(i=this.opts.rateLimitedQueue)?i:new eo(this.opts.limit),td(this,tv)[tv]=new tl(this.requests,this.opts,td(this,tP)[tP],td(this,tS)[tS]),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null),this.uploaderSockets=Object.create(null)}[n](){return td(this,t_)[t_]}setOptions(e){td(this,tv)[tv].setOptions(e),super.setOptions(e),td(this,tF)[tF]()}resetUploaderReferences(e,t){this.uploaders[e]&&(this.uploaders[e].abort({really:(null==t?void 0:t.abort)||!1}),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)}assertHost(e){if(!this.opts.companionUrl)throw Error(`Expected a \`companionUrl\` option containing a Companion address, or if you are not using Companion, a custom \`${e}\` implementation.`)}createMultipartUpload(e,t){this.assertHost("createMultipartUpload"),eX(t);let i=tg({meta:e.meta,allowedMetaFields:this.opts.allowedMetaFields});return td(this,t_)[t_].post("s3/multipart",{filename:e.name,type:e.type,metadata:i},{signal:t}).then(tf)}listParts(e,t,i){var r;let{key:s,uploadId:o,signal:n}=t;null!=n||(n=i),this.assertHost("listParts"),eX(n);let a=encodeURIComponent(s);return td(this,t_)[t_].get(`s3/multipart/${o}?key=${a}`,{signal:n}).then(tf)}completeMultipartUpload(e,t,i){var r;let{key:s,uploadId:o,parts:n,signal:a}=t;null!=a||(a=i),this.assertHost("completeMultipartUpload"),eX(a);let l=encodeURIComponent(s),u=encodeURIComponent(o);return td(this,t_)[t_].post(`s3/multipart/${u}/complete?key=${l}`,{parts:n},{signal:a}).then(tf)}async createSignedURL(e,t){let i=await td(this,tw)[tw](t),r=tm(i.credentials)||604800,{uploadId:s,key:o,partNumber:n}=t;return{method:"PUT",expires:r,fields:{},url:`${await eZ({accountKey:i.credentials.AccessKeyId,accountSecret:i.credentials.SecretAccessKey,sessionToken:i.credentials.SessionToken,expires:r,bucketName:i.bucket,Region:i.region,Key:null!=o?o:`${crypto.randomUUID()}-${e.name}`,uploadId:s,partNumber:n})}`,headers:{"Content-Type":e.type}}}signPart(e,t){let{uploadId:i,key:r,partNumber:s,signal:o}=t;if(this.assertHost("signPart"),eX(o),null==i||null==r||null==s)throw Error("Cannot sign without a key, an uploadId, and a partNumber");let n=encodeURIComponent(r);return td(this,t_)[t_].get(`s3/multipart/${i}/${s}?key=${n}`,{signal:o}).then(tf)}abortMultipartUpload(e,t,i){var r;let{key:s,uploadId:o,signal:n}=t;null!=n||(n=i),this.assertHost("abortMultipartUpload");let a=encodeURIComponent(s),l=encodeURIComponent(o);return td(this,t_)[t_].delete(`s3/multipart/${l}?key=${a}`,void 0,{signal:n}).then(tf)}getUploadParameters(e,t){let{meta:i}=e,{type:r,name:s}=i,o=new URLSearchParams({filename:s,type:r,...tg({meta:i,allowedMetaFields:this.opts.allowedMetaFields,querify:!0})});return td(this,t_)[t_].get(`s3/params?${o}`,t)}static async uploadPartBytes(e){let{signature:{url:t,expires:i,headers:r,method:s="PUT"},body:o,size:n=o.size,onProgress:a,onComplete:l,signal:u}=e;if(eX(u),null==t)throw Error("Cannot upload to an undefined URL");return new Promise((e,h)=>{let d=new XMLHttpRequest;function p(){d.abort()}function c(){null==u||u.removeEventListener("abort",p)}d.open(s,t,!0),r&&Object.keys(r).forEach(e=>{d.setRequestHeader(e,r[e])}),d.responseType="text","number"==typeof i&&(d.timeout=1e3*i),null==u||u.addEventListener("abort",p),d.upload.addEventListener("progress",e=>{a(e)}),d.addEventListener("abort",()=>{c(),h(eg())}),d.addEventListener("timeout",()=>{c();let e=Error("Request has expired");e.source={status:403},h(e)}),d.addEventListener("load",()=>{if(c(),403===d.status&&d.responseText.includes("<Message>Request has expired</Message>")){let e=Error("Request has expired");e.source=d,h(e);return}if(d.status<200||d.status>=300){let e=Error("Non 2xx");e.source=d,h(e);return}null==a||a({loaded:n,lengthComputable:!0});let t=d.getAllResponseHeaders().trim().split(/[\r\n]+/),i={__proto__:null};for(let e of t){let t=e.split(": "),r=t.shift(),s=t.join(": ");i[r]=s}let{etag:r,location:o}=i;if("POST"===s.toUpperCase()&&null===o&&console.warn("AwsS3/Multipart: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3-multipart#S3-Bucket-Configuration for instructions."),null===r){h(Error("AwsS3/Multipart: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3-multipart#S3-Bucket-Configuration for instructions."));return}null==l||l(r),e({...i,ETag:r})}),d.addEventListener("error",e=>{c();let t=Error("Unknown error");t.source=e.target,h(t)}),d.send(o)})}install(){td(this,tT)[tT](!0),this.uppy.addPreProcessor(td(this,tF)[tF]),this.uppy.addUploader(td(this,tA)[tA]),this.uppy.on("cancel-all",td(this,tU)[tU])}uninstall(){this.uppy.removePreProcessor(td(this,tF)[tF]),this.uppy.removeUploader(td(this,tA)[tA]),this.uppy.off("cancel-all",td(this,tU)[tU])}}async function tj(e){return eX(null==e?void 0:e.signal),null==td(this,tb)[tb]&&(!0===this.opts.getTemporarySecurityCredentials?(this.assertHost("getTemporarySecurityCredentials"),td(this,tb)[tb]=td(this,t_)[t_].get("s3/sts",e).then(tf)):td(this,tb)[tb]=this.opts.getTemporarySecurityCredentials(e),td(this,tb)[tb]=await td(this,tb)[tb],setTimeout(()=>{td(this,tb)[tb]=null},500*(tm(td(this,tb)[tb].credentials)||0))),td(this,tb)[tb]}function tC(e){var t=this;return new Promise((i,r)=>{let s=new eD(e.data,{companionComm:td(this,tv)[tv],log:function(){return t.uppy.log(...arguments)},getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):null,onProgress:(t,i)=>{this.uppy.emit("upload-progress",this.uppy.getFile(e.id),{uploader:this,bytesUploaded:t,bytesTotal:i})},onError:t=>{this.uppy.log(t),this.uppy.emit("upload-error",e,t),this.resetUploaderReferences(e.id),r(t)},onSuccess:t=>{let r={body:{...t},status:200,uploadURL:t.location};this.resetUploaderReferences(e.id),this.uppy.emit("upload-success",td(this,tS)[tS](e),r),t.location&&this.uppy.log(`Download ${e.name} from ${t.location}`),i()},onPartComplete:t=>{this.uppy.emit("s3-multipart:part-uploaded",td(this,tS)[tS](e),t)},file:e,shouldUseMultipart:this.opts.shouldUseMultipart,...e.s3Multipart});this.uploaders[e.id]=s;let o=new z(this.uppy);this.uploaderEvents[e.id]=o,o.onFileRemove(e.id,t=>{s.abort(),this.resetUploaderReferences(e.id,{abort:!0}),i(`upload ${t} was removed`)}),o.onCancelAll(e.id,t=>{(null==t?void 0:t.reason)==="user"&&(s.abort(),this.resetUploaderReferences(e.id,{abort:!0})),i(`upload ${e.id} was canceled`)}),o.onFilePause(e.id,e=>{e?s.pause():s.start()}),o.onPauseAll(e.id,()=>{s.pause()}),o.onResumeAll(e.id,()=>{s.start()}),s.start()})}function tk(e){var t;return{...null==(t=e.remote)?void 0:t.body,protocol:"s3-multipart",size:e.data.size,metadata:e.meta}}tx.VERSION="3.12.0";var tR=i(93239);function tM(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var t$=0;function tN(e){return"__private_"+t$+++"_"+e}var tL=tN("uppy"),tI=tN("events");class tz{constructor(e){Object.defineProperty(this,tL,{writable:!0,value:void 0}),Object.defineProperty(this,tI,{writable:!0,value:[]}),tM(this,tL)[tL]=e}on(e,t){return tM(this,tI)[tI].push([e,t]),tM(this,tL)[tL].on(e,t)}remove(){for(let[e,t]of tM(this,tI)[tI].splice(0))tM(this,tL)[tL].off(e,t)}onFilePause(e,t){this.on("upload-pause",(i,r)=>{e===i&&t(r)})}onFileRemove(e,t){this.on("file-removed",i=>{e===i.id&&t(i.id)})}onPause(e,t){this.on("upload-pause",(i,r)=>{e===i&&t(r)})}onRetry(e,t){this.on("upload-retry",i=>{e===i&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{tM(this,tL)[tL].getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{tM(this,tL)[tL].getFile(e)&&t()})}onCancelAll(e,t){var i=this;this.on("cancel-all",function(){tM(i,tL)[tL].getFile(e)&&t(...arguments)})}onResumeAll(e,t){this.on("resume-all",()=>{tM(this,tL)[tL].getFile(e)&&t()})}}function tD(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var tH=0;function tq(e){return"__private_"+tH+++"_"+e}var tB=tq("aliveTimer"),tW=tq("isDone"),tX=tq("onTimedOut"),tV=tq("timeout");class tY{constructor(e,t){Object.defineProperty(this,tB,{writable:!0,value:void 0}),Object.defineProperty(this,tW,{writable:!0,value:!1}),Object.defineProperty(this,tX,{writable:!0,value:void 0}),Object.defineProperty(this,tV,{writable:!0,value:void 0}),tD(this,tV)[tV]=e,tD(this,tX)[tX]=()=>t(e)}progress(){!tD(this,tW)[tW]&&tD(this,tV)[tV]>0&&(clearTimeout(tD(this,tB)[tB]),tD(this,tB)[tB]=setTimeout(tD(this,tX)[tX],tD(this,tV)[tV]))}done(){tD(this,tW)[tW]||(clearTimeout(tD(this,tB)[tB]),tD(this,tB)[tB]=void 0,tD(this,tW)[tW]=!0)}}function tG(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var tJ=0;function tK(e){return"__private_"+tJ+++"_"+e}function tQ(e,t){if(e&&(0!==e.readyState&&4!==e.readyState||0===e.status))return new y(t,e);let i=new _("Upload error",{cause:t});return i.request=e,i}let tZ=e=>e.data;var t0=tK("addEventHandlerForFile"),t1=tK("addEventHandlerIfFileStillExists");class t2{constructor(e,t){Object.defineProperty(this,t1,{value:t4}),Object.defineProperty(this,t0,{value:t3}),this.uppy=e,this.opts={validateStatus:e=>e>=200&&e<300,...t},this.requests=t[ed],this.uploaderEvents=Object.create(null),this.i18n=t.i18n}getOptions(e){var t;let{uppy:i}=this,r=i.getState().xhrUpload;return{...this.opts,...r||{},...e.xhrUpload||{},headers:{...this.opts.headers,...null==r?void 0:r.headers,...null==(t=e.xhrUpload)?void 0:t.headers}}}uploadLocalFile(e){let t=this.getOptions(e);return new Promise((i,r)=>{let s=t.formData?function(e,t){let i=new FormData;!function(e,t,i){(Array.isArray(i.allowedMetaFields)?i.allowedMetaFields:Object.keys(t)).forEach(i=>{e.append(i,t[i])})}(i,e.meta,t);let r=e.data.slice(0,e.data.size,e.meta.type);return e.name?i.append(t.fieldName,r,e.meta.name):i.append(t.fieldName,r),i}(e,t):tZ(e,t),o=new XMLHttpRequest;this.uploaderEvents[e.id]=new tz(this.uppy);let n=new tY(t.timeout,()=>{o.abort(),l.done();let i=Error(this.i18n("timedOut",{seconds:Math.ceil(t.timeout/1e3)}));this.uppy.emit("upload-error",e,i),r(i)}),a=(0,tR.A)();o.upload.addEventListener("loadstart",()=>{this.uppy.log(`[AwsS3/XHRUpload] ${a} started`)}),o.upload.addEventListener("progress",t=>{this.uppy.log(`[AwsS3/XHRUpload] ${a} progress: ${t.loaded} / ${t.total}`),n.progress(),t.lengthComputable&&this.uppy.emit("upload-progress",this.uppy.getFile(e.id),{uploader:this,bytesUploaded:t.loaded,bytesTotal:t.total})}),o.addEventListener("load",s=>{if(this.uppy.log(`[AwsS3/XHRUpload] ${a} finished`),n.done(),l.done(),this.uploaderEvents[e.id]&&(this.uploaderEvents[e.id].remove(),this.uploaderEvents[e.id]=null),t.validateStatus(s.target.status,o.responseText,o)){let r=t.getResponseData(o.responseText,o),n=r[t.responseUrlFieldName],a={status:s.target.status,body:r,uploadURL:n};return this.uppy.emit("upload-success",this.uppy.getFile(e.id),a),n&&this.uppy.log(`Download ${e.name} from ${n}`),i(e)}let u=t.getResponseData(o.responseText,o),h=tQ(o,t.getResponseError(o.responseText,o)),d={status:s.target.status,body:u};return this.uppy.emit("upload-error",e,h,d),r(h)}),o.addEventListener("error",()=>{this.uppy.log(`[AwsS3/XHRUpload] ${a} errored`),n.done(),l.done(),this.uploaderEvents[e.id]&&(this.uploaderEvents[e.id].remove(),this.uploaderEvents[e.id]=null);let i=tQ(o,t.getResponseError(o.responseText,o));return this.uppy.emit("upload-error",e,i),r(i)}),o.open(t.method.toUpperCase(),t.endpoint,!0),o.withCredentials=!!t.withCredentials,""!==t.responseType&&(o.responseType=t.responseType),Object.keys(t.headers).forEach(e=>{o.setRequestHeader(e,t.headers[e])});let l=this.requests.run(()=>(o.send(s),()=>{n.done(),o.abort()}),{priority:1});tG(this,t0)[t0]("file-removed",e.id,()=>{l.abort(),r(Error("File removed"))}),tG(this,t1)[t1]("cancel-all",e.id,function(e){let{reason:t}=void 0===e?{}:e;"user"===t&&l.abort(),r(Error("Upload cancelled"))})})}}function t3(e,t,i){this.uploaderEvents[t].on(e,e=>{var r;t===(null!=(r=null==e?void 0:e.id)?r:e)&&i()})}function t4(e,t,i){var r=this;this.uploaderEvents[t].on(e,function(){r.uppy.getFile(t)&&i(...arguments)})}let t6=function(e,t){let i=t.headers?t.headers["content-type"]:t.getResponseHeader("Content-Type");if("string"==typeof i){let t=i.replace(/;.*$/,"").toLowerCase();if("application/xml"===t||"text/xml"===t||"text/html"===t&&/^<\?xml /.test(e))return!0}return!1},t5={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}};function t8(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var t9=0;function t7(e){return"__private_"+t9+++"_"+e}function ie(e,t){let i=e.indexOf(`<${t}>`),r=e.indexOf(`</${t}>`,i);return -1!==i&&-1!==r?e.slice(i+t.length+2,r):""}function it(e){if(e&&e.error){let t=Error(e.message);throw Object.assign(t,e.error),t}return e}function ii(e,t){if(t6(e,t))return Error(ie(e,"Message"))}let ir=!1;var is=t7("client"),io=t7("requests"),ia=t7("uploader"),il=t7("handleUpload"),iu=t7("setCompanionHeaders"),ih=t7("getCompanionClientArgs");a=Symbol.for("uppy test: getClient");class id extends l.A{constructor(e,t){if((null==t?void 0:t.shouldUseMultipart)!=null)return new tx(e,t);super(e,t),Object.defineProperty(this,is,{writable:!0,value:void 0}),Object.defineProperty(this,io,{writable:!0,value:void 0}),Object.defineProperty(this,ia,{writable:!0,value:void 0}),Object.defineProperty(this,il,{writable:!0,value:async e=>{let t=Object.create(null);function i(e){var i;let{id:r}=e;null==(i=t[r])||i.abort()}this.uppy.on("file-removed",i);let r=ec(ep(this.uppy.getFilesByIds(e)));this.uppy.emit("upload-start",r);let s=t8(this,io)[io].wrapPromiseFunction(e=>this.opts.getUploadParameters(e)),o=e.length;return Promise.allSettled(e.map((e,i)=>(t[e]=s(this.uppy.getFile(e)),t[e].then(r=>{delete t[e];let s=this.uppy.getFile(e);!function(e,t){if(null==t||"string"!=typeof t.url||"object"!=typeof t.fields&&null!=t.fields)throw TypeError(`AwsS3: got incorrect result from 'getUploadParameters()' for file '${e.name}', expected an object '{ url, method, fields, headers }' but got '${JSON.stringify(t)}' instead.
See https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.`);if(!(null==t.method||/^p(u|os)t$/i.test(t.method)))throw TypeError(`AwsS3: got incorrect method from 'getUploadParameters()' for file '${e.name}', expected  'PUT' or 'POST' but got '${t.method}' instead.
See https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.`)}(s,r);let{method:n="POST",url:a,fields:l,headers:u}=r,h={method:n,formData:"POST"===n.toUpperCase(),endpoint:a,allowedMetaFields:l?Object.keys(l):[]};return u&&(h.headers=u),this.uppy.setFileState(s.id,{meta:{...s.meta,...l},xhrUpload:h}),this.uploadFile(s.id,i,o)}).catch(i=>{delete t[e];let r=this.uppy.getFile(e);return this.uppy.emit("upload-error",r,i),Promise.reject(i)})))).finally(()=>{this.uppy.off("file-removed",i)})}}),Object.defineProperty(this,iu,{writable:!0,value:()=>(t8(this,is)[is].setCompanionHeaders(this.opts.companionHeaders),Promise.resolve())}),Object.defineProperty(this,ih,{writable:!0,value:e=>{let t=t8(this,ia)[ia].getOptions(e),i=Array.isArray(t.allowedMetaFields)?t.allowedMetaFields:Object.keys(e.meta);return{...e.remote.body,protocol:"multipart",endpoint:t.endpoint,size:e.data.size,fieldname:t.fieldName,metadata:Object.fromEntries(i.map(t=>[t,e.meta[t]])),httpMethod:t.method,useFormData:t.formData,headers:"function"==typeof t.headers?t.headers(e):t.headers}}}),this.type="uploader",this.id=this.opts.id||"AwsS3",this.title="AWS S3",this.defaultLocale=t5;let i={timeout:3e4,limit:0,allowedMetaFields:[],getUploadParameters:this.getUploadParameters.bind(this),shouldUseMultipart:!1,companionHeaders:{}};if(this.opts={...i,...t},(null==t?void 0:t.allowedMetaFields)===void 0&&"metaFields"in this.opts)throw Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.i18nInit(),t8(this,is)[is]=new j(e,t),t8(this,io)[io]=new eo(this.opts.limit)}[a](){return t8(this,is)[is]}get client(){return t8(this,is)[is]}set client(e){t8(this,is)[is]=e}getUploadParameters(e){if(!this.opts.companionUrl)throw Error("Expected a `companionUrl` option containing a Companion address.");let t=e.meta.name,{type:i}=e.meta,r=new URLSearchParams({filename:t,type:i,...Object.fromEntries(this.opts.allowedMetaFields.filter(t=>null!=e.meta[t]).map(t=>[`metadata[${t}]`,e.meta[t].toString()]))});return t8(this,is)[is].get(`s3/params?${r}`).then(it)}uploadFile(e,t,i){let r=this.uppy.getFile(e);if(this.uppy.log(`uploading ${t} of ${i}`),r.error)throw Error(r.error);if(r.isRemote){let e=new AbortController,t=t=>{t.id===r.id&&e.abort()};this.uppy.on("file-removed",t);let i=this.uppy.getRequestClientForFile(r).uploadRemoteFile(r,t8(this,ih)[ih](r),{signal:e.signal,getQueue:()=>t8(this,io)[io]});return t8(this,io)[io].wrapSyncFunction(()=>{this.uppy.off("file-removed",t)},{priority:-1})(),i}return t8(this,ia)[ia].uploadLocalFile(r,t,i)}install(){let{uppy:e}=this;e.addPreProcessor(t8(this,iu)[iu]),e.addUploader(t8(this,il)[il]);let t={fieldName:"file",responseUrlFieldName:"location",timeout:this.opts.timeout,[ed]:t8(this,io)[io],responseType:"text",getResponseData:this.opts.getResponseData||function(t,i){var r,s;return t6(t,i)?{location:(r=i.responseURL,s=ie(t,"Location"),r||s.startsWith("https://")||s.startsWith("http://")||(s=`https://${s}`),new URL(s,r||void 0).toString()),bucket:ie(t,"Bucket"),key:ie(t,"Key"),etag:ie(t,"ETag")}:"POST"===this.method.toUpperCase()?(ir||(e.log("[AwsS3] No response data found, make sure to set the success_action_status AWS SDK option to 201. See https://uppy.io/docs/aws-s3/#POST-Uploads","warning"),ir=!0),{location:null}):i.responseURL?{location:i.responseURL.replace(/\?.*$/,"")}:{location:null}},getResponseError:ii};t.i18n=this.i18n,t8(this,ia)[ia]=new t2(e,t)}uninstall(){this.uppy.removePreProcessor(t8(this,iu)[iu]),this.uppy.removeUploader(t8(this,il)[il])}}id.VERSION="3.6.2"},4592:e=>{"use strict";e.exports=function(e){if("number"!=typeof e||Number.isNaN(e))throw TypeError(`Expected a number, got ${typeof e}`);let t=Math.abs(e);if(e<0&&(t=-t),0===t)return"0 B";let i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.min(Math.floor(Math.log(t)/Math.log(1024)),i.length-1),s=Number(t/1024**r),o=i[r];return`${s>=10||s%1==0?Math.round(s):s.toFixed(1)} ${o}`}},10244:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=function(e){for(var t;e&&!e.dir;)e=e.parentNode;return null==(t=e)?void 0:t.dir}},14472:(e,t,i)=>{"use strict";i.d(t,{A:()=>D});var r=i(66117),s=i(90981);let o={__proto__:null,"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};var n=i(50755);function a(e){let{recording:t,onStartRecording:i,onStopRecording:s,i18n:o}=e;return t?(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:o("stopAudioRecording"),"aria-label":o("stopAudioRecording"),onClick:s,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,r.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:o("startAudioRecording"),"aria-label":o("startAudioRecording"),onClick:i,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14px",height:"20px",viewBox:"0 0 14 20"},(0,r.h)("path",{d:"M7 14c2.21 0 4-1.71 4-3.818V3.818C11 1.71 9.21 0 7 0S3 1.71 3 3.818v6.364C3 12.29 4.79 14 7 14zm6.364-7h-.637a.643.643 0 0 0-.636.65V9.6c0 3.039-2.565 5.477-5.6 5.175-2.645-.264-4.582-2.692-4.582-5.407V7.65c0-.36-.285-.65-.636-.65H.636A.643.643 0 0 0 0 7.65v1.631c0 3.642 2.544 6.888 6.045 7.382v1.387H3.818a.643.643 0 0 0-.636.65v.65c0 .36.285.65.636.65h6.364c.351 0 .636-.29.636-.65v-.65c0-.36-.285-.65-.636-.65H7.955v-1.372C11.363 16.2 14 13.212 14 9.6V7.65c0-.36-.285-.65-.636-.65z",fill:"#FFF","fill-rule":"nonzero"})))}function l(e){let{recordingLengthSeconds:t,i18n:i}=e,s=`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`;return(0,r.h)("span",{"aria-label":i("recordingLength",{recording_length:s})},s)}let u=e=>{let{currentDeviceId:t,audioSources:i,onChangeSource:s}=e;return(0,r.h)("div",{className:"uppy-Audio-videoSource"},(0,r.h)("select",{className:"uppy-u-reset uppy-Audio-audioSource-select",onChange:e=>{s(e.target.value)}},i.map(e=>(0,r.h)("option",{key:e.deviceId,value:e.deviceId,selected:e.deviceId===t},e.label))))};var h=0;function d(e){return"function"==typeof e}function p(e){return d(e)?e():e}var c="__private_"+h+++"_draw";class f{constructor(e,t){void 0===t&&(t={}),Object.defineProperty(this,c,{writable:!0,value:()=>this.draw()});let i=t.canvas||{},r=t.canvasContext||{};this.analyser=null,this.bufferLength=0,this.canvas=e,this.width=p(i.width)||this.canvas.width,this.height=p(i.height)||this.canvas.height,this.canvas.width=this.width,this.canvas.height=this.height,this.canvasContext=this.canvas.getContext("2d"),this.canvasContext.fillStyle=p(r.fillStyle)||"rgb(255, 255, 255)",this.canvasContext.strokeStyle=p(r.strokeStyle)||"rgb(0, 0, 0)",this.canvasContext.lineWidth=p(r.lineWidth)||1,this.onDrawFrame=d(t.onDrawFrame)?t.onDrawFrame:()=>{}}addSource(e){this.streamSource=e,this.audioContext=this.streamSource.context,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.bufferLength=this.analyser.frequencyBinCount,this.source=this.audioContext.createBufferSource(),this.dataArray=new Uint8Array(this.bufferLength),this.analyser.getByteTimeDomainData(this.dataArray),this.streamSource.connect(this.analyser)}draw(){let{analyser:e,dataArray:t,bufferLength:i}=this,r=this.canvasContext,s=this.width,o=this.height;e&&e.getByteTimeDomainData(t),r.fillRect(0,0,s,o),r.beginPath();let n=+s/i,a=0;i||r.moveTo(0,this.height/2);for(let e=0;e<i;e++){let i=o/2*(t[e]/128);0===e?r.moveTo(a,i):r.lineTo(a,i),a+=n}r.lineTo(s,o/2),r.stroke(),this.onDrawFrame(this),requestAnimationFrame(function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}(this,c)[c])}}let m=function(e){let{onSubmit:t,i18n:i}=e;return(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button uppy-Audio-button--submit",type:"button",title:i("submitRecordedFile"),"aria-label":i("submitRecordedFile"),onClick:t,"data-uppy-super-focusable":!0},(0,r.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,r.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))},g=function(e){let{onDiscard:t,i18n:i}=e;return(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:i("discardRecordedFile"),"aria-label":i("discardRecordedFile"),onClick:t,"data-uppy-super-focusable":!0},(0,r.h)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"uppy-c-icon"},(0,r.h)("g",{fill:"#FFF",fillRule:"evenodd"},(0,r.h)("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),(0,r.h)("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))};function y(e){let{stream:t,recordedAudio:i,onStop:s,recording:o,supportsRecording:h,audioSources:d,showAudioSourceDropdown:p,onSubmit:c,i18n:y,onStartRecording:v,onStopRecording:_,onDiscardRecordedAudio:b,recordingLengthSeconds:w}=e,P=(0,n.li)(null),S=(0,n.li)();(0,n.vJ)(()=>()=>{S.current=null,s()},[s]),(0,n.vJ)(()=>{if(!i&&(S.current=new f(P.current,{canvas:{width:600,height:600},canvasContext:{lineWidth:2,fillStyle:"rgb(0,0,0)",strokeStyle:"green"}}),S.current.draw(),t)){let e=new AudioContext().createMediaStreamSource(t);S.current.addSource(e)}},[i,t]);let O=null!=i,E=!O&&h,A=p&&!O&&d&&d.length>1;return(0,r.h)("div",{className:"uppy-Audio-container"},(0,r.h)("div",{className:"uppy-Audio-audioContainer"},O?(0,r.h)("audio",{className:"uppy-Audio-player",controls:!0,src:i}):(0,r.h)("canvas",{ref:P,className:"uppy-Audio-canvas"})),(0,r.h)("div",{className:"uppy-Audio-footer"},(0,r.h)("div",{className:"uppy-Audio-audioSourceContainer"},A?u(e):null),(0,r.h)("div",{className:"uppy-Audio-buttonContainer"},E&&(0,r.h)(a,{recording:o,onStartRecording:v,onStopRecording:_,i18n:y}),O&&(0,r.h)(m,{onSubmit:c,i18n:y}),O&&(0,r.h)(g,{onDiscard:b,i18n:y})),(0,r.h)("div",{className:"uppy-Audio-recordingLength"},!O&&(0,r.h)(l,{recordingLengthSeconds:w,i18n:y}))))}let v=e=>{let{icon:t,hasAudio:i,i18n:s}=e;return(0,r.h)("div",{className:"uppy-Audio-permissons"},(0,r.h)("div",{className:"uppy-Audio-permissonsIcon"},t()),(0,r.h)("h1",{className:"uppy-Audio-title"},s(i?"allowAudioAccessTitle":"noAudioTitle")),(0,r.h)("p",null,s(i?"allowAudioAccessDescription":"noAudioDescription")))},_={strings:{pluginNameAudio:"Audio",startAudioRecording:"Begin audio recording",stopAudioRecording:"Stop audio recording",allowAudioAccessTitle:"Please allow access to your microphone",allowAudioAccessDescription:"In order to record audio, please allow microphone access for this site.",noAudioTitle:"Microphone Not Available",noAudioDescription:"In order to record audio, please connect a microphone or another audio input device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",recordingLength:"Recording length %{recording_length}",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file"}};function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function w(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var P=0;function S(e){return"__private_"+P+++"_"+e}var O=S("stream"),E=S("audioActive"),A=S("recordingChunks"),F=S("recorder"),T=S("capturedMediaFile"),U=S("mediaDevices"),x=S("supportsUserMedia"),j=S("hasAudioCheck"),C=S("start"),k=S("startRecording"),R=S("stopRecording"),M=S("discardRecordedAudio"),$=S("submit"),N=S("stop"),L=S("getAudio"),I=S("changeSource"),z=S("updateSources");class D extends s.A{constructor(e,t){super(e,t),Object.defineProperty(this,L,{value:q}),Object.defineProperty(this,j,{value:H}),Object.defineProperty(this,O,{writable:!0,value:null}),Object.defineProperty(this,E,{writable:!0,value:!1}),Object.defineProperty(this,A,{writable:!0,value:null}),Object.defineProperty(this,F,{writable:!0,value:null}),Object.defineProperty(this,T,{writable:!0,value:null}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:e=>{if(!w(this,x)[x])return Promise.reject(Error("Microphone access not supported"));w(this,E)[E]=!0,w(this,j)[j]().then(t=>(this.setPluginState({hasAudio:t}),w(this,U)[U].getUserMedia({audio:!0}).then(t=>{w(this,O)[O]=t;let i=null,r=t.getAudioTracks();i=null!=e&&e.deviceId?r.findLast(t=>t.getSettings().deviceId===e.deviceId):r[0].getSettings().deviceId,w(this,z)[z](),this.setPluginState({currentDeviceId:i,audioReady:!0})}).catch(e=>{this.setPluginState({audioReady:!1,cameraError:e}),this.uppy.info(e.message,"error")})))}}),Object.defineProperty(this,k,{writable:!0,value:()=>{w(this,F)[F]=new MediaRecorder(w(this,O)[O]),w(this,A)[A]=[];let e=!1;w(this,F)[F].addEventListener("dataavailable",t=>{w(this,A)[A].push(t.data);let{restrictions:i}=this.uppy.opts;if(w(this,A)[A].length>1&&null!=i.maxFileSize&&!e){let t=w(this,A)[A].reduce((e,t)=>e+t.size,0),r=(t-w(this,A)[A][0].size)/(w(this,A)[A].length-1);t>Math.max(0,i.maxFileSize-3*r)&&(e=!0,this.uppy.info(this.i18n("recordingStoppedMaxSize"),"warning",4e3),w(this,R)[R]())}}),w(this,F)[F].start(500),this.recordingLengthTimer=setInterval(()=>{let e=this.getPluginState().recordingLengthSeconds;this.setPluginState({recordingLengthSeconds:e+1})},1e3),this.setPluginState({isRecording:!0})}}),Object.defineProperty(this,R,{writable:!0,value:()=>new Promise(e=>{w(this,F)[F].addEventListener("stop",()=>{e()}),w(this,F)[F].stop(),clearInterval(this.recordingLengthTimer),this.setPluginState({recordingLengthSeconds:0})}).then(()=>(this.setPluginState({isRecording:!1}),w(this,L)[L]())).then(e=>{try{w(this,T)[T]=e,this.setPluginState({recordedAudio:URL.createObjectURL(e.data)})}catch(e){e.isRestriction||this.uppy.log(e)}}).then(()=>{w(this,A)[A]=null,w(this,F)[F]=null},e=>{throw w(this,A)[A]=null,w(this,F)[F]=null,e})}),Object.defineProperty(this,M,{writable:!0,value:()=>{this.setPluginState({recordedAudio:null}),w(this,T)[T]=null}}),Object.defineProperty(this,$,{writable:!0,value:()=>{try{w(this,T)[T]&&this.uppy.addFile(w(this,T)[T])}catch(e){e.isRestriction||this.uppy.log(e,"warning")}}}),Object.defineProperty(this,N,{writable:!0,value:async()=>{w(this,O)[O]&&w(this,O)[O].getAudioTracks().forEach(e=>e.stop()),w(this,F)[F]&&await new Promise(e=>{w(this,F)[F].addEventListener("stop",e,{once:!0}),w(this,F)[F].stop(),clearInterval(this.recordingLengthTimer)}),w(this,A)[A]=null,w(this,F)[F]=null,w(this,E)[E]=!1,w(this,O)[O]=null,this.setPluginState({recordedAudio:null,isRecording:!1,recordingLengthSeconds:0})}}),Object.defineProperty(this,I,{writable:!0,value:e=>{w(this,N)[N](),w(this,C)[C]({deviceId:e})}}),Object.defineProperty(this,z,{writable:!0,value:()=>{w(this,U)[U].enumerateDevices().then(e=>{this.setPluginState({audioSources:e.filter(e=>"audioinput"===e.kind)})})}}),w(this,U)[U]=navigator.mediaDevices,w(this,x)[x]=null!=w(this,U)[U],this.id=this.opts.id||"Audio",this.type="acquirer",this.icon=()=>(0,r.h)("svg",{className:"uppy-DashboardTab-iconAudio","aria-hidden":"true",focusable:"false",width:"32px",height:"32px",viewBox:"0 0 32 32"},(0,r.h)("path",{d:"M21.143 12.297c.473 0 .857.383.857.857v2.572c0 3.016-2.24 5.513-5.143 5.931v2.64h2.572a.857.857 0 110 1.714H12.57a.857.857 0 110-1.714h2.572v-2.64C12.24 21.24 10 18.742 10 15.726v-2.572a.857.857 0 111.714 0v2.572A4.29 4.29 0 0016 20.01a4.29 4.29 0 004.286-4.285v-2.572c0-.474.384-.857.857-.857zM16 6.5a3 3 0 013 3v6a3 3 0 01-6 0v-6a3 3 0 013-3z",fill:"currentcolor","fill-rule":"nonzero"})),this.defaultLocale=_,this.opts={...t},this.i18nInit(),this.title=this.i18n("pluginNameAudio"),this.setPluginState({hasAudio:!1,audioReady:!1,cameraError:null,recordingLengthSeconds:0,audioSources:[],currentDeviceId:null})}render(){var e;w(this,E)[E]||w(this,C)[C]();let t=this.getPluginState();return t.audioReady&&t.hasAudio?(0,r.h)(y,b({},t,{audioActive:w(this,E)[E],onChangeSource:w(this,I)[I],onStartRecording:w(this,k)[k],onStopRecording:w(this,R)[R],onDiscardRecordedAudio:w(this,M)[M],onSubmit:w(this,$)[$],onStop:w(this,N)[N],i18n:this.i18n,showAudioSourceDropdown:this.opts.showAudioSourceDropdown,supportsRecording:"function"==typeof MediaRecorder&&"function"==typeof(null==(e=MediaRecorder.prototype)?void 0:e.start),recording:t.isRecording,stream:w(this,O)[O]})):(0,r.h)(v,{icon:this.icon,i18n:this.i18n,hasAudio:t.hasAudio})}install(){this.setPluginState({audioReady:!1,recordingLengthSeconds:0});let{target:e}=this.opts;e&&this.mount(e,this),w(this,U)[U]&&(w(this,z)[z](),w(this,U)[U].ondevicechange=()=>{if(w(this,z)[z](),w(this,O)[O]){let e=!0,{audioSources:t,currentDeviceId:i}=this.getPluginState();t.forEach(t=>{i===t.deviceId&&(e=!1)}),e&&(w(this,N)[N](),w(this,C)[C]())}})}uninstall(){w(this,O)[O]&&w(this,N)[N](),this.unmount()}}function H(){return w(this,U)[U]?w(this,U)[U].enumerateDevices().then(e=>e.some(e=>"audioinput"===e.kind)):Promise.resolve(!1)}function q(){var e;let t=w(this,A)[A].find(e=>{var t;return(null==(t=e.type)?void 0:t.length)>0}).type,i=(e=t,[e]=e.split(";",1),o[e]||null);if(!i)return Promise.reject(Error(`Could not retrieve recording: Unsupported media type "${t}"`));let r=`audio-${Date.now()}.${i}`,s=new Blob(w(this,A)[A],{type:t});return Promise.resolve({source:this.id,name:r,data:new Blob([s],{type:t}),type:t})}D.VERSION="1.1.9"},22354:e=>{"use strict";function t(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}t.prototype.match=function(e){var t,i,r=!0,s=this.parts,o=s.length;if("string"==typeof e||e instanceof String){if(this.hasWild||this.text==e){for(t=0,i=(e||"").split(this.separator);r&&t<o;t++)"*"!==s[t]&&(r=t<i.length&&s[t]===i[t]);r=r&&i}else r=!1}else if("function"==typeof e.splice)for(r=[],t=e.length;t--;)this.match(e[t])&&(r[r.length]=e[t]);else if("object"==typeof e)for(var n in r={},e)this.match(n)&&(r[n]=e[n]);return r},e.exports=function(e,i,r){var s=new t(e,r||/[\/\.]/);return void 0!==i?s.match(i):s}},25994:e=>{e.exports=function(){var e={},t=e._fns={};return e.emit=function(e,i,r,s,o,n,a){var l=function(e){for(var i=t[e]?t[e]:[],r=e.indexOf(":"),s=-1===r?[e]:[e.substring(0,r),e.substring(r+1)],o=Object.keys(t),n=0,a=o.length;n<a;n++){var l=o[n];if("*"===l&&(i=i.concat(t[l])),2===s.length&&s[0]===l){i=i.concat(t[l]);break}}return i}(e);l.length&&function(e,t,i){for(var r=0,s=t.length;r<s&&t[r];r++)t[r].event=e,t[r].apply(t[r],i)}(e,l,[i,r,s,o,n,a])},e.on=function(e,i){t[e]||(t[e]=[]),t[e].push(i)},e.once=function(t,i){this.on(t,function r(){i.apply(this,arguments),e.off(t,r)})},e.off=function(e,t){var i=[];if(e&&t)for(var r=this._fns[e],s=0,o=r?r.length:0;s<o;s++)r[s]!==t&&i.push(r[s]);i.length?this._fns[e]=i:delete this._fns[e]},e}},26586:(e,t,i)=>{"use strict";function r(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}i.d(t,{A:()=>h});var s=0;function o(e){return"__private_"+s+++"_"+e}function n(e,t){let i=/\$/g,r=[e];if(null==t)return r;for(let e of Object.keys(t))if("_"!==e){let s=t[e];"string"==typeof s&&(s=i[Symbol.replace](s,"$$$$")),r=function(e,t,i){let r=[];return e.forEach(e=>"string"!=typeof e?r.push(e):t[Symbol.split](e).forEach((e,t,s)=>{""!==e&&r.push(e),t<s.length-1&&r.push(i)})),r}(r,RegExp(`%\\{${e}\\}`,"g"),s)}return r}let a=e=>{throw Error(`missing string: ${e}`)};var l=o("onMissingKey"),u=o("apply");class h{constructor(e,t){let{onMissingKey:i=a}=void 0===t?{}:t;Object.defineProperty(this,u,{value:d}),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.locale={strings:{},pluralize:e=>+(1!==e)},Array.isArray(e)?e.forEach(r(this,u)[u],this):r(this,u)[u](e),r(this,l)[l]=i}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let i=this.locale.strings[e];if(null==i&&(r(this,l)[l](e),i=e),"object"==typeof i){if(t&&void 0!==t.smart_count)return n(i[this.locale.pluralize(t.smart_count)],t);throw Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof i)throw Error("string was not a string");return n(i,t)}}function d(e){if(!(null!=e&&e.strings))return;let t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})}},28187:(e,t,i)=>{"use strict";function r(e){let t=e.lastIndexOf(".");return -1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}i.d(t,{A:()=>r})},29200:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var i=this._timeouts.shift();if(void 0===i){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},i),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){i._operationTimeoutCb()},i._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,i=0,r=0;r<this._errors.length;r++){var s=this._errors[r],o=s.message,n=(e[o]||0)+1;e[o]=n,n>=i&&(t=s,i=n)}return t}},42220:(e,t,i)=>{"use strict";function r(e){return"object"==typeof e&&null!==e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}i.d(t,{A:()=>r})},50755:(e,t,i)=>{"use strict";i.d(t,{J0:()=>v,Kr:()=>w,hb:()=>P,li:()=>b,vJ:()=>_});var r,s,o,n,a=i(66117),l=0,u=[],h=a.fF,d=h.__b,p=h.__r,c=h.diffed,f=h.__c,m=h.unmount,g=h.__;function y(e,t){h.__h&&h.__h(s,e,l||t),l=0;var i=s.__H||(s.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({}),i.__[e]}function v(e){return l=1,function(e,t,i){var o=y(r++,2);if(o.t=e,!o.__c&&(o.__=[T(void 0,t),function(e){var t=o.__N?o.__N[0]:o.__[0],i=o.t(t,e);t!==i&&(o.__N=[i,o.__[1]],o.__c.setState({}))}],o.__c=s,!s.__f)){var n=function(e,t,i){if(!o.__c.__H)return!0;var r=o.__c.__H.__.filter(function(e){return!!e.__c});if(r.every(function(e){return!e.__N}))return!a||a.call(this,e,t,i);var s=o.__c.props!==e;return r.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}}),a&&a.call(this,e,t,i)||s};s.__f=!0;var a=s.shouldComponentUpdate,l=s.componentWillUpdate;s.componentWillUpdate=function(e,t,i){if(this.__e){var r=a;a=void 0,n(e,t,i),a=r}l&&l.call(this,e,t,i)},s.shouldComponentUpdate=n}return o.__N||o.__}(T,e)}function _(e,t){var i=y(r++,3);!h.__s&&F(i.__H,t)&&(i.__=e,i.u=t,s.__H.__h.push(i))}function b(e){return l=5,w(function(){return{current:e}},[])}function w(e,t){var i=y(r++,7);return F(i.__H,t)&&(i.__=e(),i.__H=t,i.__h=e),i.__}function P(e,t){return l=8,w(function(){return e},t)}function S(){for(var e;e=u.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(E),e.__H.__h.forEach(A),e.__H.__h=[]}catch(t){e.__H.__h=[],h.__e(t,e.__v)}}h.__b=function(e){s=null,d&&d(e)},h.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),g&&g(e,t)},h.__r=function(e){p&&p(e),r=0;var t=(s=e.__c).__H;t&&(o===s?(t.__h=[],s.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(E),t.__h.forEach(A),t.__h=[],r=0)),o=s},h.diffed=function(e){c&&c(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==u.push(t)&&n===h.requestAnimationFrame||((n=h.requestAnimationFrame)||function(e){var t,i=function(){clearTimeout(r),O&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(i,100);O&&(t=requestAnimationFrame(i))})(S)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),o=s=null},h.__c=function(e,t){t.some(function(e){try{e.__h.forEach(E),e.__h=e.__h.filter(function(e){return!e.__||A(e)})}catch(i){t.some(function(e){e.__h&&(e.__h=[])}),t=[],h.__e(i,e.__v)}}),f&&f(e,t)},h.unmount=function(e){m&&m(e);var t,i=e.__c;i&&i.__H&&(i.__H.__.forEach(function(e){try{E(e)}catch(e){t=e}}),i.__H=void 0,t&&h.__e(t,i.__v))};var O="function"==typeof requestAnimationFrame;function E(e){var t=s,i=e.__c;"function"==typeof i&&(e.__c=void 0,i()),s=t}function A(e){var t=s;e.__c=e.__(),s=t}function F(e,t){return!e||e.length!==t.length||t.some(function(t,i){return t!==e[i]})}function T(e,t){return"function"==typeof t?t(e):t}},65824:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var r=i(26586);class s{constructor(e,t){this.uppy=e,this.opts=null!=t?t:{}}getPluginState(){let{plugins:e}=this.uppy.getState();return(null==e?void 0:e[this.id])||{}}setPluginState(e){let{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new r.A([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}},66117:(e,t,i)=>{"use strict";i.d(t,{FK:()=>S,Ob:()=>L,XX:()=>$,_3:()=>P,fF:()=>s,h:()=>b,uA:()=>O,v2:()=>function e(t,i){return i=i||[],null==t||"boolean"==typeof t||(y(t)?t.some(function(t){e(t,i)}):i.push(t)),i}});var r,s,o,n,a,l,u,h,d,p,c,f={},m=[],g=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,y=Array.isArray;function v(e,t){for(var i in t)e[i]=t[i];return e}function _(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function b(e,t,i){var s,o,n,a={};for(n in t)"key"==n?s=t[n]:"ref"==n?o=t[n]:a[n]=t[n];if(arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):i),"function"==typeof e&&null!=e.defaultProps)for(n in e.defaultProps)void 0===a[n]&&(a[n]=e.defaultProps[n]);return w(e,a,s,o,null)}function w(e,t,i,r,n){var a={type:e,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==n?++o:n,__i:-1,__u:0};return null==n&&null!=s.vnode&&s.vnode(a),a}function P(){return{current:null}}function S(e){return e.children}function O(e,t){this.props=e,this.context=t}function E(e,t){if(null==t)return e.__?E(e.__,e.__i+1):null;for(var i;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e)return i.__e;return"function"==typeof e.type?E(e):null}function A(e){(!e.__d&&(e.__d=!0)&&n.push(e)&&!F.__r++||a!==s.debounceRendering)&&((a=s.debounceRendering)||l)(F)}function F(){for(var e,t,i,r,o,a,l=1;n.length;)n.length>l&&n.sort(u),e=n.shift(),l=n.length,e.__d&&(t=void 0,r=(i=e.__v).__e,o=[],a=[],e.__P&&((t=v({},i)).__v=i.__v+1,s.vnode&&s.vnode(t),C(e.__P,t,i,e.__n,e.__P.namespaceURI,32&i.__u?[r]:null,o,null==r?E(i):r,!!(32&i.__u),a),t.__v=i.__v,t.__.__k[t.__i]=t,k(o,t,a),t.__e!=r&&function e(t){var i,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,i=0;i<t.__k.length;i++)if(null!=(r=t.__k[i])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return e(t)}}(t)));F.__r=0}function T(e,t,i,r,o,n,a,l,u,h,d){var p,c,g,v,b,P,O=r&&r.__k||m,A=t.length;for(u=function(e,t,i,r,o){var n,a,l,u,h,d=i.length,p=d,c=0;for(e.__k=Array(o),n=0;n<o;n++)null!=(a=t[n])&&"boolean"!=typeof a&&"function"!=typeof a?(u=n+c,(a=e.__k[n]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?w(null,a,null,null,null):y(a)?w(S,{children:a},null,null,null):void 0===a.constructor&&a.__b>0?w(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,l=null,-1!==(h=a.__i=function(e,t,i,r){var s,o,n=e.key,a=e.type,l=t[i];if(null===l||l&&n==l.key&&a===l.type&&0==(2&l.__u))return i;if(r>+(null!=l&&0==(2&l.__u)))for(s=i-1,o=i+1;s>=0||o<t.length;){if(s>=0){if((l=t[s])&&0==(2&l.__u)&&n==l.key&&a===l.type)return s;s--}if(o<t.length){if((l=t[o])&&0==(2&l.__u)&&n==l.key&&a===l.type)return o;o++}}return -1}(a,i,u,p))&&(p--,(l=i[h])&&(l.__u|=2)),null==l||null===l.__v?(-1==h&&c--,"function"!=typeof a.type&&(a.__u|=4)):h!=u&&(h==u-1?c--:h==u+1?c++:(h>u?c--:c++,a.__u|=4))):e.__k[n]=null;if(p)for(n=0;n<d;n++)null!=(l=i[n])&&0==(2&l.__u)&&(l.__e==r&&(r=E(l)),function e(t,i,r){var o,n;if(s.unmount&&s.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||R(o,null,i)),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){s.__e(e,i)}o.base=o.__P=null}if(o=t.__k)for(n=0;n<o.length;n++)o[n]&&e(o[n],i,r||"function"!=typeof t.type);r||_(t.__e),t.__c=t.__=t.__e=void 0}(l,l));return r}(i,t,O,u,A),p=0;p<A;p++)null!=(g=i.__k[p])&&(c=-1===g.__i?f:O[g.__i]||f,g.__i=p,P=C(e,g,c,o,n,a,l,u,h,d),v=g.__e,g.ref&&c.ref!=g.ref&&(c.ref&&R(c.ref,null,g),d.push(g.ref,g.__c||v,g)),null==b&&null!=v&&(b=v),4&g.__u||c.__k===g.__k?u=function e(t,i,r){var s,o;if("function"==typeof t.type){for(s=t.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=t,i=e(s[o],i,r));return i}t.__e!=i&&(i&&t.type&&!r.contains(i)&&(i=E(t)),r.insertBefore(t.__e,i||null),i=t.__e);do i=i&&i.nextSibling;while(null!=i&&8==i.nodeType);return i}(g,u,e):"function"==typeof g.type&&void 0!==P?u=P:v&&(u=v.nextSibling),g.__u&=-7);return i.__e=b,u}function U(e,t,i){"-"==t[0]?e.setProperty(t,null==i?"":i):e[t]=null==i?"":"number"!=typeof i||g.test(t)?i:i+"px"}function x(e,t,i,r,s){var o;e:if("style"==t){if("string"==typeof i)e.style.cssText=i;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)i&&t in i||U(e.style,t,"");if(i)for(t in i)r&&i[t]===r[t]||U(e.style,t,i[t])}}else if("o"==t[0]&&"n"==t[1])o=t!=(t=t.replace(h,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=i,i?r?i.t=r.t:(i.t=d,e.addEventListener(t,o?c:p,o)):e.removeEventListener(t,o?c:p,o);else{if("http://www.w3.org/2000/svg"==s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==i?"":i;break e}catch(e){}"function"==typeof i||(null==i||!1===i&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==i?"":i))}}function j(e){return function(t){if(this.l){var i=this.l[t.type+e];if(null==t.u)t.u=d++;else if(t.u<i.t)return;return i(s.event?s.event(t):t)}}}function C(e,t,i,o,n,a,l,u,h,d){var p,c,m,g,b,w,P,A,F,U,j,C,k,R,$,N,L,I=t.type;if(void 0!==t.constructor)return null;128&i.__u&&(h=!!(32&i.__u),a=[u=t.__e=i.__e]),(p=s.__b)&&p(t);e:if("function"==typeof I)try{if(A=t.props,F="prototype"in I&&I.prototype.render,U=(p=I.contextType)&&o[p.__c],j=p?U?U.props.value:p.__:o,i.__c?P=(c=t.__c=i.__c).__=c.__E:(F?t.__c=c=new I(A,j):(t.__c=c=new O(A,j),c.constructor=I,c.render=M),U&&U.sub(c),c.props=A,c.state||(c.state={}),c.context=j,c.__n=o,m=c.__d=!0,c.__h=[],c._sb=[]),F&&null==c.__s&&(c.__s=c.state),F&&null!=I.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=v({},c.__s)),v(c.__s,I.getDerivedStateFromProps(A,c.__s))),g=c.props,b=c.state,c.__v=t,m)F&&null==I.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),F&&null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(F&&null==I.getDerivedStateFromProps&&A!==g&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(A,j),!c.__e&&(null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(A,c.__s,j)||t.__v==i.__v)){for(t.__v!=i.__v&&(c.props=A,c.state=c.__s,c.__d=!1),t.__e=i.__e,t.__k=i.__k,t.__k.some(function(e){e&&(e.__=t)}),C=0;C<c._sb.length;C++)c.__h.push(c._sb[C]);c._sb=[],c.__h.length&&l.push(c);break e}null!=c.componentWillUpdate&&c.componentWillUpdate(A,c.__s,j),F&&null!=c.componentDidUpdate&&c.__h.push(function(){c.componentDidUpdate(g,b,w)})}if(c.context=j,c.props=A,c.__P=e,c.__e=!1,k=s.__r,R=0,F){for(c.state=c.__s,c.__d=!1,k&&k(t),p=c.render(c.props,c.state,c.context),$=0;$<c._sb.length;$++)c.__h.push(c._sb[$]);c._sb=[]}else do c.__d=!1,k&&k(t),p=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++R<25);c.state=c.__s,null!=c.getChildContext&&(o=v(v({},o),c.getChildContext())),F&&!m&&null!=c.getSnapshotBeforeUpdate&&(w=c.getSnapshotBeforeUpdate(g,b)),u=T(e,y(N=null!=p&&p.type===S&&null==p.key?p.props.children:p)?N:[N],t,i,o,n,a,l,u,h,d),c.base=t.__e,t.__u&=-161,c.__h.length&&l.push(c),P&&(c.__E=c.__=null)}catch(e){if(t.__v=null,h||null!=a){if(e.then){for(t.__u|=h?160:128;u&&8==u.nodeType&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,t.__e=u}else for(L=a.length;L--;)_(a[L])}else t.__e=i.__e,t.__k=i.__k;s.__e(e,t,i)}else null==a&&t.__v==i.__v?(t.__k=i.__k,t.__e=i.__e):u=t.__e=function(e,t,i,o,n,a,l,u,h){var d,p,c,m,g,v,b,w=i.props,P=t.props,S=t.type;if("svg"==S?n="http://www.w3.org/2000/svg":"math"==S?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),null!=a){for(d=0;d<a.length;d++)if((g=a[d])&&"setAttribute"in g==!!S&&(S?g.localName==S:3==g.nodeType)){e=g,a[d]=null;break}}if(null==e){if(null==S)return document.createTextNode(P);e=document.createElementNS(n,S,P.is&&P),u&&(s.__m&&s.__m(t,a),u=!1),a=null}if(null===S)w===P||u&&e.data===P||(e.data=P);else{if(a=a&&r.call(e.childNodes),w=i.props||f,!u&&null!=a)for(w={},d=0;d<e.attributes.length;d++)w[(g=e.attributes[d]).name]=g.value;for(d in w)if(g=w[d],"children"==d);else if("dangerouslySetInnerHTML"==d)c=g;else if(!(d in P)){if("value"==d&&"defaultValue"in P||"checked"==d&&"defaultChecked"in P)continue;x(e,d,null,g,n)}for(d in P)g=P[d],"children"==d?m=g:"dangerouslySetInnerHTML"==d?p=g:"value"==d?v=g:"checked"==d?b=g:u&&"function"!=typeof g||w[d]===g||x(e,d,g,w[d],n);if(p)u||c&&(p.__html===c.__html||p.__html===e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(c&&(e.innerHTML=""),T("template"===t.type?e.content:e,y(m)?m:[m],t,i,o,"foreignObject"==S?"http://www.w3.org/1999/xhtml":n,a,l,a?a[0]:i.__k&&E(i,0),u,h),null!=a)for(d=a.length;d--;)_(a[d]);u||(d="value","progress"==S&&null==v?e.removeAttribute("value"):void 0===v||v===e[d]&&("progress"!=S||v)&&("option"!=S||v===w[d])||x(e,d,v,w[d],n),d="checked",void 0!==b&&b!==e[d]&&x(e,d,b,w[d],n))}return e}(i.__e,t,i,o,n,a,l,h,d);return(p=s.diffed)&&p(t),128&t.__u?void 0:u}function k(e,t,i){for(var r=0;r<i.length;r++)R(i[r],i[++r],i[++r]);s.__c&&s.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){s.__e(e,t.__v)}})}function R(e,t,i){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){s.__e(e,i)}}function M(e,t,i){return this.constructor(e,i)}function $(e,t,i){var o,n,a,l;t==document&&(t=document.documentElement),s.__&&s.__(e,t),n=(o="function"==typeof i)?null:i&&i.__k||t.__k,a=[],l=[],C(t,e=(!o&&i||t).__k=b(S,null,[e]),n||f,f,t.namespaceURI,!o&&i?[i]:n?null:t.firstChild?r.call(t.childNodes):null,a,!o&&i?i:n?n.__e:t.firstChild,o,l),k(a,e,l)}function N(e,t){$(e,t,N)}function L(e,t,i){var s,o,n,a,l=v({},e.props);for(n in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)"key"==n?s=t[n]:"ref"==n?o=t[n]:l[n]=void 0===t[n]&&void 0!==a?a[n]:t[n];return arguments.length>2&&(l.children=arguments.length>3?r.call(arguments,2):i),w(e.type,l,s||e.key,o||e.ref,null)}r=m.slice,s={__e:function(e,t,i,r){for(var s,o,n;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&null!=o.getDerivedStateFromError&&(s.setState(o.getDerivedStateFromError(e)),n=s.__d),null!=s.componentDidCatch&&(s.componentDidCatch(e,r||{}),n=s.__d),n)return s.__E=s}catch(t){e=t}throw e}},o=0,O.prototype.setState=function(e,t){var i;i=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=v({},this.state),"function"==typeof e&&(e=e(v({},i),this.props)),e&&v(i,e),null!=e&&this.__v&&(t&&this._sb.push(t),A(this))},O.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),A(this))},O.prototype.render=S,n=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(e,t){return e.__v.__b-t.__v.__b},F.__r=0,h=/(PointerCapture)$|Capture$/i,d=0,p=j(!1),c=j(!0)},68792:(e,t,i)=>{var r=i(22354),s=/[\/\+\.]/;e.exports=function(e,t){function i(t){var i=r(t,e,s);return i&&i.length>=2}return t?i(t.split(";")[0]):i}},79944:(e,t,i)=>{"use strict";i.d(t,{CheckboxIcon:()=>a});var r=i(95155),s=i(4009);function o(e){return(0,r.jsx)(s.chakra.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...e,children:(0,r.jsx)("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}function n(e){return(0,r.jsx)(s.chakra.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...e,children:(0,r.jsx)("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function a(e){let{isIndeterminate:t,isChecked:i,...a}=e;return i||t?(0,r.jsx)(s.chakra.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,r.jsx)(t?n:o,{...a})}):null}},80728:(e,t,i)=>{"use strict";i.d(t,{N:()=>o});var r=i(95596);function s(e){let t="";return e.replace(/[^A-Z0-9]/gi,e=>(t+=`-${e.charCodeAt(0).toString(32)}`,"/"))+t}function o(e,t){var i;let o;if(e.isRemote&&e.remote&&new Set(["box","dropbox","drive","facebook","unsplash"]).has(e.remote.provider))return e.id;let n=(0,r.A)(e);return i={...e,type:n},o=t||"uppy","string"==typeof i.name&&(o+=`-${s(i.name.toLowerCase())}`),void 0!==i.type&&(o+=`-${i.type}`),i.meta&&"string"==typeof i.meta.relativePath&&(o+=`-${s(i.meta.relativePath.toLowerCase())}`),void 0!==i.data.size&&(o+=`-${i.data.size}`),void 0!==i.data.lastModified&&(o+=`-${i.data.lastModified}`),o}},84896:(e,t,i)=>{e.exports=i(90342)},85172:(e,t,i)=>{"use strict";let r,s;i.d(t,{A:()=>ec});var o=i(26586),n=i(25994),a=i(93239),l=i(91959);function u(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var h=0;function d(e){return"__private_"+h+++"_"+e}var p=d("callbacks"),c=d("publish");class f{constructor(){Object.defineProperty(this,c,{value:m}),this.state={},Object.defineProperty(this,p,{writable:!0,value:new Set})}getState(){return this.state}setState(e){let t={...this.state},i={...this.state,...e};this.state=i,u(this,c)[c](t,i,e)}subscribe(e){return u(this,p)[p].add(e),()=>{u(this,p)[p].delete(e)}}}function m(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];u(this,p)[p].forEach(e=>{e(...t)})}f.VERSION="3.2.2";var g=i(95596),y=i(28187),v=i(80728);function _(e){return e<10?`0${e}`:e.toString()}function b(){let e=new Date,t=_(e.getHours()),i=_(e.getMinutes()),r=_(e.getSeconds());return`${t}:${i}:${r}`}let w={debug:()=>{},warn:()=>{},error:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return console.error(`[Uppy] [${b()}]`,...t)}},P={debug:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return console.debug(`[Uppy] [${b()}]`,...t)},warn:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return console.warn(`[Uppy] [${b()}]`,...t)},error:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return console.error(`[Uppy] [${b()}]`,...t)}};var S=i(4592),O=i(68792);let E={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class A extends Error{constructor(e,t){var i;super(e),this.isRestriction=!0,this.isUserFacing=null==(i=null==t?void 0:t.isUserFacing)||i,null!=t&&t.file&&(this.file=t.file)}}class F{constructor(e,t){this.getI18n=t,this.getOpts=()=>{var t;let i=e();if((null==(t=i.restrictions)?void 0:t.allowedFileTypes)!=null&&!Array.isArray(i.restrictions.allowedFileTypes))throw TypeError("`restrictions.allowedFileTypes` must be an array");return i}}validateAggregateRestrictions(e,t){let{maxTotalFileSize:i,maxNumberOfFiles:r}=this.getOpts().restrictions;if(r&&e.filter(e=>!e.isGhost).length+t.length>r)throw new A(`${this.getI18n()("youCanOnlyUploadX",{smart_count:r})}`);if(i){let r=[...e,...t].reduce((e,t)=>{var i;return e+(null!=(i=t.size)?i:0)},0);if(r>i)throw new A(this.getI18n()("aggregateExceedsSize",{sizeAllowed:S(i),size:S(r)}))}}validateSingleFile(e){let{maxFileSize:t,minFileSize:i,allowedFileTypes:r}=this.getOpts().restrictions;if(r&&!r.some(t=>t.includes("/")?!!e.type&&O(e.type.replace(/;.*?$/,""),t):"."===t[0]&&!!e.extension&&e.extension.toLowerCase()===t.slice(1).toLowerCase())){let t=r.join(", ");throw new A(this.getI18n()("youCanOnlyUploadFileTypes",{types:t}),{file:e})}if(t&&null!=e.size&&e.size>t)throw new A(this.getI18n()("exceedsSize",{size:S(t),file:e.name}),{file:e});if(i&&null!=e.size&&e.size<i)throw new A(this.getI18n()("inferiorSize",{size:S(i)}),{file:e})}validate(e,t){t.forEach(e=>{this.validateSingleFile(e)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){let{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new A(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){let t=new A(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name})),{requiredMetaFields:i}=this.getOpts().restrictions,r=[];for(let t of i)Object.hasOwn(e.meta,t)&&""!==e.meta[t]||r.push(t);return{missingFields:r,error:t}}}let T={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed"}};function U(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var x=0;function j(e){return"__private_"+x+++"_"+e}let C={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var k=j("plugins"),R=j("restricter"),M=j("storeUnsubscribe"),$=j("emitter"),N=j("preProcessors"),L=j("uploaders"),I=j("postProcessors"),z=j("informAndEmit"),D=j("checkRequiredMetaFieldsOnFile"),H=j("checkRequiredMetaFields"),q=j("assertNewUploadAllowed"),B=j("transformFile"),W=j("startIfAutoProceed"),X=j("checkAndUpdateFileState"),V=j("addListeners"),Y=j("updateOnlineStatus"),G=j("requestClientById"),J=j("createUpload"),K=j("getUpload"),Q=j("removeUpload"),Z=j("runUpload");r=Symbol.for("uppy test: getPlugins"),s=Symbol.for("uppy test: createUpload");class ee{constructor(e){Object.defineProperty(this,Z,{value:ep}),Object.defineProperty(this,Q,{value:ed}),Object.defineProperty(this,K,{value:eh}),Object.defineProperty(this,J,{value:eu}),Object.defineProperty(this,V,{value:el}),Object.defineProperty(this,X,{value:ea}),Object.defineProperty(this,W,{value:en}),Object.defineProperty(this,B,{value:eo}),Object.defineProperty(this,q,{value:es}),Object.defineProperty(this,H,{value:er}),Object.defineProperty(this,D,{value:ei}),Object.defineProperty(this,z,{value:et}),Object.defineProperty(this,k,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:n()}),Object.defineProperty(this,N,{writable:!0,value:new Set}),Object.defineProperty(this,L,{writable:!0,value:new Set}),Object.defineProperty(this,I,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,this.calculateProgress=l((e,t)=>{let i=this.getFile(null==e?void 0:e.id);if(null==e||!i){this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);return}if(100===i.progress.percentage){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}let r=Number.isFinite(t.bytesTotal)&&t.bytesTotal>0;this.setFileState(e.id,{progress:{...i.progress,bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:r?Math.round(t.bytesUploaded/t.bytesTotal*100):0}}),this.calculateTotalProgress()},500,{leading:!0,trailing:!0}),Object.defineProperty(this,Y,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,G,{writable:!0,value:new Map}),this.defaultLocale=T;let t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:E,meta:{},onBeforeFileAdded:(e,t)=>!Object.hasOwn(t,e.id),onBeforeUpload:e=>e,store:new f,logger:w,infoTimeout:5e3},i={...t,...e};this.opts={...i,restrictions:{...t.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=P),this.log(`Using Core v${ee.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...C,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:function(e){if(null==e&&"undefined"!=typeof navigator&&(e=navigator.userAgent),!e)return!0;let t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;let i=t[1].split(".",2),r=parseInt(i[0],10),s=parseInt(i[1],10);return!!(r<15)||15===r&&!!(s<15063)||!!(r>18)||18===r&&!!(s>=18218)}(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),U(this,R)[R]=new F(()=>this.opts,()=>this.i18n),U(this,M)[M]=this.store.subscribe((e,t,i)=>{this.emit("state-update",e,t,i),this.updateAll(t)}),this.opts.debug&&"undefined"!=typeof window&&(window[this.opts.id]=this),U(this,V)[V]()}emit(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];U(this,$)[$].emit(e,...i)}on(e,t){return U(this,$)[$].on(e,t),this}once(e,t){return U(this,$)[$].once(e,t),this}off(e,t){return U(this,$)[$].off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(e=>{let[i,r]=e;return[i,{...t[i],...r}]}))}})}setFileState(e,t){if(!this.getState().files[e])throw Error(`Can’t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){let e=new o.A([this.defaultLocale,this.opts.locale],{onMissingKey:e=>this.log(`Missing i18n string: ${e}`,"error")});this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...null==e?void 0:e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},i={};Object.keys(t).forEach(r=>{i[r]={...t[r],progress:{...t[r].progress,...e}}}),this.setState({files:i,...C}),this.emit("reset-progress")}clearUploadedFiles(){let{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...C,files:{}})}addPreProcessor(e){U(this,N)[N].add(e)}removePreProcessor(e){return U(this,N)[N].delete(e)}addPostProcessor(e){U(this,I)[I].add(e)}removePostProcessor(e){return U(this,I)[I].delete(e)}addUploader(e){U(this,L)[L].add(e)}removeUploader(e){return U(this,L)[L].delete(e)}setMeta(e){let t={...this.getState().meta,...e},i={...this.getState().files};Object.keys(i).forEach(t=>{i[t]={...i[t],meta:{...i[t].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:i})}setFileMeta(e,t){let i={...this.getState().files};if(!i[e]){this.log("Was trying to set metadata for a file that has been removed: ",e);return}let r={...i[e].meta,...t};i[e]={...i[e],meta:r},this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(e=>this.getFile(e))}getObjectOfFilesPerState(){let{files:e,totalProgress:t,error:i}=this.getState(),r=Object.values(e),s=[],o=[],n=[],a=[],l=[],u=[],h=[],d=[],p=[];for(let e of r){let{progress:t}=e;t.uploadComplete||!t.uploadStarted||(s.push(e),e.isPaused||d.push(e)),t.uploadStarted||o.push(e),(t.uploadStarted||t.preprocess||t.postprocess)&&n.push(e),t.uploadStarted&&a.push(e),e.isPaused&&l.push(e),t.uploadComplete&&u.push(e),e.error&&h.push(e),(t.preprocess||t.postprocess)&&p.push(e)}return{newFiles:o,startedFiles:n,uploadStartedFiles:a,pausedFiles:l,completeFiles:u,erroredFiles:h,inProgressFiles:s,inProgressNotPausedFiles:d,processingFiles:p,isUploadStarted:a.length>0,isAllComplete:100===t&&u.length===r.length&&0===p.length,isAllErrored:!!i&&h.length===r.length,isAllPaused:0!==s.length&&l.length===s.length,isUploadInProgress:s.length>0,isSomeGhost:r.some(e=>e.isGhost)}}validateRestrictions(e,t){void 0===t&&(t=this.getFiles());try{U(this,R)[R].validate(t,[e])}catch(e){return e}return null}checkIfFileAlreadyExists(e){let{files:t}=this.getState();return!!t[e]&&!t[e].isGhost}addFile(e){U(this,q)[q](e);let{nextFilesState:t,validFilesToAdd:i,errors:r}=U(this,X)[X]([e]),s=r.filter(e=>e.isRestriction);if(U(this,z)[z](s),r.length>0)throw r[0];this.setState({files:t});let[o]=i;return this.emit("file-added",o),this.emit("files-added",i),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),U(this,W)[W](),o.id}addFiles(e){U(this,q)[q]();let{nextFilesState:t,validFilesToAdd:i,errors:r}=U(this,X)[X](e),s=r.filter(e=>e.isRestriction);U(this,z)[z](s);let o=r.filter(e=>!e.isRestriction);if(o.length>0){let e="Multiple errors occurred while adding files:\n";if(o.forEach(t=>{e+=`
 * ${t.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:e},"error",this.opts.infoTimeout),"function"==typeof AggregateError)throw AggregateError(o,e);{let t=Error(e);throw t.errors=o,t}}this.setState({files:t}),i.forEach(e=>{this.emit("file-added",e)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(e=>{this.log(`Added file: ${e.name}
 id: ${e.id}
 type: ${e.type}`)}),i.length>0&&U(this,W)[W]()}removeFiles(e,t){let{files:i,currentUploads:r}=this.getState(),s={...i},o={...r},n=Object.create(null);function a(e){return void 0===n[e]}e.forEach(e=>{i[e]&&(n[e]=i[e],delete s[e])}),Object.keys(o).forEach(e=>{let t=r[e].fileIDs.filter(a);if(0===t.length){delete o[e];return}let{capabilities:i}=this.getState();if(t.length!==r[e].fileIDs.length&&!i.individualCancellation)throw Error("The installed uploader plugin does not allow removing files during an upload.");o[e]={...r[e],fileIDs:t}});let l={currentUploads:o,files:s};0===Object.keys(s).length&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),this.calculateTotalProgress();let u=Object.keys(n);u.forEach(e=>{this.emit("file-removed",n[e],t)}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e,t){this.removeFiles([e],t)}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let t=!this.getFile(e).isPaused;return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}pauseAll(){let e={...this.getState().files};Object.keys(e).filter(t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted).forEach(t=>{let i={...e[t],isPaused:!0};e[t]=i}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e={...this.getState().files};Object.keys(e).filter(t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted).forEach(t=>{let i={...e[t],isPaused:!1,error:null};e[t]=i}),this.setState({files:e}),this.emit("resume-all")}retryAll(){let e={...this.getState().files},t=Object.keys(e).filter(t=>e[t].error);if(t.forEach(t=>{let i={...e[t],isPaused:!1,error:null};e[t]=i}),this.setState({files:e,error:null}),this.emit("retry-all",t),0===t.length)return Promise.resolve({successful:[],failed:[]});let i=U(this,J)[J](t,{forceAllowNewUpload:!0});return U(this,Z)[Z](i)}cancelAll(e){let{reason:t="user"}=void 0===e?{}:e;if(this.emit("cancel-all",{reason:t}),"user"===t){let{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t,"cancel-all"),this.setState(C)}}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);let t=U(this,J)[J]([e],{forceAllowNewUpload:!0});return U(this,Z)[Z](t)}logout(){this.iteratePlugins(e=>{var t;null==(t=e.provider)||null==t.logout||t.logout()})}calculateTotalProgress(){let e=this.getFiles().filter(e=>e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess);if(0===e.length){this.emit("progress",0),this.setState({totalProgress:0});return}let t=e.filter(e=>null!=e.progress.bytesTotal),i=e.filter(e=>null==e.progress.bytesTotal);if(0===t.length){let t=100*e.length,r=Math.round(i.reduce((e,t)=>e+t.progress.percentage,0)/t*100);this.setState({totalProgress:r});return}let r=t.reduce((e,t)=>{var i;return e+(null!=(i=t.progress.bytesTotal)?i:0)},0),s=r/t.length;r+=s*i.length;let o=0;t.forEach(e=>{o+=e.progress.bytesUploaded}),i.forEach(e=>{o+=s*(e.progress.percentage||0)/100});let n=0===r?0:Math.round(o/r*100);n>100&&(n=100),this.setState({totalProgress:n}),this.emit("progress",n)}updateOnlineStatus(){var e;null==(e=window.navigator.onLine)||e?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,t){if("function"!=typeof e)throw TypeError(`Expected a plugin class, but got ${null===e?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`);let i=new e(this,t),r=i.id;if(!r)throw Error("Your plugin must have an id");if(!i.type)throw Error("Your plugin must have a type");let s=this.getPlugin(r);if(s)throw Error(`Already found a plugin named '${s.id}'. Tried to use: '${r}'.
Uppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`);return e.VERSION&&this.log(`Using ${r} v${e.VERSION}`),i.type in U(this,k)[k]?U(this,k)[k][i.type].push(i):U(this,k)[k][i.type]=[i],i.install(),this.emit("plugin-added",i),this}getPlugin(e){for(let t of Object.values(U(this,k)[k])){let i=t.find(t=>t.id===e);if(null!=i)return i}}[r](e){return U(this,k)[k][e]}iteratePlugins(e){Object.values(U(this,k)[k]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let t=U(this,k)[k][e.type],i=t.findIndex(t=>t.id===e.id);-1!==i&&t.splice(i,1);let r={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(r)}close(e){let{reason:t}=void 0===e?{}:e;this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll({reason:t}),U(this,M)[M](),this.iteratePlugins(e=>{this.removePlugin(e)}),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("online",U(this,Y)[Y]),window.removeEventListener("offline",U(this,Y)[Y]))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,i){void 0===t&&(t="info"),void 0===i&&(i=3e3);let r="object"==typeof e;this.setState({info:[...this.getState().info,{type:t,message:r?e.message:e,details:r?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,t){let{logger:i}=this.opts;switch(t){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e)}}registerRequestClient(e,t){U(this,G)[G].set(e,t)}getRequestClientForFile(e){if(!e.remote)throw Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let t=U(this,G)[G].get(e.remote.requestClientId);if(null==t)throw Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return(this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e])?U(this,Z)[Z](e):(U(this,Q)[Q](e),Promise.reject(Error("Nonexistent upload")))}[s](){return U(this,J)[J](...arguments)}addResultData(e,t){if(!U(this,K)[K](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:i}=this.getState(),r={...i[e],result:{...i[e].result,...t}};this.setState({currentUploads:{...i,[e]:r}})}upload(){var e;null!=(e=U(this,k)[k].uploader)&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState(),i=this.opts.onBeforeUpload(t);return!1===i?Promise.reject(Error("Not starting the upload because onBeforeUpload returned false")):(i&&"object"==typeof i&&(t=i,this.setState({files:t})),Promise.resolve().then(()=>U(this,R)[R].validateMinNumberOfFiles(t)).catch(e=>{throw U(this,z)[z]([e]),e}).then(()=>{if(!U(this,H)[H](t))throw new A(this.i18n("missingRequiredMetaField"))}).catch(e=>{throw e}).then(()=>{let{currentUploads:e}=this.getState(),i=Object.values(e).flatMap(e=>e.fileIDs),r=[];Object.keys(t).forEach(e=>{let t=this.getFile(e);t.progress.uploadStarted||-1!==i.indexOf(e)||r.push(t.id)});let s=U(this,J)[J](r);return U(this,Z)[Z](s)}).catch(e=>{throw this.emit("error",e),this.log(e,"error"),e}))}}function et(e){for(let t of e)t.isRestriction?this.emit("restriction-failed",t.file,t):this.emit("error",t,t.file),this.log(t,"warning");let t=e.filter(e=>e.isUserFacing),i=t.slice(0,4),r=t.slice(4);i.forEach(e=>{let{message:t,details:i=""}=e;this.info({message:t,details:i},"error",this.opts.infoTimeout)}),r.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:r.length})})}function ei(e){let{missingFields:t,error:i}=U(this,R)[R].getMissingRequiredMetaFields(e);return!(t.length>0)||(this.setFileState(e.id,{missingRequiredMetaFields:t}),this.log(i.message),this.emit("restriction-failed",e,i),!1)}function er(e){let t=!0;for(let i of Object.values(e))U(this,D)[D](i)||(t=!1);return t}function es(e){let{allowNewUpload:t}=this.getState();if(!1===t){let t=new A(this.i18n("noMoreFilesAllowed"),{file:e});throw U(this,z)[z]([t]),t}}function eo(e){let t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,i=(0,g.A)(t),r=t.name?t.name:"image"===i.split("/")[0]?`${i.split("/")[0]}.${i.split("/")[1]}`:"noname",s=(0,y.A)(r).extension,o=(0,v.N)(t,this.getID()),n=t.meta||{};n.name=r,n.type=i;let a=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:o,name:r,extension:s||"",meta:{...this.getState().meta,...n},type:i,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote||"",preview:t.preview}}function en(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))}function ea(e){let{files:t}=this.getState(),i={...t},r=[],s=[];for(let n of e)try{var o;let e=U(this,B)[B](n),s=null==(o=t[e.id])?void 0:o.isGhost;s&&(e={...t[e.id],isGhost:!1,data:n.data},this.log(`Replaced the blob in the restored ghost file: ${e.name}, ${e.id}`));let a=this.opts.onBeforeFileAdded(e,i);if(!a&&this.checkIfFileAlreadyExists(e.id))throw new A(this.i18n("noDuplicates",{fileName:e.name}),{file:n});if(!1!==a||s)"object"==typeof a&&null!==a&&(e=a);else throw new A("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:n});U(this,R)[R].validateSingleFile(e),i[e.id]=e,r.push(e)}catch(e){s.push(e)}try{U(this,R)[R].validateAggregateRestrictions(Object.values(t),r)}catch(e){return s.push(e),{nextFilesState:t,validFilesToAdd:[],errors:s}}return{nextFilesState:i,validFilesToAdd:r,errors:s}}function el(){let e=(e,t,i)=>{let r=e.message||"Unknown error";e.details&&(r+=` ${e.details}`),this.setState({error:r}),null!=t&&t.id in this.getState().files&&this.setFileState(t.id,{error:r,response:i})};this.on("error",e),this.on("upload-error",(t,i,r)=>{if(e(i,t,r),"object"==typeof i&&i.message){var s;this.log(i.message,"error");let e=Error(this.i18n("failedToUpload",{file:null!=(s=null==t?void 0:t.name)?s:""}));e.isUserFacing=!0,e.details=i.message,i.details&&(e.details+=` ${i.details}`),U(this,z)[z]([e])}else U(this,z)[z]([i])});let t=null;this.on("upload-stalled",(e,i)=>{let{message:r}=e,s=i.map(e=>e.meta.name).join(", ");t||(this.info({message:r,details:s},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${r} ${s}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let i=e=>{let t=Object.fromEntries(e.filter(e=>{let t=null!=e&&this.getFile(e.id);return t||this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`),t}).map(e=>[e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:e.size}}]));this.patchFilesState(t)};this.on("upload-start",e=>{e.forEach(e=>{this.emit("upload-started",e)}),i(e)}),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(e,t)=>{if(null==e||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);return}let i=this.getFile(e.id).progress;this.setFileState(e.id,{progress:{...i,postprocess:U(this,I)[I].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:i.bytesTotal},response:t,uploadURL:t.uploadURL,isPaused:!1}),null==e.size&&this.setFileState(e.id,{size:t.bytesUploaded||i.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(e,t)=>{if(null==e||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);return}this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,preprocess:t}})}),this.on("preprocess-complete",e=>{if(null==e||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);return}let t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.preprocess,this.setState({files:t})}),this.on("postprocess-progress",(e,t)=>{if(null==e||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);return}this.setFileState(e.id,{progress:{...this.getState().files[e.id].progress,postprocess:t}})}),this.on("postprocess-complete",e=>{if(null==e||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);return}let t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.postprocess,this.setState({files:t})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",e=>{e&&U(this,D)[D](e)}),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",U(this,Y)[Y]),window.addEventListener("offline",U(this,Y)[Y]),setTimeout(U(this,Y)[Y],3e3))}function eu(e,t){void 0===t&&(t={});let{forceAllowNewUpload:i=!1}=t,{allowNewUpload:r,currentUploads:s}=this.getState();if(!r&&!i)throw Error("Cannot create a new upload: already uploading.");let o=(0,a.A)();return this.emit("upload",{id:o,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploadBatches&&!1!==this.opts.allowMultipleUploads,currentUploads:{...s,[o]:{fileIDs:e,step:0,result:{}}}}),o}function eh(e){let{currentUploads:t}=this.getState();return t[e]}function ed(e){let t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})}async function ep(e){let t;let i=()=>{let{currentUploads:t}=this.getState();return t[e]},r=i(),s=[...U(this,N)[N],...U(this,L)[L],...U(this,I)[I]];try{for(let t=r.step||0;t<s.length&&r;t++){let o=s[t];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...r,step:t}}});let{fileIDs:n}=r;await o(n,e),r=i()}}catch(t){throw U(this,Q)[Q](e),t}if(r){r.fileIDs.forEach(e=>{let t=this.getFile(e);t&&t.progress.postprocess&&this.emit("postprocess-complete",t)});let t=r.fileIDs.map(e=>this.getFile(e)),s=t.filter(e=>!e.error),o=t.filter(e=>e.error);this.addResultData(e,{successful:s,failed:o,uploadID:e}),r=i()}return r&&(t=r.result,this.emit("complete",t),U(this,Q)[Q](e)),null==t&&this.log(`Not setting result for an upload that has been removed: ${e}`),t}ee.VERSION="3.13.1";let ec=ee},90342:(e,t,i)=>{var r=i(29200);t.operation=function(e){return new r(t.timeouts(e),{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var i in e)t[i]=e[i];if(t.minTimeout>t.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var r=[],s=0;s<t.retries;s++)r.push(this.createTimeout(s,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(s,t)),r.sort(function(e,t){return e-t}),r},t.createTimeout=function(e,t){var i=Math.round((t.randomize?Math.random()+1:1)*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(i,t.maxTimeout)},t.wrap=function(e,i,r){if(i instanceof Array&&(r=i,i=null),!r)for(var s in r=[],e)"function"==typeof e[s]&&r.push(s);for(var o=0;o<r.length;o++){var n=r[o],a=e[n];e[n]=(function(r){var s=t.operation(i),o=Array.prototype.slice.call(arguments,1),n=o.pop();o.push(function(e){!s.retry(e)&&(e&&(arguments[0]=s.mainError()),n.apply(this,arguments))}),s.attempt(function(){r.apply(e,o)})}).bind(e,a),e[n].options=i}}},90981:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var r=i(66117),s=i(42220),o=i(10244),n=i(65824);function a(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var l=0,u="__private_"+l+++"_updateUI";class h extends n.A{constructor(){super(...arguments),Object.defineProperty(this,u,{writable:!0,value:void 0})}getTargetPlugin(e){let t;return"function"==typeof(null==e?void 0:e.addTarget)?(t=e)instanceof h||console.warn(Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:h}})):"function"==typeof e&&this.uppy.iteratePlugins(i=>{i instanceof e&&(t=i)}),t}mount(e,t){var i,n;let l=t.id,h=(void 0===i&&(i=document),"string"==typeof e)?i.querySelector(e):(0,s.A)(e)?e:null;if(h){let t,i;this.isTargetDOMEl=!0;let s=document.createElement("div");return s.classList.add("uppy-Root"),a(this,u)[u]=(n=e=>{this.uppy.getPlugin(this.id)&&((0,r.XX)(this.render(e),s),this.afterUpdate())},i=null,function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=r,i||(i=Promise.resolve().then(()=>(i=null,n(...t)))),i}),this.uppy.log(`Installing ${l} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(h.innerHTML=""),(0,r.XX)(this.render(this.uppy.getState()),s),this.el=s,h.appendChild(s),s.dir=this.opts.direction||(0,o.A)(s)||"ltr",this.onMount(),this.el}let d=this.getTargetPlugin(e);if(d)return this.uppy.log(`Installing ${l} to ${d.id}`),this.parent=d,this.el=d.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${l}`);let p=`Invalid target option given to ${l}.`;throw"function"==typeof e?p+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":p+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",Error(p)}render(e){throw Error("Extend the render method to add your plugin to a DOM element")}update(e){if(null!=this.el){var t,i;null==(t=(i=a(this,u))[u])||t.call(i,e)}}unmount(){if(this.isTargetDOMEl){var e;null==(e=this.el)||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}}let d=h},93239:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(e=21)=>{let t="",i=e;for(;i--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t}},95596:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var r=i(28187);let s={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function o(e){var t;if(e.type)return e.type;let i=e.name?null==(t=(0,r.A)(e.name).extension)?void 0:t.toLowerCase():null;return i&&i in s?s[i]:"application/octet-stream"}}}]);