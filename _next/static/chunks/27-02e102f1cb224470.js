"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{4837:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(95155),l=n(52596),s=n(47650),a=n(39688),o=n(7132),i=n(59041);let c=e=>{let{title:t,children:n,className:c,width:d=500,closeButtonClasses:u,closeButtonProps:p={},titleWrapperClasses:m,contentWrapperClasses:h,wrapperClasses:f,onClose:x,mobileOnly:g,withAuraBackground:v=!1,fullScreenHeight:y=!1,withHorizontalPadding:j=!1,disablePadding:w=!1,titleClassName:b="text-2xl",auraImage:A="Aura-08.jpg",zIndex:k=o._8,disableOutsideClick:N=!1,renderIcon:_}=e;return(0,s.createPortal)((0,r.jsx)("div",{className:(0,a.QP)((0,l.A)("fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center h-screen overflow-y-auto modal-class","z-[".concat(k,"]"),{"block md:hidden":g,"py-8 px-2":y,"px-4":j}),c),style:{zIndex:k},onClick:()=>{N||x()},children:(0,r.jsxs)("div",{className:(0,a.QP)("relative my-auto ".concat(v?"bg-cover":"bg-tertiary"," text-primary rounded-[32px] w-full ").concat(y?"h-full":""),h),style:{maxWidth:d?"".concat(d,"px"):void 0,...v?{backgroundImage:'url("/auras/'.concat(A,'")')}:{}},onClick:e=>{e.stopPropagation()},children:[(0,r.jsx)("div",{className:"absolute right-4 top-4",children:(0,r.jsx)(i.A,{className:u,onClick:x,...p})}),(0,r.jsxs)("div",{className:"".concat(v?"bg-black/40":""," h-full w-full ").concat(w?"":"p-6"),children:[_?(0,r.jsx)("div",{className:"w-full h-auto flex flex-row justify-center",children:_()}):null,(0,r.jsx)("div",{className:(0,a.QP)("flex justify-between items-center pb-4",m),children:(0,r.jsx)("span",{className:(0,a.QP)("font-serif font-light pt-6",b),children:t})}),(0,r.jsx)("div",{className:f||"overflow-y-auto max-h-[400px] mb-4",children:n})]})]})}),document.body)}},22011:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(95155),l=n(12115),s=n(57147);let a=e=>{let{buttonText:t,checked:n=!1,disabled:a=!1,onChange:o,buttonProps:i={},tooltip:c}=e,[d,u]=(0,l.useState)(!1),p=(0,l.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{...i,ref:p,className:"flex flex-row rounded-md outline-none bg-quaternary p-1 pl-2 items-center",onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},children:[(0,r.jsx)("span",{className:"text-sm font-sans text-white",children:t}),(0,r.jsx)("div",{className:"ml-2",children:(0,r.jsx)(s.A,{small:!0,checked:n,disabled:a,onChange:o})})]}),c&&d&&p.current&&(0,r.jsx)("div",{style:{position:"fixed",left:"".concat(p.current.getBoundingClientRect().left+p.current.offsetWidth/2,"px"),top:"".concat(p.current.getBoundingClientRect().bottom+8,"px"),transform:"translateX(-50%)"},className:"p-2 bg-tertiary text-primary text-sm rounded z-10 text-center w-[220px]",children:c})]})}},29020:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(95155),l=n(63438),s=n(12115),a=n(63808),o=n(7132),i=n(74955),c=n(4837);let d=(0,l.PA)(e=>{let{project:t,isOpen:n,onClose:l,onProjectCreated:d}=e,[u,p]=(0,s.useState)(!1),[m,h]=(0,s.useState)("");if(!n)return null;let f=async()=>{p(!0);try{let e=await t.createProject(m,"");if(e)null==d||d(e),h(""),l();else throw Error("Failed to create project: No project ID returned")}catch(e){console.error("Failed to create project:",e)}finally{p(!1)}};return(0,r.jsxs)(c.A,{title:"Create New Workspace",onClose:()=>{(0,a.Ay)({actionName:"CreateProjectModalClicked",context:{state:"closed"}}),l()},wrapperClasses:"max-h-[240px] mb-4",withHorizontalPadding:!0,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"font-sans mb-4",children:"Enter a name for your new workspace:"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{autoFocus:!0,className:"w-full border bg-transparent border-secondary/20 focus-within:outline-white rounded-md py-3 px-2",placeholder:o.wJ,maxLength:100,value:m,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"===e.key&&((0,a.Ay)({actionName:"CreateWorkspaceButtonClicked",context:{state:"clicked",projectName:m}}),f())}}),(0,r.jsxs)("div",{className:"font-sans absolute bottom-[2px] right-2 text-secondary opacity-50 text-[12px] bg-inherit bg-o-50",children:[null==m?void 0:m.length," / 100"]})]})]}),(0,r.jsx)("div",{className:"w-full flex justify-end",children:(0,r.jsx)(i.Ay,{variant:i.Ak.Primary,onClick:()=>{(0,a.Ay)({actionName:"CreateWorkspaceButtonClicked",context:{state:"clicked",projectName:m}}),f()},children:u?"Creating...":"Create Workspace"})})]})})},35162:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(94212);let l=e=>new Promise((t,n)=>{r.A.decodeAudioData(e,t,n)})},41256:(e,t,n)=>{n.d(t,{A:()=>s});let r=[],l=[],s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={cursor:e};return t?(r.push(n),document.body.style.cursor=e,()=>{(r=r.filter(e=>e!==n)).length>0||(l.length>0?document.body.style.cursor=l[l.length-1].cursor:document.body.style.cursor="")}):(l.push(n),0===r.length&&(document.body.style.cursor=e),()=>{0===(l=l.filter(e=>e!==n)).length&&0===r.length&&(document.body.style.cursor="")})}},59041:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(95155),l=n(50649),s=n(74955);let a=e=>(0,r.jsx)(s.Ay,{size:s.Mp.Medium,shape:s.aH.Pill,variant:s.Ak.Standard,"aria-label":"Close",icon:l.USm,...e})},66121:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(61932);let l=async(e,t,n,r,l,s)=>{let c=l/8,d=r*c,u=new ArrayBuffer(44+e.length*c),p=new DataView(u);return i(p,0,"RIFF"),p.setUint32(4,36+e.length*c,!0),i(p,8,"WAVE"),i(p,12,"fmt "),p.setUint32(16,16,!0),p.setUint16(20,t,!0),p.setUint16(22,r,!0),p.setUint32(24,n,!0),p.setUint32(28,n*d,!0),p.setUint16(32,d,!0),p.setUint16(34,l,!0),i(p,36,"data"),p.setUint32(40,e.length*c,!0),1===t?await o(p,44,e,s):await a(p,44,e,s),u},s=(e,t)=>{let n=e.length+t.length,r=new Float32Array(n),l=0,s=0;for(;l<n;)r[l++]=e[s],r[l++]=t[s],s++;return r},a=async(e,t,n,l)=>{for(let s=0;s<n.length;s++,t+=4)e.setFloat32(t,n[s],!0),s%1024==0&&l&&(l(s/n.length),await (0,r.yy)(0));l&&l(1)},o=async(e,t,n,l)=>{for(let s=0;s<n.length;s++,t+=2){let a=Math.max(-1,Math.min(1,n[s]));e.setInt16(t,a<0?32768*a:32767*a,!0),s%1024==0&&l&&(l(s/n.length),await (0,r.yy)(0))}l&&l(1)},i=(e,t,n)=>{for(let r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},c=async function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=e.numberOfChannels,o=e.sampleRate,i=n.float32?3:1;return l(2===a?s(e.getChannelData(0),e.getChannelData(1)):e.getChannelData(0),i,o,a,3===i?32:16,r)}},66358:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(12115);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=(0,r.useRef)(null);(0,r.useEffect)(()=>(n.current&&clearTimeout(n.current),()=>{n.current=setTimeout(()=>{e()},t)}),[e,t])}},81182:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(14472),l=n(3445),s=n(85172),a=n(12115),o=n(88008),i=n(99428),c=n(77119);let d=()=>{let{session:e,genForm:t}=(0,c.gy)();return(0,a.useCallback)(async(n,a,d,u)=>await new Promise((p,m)=>{let h=null,f=new s.A({restrictions:{maxNumberOfFiles:1,maxFileSize:0x6400000}}).use(r.A).use(l.A,{getUploadParameters:async t=>{let{data:n}=await e.apiClient.POST("/api/uploads/audio/",{body:{extension:t.extension,is_stem_mix:u}});if(!n)throw Error("Failed to fetch upload parameters");return h=n.id,{url:null==n?void 0:n.url,fields:n.fields}}}),x=async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,{data:r}=await e.apiClient.GET("/api/uploads/audio/{upload_id}/",{params:{path:{upload_id:h}}});if((null==r?void 0:r.status)==="error"){let n=null==r?void 0:r.error_message;(0,c.oR)({title:null==r?void 0:r.error_message,description:"Please upload a different audio file.",status:"error",duration:4e3,isClosable:!0}),o.LS.logAudioCreationEvent(t.isMobile,i.a2.uploadSong,t,e,{uploadId:h,errorMessage:n,isUploaded:!1,uploadType:a});return}(null==r?void 0:r.status)!=="complete"?n>0?setTimeout(()=>x(n-1),4e3):m("Audio processing timed out. Please try again."):(o.LS.logAudioCreationEvent(t.isMobile,i.a2.uploadSong,t,e,{uploadId:h,isUploaded:!0,uploadType:a}),p({uploadId:h,title:r.title||void 0,imageUrl:r.image_url||void 0,hasVocal:r.has_vocal||!1}))};f.on("complete",async()=>{if(!h)return;let{data:t}=await e.apiClient.POST("/api/uploads/audio/{upload_id}/upload-finish/",{params:{path:{upload_id:h}},body:{upload_type:a,upload_filename:d||n.name}});t&&x()}),f.addFile({name:d||n.name,type:n.type,data:n}),f.upload()}),[])}},84899:(e,t,n)=>{n.d(t,{A:()=>j});var r=n(95155),l=n(52596),s=n(63438),a=n(35695),o=n(12115),i=n(3096),c=n(77119),d=n(50649),u=n(7132),p=n(88008),m=n(99428),h=n(61932),f=n(10573),x=n(74955),g=n(59041),v=n(29020),y=n(97942);let j=(0,s.PA)(e=>{let{editMode:t=!1,flush:n=!1}=e,{project:s,session:j}=(0,c.gy)(),w=(0,a.usePathname)(),[b,A]=(0,o.useState)(!1),[k,N]=(0,o.useState)(!1),[_,C]=(0,o.useState)(null),[P,S]=(0,o.useState)(!1),E=(0,o.useRef)(null),I=(0,o.useRef)(null),[M,U]=(0,o.useState)(1),[F,R]=(0,o.useState)(!0),[T,L]=(0,o.useState)([]),W=(0,o.useRef)(null);(0,o.useEffect)(()=>{B(!0)},[]),(0,o.useEffect)(()=>{b&&(U(1),R(!0),B(!0))},[b]),(0,o.useEffect)(()=>{M>1&&B(!1)},[M]);let{ref:z}=(0,i.Wx)({threshold:0,onChange:async e=>{e&&F&&!P&&U(e=>e+1)}}),B=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];S(!0);try{let{projects:t,numTotalResults:n}=await s.fetchProjectsList(M);if(0===t.length)R(!1);else{let r=W.current,l=null==r?void 0:r.scrollTop,s=e?t:[...T,...t];L(s),R(s.length<n),l&&r&&requestAnimationFrame(()=>{r.scrollTop=l})}}catch(e){console.error("Error fetching projects:",e)}finally{S(!1)}},D=e=>{if(s.clearFilters(),t){let t=new URL(window.location.href);t.searchParams.set("wid",e.id),window.history.replaceState(null,"",t.toString())}else window.history.pushState(null,"","/create?wid=".concat(e.id,"&page=1"));s.setUserSelectedProjectId(e.id,e.name),C(e),A(!1),p.LS.segmentTrack(m.f7.webPageEvent,{userId:null==j?void 0:j.userId,element:"project_selected",secondaryElement:"project_dropdown",entityId:null==e?void 0:e.id,eventType:"click",pageUrl:w})},H=e=>{e.stopPropagation(),s.currentProjectId!==u.Sk&&(t?s.silentlySyncURLWithProjectId(u.Sk):window.history.pushState(null,"","/create?wid=".concat(u.Sk)),s.setUserSelectedProjectId(u.Sk,u.uX),C(null),p.LS.segmentTrack(m.f7.webPageEvent,{userId:null==j?void 0:j.userId,element:"project_cleared",secondaryElement:"project_dropdown",pageUrl:w}))};return(0,o.useEffect)(()=>{let e=e=>{E.current&&!E.current.contains(e.target)&&A(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,o.useEffect)(()=>{if(s.currentProjectId){let e=s.projectsById[s.currentProjectId];e&&C({clip_count:0,last_updated_clip:"",...e,project_clips:[],is_owned:!0,is_trashed:!1,current_page:1,image_url:null})}else C(null)},[s.currentProjectId,s.projectsById,j.flags]),(0,r.jsxs)("div",{className:"".concat(n?"md:mx-0":"md:mx-2"," relative font-sans pb-2"),ref:E,children:[(0,r.jsx)("div",{className:"font-sans py-3 text-[15px]",children:"Workspace"}),(0,r.jsxs)("div",{className:"cursor-pointer items-center justify-between bg-tertiary px-3 rounded-md border border-quaternary h-[48px] flex text-sm ".concat(_?"":"hover:bg-secondary/20"),onClick:()=>{b?p.LS.segmentTrack(m.f7.webPageEvent,{userId:null==j?void 0:j.userId,element:"project_dropdown",eventType:"close",pageUrl:w}):p.LS.segmentTrack(m.f7.webPageEvent,{userId:null==j?void 0:j.userId,element:"project_dropdown",eventType:"open",pageUrl:w}),A(!b)},children:[(0,r.jsx)("div",{className:"flex items-center",children:_?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"relative w-[32px] h-[24px] mr-2",children:(0,r.jsx)("div",{className:"w-[32px] h-[24px] rounded-[4px] overflow-hidden",children:(0,r.jsx)(f.A,{imageSize:u.M_,className:"object-cover w-full h-full",src:s.getAuraImageForProject(_.id),alt:"Workspace picture for ".concat(_.name)})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"font-sans font-medium text-sm",children:(0,h.P_)(_)})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"relative w-[32px] h-[24px] mr-2",children:(0,r.jsx)("div",{className:"w-[32px] h-[24px] rounded-[4px] overflow-hidden",children:(0,r.jsx)(f.A,{imageSize:u.M_,className:"object-cover w-full h-full",src:s.getAuraImageForProject(u.Sk),alt:"Workspace picture for ".concat(u.uX)})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"font-sans font-medium text-sm",children:u.uX})})]})}),_&&_.id!==u.Sk?(0,r.jsx)(g.A,{onClick:e=>H(e),size:x.Mp.Medium}):(0,r.jsx)("button",{children:b?(0,r.jsx)(d.SwV,{className:"w-4 h-4 fill-primary ml-2 z-[10000]"}):(0,r.jsx)(d.bDP,{className:"w-4 h-4 fill-primary ml-2 z-[10000]"})})]}),(0,r.jsx)("div",{ref:I,className:(0,l.A)("overflow-hidden transition-all duration-300 ease-in-out mt-2 h-auto flex",{"max-h-0":!b,"max-h-[400px]":b}),children:(0,r.jsxs)("div",{className:"bg-tertiary text-primary rounded-lg w-full border border-quaternary shadow-xl flex flex-col flex-0",children:[(0,r.jsx)("div",{ref:W,className:"flex-0 overflow-y-auto p-4 custom-scrollbar-transparent min-h-0 w-full",children:P&&0===T.length?(0,r.jsx)("div",{className:"flex justify-center items-center h-20",children:(0,r.jsx)(y.A,{})}):(e=>(0,r.jsxs)(r.Fragment,{children:[0===e.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"No Workspaces"}),(0,r.jsx)("p",{className:"text-sm",children:"Workspaces help you organize your songs into collections."})]}):e.map(e=>(0,r.jsx)("div",{className:"group flex items-center justify-between p-2 hover:bg-secondary/20 rounded-lg cursor-pointer",onClick:()=>D(e),children:(0,r.jsxs)("div",{className:"flex items-center gap-[8px] overflow-hidden",children:[(0,r.jsx)("div",{className:"relative w-[32px] h-[24px] flex-shrink-0",children:(0,r.jsx)("div",{className:"w-[32px] h-[24px] rounded-[4px] overflow-hidden",children:(0,r.jsx)(f.A,{imageSize:u.M_,src:s.getAuraImageForProject(e.id),alt:"Project image for ".concat(e.name),className:"w-full h-full object-cover"})})}),(0,r.jsx)("div",{className:"font-sans font-medium text-sm min-w-0 flex-1",children:(0,r.jsxs)("div",{className:"truncate",children:[(0,h.P_)(e),(0,r.jsxs)("span",{className:"text-[#8F8B8A]",children:[" ","- ",(null==e?void 0:e.clip_count)||0," clip",(null==e?void 0:e.clip_count)&&(null==e?void 0:e.clip_count)>1||(null==e?void 0:e.clip_count)===0?"s":""]})]})})]})},e.id)),F&&(0,r.jsx)("div",{className:"flex justify-center items-center h-20",ref:z,children:(0,r.jsx)(y.A,{})})]}))(T)}),(0,r.jsx)("div",{className:"flex-1 justify-center bottom-0 bg-tertiary mt-auto h-auto p-4",children:(0,r.jsx)("div",{className:"text-primary font-sans text-sm cursor-pointer border border-primary rounded-full py-2 px-4 hover:bg-secondary/20",onClick:()=>{N(!0),A(!1),p.LS.segmentTrack(m.f7.webPageEvent,{userId:null==j?void 0:j.userId,element:"create_project_modal",secondaryElement:"project_dropdown",eventType:"click",pageUrl:w})},children:"Create a Workspace"})})]})}),(0,r.jsx)(v.A,{project:s,isOpen:k,onClose:()=>{N(!1)},onProjectCreated:e=>{D(e)}})]})})},94212:(e,t,n)=>{let r;n.d(t,{A:()=>l}),n(12115),(r=new(window.AudioContext||window.webkitAudioContext)({latencyHint:0})).suspend(),window.addEventListener("mousedown",()=>{"suspended"===r.state&&r.resume()}),window.addEventListener("keydown",()=>{"suspended"===r.state&&r.resume()});let l=r},99304:(e,t,n)=>{n.d(t,{A:()=>U});var r=n(15933),l=n(95155),s=n(61715),a=n(14087),o=n(12115),i=n(94575),c=n(41256);function d(){let e=(0,r._)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: stretch;\n"]);return d=function(){return e},e}function u(){let e=(0,r._)(["\n  height: 8px;\n  width: 100%;\n  position: relative;\n  background-color: rgba(255, 255, 255, 0.05);\n  border-radius: 4px;\n"]);return u=function(){return e},e}function p(){let e=(0,r._)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  border-radius: 4px;\n  background-color: rgba(255, 255, 255, 0.17);\n"]);return p=function(){return e},e}function m(){let e=(0,r._)(["\n  position: absolute;\n  width: 32px;\n  height: 32px;\n  border-radius: 32px;\n  top: -12px;\n  border: 1px solid rgba(255, 255, 255, 1);\n  &:hover,\n  &:active {\n    background-color: rgba(255, 255, 255, 1);\n  }\n  z-index: 2;\n"]);return m=function(){return e},e}function h(){let e=(0,r._)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: grid;\n  grid-template-rows: 1fr 1fr;\n  gap: 1px;\n  overflow: hidden;\n  border-radius: inherit;\n"]);return h=function(){return e},e}function f(){let e=(0,r._)(["\n  position: relative;\n"]);return f=function(){return e},e}function x(){let e=(0,r._)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: -1px;\n"]);return x=function(){return e},e}function g(){let e=(0,r._)(["\n  background-color: #ccc;\n"]);return g=function(){return e},e}function v(){let e=(0,r._)(["\n  border-right: 1px solid white;\n"]);return v=function(){return e},e}function y(){let e=(0,r._)(["\n  background-color: #999;\n"]);return y=function(){return e},e}let j=s.A.div(d()),w=s.A.div(u()),b=s.A.div(p()),A=s.A.div(m()),k=(e,t)=>({width:100*Math.abs(e-t)+"%",left:100*Math.min(e,t)+"%"}),N=s.A.div(h()),_=s.A.div(f()),C=s.A.div(x()),P=(0,s.A)(C)(g()),S=(0,s.A)(C)(v()),E=(0,s.A)(C)(y()),I=e=>e>-30?1- -((e-12)/60):e>=-72?Math.max(.30000000000000004-.30000000000000004*Math.pow((-30-e)/42,.75),0):0,M=e=>{let{getMeterValue:t}=e,n=(0,o.useRef)(null),r=(0,o.useRef)(null),s=(0,o.useRef)(null),i=(0,o.useRef)(null),c=(0,o.useRef)(null),d=(0,o.useRef)(null);return(0,a.N)((0,o.useCallback)(()=>{let e=t(0),l=t(1);n.current&&(n.current.style.width="".concat(100*I(e.ppm),"%")),r.current&&(r.current.style.width="".concat(100*I(l.ppm),"%")),s.current&&(s.current.style.width="".concat(100*I(e.ppmHold),"%")),i.current&&(i.current.style.width="".concat(100*I(l.ppmHold),"%")),c.current&&(c.current.style.width="".concat(100*I(e.vu),"%")),d.current&&(d.current.style.width="".concat(100*I(l.vu),"%"))},[t])),(0,l.jsxs)(N,{children:[(0,l.jsxs)(_,{children:[(0,l.jsx)(P,{ref:n}),(0,l.jsx)(E,{ref:c}),(0,l.jsx)(S,{ref:s})]}),(0,l.jsxs)(_,{children:[(0,l.jsx)(P,{ref:r}),(0,l.jsx)(E,{ref:d}),(0,l.jsx)(S,{ref:i})]})]})};function U(e){let{value:t,anchorValue:n=0,defaultValue:r,onChange:s,onCommit:a,dotSize:d=32,getMeterValue:u}=e,p=(0,o.useRef)(null),m=(0,o.useRef)(null),h=(0,o.useRef)(null),f=(0,i.A)((0,o.useCallback)(e=>{var t,r;let{clientX:l}=e,o=null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect();if(!o)return;let i=Math.max(0,Math.min(1,(l-o.left)/o.width)),u=(null===(r=p.current)||void 0===r?void 0:r.clientWidth)||150,f=(0,c.A)("ew-resize");return null==s||s(i),{onMouseMove:e=>{let{deltaXFromStart:t}=e,r=Math.min(1,Math.max(0,i+t/u));if(null==s||s(r),!m.current)return;let{width:l,left:a}=k(r,n);m.current.style.width=l,m.current.style.left=a,r<n?(h.current.style.right="",h.current.style.left="-".concat(d/2,"px")):(h.current.style.left="",h.current.style.right="-".concat(d/2,"px"))},onMouseUp:e=>{let{deltaXFromStart:t}=e;f(),null==a||a(Math.min(1,Math.max(0,i+t/u)))}}},[t,a,s,d]));return(0,l.jsx)(j,{ref:f,onDoubleClick:()=>{void 0!==r&&(null==s||s(r),null==a||a(r))},children:(0,l.jsxs)(w,{ref:p,children:[(0,l.jsx)(b,{style:k(t,n),ref:m,children:(0,l.jsx)(A,{ref:h,style:{width:d,height:d,top:-(d-8)/2,...t<n?{left:-d/2}:{right:-d/2}}})}),u&&(0,l.jsx)(M,{getMeterValue:u})]})})}}}]);